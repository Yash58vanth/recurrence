import{j as a,r as qt}from"./index-DlC1yEB1.js";import{r as e}from"./index-D5jfS-9e.js";import{n as bt,a as xe,o as xo,q as tn,r as Be,s as xs,t as qr,v as Gr,w as Ao,x as In,y as Dt,z as Zr,E as Oo,G as Lo,H as xr,I as F,c as Et,S as Kt,u as $e,p as kt,J as As,K as Ar,M as Os,N as ut,L as Ls,Q as Yn,A as en,T as Qr,X as kn,h as Jr,Y as Io,i as ko,Z as It,e as es,g as _o,_ as Po,B as Qe,V as Ge,C as vt,$ as Kn,a0 as Is,a1 as Mo,f as ft,a2 as Ho,a3 as pn,a4 as jo,a5 as $o,a6 as it,a7 as Un,a8 as ks,a9 as _s,aa as tt,ab as qe,ac as Ps,m as Vo,ad as nt,ae as Wo,af as Ze,ag as Fo,ah as gr,ai as Bo,b as or,aj as ts,ak as Cn,al as Uo,D as zo,k as Yo,j as ns,R as Ko,am as _n,an as rs,ao as sn,ap as Xo,aq as qo,ar as Go}from"./recurrence-editor-BX5e3chV.js";const Or={height:"auto",width:"auto",defaultSelectedDate:new Date,defaultView:"Week",eventSettings:{dataSource:[],fields:{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException",guid:"Guid"},spannedEventPlacement:"AllDayRow",enableIndicator:!1,allowAdding:!0,allowDeleting:!0,allowEditing:!0,ignoreWhitespace:!1},timeScale:{enable:!0,interval:60,slotCount:2},workHours:{highlight:!0,start:"09:00",end:"18:00"},startHour:"00:00",endHour:"24:00",showWeekend:!0,firstDayOfWeek:0,workDays:[1,2,3,4,5],showTimeIndicator:!0,showWeekNumber:!1,eventOverlap:!0,keyboardNavigation:!0,showQuickInfoPopup:!0,header:!0,rowAutoHeight:!1,readOnly:!1,eventDrag:!0,eventResize:!0,enableRecurrenceValidation:!0,weekRule:"FirstDay"},Lr=e.createContext(Or),We=()=>{const o=e.useContext(Lr);if(o===void 0)throw new Error("useSchedulerPropsContext must be used within a Scheduler");return o};Lr.displayName="SchedulerPropsContext";const Ir=e.createContext(void 0),gt=()=>{const o=e.useContext(Ir);if(o===void 0)throw new Error("useSchedulerRenderDatesContext must be used within a Scheduler");return o};Ir.displayName="SchedulerRenderDatesContext";const kr=e.createContext(void 0),Gt=()=>{const o=e.useContext(kr);if(o===void 0)throw new Error("useSchedulerEventsContext must be used within a Scheduler");return o};kr.displayName="SchedulerEventsContext";var ze;(function(o){o.Add="Add",o.Edit="Edit",o.EditSeries="EditSeries",o.EditCurrentSeries="EditCurrentSeries",o.EditEntireSeries="EditEntireSeries",o.EditOccurrence="EditOccurrence",o.Delete="Delete",o.DeleteOccurrence="DeleteOccurrence",o.DeleteSeries="DeleteSeries",o.EditFollowingEvents="EditFollowingEvents",o.DeleteFollowingEvents="DeleteFollowingEvents"})(ze||(ze={}));var At;(function(o){o.Left="left",o.Right="right",o.Up="up",o.Down="down"})(At||(At={}));var rt;(function(o){o.Occurrence="occurrence",o.Series="series",o.Following="following",o.Yes="yes",o.No="no"})(rt||(rt={}));var ht;(function(o){o.RecurrenceEdit="recurrenceEdit",o.RecurrenceDelete="recurrenceDelete",o.SeriesChange="seriesChange"})(ht||(ht={}));var Pt;(function(o){o.OccurrenceAlert="occurenceAlert",o.SameDayAlert="sameDayAlert"})(Pt||(Pt={}));function ss(o){return o!=null&&typeof o=="object"&&!Array.isArray(o)&&o.constructor===Object}function Ms(o,r){const s={...o};for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const n=r[t],i=s[t];if(typeof n>"u")continue;ss(n)&&ss(i)?s[t]=Ms(i,n):s[t]=n}return s}function Hs(o,r){return Ms(o,r)}class pt{static getViewsInfo(r,s){const t=[],n=new Set;return e.Children.forEach(r,i=>{if(e.isValidElement(i)){const l=i.type,u=i.props||{};let f=null;switch(l.displayName){case"DayView":f="Day";break;case"WeekView":f="Week";break;case"WorkWeekView":f="WorkWeek";break;case"MonthView":f="Month";break}if(f){const d=u.name||u.displayName||f;n.has(d)||(n.add(d),t.push({viewType:f,name:d,displayName:u.displayName||s(f.toLowerCase()),interval:u.interval||1,component:i}))}}}),t}static findViewByNameOrType(r,s){const t=r.find(i=>i.name===s);if(t)return t;const n=s;return r.find(i=>i.viewType===n)||null}static getDefaultView(r){return r.length>0?r[0]:void 0}static isViewAvailable(r,s){const t=r==null?void 0:r();return Array.isArray(t)&&t.some(n=>n.viewType===s)}static isDayViewAvailable(r){return pt.isViewAvailable(r,"Day")}}const Ve=(()=>{function o(i){return i?"__eventList"in i?i.__eventList.events||[]:(i.__eventList={},i.__eventList.events=[]):null}function r(i,l,u,f,d){if(!i)return null;const E=o(i);let m=d?xo(u,d):u;f&&(m=m.bind(f));const g=l.split(" ");for(let h=0;h<g.length;h++){E.push({name:g[parseInt(h.toString(),10)],listener:u,debounce:m});const c=xe.isIE?null:{passive:!1};i.addEventListener(g[parseInt(h.toString(),10)],m,c)}return m}function s(i,l,u){if(!i)return null;const f=o(i),d=l.split(" ");for(let E=0;E<d.length;E++){let m=-1,g=null;f&&f.length!==0&&f.some((h,c)=>h.name===d[parseInt(E.toString(),10)]&&h.listener===u?(m=c,g=h.debounce||null,!0):!1),m!==-1&&f.splice(m,1),g&&i.removeEventListener(d[parseInt(E.toString(),10)],g)}}function t(i){if(!i)return null;const l=o(i),u=bt([],void 0,l);for(let f=0;f<u.length;f++){const d=u[parseInt(f.toString(),10)];i.removeEventListener(d.name,d.debounce),l.shift()}}function n(i,l,u){if(!i)return null;const f=o(i);for(const d of f)d.name===l&&d.debounce(u)}return{add:r,clearEvents:t,remove:s,trigger:n}})(),Zo=()=>{let o=[];const r={};function s(d,E,m,g){if(Be(E))return;const h=m||{};f(d)?r[`${d}`]=[{handler:E,context:h,id:g}]:g&&!o.includes(g)?(o.push(g),r[`${d}`].push({handler:E,context:h,id:g})):r[`${d}`].some(c=>c.handler===E)||r[`${d}`].push({handler:E,context:h})}function t(d,E,m){if(f(d))return;const g=tn(d,r);if(E)for(let h=0;h<g.length;h++){const c=g[parseInt(h.toString(),10)];if(m&&c.id===m){g.splice(h,1),o=o.filter(v=>v!==m);break}else if(E===c.handler){g.splice(h,1);break}}else delete r[`${d}`]}function n(d,E,m,g){if(f(d)){m&&m(E);return}E&&(E={...E,name:d});const h=tn(d,r).slice(0);for(const c of h)try{c.handler(E)}catch(v){g&&g(v)}m&&m(E)}function i(d){try{JSON.parse(d)}catch{return!1}return!0}function l(){Object.keys(r).forEach(d=>{delete r[`${d}`]}),o=[]}function u(){const d=r.notifyExternalChange;if(d){for(let E=0;E<d.length;E++){const m=d[parseInt(E.toString(),10)],g=m.context;g&&g.detectFunction&&g.randomId&&g.isReactMock&&(t("notifyExternalChange",m.handler,g.randomId),E--)}r.notifyExternalChange.length||delete r.notifyExternalChange}}function f(d){return!r[`${d}`]||r[`${d}`].length===0}return{isJson:i,on:s,off:t,notify:n,destroy:l,ranArray:o,boundedEvents:r,offIntlEvents:u}},Qo=new RegExp("]");function Jo(o,r){const t={isDestroyed:!1,isProtectedOnChange:!0,modelObserver:Zo(),...o};return t.element=e.useRef(null),t.addEventListener=(n,i)=>{t.modelObserver.on(n,i)},t.removeEventListener=(n,i)=>{t.modelObserver.off(n,i)},t.trigger=(n,i,l,u)=>{if(t.isDestroyed!==!0){const f=t.isProtectedOnChange;t.isProtectedOnChange=!1;const d=t.modelObserver.notify(n,i,l,u);if(Qo.test(n)){const E=tn(n,t);E&&E.call(t,i),l&&l.call(t,i)}return t.isProtectedOnChange=f,d}},t.destroy=()=>{t.modelObserver.destroy(),t.isDestroyed=!0},e.useLayoutEffect(()=>{t.isDestroyed=!1},[]),t}let Pn,Mn,os,is;function ls(o,r,s,t,n){let i,l,u=0,f=0,d;if(typeof o==="string"?d=xs(o):d=o,d){const m=d.getBoundingClientRect();i=d.scrollWidth?d.scrollWidth:m.right-m.left,l=d.scrollHeight?o&&!Be(r)&&r.classList.contains("sf-treeview")?d.clientHeight:d.scrollHeight:m.bottom-m.top;const g=["Top","Left","Bottom","Right"],h=getComputedStyle(d);for(let c=0;c<g.length;c++){const v=g[parseInt(c.toString(),10)],D=h["border"+v+"Width"],O=h["padding"+v],_=v.toLowerCase();s[`${_}`]=isNaN(parseFloat(D))?0:parseFloat(D),t[`${_}`]=isNaN(parseFloat(O))?0:parseFloat(O)}o&&!Be(r)&&r.classList.contains("sf-treeview")?u=m.top+document.scrollingElement.scrollTop:u=m.top,f=m.left,n.left=f+s.left+t.left,n.top=d.offsetTop+s.top+t.top,n.right=f+i-(s.right+t.right),n.bottom=u+l-(s.bottom+t.bottom)}}function cs(o){const r=document.body,s=document.documentElement;return Math.max(r["scroll"+o],s["scroll"+o],r["offset"+o],s["offset"+o],s["client"+o])}function ir(o){for(Mn=o.offsetTop,Pn=o.offsetLeft,os=o.offsetWidth,is=o.offsetHeight;o.offsetParent;)o=o.offsetParent,Mn+=o.offsetTop,Pn+=o.offsetLeft;return Mn>=window.pageYOffset&&Pn>=window.pageXOffset&&Mn+is<=window.pageYOffset+window.innerHeight&&Pn+os<=window.pageXOffset+window.innerWidth}function hn(o){return o.type.indexOf("touch")>-1?o.changedTouches[0]:o}function lr(o){if(Be(o))return{left:0,top:0};const r=o.getBoundingClientRect(),s=getComputedStyle(o);return{left:r.left+window.pageXOffset-parseInt(s.marginLeft,10),top:r.top+window.pageYOffset-parseInt(s.marginTop,10)}}function as(o){const r=o.clientX>0?o.clientX:0,s=o.clientY>0?o.clientY:0;return document.elementsFromPoint(r,s)}function us(o,r){const s=r?[...o].reverse():o;for(const i of s){const u=window.getComputedStyle(i).overflowY;if((u==="auto"||u==="scroll")&&i.scrollHeight>i.clientHeight)return i}const t=document.scrollingElement;return window.getComputedStyle(t).overflowY==="visible"?(t.style.overflow="auto",t):null}const ei=e.createContext(void 0),ti=()=>{const o=e.useContext(ei);if(o)return o},ni={left:0,top:0,bottom:0,right:0},cr={isDragged:!1};function ri(o){return{left:0,top:0,...o}}function nn(o,r){const s=ti(),t={cursorAt:ri({}),clone:!1,dragArea:null,isDragScroll:!1,isReplaceDragEle:!1,isPreventSelect:!0,distance:1,handle:"",abort:"",helper:null,scope:"default",dragTarget:"",dragDirection:null,queryPositionInfo:null,enableTailMode:!1,skipDistanceCheck:!1,preventDefault:!0,enableAutoScroll:!1,enableTapHold:!1,tapHoldThreshold:750,enableScrollHandler:!1,element:o,...r},n=e.useRef(t);let i,l,u,f,d,E,m,g=nn.getDefaultPosition(),h=nn.getDefaultPosition();const c=nn.getDefaultPosition();let v,D=0,O=0,_=0,T=!1,A=null,R,B,k=!1,b=0,S,L,C,G,P=0,X=0,se=0,fe=0;const pe={};function K(x){let V;!Be(n.current.handle)&&n.current.handle!==""&&(V=xs(n.current.handle,o.current));const z=n.current.enableTapHold&&xe.isDevice&&xe.isTouch?M:q;x?Ve.remove(V||o.current,xe.isSafari()?"touchstart":xe.touchStartEvent,z):Ve.add(V||o.current,xe.isSafari()?"touchstart":xe.touchStartEvent,z)}function M(x){const V=x.currentTarget;A=setTimeout(()=>{k=!0,N(),q(x,V)},n.current.tapHoldThreshold),Ve.add(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,N,this),Ve.add(document,xe.isSafari()?"touchend":xe.touchEndEvent,N,this)}function y(x){xr(x)?(Ve.add(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,U,this),Ve.add(document,xe.isSafari()?"touchend":xe.touchEndEvent,ne,this),w(!1,o.current,x)):(K(),document.body.classList.remove("sf-prevent-select"))}function N(){clearTimeout(A),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,N),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,N)}function I(){P=0,X=0}function q(x,V){var te;if(o.current=qr(o),B=x.target,re())return;if(re(!0),k=!1,i=x.currentTarget||V,T=!1,n.current.abort){let he=n.current.abort;typeof he=="string"&&(he=[he]);for(let Ee=0;Ee<he.length;Ee++)if(!Be(Dt(x.target,he[`${Ee}`]))){re()&&re(!0);return}}n.current.preventDefault&&!In(x.changedTouches)&&x.type!=="touchstart"&&x.preventDefault(),(te=o==null?void 0:o.current)==null||te.setAttribute("aria-grabbed","true");const z=hn(x);if(l={x:z.pageX,y:z.pageY},!n.current.clone){const he=o.current.getBoundingClientRect();I(),u=z.pageX-(he.left+P),f=z.pageY-(he.top+X)}k?H(x):(Ve.add(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,H,this),Ve.add(document,xe.isSafari()?"touchend":xe.touchEndEvent,t.intDestroy,this)),K(!0),x.type!=="touchstart"&&n.current.isPreventSelect&&document.body.classList.add("sf-prevent-select"),k=!1,Ve.trigger(document.documentElement,xe.isSafari()?"touchstart":xe.touchStartEvent,x)}function H(x){N(),document.scrollingElement&&(se=document.scrollingElement.scrollLeft,fe=document.scrollingElement.scrollTop);const V=!In(x.changedTouches);if(V&&x.changedTouches.length!==1)return;const z=hn(x);let te;const he=getComputedStyle(o.current);d={left:parseInt(he.marginLeft,10),top:parseInt(he.marginTop,10),right:parseInt(he.marginRight,10),bottom:parseInt(he.marginBottom,10)};let Ee=o.current;if(n.current.clone&&n.current.dragTarget){const Ce=Dt(x.target,n.current.dragTarget);Be(Ce)||(Ee=Ce)}n.current.isReplaceDragEle&&(Ee=ce(x.target,Ee)),E=lr(Ee),m=ve(x,n.current.isDragScroll);const be=l.x-z.pageX,ke=l.y-z.pageY;if(Math.sqrt(be*be+ke*ke)>=n.current.distance||k){const Ce=ue(x);if(!Ce)return;V&&x.preventDefault();const $=L=Ce;if(G=lr($.offsetParent),n.current&&n.current.onDragStart){const Ae=Se(x),Re={event:x,element:Ee,target:Ae,bindEvents:null,dragElement:$};if(n.current.onDragStart(Re),Re.cancel){t.intDestroy();return}}n.current.dragArea?ls(n.current.dragArea,L,h,c,g):(g={left:0,right:0,bottom:0,top:0},h={top:0,left:0}),te={left:m.left-G.left,top:m.top-G.top},n.current.clone&&!n.current.enableTailMode&&(D=m.left-E.left,b=m.top-E.top),I();const W=getComputedStyle(Ee),ae=parseFloat(W.marginTop);n.current.clone&&ae!==0&&(te.top+=ae),n.current.enableScrollHandler&&!n.current.clone&&(te.top-=X,te.left-=P);const ge=Ne({top:`${te.top-b}px`,left:`${te.left-D}px`});n.current.dragArea&&typeof n.current.dragArea!="string"&&n.current.dragArea.classList.contains("sf-kanban-content")&&n.current.dragArea.style.position==="relative"&&(te.top+=n.current.dragArea.scrollTop),R={top:te.top,left:te.left},Zr($,ee({position:"absolute",left:ge.left,top:ge.top})),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,H),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,t.intDestroy),y($)}}function U(x){var Ke;if(!In(x.changedTouches)&&x.changedTouches.length!==1)return;n.current.clone&&x.changedTouches&&xe.isDevice&&xe.isTouch&&x.preventDefault();let V,z;m=ve(x,n.current.isDragScroll);const te=cs("Height");te<m.top&&(m.top=te);const he=cs("Width");if(he<m.left&&(m.left=he),n.current&&n.current.onDrag){const He=Se(x);n.current.onDrag({event:x,element:o.current,target:He})}const Ee=Z(x);if(Ee.target&&Ee.instance){let He=!0;C&&(C.instance!==Ee.instance?J(x,Ee):He=!1),He&&(Ee.instance.dragData[n.current.scope]=pe[n.current.scope],Ee.instance.intOver(x,Ee.target),C=Ee)}else C&&J(x,Ee);const be=(Ke=pe==null?void 0:pe[n.current.scope])==null?void 0:Ke.helper;if(!be)return;G=lr(be.offsetParent);const ke=G.left,de=G.top,Ce=hn(x),$=Ce.pageX,W=Ce.pageY,ae=m.left-D,ge=m.top-b,Ae=getComputedStyle(be);if(n.current.dragArea){if(n.current.enableAutoScroll&&ls(n.current.dragArea,be,h,c,g),v!==$||n.current.skipDistanceCheck){const He=be.offsetWidth+(parseFloat(Ae.marginLeft)+parseFloat(Ae.marginRight));g.left>ae&&ae>0?V=g.left:g.right+window.pageXOffset<ae+He&&ae>0?V=ae-(ae-g.right)+window.pageXOffset-He:V=ae<0?g.left:ae}if(S!==W||n.current.skipDistanceCheck){const He=be.offsetHeight+(parseFloat(Ae.marginTop)+parseFloat(Ae.marginBottom));g.top>ge&&ge>0?z=g.top:g.bottom+window.pageYOffset<ge+He&&ge>0?z=ge-(ge-g.bottom)+window.pageYOffset-He:z=ge<0?g.top:ge}}else V=ae,z=ge;const Re=de+h.top,Le=ke+h.left;T&&(Be(z)&&(z=_),Be(V)&&(V=O));let Y,De;if(be.classList.contains("sf-treeview"))n.current.dragArea?(g.top=n.current.clone?g.top:0,Y=z-Re<0?g.top:z-h.top,De=V-Le<0?g.left:V-h.left):(Y=z-h.top,De=V-h.left);else if(n.current.dragArea){const He=be.classList.contains("sf-dialog");g.top=n.current.clone?g.top:0,Y=z-Re<0?g.top:z-Re,De=V-Le<0?He?V-(Le-h.left):R.left:V-Le}else Y=z-Re,De=V-Le;const me=o.current?parseFloat(getComputedStyle(o.current).marginTop):0;if(me>0&&(n.current.clone&&(Y+=me,ge<0&&(me+ge>=0?Y=me+ge:Y-=me),n.current.dragArea&&(Y=g.bottom<Y?g.bottom:Y)),z-Re<0))if(ge+me+(be.offsetHeight-Re)>=0){const He=g.top+ge-Re;He+me+Re<0?Y-=me+Re:Y=He}else Y-=me+Re;if(n.current.dragArea&&be.classList.contains("sf-treeview")){const He=be.offsetHeight+(parseFloat(Ae.marginTop)+parseFloat(Ae.marginBottom));Y=Y+He>g.bottom?g.bottom-He:Y}n.current.enableScrollHandler&&!n.current.clone&&(Y-=X,De-=P),n.current.dragArea&&typeof n.current.dragArea!="string"&&n.current.dragArea.classList.contains("sf-kanban-content")&&n.current.dragArea.style.position==="relative"&&(Y+=n.current.dragArea.scrollTop);const Oe=Ne({top:Y+"px",left:De+"px"});Zr(be,ee(Oe)),!ir(be)&&n.current.enableAutoScroll&&!be.classList.contains("sf-treeview")&&be.scrollIntoView();let Pe=document.querySelectorAll(":hover");if(n.current.enableAutoScroll&&be.classList.contains("sf-treeview")){Pe.length===0&&(Pe=as(x));let He=us(Pe,!1);ir(be)?oe(He,Y):ir(be)||(Pe=[].slice.call(document.querySelectorAll(":hover")),Pe.length===0&&(Pe=as(x)),He=us(Pe,!0),oe(He,Y))}T=!0,O=V,_=z,m.left=V,m.top=z,v=$,S=W}function ne(x){var te;if(T=!1,se=0,fe=0,!In(x.changedTouches)&&x.changedTouches.length!==1)return;if(["touchend","pointerup","mouseup"].indexOf(x.type)!==-1){if(n.current&&n.current.onDragStop){const he=Se(x);n.current.onDragStop({event:x,element:o.current,target:he,helper:L})}t.intDestroy()}else(te=o==null?void 0:o.current)==null||te.setAttribute("aria-grabbed","false");const z=Z(x);z.target&&z.instance&&(z.instance.dragStopCalled=!0,z.instance.dragData[n.current.scope]=pe[n.current.scope],z.instance.intDrop(x,z.target)),w(!0),document.body.classList.remove("sf-prevent-select")}function Q(){K(),xe.isIE&&Gr([t.element.current],"sf-block-touch"),pe[n.current.scope]={}}t.intDestroy=()=>{var x;T=!1,K(),document.body.classList.remove("sf-prevent-select"),(x=o==null?void 0:o.current)==null||x.setAttribute("aria-grabbed","false"),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,H),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,ne),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,t.intDestroy),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,U),re()&&re(!0)},t.destroy=()=>{K(!0)};function J(x,V){C.instance.intOut(x,V.target),C.instance.dragData[n.current.scope]=null,C=null}function Se(x){const V=hn(x);let z;const te=L.style.pointerEvents||"",he=x.type.indexOf("pointer")!==-1&&xe.info.name==="safari"&&parseInt(xe.info.version,10)>12;return Lo(x.target,L)||x.type.indexOf("touch")!==-1||he?(L.style.pointerEvents="none",z=document.elementFromPoint(V.clientX,V.clientY),L.style.pointerEvents=te):z=x.target,z}function ve(x,V){const z=x.srcElement!==void 0?x.srcElement:x.target,te=hn(x);let he,Ee;const be=Be(z.offsetParent);if(V){if(he=n.current.clone?te.pageX:te.pageX+(be?0:z.offsetParent.scrollLeft)-u,Ee=n.current.clone?te.pageY:te.pageY+(be?0:z.offsetParent.scrollTop)-f,!n.current.clone){const ke=z.offsetParent;if(!be&&ke){const de=ke.scrollLeft,Ce=ke.scrollTop,$=de-se,W=Ce-fe;he=he-$,Ee=Ee-W}}}else if(he=n.current.clone?te.pageX:te.pageX+window.pageXOffset-u,Ee=n.current.clone?te.pageY:te.pageY+window.pageYOffset-f,document.scrollingElement&&!n.current.clone){const ke=document.scrollingElement,de=ke.scrollLeft,Ce=ke.scrollTop,$=de-se,W=Ce-fe;he=he-$,Ee=Ee-W}return{left:he-(d.left+n.current.cursorAt.left),top:Ee-(d.top+n.current.cursorAt.top)}}function ue(x){let V;return n.current.clone?n.current&&n.current.helper?V=n.current.helper({sender:x,element:i}):(V=Oo("div",{className:"sf-drag-helper sf-block-touch",innerHTML:"Draggable"}),document.body.appendChild(V)):V=t.element.current,V}function w(x,V,z){pe[n.current.scope]=x?null:{draggable:V,helper:z,draggedElement:t.element.current}}function Z(x){const V=Se(x);let z=ie(V);if(!z&&V&&!Be(V.parentNode)){const te=Dt(V.parentNode,".sf-droppable")||V.parentElement;te&&(z=ie(te))}return{target:V,instance:z}}function ie(x){let V,z;if(s){const{getAllDroppables:te}=s;V=te();for(const he in V)if(Object.prototype.hasOwnProperty.call(V,he)){const Ee=V[`${he}`];if(Ee.element&&Ee.element.current===x){z=Ee;break}}}else return;return z}function re(x){return x&&(cr.isDragged=!cr.isDragged),cr.isDragged}function Ne(x){return n.current&&n.current.queryPositionInfo?n.current.queryPositionInfo(x):x}function ee(x){const V={...x};return n.current.dragDirection&&(n.current.dragDirection==="x"?delete V.top:n.current.dragDirection==="y"&&delete V.left),V}function oe(x,V){if(x===document.scrollingElement)x.clientHeight+x.scrollTop-L.clientHeight<V&&x.getBoundingClientRect().height+G.top>V?x.scrollTop+=L.clientHeight:x.scrollTop>V-L.clientHeight&&(x.scrollTop-=L.clientHeight);else if(x){const z=document.scrollingElement.scrollTop,te=L.clientHeight;x.clientHeight+x.getBoundingClientRect().top-te+z<V?x.scrollTop+=L.clientHeight:x.getBoundingClientRect().top>V-te-z&&(x.scrollTop-=L.clientHeight)}}function ce(x,V){let z;return!Be(B)&&B!==x?z=B:z=Be(V)?x:V,z}return e.useLayoutEffect(()=>{if(t.element.current=qr(t.element),!!t.element.current)return n.current={...t,...r},Gr([t.element.current],["sf-lib","sf-draggable"]),Q(),()=>{t.element.current&&Ao([t.element.current],["sf-lib","sf-draggable"]),t.destroy()}}),t}nn.getDefaultPosition=()=>bt({},ni);const si=/(Up|Down)/;function Zt(o,r){const s=Jo(),t={...r};let n=!1,i={clientX:0,clientY:0},l=null,u={clientX:0,clientY:0},f="",d=!1,E=!1,m={originalEvent:null},g=0,h=0,c="",v=0,D=!0,O=null,_=null,T=0;e.useLayoutEffect(()=>(A(),()=>{B(),s.destroy()}),[]);function A(){o.current&&(R(),xe.isIE&&o.current.classList.add("sf-block-touch"))}function R(){Ve.add(o.current,xe.touchStartEvent,b,void 0)}function B(){Ve.remove(o.current,xe.touchStartEvent,b)}function k(y){const N=getComputedStyle(y),I=N.overflow+N.overflowX+N.overflowY;return/(auto|scroll)/.test(I)}function b(y){if(D===!0){const N=M(y);y.changedTouches!==void 0&&(D=!1),n=!1,c="",i=u={clientX:N.clientX,clientY:N.clientY},l=N,d=E=!1,v=Date.now(),_=setTimeout(()=>{C(y)},t.tapHoldThreshold?t.tapHoldThreshold:750),Ve.add(o.current,xe.touchMoveEvent,S,void 0),Ve.add(o.current,xe.touchEndEvent,G,void 0),Ve.add(o.current,xe.touchCancelEvent,L,void 0)}}function S(y){const N=M(y);n=!(N.clientX===i.clientX&&N.clientY===i.clientY);let I={};if(n){clearTimeout(_),fe(y);const q={startEvents:l,originalEvent:y,startX:i.clientX,startY:i.clientY,distanceX:g,distanceY:h,scrollDirection:f,velocity:pe(N)};I=bt(I,{},q),s.trigger("scroll",I,t.scroll),u={clientX:N.clientX,clientY:N.clientY}}}function L(y){clearTimeout(_),clearTimeout(O),T=0,P(y),Ve.remove(o.current,xe.touchCancelEvent,L)}function C(y){T=0,D=!0,Ve.remove(o.current,xe.touchMoveEvent,S),Ve.remove(o.current,xe.touchEndEvent,G);const N={originalEvent:y};s.trigger("tapHold",N,t.tapHold),Ve.remove(o.current,xe.touchCancelEvent,L)}function G(y){P(y),n||typeof t.tap=="function"&&(s.trigger("tap",{originalEvent:y,tapCount:++T},t.tap),O=setTimeout(()=>{T=0},t.tapThreshold?t.tapThreshold:350)),X()}function P(y){clearTimeout(_),clearTimeout(O);const N=M(y);let I=N.clientX-i.clientX,q=N.clientY-i.clientY;I=Math.floor(I<0?-1*I:I),q=Math.floor(q<0?-1*q:q),n=I>1||q>1,/Firefox/.test(xe.userAgent)&&N.clientX===0&&N.clientY===0&&y.type==="mouseup"&&(n=!1),se(y);const U={originalEvent:y,startEvents:l,startX:i.clientX,startY:i.clientY,distanceX:g,distanceY:h,swipeDirection:c,velocity:pe(N)};if(n){const ne=t.swipeSettings?t.swipeSettings.swipeThresholdDistance:50,Q=bt(void 0,m,U);let J=!1;const Se=k(o.current),ve=si.test(c);ne&&(ne<g&&!ve||ne<h&&ve)&&(Se?J=K(o.current,ve):J=!0),J&&s.trigger("swipe",Q,t.swipe)}X()}function X(){setTimeout(()=>{D=!0},typeof t.tap!="function"?0:20),Ve.remove(o.current,xe.touchMoveEvent,S),Ve.remove(o.current,xe.touchEndEvent,G),Ve.remove(o.current,xe.touchCancelEvent,L)}function se(y){const N=M(y);m={originalEvent:y},g=Math.abs(Math.abs(N.clientX)-Math.abs(i.clientX)),h=Math.abs(Math.abs(N.clientY)-Math.abs(i.clientY)),c=g>h?N.clientX>i.clientX?"Right":"Left":N.clientY<i.clientY?"Up":"Down"}function fe(y){const N=M(y);m={originalEvent:y},g=Math.abs(Math.abs(N.clientX)-Math.abs(u.clientX)),h=Math.abs(Math.abs(N.clientY)-Math.abs(u.clientY)),(g>h||d)&&!E?(f=N.clientX>u.clientX?"Right":"Left",d=!0):(f=N.clientY<u.clientY?"Up":"Down",E=!0)}function pe(y){const N=y.clientX,I=y.clientY,q=Date.now(),H=N-i.clientX,U=I-i.clientY,ne=q-v;return Math.sqrt(H*H+U*U)/ne}function K(y,N){const I=["scroll","offset"],q=N?["Height","Top"]:["Width","Left"];return y[I[0]+q[0]]<=y[I[1]+q[0]]?!0:y[I[0]+q[1]]===0||y[I[1]+q[0]]+y[I[0]+q[1]]>=y[I[0]+q[0]]}function M(y){return y.changedTouches&&y.changedTouches.length!==0?y.changedTouches[0]:y}return t}class ar{static addWorkDays(r,s,t,n){if(s<=0)return new Date(r);let i=new Date(r),l=0;for(;l<s;){const u=F.addDays(i,t);F.isWorkDay(u,n)&&(l+=1),i=u}return i}static navigate(r,s){const{currentDate:t,viewType:n,interval:i,showWeekend:l,workDays:u}=s;switch(n){case"Day":return l===!1?this.addWorkDays(t,i,r,u):F.addDays(t,r*i);case"Week":case"WorkWeek":return F.addDays(t,r*7*i);case"Month":return F.addMonths(t,r*i);default:return F.addDays(t,r)}}static navigateToPrevious(r){return this.navigate(-1,r)}static navigateToNext(r){return this.navigate(1,r)}static navigateToToday(){return new Date}}const oi=a.jsx("path",{d:"M11.5 10.0858L5.50003 4.08582L4.08582 5.50003L11.5 12.9142L18.9142 5.50003L17.5 4.08582L11.5 10.0858ZM11.5 17.0858L5.50003 11.0858L4.08582 12.5L11.5 19.9142L18.9142 12.5L17.5 11.0858L11.5 17.0858Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),js=Et(oi),ii=a.jsx("path",{d:"M5 7.08578L12 14.0858L19 7.08578L20.4142 8.5L12 16.9142L3.58578 8.5L5 7.08578Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Zn=Et(ii),li=a.jsx("path",{d:"M6.41418 12L12.4142 6L11 4.58578L3.58575 12L11 19.4142L12.4142 18L6.41418 12ZM13.4142 12L19.4142 6L18 4.58578L10.5858 12L18 19.4142L19.4142 18L13.4142 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),_r=Et(li),ci=a.jsx("path",{d:"M10.5858 12L4.58582 18L6.00003 19.4142L13.4142 12L6.00003 4.58575L4.58582 5.99997L10.5858 12ZM17.5858 12L11.5858 18L13 19.4142L20.4142 12L13 4.58575L11.5858 5.99997L17.5858 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Pr=Et(ci),ai=a.jsx("path",{d:"M11.5 6.91418L17.5 12.9142L18.9142 11.5L11.5 4.08575L4.08575 11.5L5.49997 12.9142L11.5 6.91418ZM11.5 13.9142L17.5 19.9142L18.9142 18.5L11.5 11.0858L4.08575 18.5L5.49997 19.9142L11.5 13.9142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),$s=Et(ai),ui=a.jsx("path",{d:"M6.00003 16.4142L12 10.4142L18 16.4142L19.4142 15L12 7.58578L4.58582 15L6.00003 16.4142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Vs=Et(ui),di=a.jsx("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13 11.382V5H11V12.618L16.4472 15.3416L17.3416 13.5528L13 11.382Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),fi=Et(di),mi=a.jsx("path",{d:"M6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM4.9681 6.38231C3.73647 7.92199 3 9.87499 3 12C3 16.9706 7.02944 21 12 21C14.125 21 16.078 20.2635 17.6177 19.0319L4.9681 6.38231ZM12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),pi=Et(mi),hi=a.jsx("path",{d:"M17 9C17 9.59519 16.7516 10.6096 16.1971 11.9583C15.6652 13.2521 14.932 14.6644 14.1531 15.9825C13.4 17.257 12.6299 18.4 12 19.2216C11.3701 18.4 10.5999 17.257 9.84685 15.9825C9.06796 14.6644 8.33481 13.2521 7.80291 11.9583C7.24843 10.6096 7 9.59519 7 9C7 6.23858 9.23858 4 12 4C14.7614 4 17 6.23858 17 9ZM19 9C19 13 13 22 12 22C11 22 5 13 5 9C5 5.13401 8.13401 2 12 2C15.866 2 19 5.13401 19 9ZM12 11.5C13.3807 11.5 14.5 10.3807 14.5 9C14.5 7.61929 13.3807 6.5 12 6.5C10.6193 6.5 9.5 7.61929 9.5 9C9.5 10.3807 10.6193 11.5 12 11.5Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ei=Et(hi),gi=a.jsx("path",{d:"M3 3C3 1.89543 3.89543 1 5 1H13.5858C14.1162 1 14.6249 1.21071 15 1.58579L20.4142 7C20.7893 7.37507 21 7.88378 21 8.41421V21C21 22.1046 20.1046 23 19 23H5C3.89543 23 3 22.1046 3 21V3ZM5 3L13 3V9H19V21H5V3ZM11 6H7V8H11V6ZM7 11H11V13H7V11ZM17 13V11H13V13H17ZM7 16H11V18H7V16ZM17 18V16H13V18H17Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ti=Et(gi),Ci=a.jsx("path",{d:"M20 13V17.6862L18 15.1528V13V12H20V13ZM17.0417 20L18.7151 22.1196L20.2849 20.8803L5.28485 1.88034L3.71509 3.11963L4.75394 4.43551C4.29445 4.80196 4 5.36659 4 6V11V12H6V11V6.01385L15.4627 18H6V15L1 19L6 23V20H17.0417ZM18 6H10.7741L9.19513 4H18V1L23 5L18 9V6Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Di=Et(Ci),vi=a.jsx("path",{d:"M18 9L23 5L18 1V4H6C4.89543 4 4 4.89543 4 6V12H6V6H18V9ZM18 18H6V15L1 19L6 23V20H18C19.1046 20 20 19.1046 20 18V12H18V18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),yi=Et(vi),Ri=a.jsx("path",{d:"M8 1V3H16V1H18V3H20C21.1046 3 22 3.89543 22 5V8V9V10V11.7546C21.3984 11.2724 20.7257 10.8753 20 10.5815V10H4V21H9.58152C9.87526 21.7257 10.2724 22.3984 10.7546 23H4C2.89543 23 2 22.1046 2 21V10V9V8V5C2 3.89543 2.89543 3 4 3H6V1H8ZM4 8H20V5H18H16H8H6H4V8ZM13 18C13 15.7909 14.7909 14 17 14C19.2091 14 21 15.7909 21 18C21 20.2091 19.2091 22 17 22C14.7909 22 13 20.2091 13 18ZM17 12C13.6863 12 11 14.6863 11 18C11 21.3137 13.6863 24 17 24C20.3137 24 23 21.3137 23 18C23 14.6863 20.3137 12 17 12ZM18 15V17H20V19H16V15H18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),ds=Et(Ri);var fs;(function(o){o.Success="Success",o.Warning="Warning",o.Error="Error"})(fs||(fs={}));const Tr=e.forwardRef((o,r)=>{const{disabled:s=!1,onChange:t,onBlur:n,onFocus:i,clearButton:l=!1,labelMode:u="Never",className:f="",id:d,readOnly:E=!1,value:m,defaultValue:g,width:h,placeholder:c="",variant:v,size:D=Kt.Medium,color:O,prefix:_,suffix:T,...A}=o,B=e.useRef(d||`default_${e.useId()}`).current,k=m!==void 0,[b,S]=e.useState(k?m:g||""),[L,C]=e.useState(!1),G=e.useRef(null),{locale:P,dir:X}=$e(),se={clearButton:l,labelMode:u,disabled:s,readOnly:E,variant:v,size:D,color:O,value:m},fe=()=>pe(ut.INPUTGROUP,ut.WRAPPER,u!=="Never"?ut.FLOATINPUT:"",f,X==="rtl"?ut.RTL:"",s?ut.DISABLE:"",L?ut.TEXTBOX_FOCUS:"",b!==""?ut.VALIDINPUT:"",v&&v.toLowerCase()!=="standard"?v.toLowerCase()==="outlined"?"sf-outline":`sf-${v.toLowerCase()}`:"",D&&D.toLowerCase()!=="small"?`sf-${D.toLowerCase()}`:"",O?`sf-${O.toLowerCase()}`:"",_?"sf-has-prefix":"","sf-control"),pe=(...U)=>U.filter(Boolean).join(" "),K=fe();e.useEffect(()=>{kt("textbox")},[]),e.useEffect(()=>{k&&S(m||"")},[m,k]),e.useImperativeHandle(r,()=>({...se,element:G.current}));const M=e.useCallback((U,ne)=>{k||S(U),t&&t({event:ne,value:U})},[t,k]),y=e.useCallback(U=>{const ne=U.target.value;M(ne,U)},[M]),N=e.useCallback(U=>{C(!0),i&&i(U)},[i]),I=e.useCallback(()=>{k||(S(""),G.current&&(G.current.value="")),t&&t({value:"",event:void 0})},[k,t]),q=e.useCallback(U=>{C(!1),n&&n(U)},[n]),H=k?m:b;return a.jsxs("div",{className:K,style:{width:h||"100%"},children:[_&&a.jsx("span",{className:"sf-input-icon sf-no-hover",children:_}),a.jsx(As,{id:B,floatLabelType:u,ref:G,...A,readOnly:E,value:k?H:void 0,defaultValue:k?void 0:b||"",disabled:s,placeholder:u==="Never"?c:void 0,className:"sf-textbox sf-lib sf-ellipsis",onChange:y,"aria-label":u==="Never"?"textbox":void 0,onFocus:N,onBlur:q}),Ar(u||"Never",L||H!=="",H,c,B),l&&Os(L?H:"",I,l,"textbox",P),T&&a.jsx("span",{className:"sf-input-icon sf-no-hover",children:T})]})}),bi="sf-multi-line-input",wi="sf-auto-width";var Mt;(function(o){o.None="None",o.Both="Both",o.Horizontal="Horizontal",o.Vertical="Vertical"})(Mt||(Mt={}));const Si={[Mt.None]:"sf-resize-none",[Mt.Both]:"sf-resize-xy",[Mt.Horizontal]:"sf-resize-x",[Mt.Vertical]:"sf-resize-y"},Ni=e.forwardRef((o,r)=>{const{readOnly:s=!1,value:t,defaultValue:n,labelMode:i="Never",placeholder:l="",disabled:u=!1,width:f,resizeMode:d=Mt.Both,maxLength:E,cols:m=null,rows:g=null,clearButton:h=!1,autoResize:c=!1,className:v="",size:D=Kt.Medium,variant:O,onChange:_,onBlur:T,onFocus:A,...R}=o,B=t!==void 0,[k,b]=e.useState(n||""),S=B?t:k,L=`textArea_${e.useId()}`,[C,G]=e.useState(!1),P=e.useMemo(()=>R.id||L,[R.id]),X=e.useRef(null),se=e.useRef(null),fe=e.useRef(null),pe=e.useRef(null),{locale:K,dir:M}=$e(),y={clearButton:h,labelMode:i,disabled:u,readOnly:s,resizeMode:d};e.useEffect(()=>{kt("textarea")},[]),e.useEffect(()=>{B&&b(t||"")},[B,t]);const N=()=>I(ut.INPUTGROUP,ut.WRAPPER,i!=="Never"?ut.FLOATINPUT:"",bi,v,M==="rtl"?ut.RTL:"",u?ut.DISABLE:"",C?ut.TEXTBOX_FOCUS:"",S!==""?ut.VALIDINPUT:"",O&&O.toLowerCase()!=="standard"?O.toLowerCase()==="outlined"?"sf-outline":`sf-${O.toLowerCase()}`:"",wi,D&&D.toLowerCase()!=="small"?`sf-${D.toLowerCase()}`:"","sf-control"),I=(...w)=>w.filter(Boolean).join(" "),q=N();e.useImperativeHandle(r,()=>({...y,element:X.current}));const H=e.useCallback(w=>{w&&(w.style.height="auto",w.style.height=`${w.scrollHeight}px`)},[]),U=e.useCallback(()=>{!c||!X.current||(se.current!==null&&(cancelAnimationFrame(se.current),se.current=null),se.current=requestAnimationFrame(()=>{H(X.current)}))},[c,H]),ne=w=>{const Z=Array.isArray(w.contentBoxSize)?w.contentBoxSize[0]:w.contentBoxSize;if(Z&&typeof Z.inlineSize=="number")return Z.inlineSize;const ie=w.contentRect.width;return typeof ie=="number"?ie:null};e.useEffect(()=>()=>{se.current!==null&&(cancelAnimationFrame(se.current),se.current=null)},[]),e.useEffect(()=>{if(!c||!X.current)return;let w=!1;const Z=()=>{w||(w=!0,requestAnimationFrame(()=>{w=!1,X.current&&U()}))};if("ResizeObserver"in window){const Ne=oe=>{const ce=oe[0];if(!ce)return;const x=ne(ce);x!==null&&pe.current===x||(pe.current=x,Z())},ee=new ResizeObserver(Ne);return ee.observe(X.current),fe.current=ee,()=>{ee.disconnect(),fe.current=null,pe.current=null}}const ie=X.current.ownerDocument?X.current.ownerDocument.defaultView:null;if(!ie)return;const re=()=>{Z()};return ie.addEventListener("resize",re),()=>{ie.removeEventListener("resize",re)}},[c,U]),e.useLayoutEffect(()=>{!c||!X.current||U()},[c,S,f,g,m]);const Q=e.useCallback(w=>{const Z=w.target.value;B||b(Z),_&&_({event:w,value:Z}),c&&U()},[B,_,k,t,c,U]),J=e.useCallback(w=>{G(!0),A&&A(w)},[A]),Se=e.useCallback(w=>{G(!1),T&&T(w)},[T]),ve=e.useCallback(()=>{B||(b(""),X.current&&(X.current.value="")),_&&_({value:"",event:void 0}),c&&U()},[_,B,U]),ue=w=>Si[`${w}`];return a.jsxs("div",{className:q,children:[a.jsx("textarea",{ref:X,id:P,value:B?t:void 0,defaultValue:B?void 0:n,onChange:Q,onFocus:J,onBlur:Se,readOnly:s,placeholder:i==="Never"?l:void 0,disabled:u,maxLength:E,cols:m??void 0,rows:g??void 0,...R,style:{width:f?typeof f=="number"?`${f}px`:f:void 0,resize:d==="None"||c?"none":void 0,overflowY:c?"hidden":void 0},className:`sf-textarea sf-lib sf-input ${ue(d)}`,"aria-labelledby":`label_${P}`}),Ar(i,C||S!=="",S,l,P),h&&Os(S&&C?S.toString():"",ve,h,"textarea",K)]})}),Jt={EMAIL:/^(?!.*\.\.)[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,URL:/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/,DATE_ISO:/^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,DIGITS:/^[0-9]*$/,PHONE:/^[+]?[0-9]{9,13}$/,CREDIT_CARD:/^\d{13,16}$/},Ws=e.createContext(null),xi=Ws.Provider,Cr=e.forwardRef((o,r)=>{const{rules:s,onSubmit:t,onReset:n,children:i,onFormStateChange:l,initialValues:u={},validateOnChange:f=!1,className:d="",...E}=o,m=e.useRef(null),{locale:g,dir:h}=$e(),c=e.useRef({values:{...u},errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),v=e.useCallback(()=>{l&&(L.current=ne(),l(L.current))},[l]),D=e.useCallback((w,Z)=>{c.current={...c.current,values:{...c.current.values,[w]:Z},modified:{...c.current.modified,[w]:!0}}},[]),O=e.useCallback(w=>{c.current={...c.current,touched:{...c.current.touched,[w]:!0}}},[]),_=e.useCallback(w=>{c.current={...c.current,visited:{...c.current.visited,[w]:!0}}},[]),T=e.useCallback((w,Z)=>{const ie={...c.current.errors};Z?ie[w]=Z:delete ie[w],c.current={...c.current,errors:ie}},[]),A=e.useCallback(w=>{c.current={...c.current,submitted:w}},[]),R=e.useCallback(w=>{c.current={values:w,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}},v()},[v]),B=e.useCallback(()=>{const w={};Object.keys(c.current.values).forEach(Z=>{w[Z]=!0}),c.current={...c.current,touched:w}},[]),k=e.useCallback(()=>{const w={};Object.keys(c.current.values).forEach(Z=>{w[Z]=!0}),c.current={...c.current,visited:w}},[]),b=e.useCallback(w=>{const Z={...c.current.errors};Object.entries(w).forEach(([ie,re])=>{re?Z[ie]=re:delete Z[ie]}),c.current={...c.current,errors:Z},v()},[v]),S=e.useRef(s),L=e.useRef(null),C=e.useRef(null),G={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date (ISO).",creditCard:"Please enter valid card number.",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",equalTo:"Please enter the same value again."},P=e.useRef({}),X=w=>{P.current[w]=!0};e.useEffect(()=>(C.current=Ls("formValidator",G,g),()=>{C.current=null}),[g]),e.useEffect(()=>(v(),se(),kt("formValidator"),()=>{C.current=null,S.current={},P.current={},m.current&&(m.current=null),L.current=null}),[]),e.useEffect(()=>{S.current=s},[s]);const se=()=>{if(Object.keys(u).length>0){const w={};for(const Z in u)if(Object.prototype.hasOwnProperty.call(u,Z)&&Object.prototype.hasOwnProperty.call(S.current,Z)){const ie=K(Z,u[Z]);ie?w[Z]=ie:w[Z]=null}Object.keys(w).length>0&&b(w)}},fe=(w,Z)=>{var re;let ie=(re=C.current)==null?void 0:re.getConstant(w);return Array.isArray(Z)?Z.forEach((Ne,ee)=>{const oe=`{${ee}}`;ie.includes(oe)&&(ie=ie.replace(oe,String(Ne)))}):ie=ie.replace("{0}",String(Z)),ie},pe=w=>{if(!Jt.CREDIT_CARD.test(w))return!1;const Z=w.replace(/[\s-]/g,"");let ie=0,re=!1;for(let Ne=Z.length-1;Ne>=0;Ne--){let ee=parseInt(Z.charAt(Ne),10);re&&(ee*=2,ee>9&&(ee-=9)),ie+=ee,re=!re}return ie%10===0},K=(w,Z)=>{const ie=S.current[w];if(!ie||!P.current[w])return null;const re=Z==null||Z.toString().trim()==="",Ne=ie.required!=null&&ie.required[0]!==!1;if(re&&!Ne)return null;for(const ee in ie)if(Object.prototype.hasOwnProperty.call(ie,ee)){const oe=ie[ee];if(!oe)continue;let ce=!0,x=null,V;if(ee==="customValidator"&&typeof oe=="function"){const z=oe(Z);if(z)return z;continue}if(Array.isArray(oe)&&(x=oe[0],V=oe[1],ee==="required"&&x===!1)||ee!=="required"&&(Z===""||Z===null||Z===void 0))continue;switch(ee){case"required":ce=!re;break;case"email":ce=Jt.EMAIL.test(Z);break;case"url":ce=Jt.URL.test(Z);break;case"date":ce=!isNaN(Date.parse(Z));break;case"dateIso":ce=Jt.DATE_ISO.test(Z);break;case"number":ce=!isNaN(Number(Z))&&String(Z).indexOf(" ")===-1;break;case"digits":ce=Jt.DIGITS.test(Z);break;case"creditCard":ce=pe(Z);break;case"minLength":ce=String(Z).length>=Number(x);break;case"maxLength":ce=String(Z).length<=Number(x);break;case"rangeLength":Array.isArray(x)&&(ce=String(Z).length>=x[0]&&String(Z).length<=x[1]);break;case"min":ce=Number(Z)>=Number(x);break;case"max":ce=Number(Z)<=Number(x);break;case"range":Array.isArray(x)&&(ce=Number(Z)>=x[0]&&Number(Z)<=x[1]);break;case"regex":x instanceof RegExp?ce=x.test(Z):typeof x=="string"&&(ce=new RegExp(x).test(Z));break;case"tel":ce=Jt.PHONE.test(Z);break;case"equalTo":typeof x=="string"&&(ce=Z===c.current.values[x]);break}if(!ce)return V||fe(ee,x)}return null},M=()=>{const w={},Z=Object.keys(S.current);for(const ie of Z){const re=K(ie,c.current.values[ie]);c.current.values[ie]||D(ie,c.current.values[ie]),re&&(w[ie]=re)}return w},y=()=>{const w=M();for(const ie in w)Object.prototype.hasOwnProperty.call(w,ie)&&T(ie,w[ie]);const Z=Object.keys(S.current);for(const ie of Z)w[ie]||T(ie,null);return Object.keys(w).length===0&&(c.current={...c.current,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),v(),Object.keys(w).length===0},N=w=>{w==null||w.preventDefault();const Z=y();B(),k(),A(!0),v(),Z&&(t==null||t(c.current.values))},I=(w,{value:Z})=>{if(D(w,Z),f){const ie=K(w,Z);T(w,ie)}v()},q=w=>{O(w);const Z=K(w,c.current.values[w]);T(w,Z),v()},H=w=>{R({...u}),n==null||n(w)},U=()=>{H()},ne=()=>{const w=c.current;return{values:w.values,errors:w.errors,submitted:w.submitted,touched:w.touched,visited:w.visited,modified:w.modified,valid:Object.keys(S.current).reduce((Z,ie)=>(Z[ie]=!w.errors[ie],Z),{}),allowSubmit:Object.keys(w.errors).length===0,onChange:I,onBlur:q,onFocus:ve,onFormReset:H,onSubmit:N,fieldNames:Object.keys(P.current).reduce((Z,ie)=>(Z[ie]=ie,Z),{})}},Q=w=>{const Z=K(w,c.current.values[w]);return T(w,Z),v(),!Z},J=e.useMemo(()=>({rules:s,initialValues:u,validateOnChange:f}),[s,u,f]);e.useImperativeHandle(r,()=>({...J,validate:y,reset:U,validateField:Q,element:m.current}),[J]);const Se=e.useMemo(()=>["sf-control sf-form-validator",h==="rtl"?"sf-rtl":"",d].filter(Boolean).join(" "),[h,d]),ve=w=>{_(w),v()},ue={registerField:X};return a.jsx(xi,{value:ue,children:a.jsx("form",{ref:m,className:Se,onSubmit:N,onReset:H,noValidate:!0,...E,children:i})})});Cr.displayName="Form";const xt=o=>{const{name:r,children:s}=o;if(!r)return null;const t=e.useContext(Ws);return t?(t.registerField&&t.registerField(r),a.jsx(a.Fragment,{children:s})):null};xt.displayName="FormField";const Ai=1500,Oi=500,ms=0,ps=8,Li=2,Nt=2,Ii="sf-control sf-tooltip",ki="sf-bigger",_i="sf-tooltip-close",ur="sf-tooltip-wrap",Pi="sf-tooltip-content sf-content",hs="sf-tooltip-arrow",Mi="sf-tooltip-arrow-outer",Hi="sf-tooltip-arrow-inner",Hn="bottom",dr="top",fr="left",jn="right",Es="sf-popup",gs="sf-lib",ji="M10.5858 12.0001L2.58575 4.00003L3.99997 2.58582L12 10.5858L20 2.58582L21.4142 4.00003L13.4142 12.0001L21.4142 20L20 21.4142L12 13.4143L4.00003 21.4142L2.58581 20L10.5858 12.0001Z",$i="M20.7929 7H3.20712C2.76167 7 2.53858 7.53857 2.85356 7.85355L11.6465 16.6464C11.8417 16.8417 12.1583 16.8417 12.3536 16.6464L21.1465 7.85355C21.4614 7.53857 21.2384 7 20.7929 7Z",Vi="M20.7929 17H3.20712C2.76167 17 2.53858 16.4615 2.85356 16.1465L11.6465 7.3536C11.8417 7.15834 12.1583 7.15834 12.3536 7.3536L21.1465 16.1465C21.4614 16.4615 21.2384 17 20.7929 17Z",Wi="M7 20.7928L7 3.20706C7 2.76161 7.53857 2.53852 7.85355 2.8535L16.6464 11.6464C16.8417 11.8417 16.8417 12.1582 16.6464 12.3535L7.85355 21.1464C7.53857 21.4614 7 21.2383 7 20.7928Z",Fi="M17 3.20718L17 20.793C17 21.2384 16.4614 21.4615 16.1464 21.1465L7.35354 12.3536C7.15828 12.1584 7.15828 11.8418 7.35354 11.6465L16.1464 2.85363C16.4614 2.53864 17 2.76173 17 3.20718Z",Fs=e.forwardRef((o,r)=>{const{width:s="auto",height:t="auto",position:n="TopCenter",offsetX:i=0,offsetY:l=0,arrow:u=!0,windowCollision:f=!1,arrowPosition:d="Auto",opensOn:E="Auto",followCursor:m=!1,sticky:g=!1,animation:h={open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:c=0,closeDelay:v=0,children:D,target:O,content:_,container:T,className:A,open:R,onClose:B,onOpen:k,title:b,style:S,onFilterTarget:L,...C}=o,[G,P]=e.useState(!0),[X,se]=e.useState(!1),[fe,pe]=e.useState(void 0),[K,M]=e.useState(null),[y,N]=e.useState(!1),[I,q]=e.useState(Hn),[H,U]=e.useState({top:0,left:0}),[ne,Q]=e.useState({}),[J,Se]=e.useState({top:"",left:""}),[ve,ue]=e.useState({style:S}),w=e.useRef(null),Z=e.useRef({show:null,hide:null,autoClose:null}),ie=e.useRef({x:"Center",y:"Top"}),re=e.useRef(null),Ne=e.useRef({event:null,target:null}),ee=e.useRef(!0),oe=e.useRef(null),ce=e.useRef(null),x=e.useRef(null),V=e.useRef(null),z=e.useRef({event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null}),te=e.useRef(typeof document<"u"?document.body:null),he=e.useRef(R),Ee=e.useRef(!1);xe.isDevice&&(re.current=Zt(ce));const be={width:"auto",height:"auto",position:"TopCenter",offsetX:0,offsetY:0,arrow:!0,windowCollision:!1,arrowPosition:"Auto",opensOn:"Auto",followCursor:!1,sticky:!1,animation:{open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:0,closeDelay:0,target:O,content:_,container:T,open:R};e.useEffect(()=>{de(),Ce(n),w.current&&w.current.element&&oe.current&&Ae(oe.current)},[n]),e.useEffect(()=>{w.current&&w.current.element&&oe.current&&Ae(oe.current)},[d]),e.useEffect(()=>{var j,le;w.current&&w.current.element&&oe.current&&(rr(oe.current),Rn(oe.current,(j=z.current)==null?void 0:j.event,(le=z.current)==null?void 0:le.showAnimation))},[G,oe.current]),e.useEffect(()=>($t(),On(E),()=>{Fe(E)}),[E,O]),e.useEffect(()=>{if(!(typeof document>"u"))return document.addEventListener("wheel",Ut),document.addEventListener("scroll",Ut),document.addEventListener("touchend",Bt),document.addEventListener("keydown",An),window.addEventListener("resize",ge),()=>{typeof document>"u"||(document.removeEventListener("wheel",Ut),document.removeEventListener("scroll",Ut),document.removeEventListener("touchend",Bt),document.removeEventListener("keydown",An),window.removeEventListener("resize",ge))}},[be]),e.useEffect(()=>{var j,le,ye,Te,we,_e;!R&&he.current===R||(he.current=R,R?(j=z.current)!=null&&j.showTarget?(jt((le=z.current)==null?void 0:le.showTarget,z.current.event,z.current.showAnimation),z.current={...z.current,showTarget:null}):Ct(O!=null&&O.current?O==null?void 0:O.current:ce.current,h.open):(ye=z.current)!=null&&ye.hideAnimation?(Lt(),Qt((Te=z.current)==null?void 0:Te.hideAnimation,(we=z.current)==null?void 0:we.hideTarget,(_e=z.current)==null?void 0:_e.hideEvent),z.current={...z.current,hideEvent:null,hideAnimation:null,hideTarget:null}):yt(h.close))},[R]),e.useLayoutEffect(()=>(kt("tooltip"),ke(),()=>{clearTimeout(Z.current.show),clearTimeout(Z.current.hide),clearTimeout(Z.current.autoClose),Z.current={show:null,hide:null,autoClose:null},w.current=null,re.current=null,z.current={event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null},Ne.current={event:null,target:null},m&&oe.current&&(oe.current.removeEventListener("mousemove",ct),oe.current.removeEventListener("touchstart",ct),oe.current.removeEventListener("mouseenter",ct)),oe.current=null,ce.current=null,V.current=null,te.current=null,x.current=null}),[]),e.useImperativeHandle(r,()=>({...be,animation:h,openTooltip:(j,le)=>{if(Be(le)&&(le=h==null?void 0:h.open),Be(j)&&(j=ce.current),j){if(j.style.display==="none")return;Ct(j,le)}},closeTooltip:j=>{j||(j=h==null?void 0:h.close),yt(j)},refresh:()=>{var j;w.current&&w.current.element&&Ae(oe.current?oe.current:ce.current),!Be(o.target)&&!Be((j=o.target)==null?void 0:j.current)&&(Fe(E),On(E))},element:ce.current}));const ke=e.useCallback(()=>{de()},[be]),de=()=>{if(!n)return;let j=null,le=null;n.indexOf("Top")===0||n.indexOf("Bottom")===0?[le,j]=n.split(/(?=[A-Z])/):[j,le]=n.split(/(?=[A-Z])/),ie.current.x=j,ie.current.y=le},Ce=e.useCallback(j=>{let le;if(!Be(j))return j.indexOf("Right")===0?le=fr:j.indexOf("Bottom")===0?le=dr:j.indexOf("Left")===0?le=jn:le=Hn,q(le),le},[]),$=j=>{var ye,Te;if(m&&((ye=z.current)!=null&&ye.event)){ct((Te=z.current)==null?void 0:Te.event);return}const le=ae(j);U(le)},W=j=>{var Te,we;if(!j)return{x:1,y:1};const le={x:1,y:1},ye=j.closest('[style*="transform: scale"]');if(ye&&ye!==((Te=w.current)==null?void 0:Te.element)&&ye.contains((we=w.current)==null?void 0:we.element)){const je=window.getComputedStyle(ye).getPropertyValue("transform");if(je!=="none"){const Ue=je.match(/scale\(([\d., ]+)\)/);if(Ue){const Ie=Ue[1].split(",").map(parseFloat);le.x=Ie[0],le.y=Ie.length>1?Ie[1]:Ie[0]}else{const Ie=je.match(/matrix\(([^)]+)\)/);if(Ie){const Xe=Ie[1].split(",").map(parseFloat);le.x=Xe[0],le.y=Xe[3]}}}}return le},ae=j=>{var Xe,Je,ot,at,Rt;w.current&&w.current.element&&(w.current.element.style.visibility="hidden",w.current.element.style.display="block");const le=(Xe=ce.current)==null?void 0:Xe.closest('[style*="zoom"]');le&&w.current&&w.current.element&&!le.contains((Je=w.current)==null?void 0:Je.element)&&(w.current.element.style.zoom=getComputedStyle(le).zoom);const ye=Jr(j,(ot=ie.current.x)==null?void 0:ot.toLowerCase(),(at=ie.current.y)==null?void 0:at.toLowerCase(),ee.current||(Rt=te.current)==null?void 0:Rt.getBoundingClientRect()),Te=W(j),we=Y(n,Te.x,Te.y),_e=ln(ye,we),je=_e[0],Ue=_e[1],Ie=bn(j,je,Ue);return Ie.left=Ie.left/Te.x,Ie.top=Ie.top/Te.y,!ee.current&&te.current&&(Ie.left-=window.scrollX*2,Ie.top-=window.scrollY*2),w.current&&w.current.element&&(w.current.element.style.display="",m&&(w.current.element.style.visibility="visible")),Ie},ge=()=>{Ae(oe.current)},Ae=j=>{if(w.current&&w.current.element&&j){const le=ae(j);U(le),w.current.element.style.visibility="visible"}},Re=()=>{m||Ae(oe.current)},Le=()=>{var le;Ft();const j=e.createRef();j.current=(le=w.current)==null?void 0:le.element,en.stop(j.current),Ee.current=!1,P(!0)},Y=(j,le,ye)=>{var ot,at,Rt,mt,et,St,fn,zr,Yr,Kr;const Te={top:0,left:0};let we,_e,je,Ue,Ie,Xe,Je;if(le!==1||ye!==1){const Xr=(at=(ot=w.current)==null?void 0:ot.element)==null?void 0:at.getBoundingClientRect();let mn;je=Math.round(Xr.width),Ue=Math.round(Xr.height),x.current&&(mn=x.current.getBoundingClientRect()),we=mn?Math.round(mn.width):0,_e=mn?Math.round(mn.height):0,Ie=u?ms:ps,Xe=_e/2+Nt+(Ue-((Rt=w.current)==null?void 0:Rt.element).clientHeight*ye),Je=we/2+Nt+(je-((mt=w.current)==null?void 0:mt.element).clientWidth*le)}else je=((et=w.current)==null?void 0:et.element).offsetWidth,Ue=((St=w.current)==null?void 0:St.element).offsetHeight,we=x.current?x.current.offsetWidth:0,_e=x.current?x.current.offsetHeight:0,Ie=u?ms:ps,Xe=_e/2+Nt+(((fn=w.current)==null?void 0:fn.element).offsetHeight-((zr=w.current)==null?void 0:zr.element).clientHeight),Je=we/2+Nt+(((Yr=w.current)==null?void 0:Yr.element).offsetWidth-((Kr=w.current)==null?void 0:Kr.element).clientWidth);switch(m&&(Ie+=Li),j){case"RightTop":Te.left+=we+Ie,Te.top-=Ue-Xe;break;case"RightCenter":Te.left+=we+Ie,Te.top-=Ue/2;break;case"RightBottom":Te.left+=we+Ie,Te.top-=Xe;break;case"BottomRight":Te.top+=_e+Ie,Te.left-=Je;break;case"BottomCenter":Te.top+=_e+Ie,Te.left-=je/2;break;case"BottomLeft":Te.top+=_e+Ie,Te.left-=je-Je;break;case"LeftBottom":Te.left-=we+je+Ie,Te.top-=Xe;break;case"LeftCenter":Te.left-=we+je+Ie,Te.top-=Ue/2;break;case"LeftTop":Te.left-=we+je+Ie,Te.top-=Ue-Xe;break;case"TopLeft":Te.top-=Ue+_e+Ie,Te.left-=je-Je;break;case"TopRight":Te.top-=Ue+_e+Ie,Te.left-=Je;break;default:Te.top-=Ue+_e+Ie,Te.left-=je/2;break}return Te.left+=i,Te.top+=l,Te},De=(j,le,ye,Te)=>{var ot,at,Rt,mt;if(u===!1||x.current===null)return;const we=Ce(le);let _e,je;const Ue=((ot=w.current)==null?void 0:ot.element).clientWidth,Ie=((at=w.current)==null?void 0:at.element).clientHeight,Xe=x.current.offsetWidth,Je=x.current.offsetHeight;if(we===Hn||we===dr){if(we===Hn?(je="99.9%",Se(et=>({...et,top:`-${Je-2}px`}))):(je=-(Je-1)+"px",Se(et=>({...et,top:`-${Je-6}px`}))),j){const et=ye!=="Center"||Ue>j.offsetWidth||m;et&&ye==="Left"||!et&&d==="End"?_e=Ue-Xe-Nt+"px":et&&ye==="Right"||!et&&d==="Start"?_e=Nt+"px":et&&(d==="End"||d==="Start")?_e=d==="End"?j.offsetWidth+(((Rt=w.current)==null?void 0:Rt.element).offsetWidth-j.offsetWidth)/2-Xe/2-Nt+"px":(((mt=w.current)==null?void 0:mt.element).offsetWidth-j.offsetWidth)/2-Xe/2+Nt+"px":_e=Ue/2-Xe/2+"px"}}else{we===jn?(_e="99.9%",Se(St=>({...St,left:`-${Xe-2}px`}))):(_e=-(Xe-1)+"px",Se(St=>({...St,left:`${-Xe+(Xe-2)}px`})));const et=Te!=="Center"||Ie>j.offsetHeight||m;et&&Te==="Top"||!et&&d==="End"?je=Ie-Je-Nt+"px":et&&Te==="Bottom"||!et&&d==="Start"?je=Nt+"px":je=Ie/2-Je/2+"px"}x.current.style.top=je,x.current.style.left=_e},me=()=>{var le;if(oe.current&&!Be(oe.current.getAttribute("title"))&&(oe.current.setAttribute("data-content",oe.current.getAttribute("title")),oe.current.removeAttribute("title")),e.isValidElement(_))return _;let j="";return typeof _=="function"?j=_():(le=oe==null?void 0:oe.current)!=null&&le.getAttribute("data-content")&&(j=oe.current.getAttribute("data-content")),j},Oe=(j,le)=>{const ye=(j.getAttribute("aria-describedby")||"").split(/\s+/);ye.indexOf(le)<0&&ye.push(le),Io(j,{"aria-describedby":ye.join(" ").trim(),"data-tooltip-id":le})},Pe=j=>{const le=j.getAttribute("data-tooltip-id"),ye=(j.getAttribute("aria-describedby")||"").split(/\s+/),Te=ye.indexOf(le);Te!==-1&&ye.splice(Te,1),j.removeAttribute("data-tooltip-id");const we=ye.join(" ").trim();we?j.setAttribute("aria-describedby",we):j.removeAttribute("aria-describedby")},Ke=e.useCallback(j=>{j&&(clearTimeout(Z.current.autoClose),lt(j.originalEvent))},[]),He=()=>{if(g)return;const j=()=>{wt()};Z.current.autoClose=setTimeout(j,Ai)},Tt=j=>{var Te;let le;if((Te=o.target)!=null&&Te.current?le=o.target.current.contains(j.target)?o.target.current:void 0:le=L?j.target:ce.current,Be(le))return;const ye=j;!w.current||w.current&&le!==oe.current?ye.type==="mousedown"&&ye.button===2||lt(j):g||yt(h.close,j,le)},lt=j=>{var ye,Te,we,_e;let le;if(L){if(!(L==null?void 0:L(j.target)))return;le=j.target}else(ye=o.target)!=null&&ye.current?le=o.target.current.contains(j.target)?o.target.current:void 0:le=ce.current;if(!(Be(le)||w.current&&le===oe.current&&!m)){if(w.current&&((Te=w.current.element)!=null&&Te.getAttribute("sf-animation-id"))){const je=v+((we=h==null?void 0:h.close)!=null&&we.delay?h.close.delay:0)+((_e=h==null?void 0:h.close)!=null&&_e.duration?h.close.duration:0);setTimeout(()=>{Wt(le),Ct(le,h.open,j)},je);return}Wt(le),Ct(le,h.open,j)}},Ot=j=>{Ne.current.event=j},Lt=()=>{Ne.current.target&&(Ne.current.target.removeEventListener("mousemove",Ot),Ne.current.target.removeEventListener("touchstart",Ot))},Ct=(j,le,ye)=>{clearTimeout(Z.current.show),clearTimeout(Z.current.hide),c&&m&&(Lt(),Ne.current.target=j,Ne.current.target.addEventListener("mousemove",Ot),Ne.current.target.addEventListener("touchstart",Ot)),z.current={...z.current,event:ye,showAnimation:le,showTarget:j},k==null||k(ye),(Be(R)||R)&&jt(j,ye,le)},jt=(j,le,ye)=>{var Te,we,_e;if(oe.current=j,P(!1),Be(w.current)){const je=(Te=ce.current)!=null&&Te.getAttribute("id")?Yn((we=ce.current)==null?void 0:we.getAttribute("id")):Yn("tooltip");ue(Ue=>({...Ue,id:je+"_content"}))}else if(j){De(j,n,ie.current.x,ie.current.y),Oe(j,ve==null?void 0:ve.id);const je=e.createRef();je.current=(_e=w.current)==null?void 0:_e.element,en.stop(je.current),Ae(j),Rn(j,le,ye)}},$t=()=>{(T==null?void 0:T.current)instanceof HTMLElement&&(ee.current=!1,te.current=T.current),te.current||(te.current=typeof document<"u"?document.body:null)},rr=j=>{var le;if(j){$t(),Oe(j,ve==null?void 0:ve.id),u&&Ce(n),$(j),De(j,n,ie.current.x,ie.current.y);const ye=e.createRef();ye.current=(le=w.current)==null?void 0:le.element,en.stop(ye.current),Ae(j)}},Rn=(j,le,ye)=>{j&&sr(j,ye,le)},sr=(j,le,ye)=>{const Te={name:le.effect==="None"&&Qr==="Enable"?"FadeIn":h.open.effect,duration:le.duration,delay:le.delay,timingFunction:"ease-out"};if(c>0){const we=()=>{var _e;m&&(j.addEventListener("mousemove",ct),j.addEventListener("touchstart",ct),j.addEventListener("mouseenter",ct)),(_e=w.current)!=null&&_e.element&&(M(j),pe(je=>({show:Te,hide:je==null?void 0:je.hide})),se(!0),Ne.current.event&&m&&ct(Ne.current.event))};Z.current.show=setTimeout(we,c)}else w.current&&(M(j),pe(we=>({show:Te,hide:we==null?void 0:we.hide})),se(!0));ye&&Ln(ye,j)},on=(j,le)=>{var _e;const ye={left:j,top:le,position:n,horizontal:ie.current.x,vertical:ie.current.y},Te=wn(),we=ko((_e=w.current)==null?void 0:_e.element,Te?Te.current:null,g&&n.indexOf("Right")>=0?V.current.offsetWidth+j:j,le);return we.length>0&&(ye.horizontal=we.indexOf("left")>=0?"Right":we.indexOf("right")>=0?"Left":ie.current.x,ye.vertical=we.indexOf("top")>=0?"Bottom":we.indexOf("bottom")>=0?"Top":ie.current.y),ye},ln=(j,le)=>[ee.current?j.left+le.left:j.left-te.current.getBoundingClientRect().left+le.left+window.pageXOffset+te.current.scrollLeft,ee.current?j.top+le.top:j.top-te.current.getBoundingClientRect().top+le.top+window.pageYOffset+te.current.scrollTop],bn=(j,le,ye)=>{var Je,ot,at,Rt;const Te=on(le,ye);let we=Te.position;ie.current.y!==Te.vertical&&(we=(n==null?void 0:n.indexOf("Bottom"))===0||(n==null?void 0:n.indexOf("Top"))===0?Te.vertical+ie.current.x:ie.current.x+Te.vertical),ie.current.x!==Te.horizontal&&(we.indexOf("Left")===0&&(Te.vertical=we==="LeftTop"||we==="LeftCenter"?"Top":"Bottom",we=Te.vertical+"Left"),we.indexOf("Right")===0&&(Te.vertical=we==="RightTop"||we==="RightCenter"?"Top":"Bottom",we=Te.vertical+"Right"),Te.horizontal=ie.current.x);const _e=Te.vertical,je=Te.horizontal;if(Te.position!==we){const mt=Jr(j,je.toLowerCase(),_e.toLowerCase(),ee.current||(Je=te.current)==null?void 0:Je.getBoundingClientRect());De(j,we,je,_e);const et=W(j),St=Y(we,et.x,et.y);ee.current||(St.top-=cn("TopBottom",we,l),St.left-=cn("RightLeft",we,i)),Te.position=we;const fn=ln(mt,St);Te.left=fn[0],Te.top=fn[1]}else De(j,we,je,_e);const Ue={left:Te.left,top:Te.top},Ie=wn(),Xe=ee.current?_o((ot=w.current)==null?void 0:ot.element,Ie?Ie.current:null,{X:!0,Y:f},Ue):Ue;if(u&&x.current!=null&&(we.indexOf("Bottom")===0||we.indexOf("Top")===0)){let mt=parseInt(x.current.style.left,10)-(Xe.left-Te.left);mt<0?mt=0:mt+x.current.offsetWidth>((at=w.current)==null?void 0:at.element).clientWidth&&(mt=((Rt=w.current)==null?void 0:Rt.element).clientWidth-x.current.offsetWidth),x.current.style.left=mt.toString()+"px"}return Ue.left=Xe.left,Ue.top=Xe.top,Ue},cn=(j,le,ye)=>j.indexOf(n.split(/(?=[A-Z])/)[0])!==-1&&j.indexOf(le.split(/(?=[A-Z])/)[0])!==-1?2*ye:0,wn=()=>!f&&(O!=null&&O.current)?ce:null,yt=(j,le,ye)=>{if(v>0){clearTimeout(Z.current.hide),clearTimeout(Z.current.show);const Te=()=>{v&&w.current&&w.current.element&&y||Sn(j,le,ye)};Z.current.hide=setTimeout(Te,v)}else Sn(j,le,ye)},Sn=(j,le,ye)=>{var we,_e,je;let Te;if(le?Te=(we=o.target)!=null&&we.current||L?ye||le.target:ce.current:Te=oe.current,z.current={...z.current,hideEvent:le,hideAnimation:j,hideTarget:Te},w.current&&((_e=w.current.element)!=null&&_e.getAttribute("sf-animate"))){const Ue=e.createRef();Ue.current=(je=w.current)==null?void 0:je.element,en.stop(Ue.current,{end:()=>{Vt(j,Te,le)}})}else Vt(j,Te,le)},Vt=(j,le,ye)=>{B==null||B(ye),Be(R)?(Lt(),Qt(j,le,ye)):R&&!B?P(!1):R||(Lt(),Qt(j,le,ye))},Qt=(j,le,ye)=>{le&&ye&&Wt(le);const Te={name:j.effect==="None"&&Qr==="Enable"?"FadeOut":h.close.effect,duration:j.duration,delay:j.delay,timingFunction:"ease-in"};w.current&&(pe(we=>({hide:Te,show:we==null?void 0:we.show})),se(!1))},Wt=j=>{st(j),Be(j.getAttribute("data-content"))||(j.setAttribute("title",j.getAttribute("data-content")),j.removeAttribute("data-content")),Pe(j)},Ft=()=>{const j=oe.current;j&&Wt(j),G&&(Se({top:"",left:""}),w.current=null)},an=()=>{w.current&&w.current.element&&N(!0)},Nn=j=>{N(!1),yt(h.close,j,oe.current)},_t=j=>{const le=j.relatedTarget;if(le){const ye=Dt(le,`.${ur}.${gs}.${Es}`);ye?(m&&ct(j),ye.addEventListener("mouseleave",xn)):(yt(h.close,j,oe.current),v===0&&h.close.effect==="None"&&Ft())}else yt(h.close,j,oe.current),Ft()},xn=j=>{var le,ye;(ye=(le=w.current)==null?void 0:le.element)==null||ye.removeEventListener("mouseleave",xn),(!j.relatedTarget||Dt(j.relatedTarget,".sf-tooltip")!==ce.current)&&(yt(h.close,j,oe.current),Ft())},ct=j=>{var Je;let le=0,ye=0;if(j.type.indexOf("touch")>-1?(j.preventDefault(),le=j.touches[0].pageX,ye=j.touches[0].pageY):(le=j.pageX,ye=j.pageY),Be(w.current))return;w.current&&(w.current.element.style.display="block");const Te=e.createRef();Te.current=(Je=w.current)==null?void 0:Je.element,en.stop(Te.current),De(j.target,n,ie.current.x,ie.current.y);const we=W(j.target),_e=Y(n,we.x,we.y),je=le+_e.left+i,Ue=ye+_e.top+l,Ie=on(je,Ue);if(ie.current.x!==Ie.horizontal||ie.current.y!==Ie.vertical){const ot=(n==null?void 0:n.indexOf("Bottom"))===0||(n==null?void 0:n.indexOf("Top"))===0?Ie.vertical+Ie.horizontal:Ie.horizontal+Ie.vertical;Ie.position=ot,De(j.target,Ie.position,Ie.horizontal,Ie.vertical);const at=Y(Ie.position,we.x,we.y);Ie.left=le+at.left-i,Ie.top=ye+at.top-l}const Xe={position:"absolute",left:Ie.left+"px",top:Ie.top+"px",zIndex:1e3,width:kn(s),height:kn(t),display:"block"};U(Ie),ue(ot=>({...ot,style:{...(ot==null?void 0:ot.style)||{},...Xe}}))},An=j=>{w.current&&w.current.element&&j.key==="Escape"&&wt()},Bt=j=>{w.current&&w.current.element&&Dt(j.target,".sf-tooltip")===null&&!g&&!E.includes("Focus")&&wt()},Ut=j=>{w.current&&w.current.element&&!g&&!m&&!Ee.current&&(Dt(j.target,`.${ur}.${gs}.${Es}`)||(se(le=>(le||P(!0),le)),Ee.current=!0,wt()))},On=j=>{var Te,we;const le=un(j),ye={};for(const _e of le){if(_e==="Custom")return;_e==="Focus"&&(!Be(o.target)&&!Be((Te=o.target)==null?void 0:Te.current)?(we=o.target)==null||we.current.addEventListener("focus",lt):ye.onFocus=lt),_e==="Click"&&(ye.onMouseDown=Tt),_e==="Hover"&&(xe.isDevice?(re.current&&(re.current.tapHoldThreshold=Oi,re.current.tapHold=Ke),ye.onTouchEnd=He):ye.onMouseOver=lt)}Q(ye)},un=j=>j?(j==="Auto"&&(j=xe.isDevice?"Hover":"Hover Focus"),j.split(" ")):[],Ln=(j,le)=>{var ye;w.current&&w.current.element&&(g||(j.type==="focus"&&(!Be(o.target)&&!Be((ye=o.target)==null?void 0:ye.current)||L?le.addEventListener("blur",_t):Q(Te=>({...Te,onBlur:_t}))),j.type==="mouseover"&&le.addEventListener("mouseleave",_t),v&&(w.current.element.addEventListener("mouseenter",an),w.current.element.addEventListener("mouseleave",Nn))),m&&c===0&&(le.addEventListener("mousemove",ct),le.addEventListener("mouseenter",ct)))},Fe=j=>{var ye,Te;const le=un(j);for(const we of le){if(we==="Custom")return;we==="Focus"&&!Be(o.target)&&!Be((ye=o.target)==null?void 0:ye.current)&&ce.current&&((Te=o.target)==null||Te.current.removeEventListener("focus",lt)),we==="Hover"&&re.current&&re.current.destroy&&re.current.destroy()}},st=j=>{if(!g){const le=un(E);for(const ye of le)ye==="Focus"&&(j.removeEventListener("blur",_t),Q(Te=>{const we={...Te};return delete we.onBlur,we})),ye==="Hover"&&!xe.isDevice&&j.removeEventListener("mouseleave",_t);v&&(j.removeEventListener("mouseenter",an),j.removeEventListener("mouseleave",Nn))}m&&(j.removeEventListener("mousemove",ct),j.removeEventListener("mouseenter",_t))},wt=()=>{yt(h.close)},dn=e.useMemo(()=>{switch(I){case dr:return Vi;case jn:return Wi;case fr:return Fi;default:return $i}},[I]),zt=()=>a.jsxs(It,{ref:w,open:X,role:"tooltip","aria-hidden":!1,animation:fe,relativeElement:K,targetRef:oe,position:{X:H.left,Y:H.top},viewPortElementRef:te.current?te:void 0,width:kn(s),height:kn(t),onOpen:Re,onClose:Le,className:[ur,A,xe.isDevice?ki:""].filter(Boolean).join(" "),...ve,...C,children:[a.jsx("div",{className:Pi,children:me()}),u&&a.jsxs("div",{ref:x,className:`${hs} ${hs}-${I} sf-pos-absolute sf-overflow-hidden ${I===fr||I===jn?"sf-tooltip-arrow-x":"sf-tooltip-arrow-y"}`,children:[a.jsx("div",{className:`${Mi}-${I} sf-pos-absolute`}),a.jsx("div",{className:`${Hi}-${I} sf-pos-absolute`,style:J,children:a.jsx(es,{d:dn})})]}),g&&a.jsx("div",{ref:V,className:`${_i}`,role:"button","aria-label":"Close Tooltip",onClick:()=>{wt()},children:a.jsx(es,{d:ji})})]});return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:ce,className:[Ii,A].filter(Boolean).join(" "),title:b,...ne,children:D}),!G&&te.current&&qt.createPortal(zt(),te.current)]})});e.memo(Fs);const En=20,yn=e.forwardRef((o,r)=>{const{open:s,header:t,footer:n,modal:i=!0,onClose:l,onDragStart:u,onDrag:f,onDragStop:d,onResizeStart:E,onResize:m,onResizeStop:g,closeIcon:h=!0,initialFocusRef:c,draggable:v=!1,resizable:D=!1,resizeHandles:O=["SouthEast"],position:_="Center",animation:T={effect:"Fade",duration:400,delay:0},target:A=typeof document<"u"?document.body:void 0,fullScreen:R=!1,className:B="",children:k,style:b,id:S=`dialog_${e.useId()}`,...L}=o,C=e.useRef(null),G=e.useRef(null),P=e.useRef(null),[X,se]=e.useState({internalOpen:s,dynamicMaxHeight:""}),{internalOpen:fe,dynamicMaxHeight:pe}=X,{locale:K}=$e(),M=e.useMemo(()=>({handle:".sf-dlg-header-content",clone:!1,dragArea:A&&A instanceof HTMLElement?A:typeof document<"u"?document.body:void 0,abort:".sf-dlg-closeicon-btn",isDragScroll:!0,dragStart:de=>{if(!v){de.cancel=!0;return}u&&u(de)},drag:de=>{v&&f&&f(de.event)},dragStop:de=>{v&&d&&d(de.event)}}),[v,A,u,f,d]),y=e.useRef(null),N=e.useRef(nn({current:v?y.current:null},M)),I=e.useMemo(()=>{const de=(W,ae)=>W===void 0?ae:W,Ce=R&&typeof window<"u"?window.innerWidth:typeof window<"u"?window.innerWidth-En*2:800,$=R&&typeof window<"u"?window.innerHeight:typeof window<"u"?window.innerHeight-En*2:600;return{minWidth:de(b==null?void 0:b.minWidth,100),minHeight:de(b==null?void 0:b.minHeight,100),maxWidth:de(b==null?void 0:b.maxWidth,Ce),maxHeight:de(b==null?void 0:b.maxHeight,$)}},[b==null?void 0:b.minWidth,b==null?void 0:b.minHeight,b==null?void 0:b.maxWidth,b==null?void 0:b.maxHeight,R]),q=e.useMemo(()=>({enabled:D&&!R,handles:O,boundary:A&&A instanceof HTMLElement?A:void 0,minWidth:I.minWidth,minHeight:I.minHeight,maxWidth:I.maxWidth,maxHeight:I.maxHeight,onResizeStart:E,onResize:m,onResizeStop:g}),[D,O,A,I]),{renderResizeHandles:H}=Po(y,q);e.useEffect(()=>(kt("dialog"),()=>{var de,Ce,$;N.current&&((de=N.current.element)!=null&&de.current)&&(($=(Ce=N.current).destroy)==null||$.call(Ce)),y.current=null,N.current=null,C.current=null,G.current=null,P.current=null,typeof window<"u"&&window.removeEventListener("resize",Q)}),[]);const U=e.useCallback(()=>{let de=[];if(y.current){const Ce=['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','[contenteditable]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","),$=y.current.querySelectorAll(Ce);de=Array.from($).filter(W=>!W.hasAttribute("disabled"))}return de},[y,k,s]);e.useEffect(()=>{if(s){if(typeof document>"u"||typeof window>"u")return;if(P.current=document.activeElement,i){const de=A&&A instanceof HTMLElement?A:document.body,Ce={overflow:de.style.overflow,paddingRight:de.style.paddingRight},$=window.innerWidth-document.documentElement.clientWidth;return de.style.overflow="hidden",de.style.paddingRight=`${$}px`,()=>{de.style.overflow=Ce.overflow,de.style.paddingRight=Ce.paddingRight,P.current&&s&&P.current.focus()}}}else P.current&&(P.current.focus(),P.current=null);return()=>{P.current&&s&&P.current.focus()}},[fe,i]),e.useEffect(()=>{s&&se(de=>({...de,internalOpen:!0}))},[s]);const ne=e.useCallback(()=>R?"100%":A&&A!==document.body&&typeof window<"u"?A.offsetHeight<window.innerHeight?A.offsetHeight-En+"px":window.innerHeight-En+"px":(typeof window<"u"?window.innerHeight-En:600)+"px",[R,A]);e.useEffect(()=>{s&&se(de=>({...de,dynamicMaxHeight:ne()}))},[s,ne]);const Q=e.useCallback(()=>{se(de=>({...de,dynamicMaxHeight:ne()}))},[ne]);e.useEffect(()=>{if(!(!s||!fe))return C.current&&se(de=>({...de,dynamicMaxHeight:ne()})),typeof window<"u"&&window.addEventListener("resize",Q),()=>{typeof window<"u"&&window.removeEventListener("resize",Q)}},[s,fe,Q,ne]);const J=e.useMemo(()=>({open:s,modal:i,draggable:v,resizable:D,resizeHandles:O,position:_,animation:T,target:A,fullScreen:R,closeIcon:h}),[s,i,v,D,O,_,T,A,R]);e.useImperativeHandle(r,()=>({...J,element:C.current}),[J]);const Se=e.useCallback(de=>{de.key==="Escape"&&l&&(de.preventDefault(),l(de),typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur())},[l]),ve=e.useCallback(de=>{var $,W,ae,ge;if(!i)return;const Ce=U();if(Ce.length!==0)switch(de.key){case"Tab":{const Ae=typeof document<"u"?document.activeElement:null,Re=Ce.indexOf(Ae);if(Re===-1){de.preventDefault(),(W=($=Ce[Ce.length-1])==null?void 0:$.focus)==null||W.call($);return}de.preventDefault();let Le;de.shiftKey?Le=Re<=0?Ce.length-1:Re-1:Le=Re>=Ce.length-1?0:Re+1,(ge=(ae=Ce[Le])==null?void 0:ae.focus)==null||ge.call(ae);break}}},[i,U]),ue=e.useCallback(()=>{var de;if(C.current&&se(Ce=>({...Ce,dynamicMaxHeight:ne()})),c!=null&&c.current)"element"in c.current&&c.current.element?c.current.element.focus():c.current.focus();else{const $=U().filter(W=>!G.current||G.current&&W!==G.current.element);$.length>0?$[0].focus():(de=G.current)!=null&&de.element&&G.current.element.focus()}},[c,ne,U]),w=e.useCallback(()=>{C.current&&se(de=>({...de,internalOpen:!1}))},[]),Z=e.useCallback(de=>{l==null||l(de)},[l]),ie=e.useCallback(de=>{i&&de.target===de.currentTarget&&(l==null||l(de))},[i,l]),re=e.useMemo(()=>Ls("dialog",{close:"Close"},K).getConstant("close"),[K]),Ne=e.useCallback(()=>a.jsx(Qe,{ref:G,icon:typeof h=="boolean"?a.jsx(Kn,{"aria-label":re}):h,title:re,"aria-label":re,color:vt.Secondary,onClick:Z,className:"sf-dlg-closeicon-btn",variant:Ge.Standard}),[h,Z,i,re]),ee=(de,Ce)=>{const $={Fade:{show:"FadeIn",hide:"FadeOut"},FadeZoom:{show:"FadeZoomIn",hide:"FadeZoomOut"},FlipLeftDown:{show:"FlipLeftDownIn",hide:"FlipLeftDownOut"},FlipLeftUp:{show:"FlipLeftUpIn",hide:"FlipLeftUpOut"},FlipRightDown:{show:"FlipRightDownIn",hide:"FlipRightDownOut"},FlipRightUp:{show:"FlipRightUpIn",hide:"FlipRightUpOut"},FlipXDown:{show:"FlipXDownIn",hide:"FlipXDownOut"},FlipXUp:{show:"FlipXUpIn",hide:"FlipXUpOut"},FlipYLeft:{show:"FlipYLeftIn",hide:"FlipYLeftOut"},FlipYRight:{show:"FlipYRightIn",hide:"FlipYRightOut"},SlideBottom:{show:"SlideBottomIn",hide:"SlideBottomOut"},SlideLeft:{show:"SlideLeftIn",hide:"SlideLeftOut"},SlideRight:{show:"SlideRightIn",hide:"SlideRightOut"},SlideTop:{show:"SlideTopIn",hide:"SlideTopOut"},Zoom:{show:"ZoomIn",hide:"ZoomOut"},None:{show:"FadeIn",hide:"FadeOut"}},W={show:"FadeIn",hide:"FadeOut"},ae=$[de]||W;return Ce?ae.show:ae.hide},oe=e.useMemo(()=>["sf-control","sf-dialog",i?"sf-dlg-modal":"",R?"sf-dlg-fullscreen":"",D&&!R?"sf-dlg-resizable":"",B].filter(Boolean).join(" "),[i,R,B,D]),ce=e.useMemo(()=>{if(b!=null&&b.top&&(b!=null&&b.left)||_===null)return;const[de,Ce]=_==null?void 0:_.split(/(?=[A-Z])/);return de&&Ce?`sf-dlg-${de==null?void 0:de.toLowerCase()}-${Ce==null?void 0:Ce.toLowerCase()}`:"sf-dlg-center"},[_,b]),x=e.useMemo(()=>{const[de,Ce]=_?_==null?void 0:_.split(/(?=[A-Z])/):[];return de&&Ce?{X:de,Y:Ce}:{X:"Center",Y:"Center"}},[_]),V=e.useMemo(()=>["sf-dlg-container",ce].filter(Boolean).join(" "),[ce]),z=e.useMemo(()=>{const de={...b};return delete de.zIndex,{maxHeight:R?"100%":pe,position:de.left&&de.top?"absolute":"relative",...!de.left&&!de.top?{top:"0px",left:"0px"}:{},...R?{width:"100vw",height:"100vh",maxWidth:"100%",maxHeight:"100%"}:{},...!R&&D?{minWidth:I.minWidth,minHeight:I.minHeight,maxWidth:I.maxWidth,maxHeight:I.maxHeight}:{},...de}},[_,R,b,pe,D,I]),{zIndexBase:te,zIndexPopup:he,zIndexOverlay:Ee}=e.useMemo(()=>{let de=typeof(b==null?void 0:b.zIndex)=="number"?b.zIndex:1e3;return de===1e3&&C.current&&(de=Is(C.current)),{zIndexBase:Math.max(2,de),zIndexPopup:Math.max(3,de+1),zIndexOverlay:Math.max(1,de-1)}},[b==null?void 0:b.zIndex,s,fe,C.current]);if(!fe)return null;const be=a.jsxs("div",{className:V,ref:C,style:{zIndex:te,position:typeof document<"u"&&A!==document.body?"absolute":"fixed"},onKeyDown:Se,children:[a.jsxs(It,{ref:de=>{y.current=de==null?void 0:de.element},open:s,position:x,zIndex:he,relateTo:A,onOpen:ue,onClose:w,className:oe,animation:{show:{name:ee(T.effect,!0),duration:T.effect==="None"?0:T.duration,delay:T.delay,timingFunction:"ease-out"},hide:{name:ee(T.effect,!1),duration:T.effect==="None"?0:T.duration,delay:T.delay,timingFunction:"ease-in"}},style:z,role:"dialog",id:S,...k&&{"aria-describedby":`${S}_dialog-content`},...t&&{"aria-labelledby":`${S}_dialog-header`},...!t&&{"aria-label":"Dialog"},"aria-modal":i?"true":"false",tabIndex:-1,onKeyDown:ve,...L,children:[(t||h)&&a.jsxs("div",{className:"sf-dlg-header-content",id:`${S}_dialog-header`,children:[h&&Ne(),t&&a.jsx("div",{className:"sf-dlg-header sf-ellipsis",id:`${S}_title`,children:t})]}),a.jsx("div",{className:"sf-dlg-content",id:`${S}_dialog-content`,children:k}),n&&a.jsx("div",{className:"sf-dlg-footer-content sf-content-end",children:n}),D&&!R&&H(a.jsx(Mo,{fill:"currentColor"}))]}),i&&a.jsx("div",{className:"sf-dlg-overlay",style:{zIndex:Ee},onClick:ie,role:"presentation"})]}),ke=A&&A instanceof HTMLElement?A:typeof document<"u"?document.body:void 0;return qt.createPortal(be,ke)});yn.displayName="Dialog";e.memo(yn);const rn=o=>o?o.getHours()*3600+o.getMinutes()*60+o.getSeconds():-1,Bs=(o,r)=>o.getFullYear()===r.getFullYear()&&o.getMonth()===r.getMonth()&&o.getDate()===r.getDate(),Us=(o,r,s)=>{if(!r&&!s)return!0;const t=rn(o),n=!!r,i=!!s,l=n?rn(r):-1,u=i?rn(s):-1;return n&&i?Bs(r,s)?l===u?t===l:l>u?!1:t>=l&&t<=u:l===u?t===l:l>u?t>=l||t<=u:t>=l&&t<=u:n?t>=l:i?t<=u:!0},Bi=(o,r,s)=>!r&&!s?o:o.filter(t=>Us(t,r??null,s??null)),Ui=(o,r,s)=>{const t=!!r,n=!!s;if(!t&&!n)return o;const i=rn(o),l=t?rn(r):-1,u=n?rn(s):Number.MAX_SAFE_INTEGER;if(t&&n&&Bs(r,s)&&l>u)return null;if(t&&i<l){const f=r,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(n&&i>u){const f=s,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(t&&n&&l>u&&i>u&&i<l){const f=l-i,d=i-u,E=f<=d?r:s,m=new Date(o);return m.setHours(E.getHours(),E.getMinutes(),E.getSeconds(),0),m}return o},zs=e.forwardRef((o,r)=>{const{times:s,selected:t,onSelect:n,formatter:i,itemTemplate:l,idBase:u,listLabel:f="Time options",ariaHidden:d=!1,className:E="sf-timepicker-list",sizeClass:m="",isOpen:g=!1,dir:h="ltr"}=o,c=e.useRef(null),v=e.useRef([]),D=e.useRef(!1),[O,_]=e.useState(null),T=s.length,A=e.useCallback(K=>i?i(K):K.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),[i]),R=e.useCallback(()=>t?s.findIndex(K=>K.getHours()===t.getHours()&&K.getMinutes()===t.getMinutes()):-1,[s,t]),B=e.useCallback(K=>{if(K==null||K<0)return;const M=v.current[K],y=c.current;if(!M||!y)return;const N=M.offsetTop,I=M.offsetHeight||32,q=y.clientHeight||0,H=Math.max(0,N-Math.max(0,(q-I)/2));y.scrollTop=H},[]),k=e.useCallback(()=>{const K=R(),M=K>=0?K:s.length?0:null;if(M==null||M<0)return;const y=v.current[M],N=c.current;if(!y||!N)return;const I=y.offsetTop,q=y.offsetHeight||32,H=Math.max(0,I-Math.max(0,(N.clientHeight-q)/2));N.scrollTop=H,_(M)},[R,s.length]);e.useEffect(()=>{g&&!D.current&&(D.current=!0,k()),g||(D.current=!1,_(null))},[g,k]);const b=e.useCallback(()=>{if(!T)return;const K=O!=null&&O>=0&&O<T?O:R(),M=K<0?0:(K+1)%T;_(M),B(M)},[T,O,R,B]),S=e.useCallback(()=>{if(!T)return;const K=O!=null&&O>=0&&O<T?O:R(),M=K<0?T-1:(K-1+T)%T;_(M),B(M)},[T,O,R,B]),L=e.useCallback(()=>{T&&(_(0),B(0))},[T,B]),C=e.useCallback(()=>{T&&(_(T-1),B(T-1))},[T,B]),G=e.useCallback(()=>{if(!T)return;const K=O!=null&&O>=0&&O<T?O:R();K==null||K<0||n(s[K])},[T,O,R,n,s]),P=e.useCallback(K=>{switch(K.key){case"ArrowDown":K.preventDefault(),b();break;case"ArrowUp":K.preventDefault(),S();break;case"Home":K.preventDefault(),L();break;case"End":K.preventDefault(),C();break;case"Enter":K.preventDefault(),G();break}},[b,S,L,C,G]);e.useImperativeHandle(r,()=>({ensureSelectedVisible:k,selectFocused:G,focusNext:b,focusPrev:S,focusFirst:L,focusLast:C,getFocusedIndex:()=>O,handleKeyDown:K=>P(K)}),[k,G,b,S,L,C,O,P]);const X=`${u}_options`,se=e.useMemo(()=>O!=null&&O>=0&&O<T?`${u}_option_${O}`:void 0,[u,O,T]),fe=[E,m,"sf-ul",h==="rtl"?"sf-rtl":""].filter(Boolean).join(" "),pe=T===0;return a.jsx("ul",{ref:c,className:fe,role:"listbox","aria-label":f,"aria-activedescendant":se,"aria-hidden":d,id:X,tabIndex:0,onMouseDown:K=>K.preventDefault(),onKeyDown:P,children:pe?a.jsx("li",{className:"sf-timepicker-item sf-timepicker-empty",role:"note",tabIndex:-1,children:"No available times"}):s.map((K,M)=>{const y=A(K),N=!!(t&&K.getHours()===t.getHours()&&K.getMinutes()===t.getMinutes()),I=O===M,q=l?l(K,N,I,M):y;return a.jsx("li",{ref:H=>{v.current[M]=H},className:["sf-timepicker-item",N?"sf-active":"",I?"sf-focus":""].filter(Boolean).join(" "),role:"option","data-value":y,id:`${u}_option_${M}`,"aria-selected":N,onClick:H=>n(K,H),onFocus:()=>_(M),onBlur:()=>_(null),tabIndex:0,children:q},M)})})});zs.displayName="TimeList";function zi(o){const{step:r,minTime:s,maxTime:t,locale:n,timeFormat:i}=o,[l,u]=e.useState([]),f=e.useRef(null);e.useEffect(()=>{const v=[],D=new Date;D.setHours(0,0,0,0);const O=new Date;O.setHours(23,59,59,999);const _=new Date(D);for(;_<=O;)v.push(new Date(_)),_.setMinutes(_.getMinutes()+r);u(v)},[r]);const d=e.useMemo(()=>Bi(l,s,t),[l,s,t]),E=e.useCallback(v=>!v||isNaN(v.getTime())?"":ft(v,{format:i||"h:mm a",type:"time",locale:n||"en-US"}),[n,i]),m=e.useCallback((v,D=!1)=>{if(!v||!v.trim())return null;const O=v.replace(/(am|pm|Am|aM|pM|Pm)/g,T=>T.toUpperCase()).trim(),_=[i,"h:mm a","h:mm:ss a","HH:mm","HH:mm:ss"].filter(Boolean);for(const T of _){const A=Ho(O,{format:T,type:"time",locale:n||"en-US"});if(A&&!isNaN(A.getTime())&&(!D||ft(A,{format:T,type:"time",locale:n||"en-US"}).trim()===O))return A}if(!D){const A=new Date().toLocaleDateString(n||"en-US"),R=new Date(`${A} ${O}`);if(!isNaN(R.getTime()))return R}return null},[n,i]),g=e.useCallback(v=>!v||isNaN(v.getTime())?!1:Us(v,s||null,t||null),[s,t]),h=e.useCallback(()=>{var v,D;(D=(v=f.current)==null?void 0:v.ensureSelectedVisible)==null||D.call(v)},[]),c=e.useCallback((v,D)=>{D&&f.current&&typeof f.current.handleKeyDown=="function"&&f.current.handleKeyDown(v)},[]);return{displayedTimes:d,formatTime:E,parseTime:m,isValidTime:g,timeListRef:f,ensureSelectedVisible:h,forwardListKeyDown:c}}const Dr=e.forwardRef((o,r)=>{const{value:s,id:t=`timepicker_${e.useId()}`,defaultValue:n,format:i="h:mm a",minTime:l,maxTime:u,step:f=30,placeholder:d="Choose a time",variant:E=Ge.Standard,size:m=Kt.Medium,readOnly:g=!1,disabled:h=!1,itemTemplate:c,clearButton:v=!0,className:D="",zIndex:O=1e3,strictMode:_=!1,open:T,pickerIcon:A=!0,editable:R=!0,fullScreenMode:B=!1,pickerVariant:k=pn.Auto,openOnFocus:b=!1,required:S=!1,valid:L,validationMessage:C="",validityStyles:G=!0,labelMode:P="Never",onChange:X,onOpen:se,onClose:fe,...pe}=o,[K,M]=e.useState(s??n??null),[y,N]=e.useState(!1),I=e.useRef(null),q=e.useRef(null),H=e.useRef(null),U=e.useRef(null),{dir:ne,locale:Q}=$e(),J=s!==void 0,Se=J?s||null:K,ve=k===pn.Popup||k===pn.Auto&&xe.isDevice,ue=k===pn.Inline||k===pn.Auto&&!xe.isDevice,{displayedTimes:w,formatTime:Z,parseTime:ie,isValidTime:re,timeListRef:Ne,ensureSelectedVisible:ee,forwardListKeyDown:oe}=zi({step:f,minTime:l,maxTime:u,locale:Q,timeFormat:i}),ce=e.useCallback((me,Oe)=>{J||M(me),X&&X({value:me,event:Oe})},[J,X,S,L]),x=jo({locale:Q,inputRef:q,placeholder:d,placeholderKey:"timepicker",disabled:h,readOnly:g,openOnFocus:b,strictMode:_,required:S,valid:L,validationMessage:C,value:Se,formatValue:Z,parseInput:me=>ie(me,!1),isValid:me=>re(me),commitValue:ce,onOpen:()=>{z()}}),{isOpen:V,showPopup:z,hidePopup:te,togglePopup:he,zIndexPopup:Ee}=$o({open:T,defaultOpen:!1,disabled:h,readOnly:g,onOpen:se,onClose:fe,containerRef:I,contentRefs:[H],extraInsideRefs:[U],inputRef:q,baseZIndex:O}),be=e.useCallback((me,Oe)=>{J||x.setInputValue(Z(me)),ce(me,Oe),te()},[Z,ce,te,J,x]),ke=e.useCallback(()=>{Se?(x.setInputValue(Z(Se)),x.setIsInputValid(!0)):(x.setInputValue(""),x.setIsInputValid(!S))},[_,Se,Z,S,ce,x]),de=e.useCallback((me,Oe)=>{const Pe=Ui(me,l??null,u??null);Pe?(x.setInputValue(Z(Pe)),ce(Pe,Oe),x.setIsInputValid(!0)):(x.setInputValue(""),ce(null,Oe),x.setIsInputValid(!S))},[_,l,u,S,Z,ce,x]),Ce=e.useCallback(me=>{const Oe=x.inputValue;if(Oe.trim()===""){x.inputValue!==""&&x.setInputValue(""),_&&S?Se?(x.setInputValue(Z(Se)),x.setIsInputValid(!0)):x.setIsInputValid(!S):(ce(null,me),x.setIsInputValid(!S));return}if(_){const Ke=ie(Oe,!1);if(Ke===null){ke();return}if(re(Ke)){const Tt=Z(Ke);x.setInputValue(Tt),ce(Ke,me),x.setIsInputValid(!0)}else de(Ke,me);return}const Pe=ie(Oe,!0);Pe&&re(Pe)?(ce(Pe,me),x.setIsInputValid(!0)):x.setIsInputValid(!1)},[x,_,S,Se,ie,re,Z,ce,ke,de]),$=e.useCallback(me=>{switch(me.key){case"ArrowDown":(me.altKey||me.metaKey)&&(me.preventDefault(),z());break;case"ArrowUp":(me.altKey||me.metaKey)&&(me.preventDefault(),te());break;case"Enter":V||(me.preventDefault(),Ce(me));break}oe(me,V)},[V,z,te,Ce,oe]),W=e.useCallback(me=>{if(!me.trim())return!S;if(/^\d{1,2}$/.test(me)){const Pe=parseInt(me,10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:$/.test(me)){const Pe=parseInt(me.split(":")[0],10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:\d{1,2}$/.test(me)){const[Pe,Ke]=me.split(":"),He=parseInt(Pe,10),Tt=parseInt(Ke,10);return He>=0&&He<=23&&Tt>=0&&Tt<=59}const Oe=ie(me);return Oe!==null&&re(Oe)},[ie,re,S]),ae=e.useCallback(me=>{const Oe=me.target.value;x.setInputValue(Oe),L===void 0&&x.setIsInputValid(W(Oe))},[L,W]);e.useEffect(()=>{kt("timepicker")},[]);const ge={placeholder:d,format:i,labelMode:P,disabled:h,readOnly:g,editable:R,openOnFocus:b,open:T,clearButton:v,zIndex:O,strictMode:_,value:Se,minTime:l,maxTime:u,step:f,required:S,valid:L,validationMessage:C,validityStyles:G};e.useImperativeHandle(r,()=>({...ge,element:I.current}),[ge]);const Ae=e.useCallback(()=>{var me;he(),N(!0),(me=q.current)==null||me.focus()},[he]),Re=e.useCallback(me=>{me.preventDefault(),x.handleClear(),te()},[x,te]),Le=["sf-input-group sf-control","sf-timepicker",h?"sf-disabled":"",g?"sf-readonly":"",V||x.isFocused?"sf-input-focus":"",P!=="Never"?"sf-float-input":"",ne==="rtl"?"sf-rtl":"",m===Kt.Small?"sf-small":m===Kt.Large?"sf-large":"sf-medium",!x.isInputValid&&G?"sf-error":"",E&&E.toLowerCase()!=="standard"?E.toLowerCase()==="outlined"?"sf-outline":`sf-${E.toLowerCase()}`:"",D].filter(Boolean).join(" "),Y=m.toLowerCase().substring(0,2),De=e.useMemo(()=>a.jsx(zs,{ref:Ne,times:w,selected:Se,onSelect:(me,Oe)=>{be(me,Oe)},formatter:Z,itemTemplate:c,idBase:`${t}`,className:"sf-timepicker-list",sizeClass:`sf-timepicker-list-${Y}`,isOpen:V,dir:ne}),[w,Se,Z,c,V,ne,be,Y,t,Ne]);return a.jsxs("span",{ref:I,className:Le,...pe,children:[a.jsx(As,{ref:q,id:t,className:"sf-timepicker",placeholder:P==="Never"?x.getPlaceholder:"",disabled:h,readOnly:g||!R,onFocus:x.handleInputFocus,onBlur:me=>{x.setIsFocused(!1),Ce(me),te()},value:x.inputValue,onChange:R&&!g&&!h?ae:void 0,role:"combobox","aria-haspopup":"listbox",autoComplete:"off","aria-expanded":V,"aria-disabled":h,"aria-controls":V?`${t}_options`:void 0,"aria-label":x.getPlaceholder||"Time picker input",onKeyDown:$,tabIndex:0,required:S}),P!=="Never"&&Ar(P,!1,x.inputValue,d,t),v&&x.inputValue&&(x.isFocused||V)&&a.jsx("span",{className:"sf-clear-icon sf-input-icon","aria-label":"clear time value",role:"button",onMouseDown:Re,children:a.jsx(Kn,{})}),a.jsx("span",{className:`sf-input-icon sf-time-icon sf-icons ${y?"sf-active":""}`,"aria-label":"select time",role:"button",onClick:Ae,onMouseDown:me=>{me.preventDefault()},children:A===!0?a.jsx(fi,{}):A}),V&&qt.createPortal(B&&xe.isDevice?a.jsxs("div",{ref:U,className:"sf-timepicker-mob sf-control",style:{zIndex:O},role:"dialog","aria-modal":"true","aria-label":"Time selection",children:[a.jsxs("div",{className:"sf-timepicker-header",children:[a.jsx(Qe,{variant:Ge.Standard,onClick:te,children:a.jsx(Kn,{})}),a.jsx("span",{className:"sf-timepicker-title",children:"Select Time"})]}),De]}):a.jsxs(a.Fragment,{children:[ve&&a.jsxs("div",{className:"sf-timepicker-popup-wrap sf-picker-popup",style:{zIndex:Ee.toString()},children:[a.jsx("div",{className:"sf-overlay"}),a.jsx(It,{ref:H,className:"sf-timepicker sf-popup sf-content-center",open:V,zIndex:Ee,onOpen:()=>{ee()},relateTo:document.body,style:{top:"0px",left:"0px",position:"relative"},position:{X:"center",Y:"center"},collision:{X:it.Fit,Y:it.Fit},"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:De})]}),ue&&a.jsx(It,{ref:H,className:"sf-timepicker sf-popup",open:V,zIndex:Ee,onOpen:()=>{ee()},relateTo:I.current,position:{X:"left",Y:"bottom"},collision:{X:it.Flip,Y:it.Flip},offsetY:4,"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:De})]}),document.body)]})});Dr.displayName="TimePicker";const p={ALL_DAY_APPOINTMENT_SECTION:"sf-all-day-appointment-section",ALL_DAY_APPOINTMENT:"sf-all-day-appointment",ALL_DAY_CONTAINER:"sf-all-day-container",ALL_DAY_CELL:"sf-all-day-cell",ALL_DAY_ROW:"sf-all-day-row",ALL_DAY_TIMEZONE_ROW:"sf-all-day-time-zone-row",APPOINTMENT:"sf-appointment",APPOINTMENT_ACTIVE:"sf-appointment-active",APPOINTMENT_COLLAPSE:"sf-appointment-collapse",APPOINTMENT_DETAILS:"sf-appointment-details",APPOINTMENT_EXPAND:"sf-appointment-expand",APPOINTMENT_WRAPPER:"sf-appointment-wrapper",BOTTOM_RESIZE_HANDLER:"sf-bottom-handler",BLOCK_INDICATOR:"sf-block-indicator",BLOCK_APPOINTMENT:"sf-block-appointment",CALENDAR_POPUP_CONTAINER:"sf-calendar-popup-container",CANCEL_EVENT:"sf-cancel-event",CELL_POPUP:"sf-cell-popup",CELL_TIME:"sf-cell-time",CONTENT_RIGHT:"sf-content-end sf-content-right",CONTENT_SECTION:"sf-content-section",CONTENT_TABLE:"sf-content-table",CONTENT_WRAP:"sf-content-wrap",CONTROL:"sf-control",CURRENT_TIME:"sf-current-time",CURRENT_TIMELINE:"sf-current-timeline",DATE_HEADER:"sf-date-header",DATE_HEADER_CONTAINER:"sf-date-header-container",DATEPICKER_BUTTON:"sf-datepicker-button",DAY_CLONE_CONTAINER:"sf-day-clone-container",DAY_VIEW:"sf-day-view",DAY_WRAPPER:"sf-day-wrapper",DIALOG:"sf-scheduler-dialog",DIALOG_CONTENT:"sf-dialog-content",DELETE_EVENT:"sf-delete-event",DESCRIPTION:"sf-description",DESCRIPTION_CONTAINER:"sf-description-container",DESCRIPTION_ROW:"sf-description-row",DISPLAY_FLEX:"sf-display-flex",DOWN_ARROW_ICON:"sf-down-icon",DRAGGING:"sf-dragging",DRAG_CLONE:"sf-drag-clone",SCHEDULER_CURSOR_MOVE:"sf-scheduler-cursor-move",SCHEDULER_CURSOR_NOT_ALLOWED:"sf-cursor-not-allowed",SCHEDULER_CURSOR_DEFAULT:"sf-cursor-default",EXTERNAL_DRAG_CLONE:"sf-external-drag-clone",EVENT_RESIZE_CLASS:"sf-event-resize",EVENT_CLONE:"sf-event-clone",EDIT_EVENT:"sf-edit-event",EDITOR_FIELDS_ROW:"sf-editor-fields-row",EDITOR_FIELD_CONTAINER:"sf-editor-field-container",ELLIPSIS:"sf-ellipsis",END_DATE_CONTAINER:"sf-end-date-container",END_TIME_CONTAINER:"sf-end-time-container",END_ROW:"sf-end-row",EVENT_ALLDAY:"sf-event-all-day",EVENT_CONTAINER:"sf-event-container",EVENT_DESCRIPTION:"sf-event-description",EVENT_END_DATE:"sf-event-end-date",EVENT_END_TIME:"sf-event-end-time",EVENT_LOCATION:"sf-event-location",EVENT_POPUP:"sf-event-popup",EVENT_START_DATE:"sf-event-start-date",EVENT_START_TIME:"sf-event-start-time",EVENT_SUBJECT:"sf-event-subject",EVENT_TIME:"sf-event-time",FORM_CONTAINER:"sf-form-container",HORIZONTAL_RESIZE_INNER:"sf-horizontal-resize",HEADER_CELLS:"sf-header-cells",HEADER_DATE:"sf-header-date",HEADER_DAY:"sf-header-day",HEADER_ROW:"sf-header-row",HEADER_SECTION:"sf-header-section",ICONS:"sf-icons",INDICATOR:"sf-indicator",LEFT_ARROW_ICON:"sf-left-icon",LEFT_INDENT:"sf-left-indent",LINK:"sf-link",LOCATION:"sf-location",LOCATION_CONTAINER:"sf-location-container",LEFT_RESIZE_HANDLER:"sf-left-handler",MAIN_SCROLL_CONTAINER:"sf-main-scroll-container",MONTH_VIEW:"sf-month-view",MONTH_EVENT:"sf-month-event",MORE_EVENT_CONTENT:"sf-more-event-content",MORE_EVENT_DATE_HEADER:"sf-more-event-date-header",MORE_EVENT_HEADER:"sf-more-event-header",MORE_EVENT_POPUP:"sf-more-event-popup",MORE_INDICATOR:"sf-more-indicator",MORE_POPUP_WRAPPER:"sf-more-popup-wrapper",MOB_RESIZE_DOT:"sf-mob-resize-dot",MOBILE_POPUP:"sf-mobile-popup",NEXT_ICON:"sf-next-icon",NO_POINTER:"sf-no-pointer",POPUP:"sf-popup",POPUP_CELL_HEADER:"sf-popup-cell-header",POPUP_CLOSE:"sf-popup-close",POPUP_CONTENT:"sf-quickinfo-popup-content",POPUP_CELL_SUBJECT:"sf-popup-cell-subject",POPUP_DESCRIPTION_TEXT:"sf-popup-description-text",POPUP_EVENT_SUBJECT:"sf-popup-event-subject",POPUP_FOOTER:"sf-quickinfo-popup-footer",POPUP_HEADER:"sf-quickinfo-popup-header",POPUP_HEADER_WRAP:"sf-header-icon-wrapper",POPUP_INPUT_WRAP:"sf-input-wrap",POPUP_LOCATION_TEXT:"sf-popup-location-text",POPUP_MORE_DETAILS:"sf-popup-more-details",POPUP_TIME_TEXT:"sf-popup-time-text",POPUP_WRAPPER:"sf-quickinfo-popup-wrapper",POSITION_ABSOLUTE:"sf-pos-absolute",PREVIOUS_ICON:"sf-previous-icon",PREVIOUS_TIMELINE:"sf-previous-timeline",QUICK_INFO_WRAPPER:"sf-quick-info-wrapper",RIGHT_ARROW_ICON:"sf-right-icon",RIGHT_SECTION:"sf-right-section",EVENT_RECURRENCE_ICON_CLASS:"sf-event-recurrence-icon",EVENT_RECURRENCE_EDIT_ICON_CLASS:"sf-event-recurrence-edit-icon",ROUND:"sf-round",RTL:"sf-rtl",RIGHT_RESIZE_HANDLER:"sf-right-handler",RESIZING:"sf-resizing",RESIZE_CONTAINER:"sf-resize-container",SAVE_EVENT:"sf-save-event",SCHEDULER:"sf-scheduler",SCHEDULER_CALENDAR:"sf-scheduler-calendar",SCHEDULER_TABLE:"sf-scheduler-table",SCHEDULER_TOOLBAR_CONTAINER:"sf-scheduler-toolbar-container",SCHEDULER_TOOLTIP:"sf-scheduler-tooltip",SCHEDULER_TOOLTIP_SUBJECT:"sf-scheduler-tooltip-subject",SCHEDULER_TOOLTIP_TEXT:"sf-scheduler-tooltip-text",SELECTED_CELL:"sf-selected-cell",START_DATE_CONTAINER:"sf-start-date-container",START_TIME_CONTAINER:"sf-start-time-container",START_ROW:"sf-start-row",STICKY_HEADER:"sf-sticky-header",SUBJECT:"sf-subject",SUBJECT_CONTAINER:"sf-subject-container",TABLE_CONTAINER:"sf-table-container",TABLE_WRAP:"sf-table-wrap",TEXT_CENTER:"sf-text-center",TIME:"sf-time",TIME_CELLS_WRAP:"sf-time-cells-wrap",TIME_SLOT_CLONE_CONTAINER:"sf-time-slot-clone-container",TIME_SLOTS:"sf-time-slots",TITLE_LOCATION_ROW:"sf-title-location-row",TODAY:"sf-today",TODAY_BUTTON:"sf-today-button",TOP_RESIZE_HANDLER:"sf-top-handler",UP_ARROW_ICON:"sf-up-icon",VERTICAL_RESIZE_INNER:"sf-vertical-resize",VERTICAL_VIEW:"sf-vertical-view",VIEW_BUTTON:"sf-view-button",WEEK_NUMBER:"sf-week-number",WEEK_NUMBER_WRAPPER:"sf-week-number-wrapper",WEEK_VIEW:"sf-week-view",WORK_CELLS_CONTAINER:"sf-work-cells-container",WORK_CELLS_ROW:"sf-work-cells-row",WORK_WEEK_VIEW:"sf-work-week-view",WORK_CELLS:"sf-work-cells",WORK_DAYS:"sf-work-days"},Yi=o=>{const{className:r,selectedDate:s,view:t,onSelectedDateChange:n,onViewChange:i,viewComponents:l,defaultSelectedDate:u,defaultView:f}=o,d=o.selectedDate!==void 0,E=o.view!==void 0,m=e.useMemo(()=>{const ne=d?s:u,Q=ne?new Date(ne):new Date;return isNaN(Q.getTime())?new Date:Q},[s,u,d]),g=e.useMemo(()=>E?t:f,[E,t,f]),[h,c]=e.useState(m),[v,D]=e.useState(g),O=e.useRef(g),[_,T]=e.useState([]),[A,R]=e.useState(!1),[B,k]=e.useState(Un.Month);e.useEffect(()=>{d&&c(m)},[m,d]),e.useEffect(()=>{E&&D(g)},[g,E]);const b=e.useCallback(ne=>{E||D(ne),i&&i({value:ne})},[i,E]);e.useEffect(()=>{O.current!==t&&t!==v&&t&&l.some(J=>J.name===t)&&D(t),O.current=t||g},[t,v,l,g]),e.useEffect(()=>{if(v==="Week"&&l.length>0&&!l.some(Q=>Q.viewType==="Week")){b(l[0].name);return}},[v,l,b]),e.useEffect(()=>{const ne=pt.findViewByNameOrType(l,v);if(ne){const Q=ne.viewType==="Month"?Un.Year:Un.Month;k(Q)}},[l,v]);const{locale:S,dir:L}=$e(),C=e.useMemo(()=>{if(!_||_.length===0)return"";const ne=pt.findViewByNameOrType(l,v);if(!ne)return"";const Q=ne.component.props;return ne.viewType==="Month"?F.getMonthRangeText(h,ne.interval,Q.displayDate,Q.numberOfWeeks,Q.dateFormat||o.dateFormat,_,S):F.formatDateRange(S,_[0],_[_.length-1])},[_,l,v,h,S,o.dateFormat]),G=ne=>{d||c(ne),n&&n({value:ne})},P=e.useCallback(()=>{const ne=[];return l.forEach(Q=>{ne.push({viewType:Q.viewType,name:Q.name,displayName:Q.displayName,component:Q.component,interval:Q.interval})}),ne},[l]),X=ne=>{b(ne)},se=()=>({height:o.height,width:o.width,selectedDate:h,view:v,eventSettings:o.eventSettings,timeScale:o.timeScale,workHours:o.workHours,startHour:o.startHour,endHour:o.endHour,showWeekend:o.showWeekend,firstDayOfWeek:o.firstDayOfWeek,workDays:o.workDays,showTimeIndicator:o.showTimeIndicator,dateFormat:o.dateFormat,timeFormat:o.timeFormat,showWeekNumber:o.showWeekNumber,eventOverlap:o.eventOverlap,rowAutoHeight:o.rowAutoHeight,readOnly:o.readOnly,cell:o.cell,dateHeader:o.dateHeader,headerIndent:o.headerIndent,quickInfo:o.quickInfo,editor:o.editor,onEditorSubmit:o.onEditorSubmit,showQuickInfoPopup:o.showQuickInfoPopup,header:o.header,keyboardNavigation:o.keyboardNavigation,onDataRequest:o.onDataRequest,onSelectedDateChange:ne=>G(ne.value),onViewChange:ne=>b(ne.value),onCellClick:o.onCellClick,onCellDoubleClick:o.onCellDoubleClick,onEventClick:o.onEventClick,onEventDoubleClick:o.onEventDoubleClick,onDataChangeStart:o.onDataChangeStart,onDataChangeComplete:o.onDataChangeComplete,eventDrag:o.eventDrag,eventResize:o.eventResize,onResizeStart:o.onResizeStart,onResizing:o.onResizing,onResizeStop:o.onResizeStop,onDragStart:o.onDragStart,onDrag:o.onDrag,onDragStop:o.onDragStop,onMoreEventsClick:o.onMoreEventsClick,enableRecurrenceValidation:o.enableRecurrenceValidation,weekRule:o.weekRule}),pe=(()=>{var ve,ue,w,Z;const ne=pt.findViewByNameOrType(l,v);if(!ne)return{};const Q=ne.component.props||{},J=Hs(Or,se());typeof J.eventDrag=="boolean"?J.eventDrag={enable:J.eventDrag,externalDragAndDrop:!1}:J.eventDrag={...J.eventDrag,enable:J.eventDrag.enable,externalDragAndDrop:J.eventDrag.externalDragAndDrop??!1},typeof J.eventResize=="boolean"?J.eventResize={enable:J.eventResize,startResizable:!0,endResizable:!0}:J.eventResize={...J.eventResize,enable:J.eventResize.enable,startResizable:J.eventResize.startResizable??!0,endResizable:J.eventResize.endResizable??!0};const Se={height:J.height,width:J.width,selectedDate:F.setValidDate(J.selectedDate),view:J.view,eventSettings:J.eventSettings,workHours:J.workHours,showTimeIndicator:J.showTimeIndicator,rowAutoHeight:J.rowAutoHeight,eventTemplate:Q.eventTemplate,readOnly:Q.readOnly??J.readOnly,header:J.header,showQuickInfoPopup:J.showQuickInfoPopup,displayDate:F.setValidDate(Q.displayDate),numberOfWeeks:Q.numberOfWeeks,weekDay:Q.weekDay,showTrailingAndLeadingDates:Q.showTrailingAndLeadingDates,cellHeader:Q.cellHeader,interval:Q.interval??ne.interval,displayName:Q.displayName??ne.displayName,maxEventsPerRow:Q.maxEventsPerRow,dateHeader:Q.dateHeader??J.dateHeader,headerIndent:Q.headerIndent??J.headerIndent,cell:Q.cell??J.cell,timeScale:Q.timeScale??J.timeScale,startHour:Q.startHour??J.startHour,endHour:Q.endHour??J.endHour,showWeekend:Q.showWeekend??J.showWeekend,firstDayOfWeek:F.setValidFirstDayOfWeek(Q.firstDayOfWeek,J.firstDayOfWeek),workDays:Q.workDays??J.workDays,dateFormat:Q.dateFormat??J.dateFormat,timeFormat:Q.timeFormat??J.timeFormat,showWeekNumber:Q.showWeekNumber??J.showWeekNumber,eventOverlap:Q.eventOverlap??J.eventOverlap,quickInfo:Q.quickInfo??J.quickInfo,editor:Q.editor??J.editor,onEditorSubmit:J.onEditorSubmit,onDataRequest:J.onDataRequest,onSelectedDateChange:J.onSelectedDateChange,onViewChange:J.onViewChange,onCellClick:J.onCellClick,onCellDoubleClick:J.onCellDoubleClick,onEventClick:J.onEventClick,onEventDoubleClick:J.onEventDoubleClick,onDataChangeStart:J.onDataChangeStart,onDataChangeComplete:J.onDataChangeComplete,keyboardNavigation:J.keyboardNavigation,eventDrag:J.eventDrag,eventResize:J.eventResize,onResizeStart:J.onResizeStart,onResizing:J.onResizing,onResizeStop:J.onResizeStop,onDragStart:J.onDragStart,onDrag:J.onDrag,onDragStop:J.onDragStop,onMoreEventsClick:J.onMoreEventsClick,enableRecurrenceValidation:J.enableRecurrenceValidation,handleCurrentViewChange:b,getAvailableViews:P,weekRule:J.weekRule};return(Se.startHour!=="00:00"||Se.endHour!=="24:00")&&(Se.startHourTuple=[Number((ve=Se.startHour)==null?void 0:ve.split(":")[0]),Number((ue=Se.startHour)==null?void 0:ue.split(":")[1])],Se.endHourTuple=[Number((w=Se.endHour)==null?void 0:w.split(":")[0]),Number((Z=Se.endHour)==null?void 0:Z.split(":")[1])]),Se})();e.useEffect(()=>{const ne=pt.findViewByNameOrType(l,v);if(ne){const Q=F.getRenderDates(ne.viewType,h,pe);T(Q)}},[h,v,l]),e.useEffect(()=>{if(!pt.findViewByNameOrType(l,v)){const Q=P();if(Q.length>0){const J=Q.find(Se=>Se.viewType==="Week")||Q[0];b(J.name)}}},[v,l,b]);const K=()=>{const ne=pt.findViewByNameOrType(l,v);return ne?ne.component:null},M=ne=>{const Q=pt.findViewByNameOrType(l,v);if(!Q)return;const J={currentDate:h,viewType:Q.viewType,interval:Q.interval,showWeekend:pe.showWeekend,workDays:pe.workDays},Se=ne==="next"?ar.navigateToNext(J):ar.navigateToPrevious(J);G(Se)},y=()=>{M("next")},N=()=>{M("previous")},I=()=>{const ne=ar.navigateToToday();G(ne)},q=e.useCallback(ne=>{if(ne.value){const Q=Array.isArray(ne.value)?ne.value[0]:ne.value;G&&G(Q),R(!1)}},[G]),H=()=>{R(!A)};return{classNames:e.useMemo(()=>{const ne=[p.CONTROL,p.SCHEDULER];return L==="rtl"&&ne.push(p.RTL),r&&ne.push(r),ne.join(" ")},[L,r]),selectedDate:h,view:v,renderDates:_,activeViewProps:pe,dateRangeText:C,showCalendar:A,calendarView:B,handleSelectedDateChange:G,handleCurrentViewChange:b,getAvailableViews:P,handleViewButtonClick:X,handlePreviousClick:N,handleNextClick:y,handleTodayClick:I,handleDateDropdownClick:H,handleCalendarChange:q,renderCurrentView:K}},Mr=(o,r,s)=>{e.useEffect(()=>{const t=n=>{var i;r&&o.current&&!o.current.contains(n.target)&&!((i=n.target)!=null&&i.closest(`.${p.POPUP}`))&&s()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[r,o])},Ki="sf-hscroll",$n="sf-rtl",Ys="sf-overlay",Xi="sf-hscroll-bar",qi="sf-hscroll-content",Ks="sf-hscroll-arrow",Xs="sf-nav-right-arrow",qs="sf-nav-left-arrow",vr="sf-hscroll-nav",Gi="sf-scroll-right-nav",Zi="sf-scroll-left-nav",Qi="sf-scroll-device",Gs=e.memo(e.forwardRef((o,r)=>{const{className:s="",scrollStep:t=void 0,isDisabled:n=!1,children:i,...l}=o,u=e.useRef(t),f=e.useRef(Yn("hscroll")),[d,E]=e.useState(!0),[m,g]=e.useState(!1),{dir:h}=$e(),c=e.useRef(null),v=e.useRef(null),D=e.useRef(null),O=e.useRef(null),_=e.useRef(!1),T=e.useRef(null),A={scrollStep:t,isDisabled:n},R=e.useMemo(()=>({name:xe.info.name,isDevice:xe.isDevice,isMozilla:xe.info.name==="mozilla"}),[]);e.useEffect(()=>{(()=>{var y;typeof t!="number"||t<0?u.current=((y=v.current)==null?void 0:y.offsetWidth)||void 0:u.current=t})()},[t]);const B=e.useCallback((M,y)=>{v.current&&(y==="add"?v.current.scrollLeft+=M:v.current.scrollLeft-=M,h==="rtl"&&v.current.scrollLeft>0&&(v.current.scrollLeft=0))},[h]),k=e.useCallback((M,y,N)=>{if(N){B(M,y);return}const q=()=>{var ne;let H=M,U=10;(ne=c.current)!=null&&ne.classList.contains($n)&&R.isMozilla&&(H=-M,U=-10),H<10?cancelAnimationFrame(U):(B(U,y),M-=U,requestAnimationFrame(q))};q()},[R.isMozilla,B]),b=e.useCallback((M,y,N)=>{const I=c.current;let q=y.classList;if(!q.contains(vr)){const H=y.closest("."+vr);H&&(y=H)}q=y.querySelector(`.${Ks}`).classList,I.classList.contains($n)&&R.isMozilla&&(M=-M),!I.classList.contains($n)||R.isMozilla?q.contains(Xs)?k(M,"add",N):k(M,"",N):q.contains(qs)?k(M,"add",N):k(M,"",N)},[R.isMozilla,k]),S=e.useCallback(M=>{if(M){const y=M.originalEvent.target,N=10,I=()=>{b(N,y,!0)};O.current=window.setInterval(()=>{I()},50)}},[b]),L=e.useCallback(M=>{if(M.key==="Enter"){const y=()=>{_.current=!0,b(10,M.target,!0)};T.current=window.setTimeout(()=>{y()},100)}},[b]),C=e.useCallback(M=>{M.key==="Enter"&&(_.current?_.current=!1:M.target.click(),clearTimeout(T.current))},[]),G=e.useCallback(()=>{clearInterval(O.current)},[]),P=e.useCallback(M=>{b(u.current,M.target,!1)},[b]),X=e.useCallback(M=>{if(M){const y=v.current;let N;typeof M.velocity=="number"&&typeof M.distanceX=="number"&&(M.velocity<=1?N=M.distanceX/(M.velocity*10):N=M.distanceX/M.velocity);let I=.5;const q=()=>{const H=Math.sin(I);H<=0?cancelAnimationFrame(H):(M.swipeDirection==="Left"?y.scrollLeft+=N*H:M.swipeDirection==="Right"&&(y.scrollLeft-=N*H),I-=.5,requestAnimationFrame(q))};q()}},[]),se=e.useCallback(M=>{if(M){const y=v.current;if(y&&typeof M.distanceX=="number"){const N=M.distanceX;M.scrollDirection==="Left"?y.scrollLeft=y.scrollLeft+N:M.scrollDirection==="Right"&&(y.scrollLeft=y.scrollLeft-N)}}},[]),fe=M=>{const y=M.target,N=y.offsetWidth;let I=y.scrollLeft;I<=0&&(I=-I),I===0?(E(!0),g(!1),G()):Math.ceil(N+I+.1)>=y.scrollWidth?(E(!1),g(!0),G()):(E(!1),g(!1))};e.useImperativeHandle(r,()=>({...A,element:c.current})),e.useEffect(()=>()=>{O.current&&clearInterval(O.current),T.current&&clearTimeout(T.current)},[]);const pe=e.useMemo(()=>({swipe:X,scroll:se}),[X,se]);D.current=Zt(c,pe);const K=e.useMemo(()=>["sf-control","sf-lib",Ki,h==="rtl"&&$n,R.isDevice&&Qi,n&&Ys,s].filter(Boolean).join(" "),[s,h,R.isDevice,n]);return a.jsxs("div",{ref:c,id:f.current,className:K,...l,children:[a.jsx(yr,{direction:"left",id:f.current,isDisabled:n||d,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:P,onTapHold:S}),a.jsx("div",{ref:v,className:`${Xi} sf-display-flex`,style:{overflowX:"hidden"},onScroll:fe,children:a.jsx("div",{className:qi,children:i})}),a.jsx(yr,{direction:"right",id:f.current,isDisabled:n||m,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:P,onTapHold:S})]})}));Gs.displayName="HScrollComponent";const yr=e.memo(({direction:o,id:r,isDisabled:s,onKeyPress:t,onKeyUp:n,onMouseUp:i,onClick:l,onTapHold:u})=>{const f=o==="right",d=`sf-${r}_nav ${vr} ${f?Gi:Zi}`,E=`${f?Xs:qs} ${Ks} sf-icons`,m=e.useRef(null),g=e.useMemo(()=>({tapHold:u,tapHoldThreshold:500}),[u]);return Zt(m,g),a.jsx("div",{ref:m,className:`${d} ${s?Ys:""}`,role:"button",id:`${r}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:n,onMouseUp:i,onTouchEnd:i,onContextMenu:h=>h.preventDefault(),onClick:l,children:a.jsx("div",{className:E,children:f?a.jsx(ks,{}):a.jsx(_s,{})})})});yr.displayName="NavIcon";const Ji="sf-vscroll",el="sf-rtl",Zs="sf-overlay",tl="sf-vscroll-bar",nl="sf-vscroll-content",Qs="sf-vscroll-arrow",Js="sf-nav-up-arrow",eo="sf-nav-down-arrow",Rr="sf-vscroll-nav",rl="sf-scroll-up-nav",sl="sf-scroll-down-nav",ol="sf-scroll-device",to=e.memo(e.forwardRef((o,r)=>{const{className:s="",scrollStep:t=void 0,isDisabled:n=!1,children:i,...l}=o,u=e.useRef(t),f=e.useRef(Yn("vscroll")),[d,E]=e.useState(!0),[m,g]=e.useState(!1),{dir:h}=$e(),c=e.useRef(null),v=e.useRef(null),D=e.useRef(null),O=e.useRef(null),_=e.useRef(!1),T=e.useRef(null),A=e.useMemo(()=>({isDevice:xe.isDevice}),[]),R={scrollStep:t,isDisabled:n};e.useEffect(()=>{(()=>{var N;typeof t!="number"||t<0?u.current=((N=v.current)==null?void 0:N.offsetHeight)||void 0:u.current=t})()},[t]);const B=e.useCallback((y,N)=>{v.current&&(N==="add"?v.current.scrollTop+=y:v.current.scrollTop-=y)},[]),k=e.useCallback((y,N,I)=>{if(I){B(y,N);return}const H=()=>{y<10?cancelAnimationFrame(10):(B(10,N),y-=10,requestAnimationFrame(H))};H()},[B]),b=e.useCallback((y,N,I)=>{let q=N.classList;if(!q.contains(Rr)){const U=N.closest("."+Rr);U&&(N=U)}const H=N.querySelector(`.${Qs}`);H&&(q=H.classList),q.contains(eo)?k(y,"add",I):q.contains(Js)&&k(y,"",I)},[k]),S=e.useCallback(y=>{if(y){const N=y.originalEvent.target,I=10,q=()=>{b(I,N,!0)};O.current=window.setInterval(()=>{q()},50)}},[b]),L=e.useCallback(y=>{if(y.key==="Enter"){const N=()=>{_.current=!0,b(10,y.target,!0)};T.current=window.setTimeout(()=>{N()},100)}},[b]),C=e.useCallback(y=>{y.key==="Enter"&&(_.current?_.current=!1:y.target.click(),T.current&&clearTimeout(T.current))},[]),G=e.useCallback(()=>{clearInterval(O==null?void 0:O.current)},[]),P=e.useCallback(y=>{b(u.current,y.target,!1)},[b,u]),X=e.useCallback(y=>{y.preventDefault(),k(u.current,y.deltaY>0?"add":"",!1)},[k,u]),se=e.useCallback(y=>{if(y&&v.current){const N=v.current;let I=0;typeof y.velocity=="number"&&typeof y.distanceY=="number"&&(y.velocity<=1?I=y.distanceY/(y.velocity*10):I=y.distanceY/y.velocity);let q=.5;const H=()=>{const U=Math.sin(q);U<=0?cancelAnimationFrame(U):(y.swipeDirection==="Up"?N.scrollTop+=I*U:y.swipeDirection==="Down"&&(N.scrollTop-=I*U),q-=.02,requestAnimationFrame(H))};H()}},[]),fe=e.useCallback(y=>{if(y){const N=v.current;if(N&&typeof y.distanceY=="number"){const I=y.distanceY;y.scrollDirection==="Up"?N.scrollTop=N.scrollTop+I:y.scrollDirection==="Down"&&(N.scrollTop=N.scrollTop-I)}}},[]),pe=e.useCallback(y=>{const N=y.target,I=N.offsetHeight;let q=N.scrollTop;q<=0&&(q=-q),q===0?(E(!0),g(!1),G()):Math.ceil(I+q+.1)>=N.scrollHeight?(E(!1),g(!0),G()):(E(!1),g(!1))},[G]);e.useImperativeHandle(r,()=>({...R,element:c.current})),e.useEffect(()=>()=>{O.current&&clearInterval(O.current),T.current&&clearTimeout(T.current)},[]);const K=e.useMemo(()=>({scroll:fe,swipe:se}),[se,fe]);D.current=Zt(c,K);const M=e.useMemo(()=>["sf-control","sf-lib",Ji,h==="rtl"&&el,A.isDevice&&ol,n&&Zs,s].filter(Boolean).join(" "),[s,h,A.isDevice,n]);return a.jsxs("div",{ref:c,id:l.id||f.current,className:M,...l,onWheel:X,children:[a.jsx(br,{direction:"up",id:f.current,isDisabled:n||d,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:P,onTapHold:S}),a.jsx("div",{ref:v,className:tl,tabIndex:-1,style:{overflow:"hidden"},onScroll:pe,children:a.jsx("div",{className:nl,children:i})}),a.jsx(br,{direction:"down",id:f.current,isDisabled:n||m,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:P,onTapHold:S})]})}));to.displayName="VScrollComponent";const br=e.memo(({direction:o,id:r,isDisabled:s,onKeyPress:t,onKeyUp:n,onMouseUp:i,onClick:l,onTapHold:u})=>{const f=o==="down",d=`sf-${r}_nav ${Rr} ${f?sl:rl}`,E=`${f?eo:Js} ${Qs} sf-icons`,m=e.useRef(null),g=e.useMemo(()=>({tapHold:u,tapHoldThreshold:500}),[u]);return Zt(m,g),a.jsx("div",{ref:m,className:`${d} ${s?Zs:""}`,role:"button",id:`${r}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:n,onMouseUp:i,onTouchEnd:i,onContextMenu:h=>h.preventDefault(),onClick:l,children:a.jsx("div",{className:E,children:f?a.jsx(Zn,{}):a.jsx(Vs,{})})})});br.displayName="NavIcon";const il="sf-toolbar-items",ll="sf-toolbar-multirow-items",no=e.memo(o=>{const{children:r,onOverflowChange:s}=o,t=e.useRef(null);return e.useEffect(()=>{const n=e.Children.count(r);(Be(t.current)||t.current!==n)&&(t.current=e.Children.count(r),s())},[s,r]),a.jsx("div",{className:`${il} ${ll}`,children:r})});no.displayName="ToolbarMultiRow";const Ts="sf-toolbar-items",cl="sf-hscroll-bar",al="sf-vscroll-bar",ul="sf-hscroll-content",dl="sf-vscroll-content",ro=e.memo(e.forwardRef((o,r)=>{const{toolbarRef:s,orientation:t,scrollStep:n,children:i,className:l,onOverflowChange:u}=o,f=e.useRef(null),d=e.useRef(null),E=e.useRef(null),[m,g]=e.useState(!1),[h,c]=e.useState(n),v=e.useCallback(R=>R.querySelector("."+(t===tt.Vertical?dl:ul)),[t]),D=e.useCallback(()=>{let R=!1;if(s.current&&xr(s.current)){let B=s.current.querySelector(`.${Ts}`);B=m?v(B):B;const k=t===tt.Vertical,b=k?s.current.offsetHeight:s.current.offsetWidth;(k?B.scrollHeight:B.scrollWidth)>b?R=!0:R=!1}return R},[m,t,v]),O=e.useCallback((R=!0)=>{if(s.current){E.current&&clearTimeout(E.current);const B=D();B!==m&&g(B),B&&R&&(E.current=window.setTimeout(()=>{if(s.current){const k=t===tt.Vertical?`.${al}`:`.${cl}`,b=s.current.querySelector(k);b&&c(t===tt.Vertical?b.offsetHeight:b.offsetWidth)}},500))}},[D,t,m]),_=e.useRef(O);e.useEffect(()=>{_.current=O},[O]);const T=e.useCallback(()=>{_.current()},[]);e.useEffect(()=>{if(s.current){let R=!0;f.current=new ResizeObserver(()=>{if(R){R=!1;return}_.current()}),f.current.observe(s.current)}return()=>{var R;(R=f.current)==null||R.disconnect(),f.current=null}},[]),e.useEffect(()=>{const R=e.Children.count(i);(Be(d.current)||d.current!==R)&&(d.current=e.Children.count(i),u(),_.current(!1))},[i,u]),e.useEffect(()=>{u()},[m,u]),e.useImperativeHandle(r,()=>({refreshOverflow:T}),[T]);const A=e.useMemo(()=>{const R=[Ts];return l&&R.push(l),R.join(" ")},[l]);return m?t===tt.Horizontal?a.jsx(Gs,{scrollStep:h,className:A,children:i}):a.jsx(to,{scrollStep:h,className:A,children:i}):a.jsx("div",{className:A,children:i})}));ro.displayName="ToolbarScrollable";const fl="sf-toolbar-item",Yt=e.memo(e.forwardRef((o,r)=>{const{className:s="",children:t,...n}=o,i=e.useRef(null),l=e.useMemo(()=>{const u=[fl];return s&&u.push(s),u.join(" ")},[s]);return e.useImperativeHandle(r,()=>({element:i.current})),a.jsx("div",{ref:i,className:l,...n,children:t})}));Yt.displayName="ToolbarItem";const ml="sf-toolbar-item",pl="sf-toolbar-separator",so=e.memo(e.forwardRef((o,r)=>{const{className:s="",...t}=o,n=e.useRef(null),i=e.useMemo(()=>{const l=[ml,pl];return s&&l.push(s),l.join(" ")},[s]);return e.useImperativeHandle(r,()=>({element:n.current})),a.jsx("div",{ref:n,className:i,...t})}));so.displayName="ToolbarSeparator";const hl="sf-toolbar-item",El="sf-toolbar-spacer",Hr=e.memo(e.forwardRef((o,r)=>{const{className:s="",...t}=o,n=e.useRef(null),i=e.useMemo(()=>{const l=[hl,El];return s&&l.push(s),l.join(" ")},[s]);return e.useImperativeHandle(r,()=>({element:n.current})),a.jsx("div",{ref:n,className:i,...t})}));Hr.displayName="ToolbarSpacer";const Vn="sf-toolbar-items",gl="sf-popup-up-icon",Tl="sf-popup-down-icon",Cl="sf-popup-open",Dl="sf-toolbar-hor-nav",vl="sf-nav-active",yl="sf-toolbar-popup-items",Rl="sf-hidden-popup",bl="sf-toolbar-extended-items",wl="sf-extended-nav",Sl="sf-toolbar-popup-overflow",Wn="sf-toolbar-separator",gn="sf-toolbar-spacer",mr="sf-toolbar-item",Nl="sf-toolbar-popup-icon sf-icon",oo=e.memo(e.forwardRef((o,r)=>{const{toolbarRef:s,orientation:t,overflowMode:n,isToolbarRefReady:i,children:l,className:u,collision:f,isPopupVisible:d,onPopupOpenChange:E,onOverflowChange:m}=o,g=e.useCallback(ee=>e.Children.toArray(ee).filter(oe=>e.isValidElement(oe)&&(oe.type===Yt||oe.type===so||oe.type===Hr)).map((oe,ce)=>e.cloneElement(oe,{key:oe.key||ce})),[]),h=e.useMemo(()=>g(l),[l,g]),c=e.useRef(null),v=e.useRef(e.Children.count(l)),D=e.useRef([...g(l)]),O=e.useRef([]),_=e.useRef(null),T=e.useRef(null),{dir:A}=$e(),[R,B]=e.useState([...D.current]),[k,b]=e.useState([]),[S,L]=e.useState(!1),[C,G]=e.useState(d),[P,X]=e.useState(!1),[se,fe]=e.useState({maxHeight:""}),pe=e.useCallback(ee=>{let oe=0;return ee&&(oe=t===tt.Vertical?ee.offsetHeight:ee.offsetWidth),oe},[t]),K=e.useCallback(ee=>{let oe=0;return ee&&(oe=t===tt.Vertical?ee.offsetTop:ee.offsetLeft),oe},[t]),M=e.useCallback(()=>_.current?pe(_.current):t===tt.Horizontal?40:48,[pe,t]),y=e.useCallback(()=>s.current?s.current.offsetHeight:0,[n]),N=e.useCallback(()=>{let ee=0;if(s.current){const oe=window.getComputedStyle(s.current),ce=parseFloat(oe.width),x=parseFloat(oe.borderRightWidth);ee=ce+x*2}return ee},[]),I=e.useCallback(()=>{var ee;if(s.current&&((ee=T.current)!=null&&ee.element)){const oe=T.current.element,ce=s.current,x=oe.offsetTop+oe.offsetHeight+(ce.getBoundingClientRect().top||0),V=window.scrollY||0;if(t===tt.Horizontal&&window.innerHeight+V<x&&ce.offsetTop<oe.offsetHeight&&n===Ye.Popup){let z=oe.offsetHeight-(x-window.innerHeight-V+5);for(let te=0;te<oe.childElementCount;te++){const he=oe.children[parseInt(te.toString(),10)];if(he.offsetTop+he.offsetHeight>z){z=he.offsetTop;break}}fe(te=>({...te,maxHeight:`${z}px`}))}else if(t===tt.Vertical){const z=ce.getBoundingClientRect();fe(te=>({...te,maxHeight:`${z.top+ce.offsetHeight}px`,bottom:"0"}))}}},[n,t]),q=e.useCallback(()=>{G(!1),fe({maxHeight:""})},[]),H=e.useCallback(ee=>{if(s.current&&ee&&xr(s.current)){const oe=[...R],ce=[...k],x=Array.from(ee.children),V=pe(s.current),z=window.getComputedStyle(ee),te=parseInt(t===tt.Vertical?z.paddingTop:z.paddingLeft,10);if(A==="rtl"&&t===tt.Horizontal){const he=parseInt(z.gap,10)||0,Ee=x.length;let be=0;x.forEach($=>{be+=pe($)}),be+=te*2+he*(Ee-1);const ke=be>V,de=ce.length>0||ke?M():0,Ce=V-de;if(be>Ce){let $=be;for(let W=Ee-1;W>=0;W--){const ae=x[parseInt(W.toString(),10)];if($>Ce||ae.classList.contains(Wn)){const ge=pe(ae);$-=ge+(W===0?0:he),ce.unshift(oe[parseInt(W.toString(),10)]),oe.pop()}else break}}}else{let he=pe(x[x.length-1]),Ee=K(x[x.length-1]);const be=Ee+he+te>V,ke=ce.length>0||be?M():0,de=V-ke;for(let Ce=x.length-1;Ce>=0;Ce--){const $=x[parseInt(Ce.toString(),10)];if(he=pe($),Ee=K($),Ee+he+te>de||$.classList.contains(Wn))ce.unshift(oe[parseInt(Ce.toString(),10)]),oe.pop();else break}}D.current=oe,O.current=ce}},[t,pe,K,M,R,k,A]),U=e.useCallback(()=>{R!==D.current&&(B(ee=>ee.length!==D.current.length?[...D.current]:ee),b(ee=>ee.length!==O.current.length?[...O.current]:ee))},[R]),ne=e.useCallback(()=>{if(s.current&&!P){const ee=s.current.querySelector(`.${Vn}`);n===Ye.Popup&&G(oe=>oe&&!1),H(ee),U(),X(O.current.length>0)}},[H,P,U,n]),Q=e.useRef(ne);e.useLayoutEffect(()=>{Q.current=ne},[ne]);const J=e.useCallback(ee=>{let oe=0;if(ee){const ce=Array.from(ee.children),x=window.getComputedStyle(ee),V=parseInt(x.gap,10)||0,z=parseInt(t===tt.Vertical?x.paddingTop:x.paddingLeft,10);ce.forEach(te=>{oe+=(te.classList.contains(gn)?0:pe(te))+V}),ce.length>0&&(oe-=V),oe+=z*2}return oe},[pe,t]),Se=e.useCallback((ee,oe)=>{var he;const ce=[].slice.call(oe.querySelectorAll(`.${mr}`)),x=[...R],V=[...k],z=(he=s.current)==null?void 0:he.querySelector(`.${Vn}`),te=parseInt(window.getComputedStyle(z).gap,10)||0;for(let Ee=0;Ee<ce.length;Ee++){const be=ce[parseInt(Ee.toString(),10)],ke=be.classList.contains(gn),de=x.length>0,Ce=(ke?0:pe(be))+(de?te:0);let $=ee>Ce;if(ke||be.classList.contains(Wn)){let W=Ce,ae=Ee+1;for(;ae<ce.length;){const ge=ce[parseInt(ae.toString(),10)],Ae=ge.classList.contains(gn);if(W+=(Ae?0:pe(ge))+(de?te:0),!ge.classList.contains(gn)&&!ge.classList.contains(Wn))break;ae++}$=ee>W}if($)x.push(V[0]),V.shift(),ee-=Ce;else break}D.current=x,O.current=V},[pe,R,k]),ve=e.useCallback(()=>{var ee;if(s.current&&((ee=T.current)!=null&&ee.element)){const oe=s.current.querySelector(`.${Vn}`),ce=pe(oe),x=J(oe),V=ce-x,z=parseInt(window.getComputedStyle(oe).gap,10)||0,te=pe(T.current.element.querySelector(`.${mr}`))+z,he=V>te,Ee=[].slice.call(T.current.element.querySelectorAll(`.${mr}`));let be=0;Ee.forEach(de=>{be+=de.classList.contains(gn)?0:pe(de)}),be+=Ee.length*z,V+M()>be?(D.current=[...h],O.current=[]):he&&Se(V,T.current.element)}},[pe,J,Se]),ue=e.useCallback(()=>{n===Ye.Popup&&C&&G(!1)},[n,C]),w=()=>{G(ee=>!ee)},Z=e.useCallback(()=>{ne()},[ne]);e.useEffect(()=>{if(n===Ye.Popup||n===Ye.Extended){const ee=oe=>{if(n===Ye.Popup&&T.current&&T.current.element){const ce=!Dt(oe.target,".sf-popup"),x=T.current.element.classList.contains(Cl);ce&&x&&G(!1)}};return document.addEventListener("click",ee),document.addEventListener("scroll",ee,!0),()=>{document.removeEventListener("click",ee),document.removeEventListener("scroll",ee,!0)}}},[n]),e.useEffect(()=>{E(C)},[C,E]),e.useEffect(()=>{G(ee=>ee!==d?d:ee)},[d]),e.useEffect(()=>{m()},[R,m]),e.useLayoutEffect(()=>{s.current&&i&&!S&&(Q.current(),L(!0))},[i,S]),e.useEffect(()=>{if(s.current){let ee=!0;return c.current||(c.current=new ResizeObserver(()=>{if(ee){ee=!1;return}Q.current()}),c.current.observe(s.current)),()=>{var oe;(oe=c.current)==null||oe.disconnect(),c.current=null}}},[]),e.useLayoutEffect(()=>{P&&(ve(),U(),G(ee=>ee&&O.current.length<=0?!1:ee),X(!1))},[P,ve,U]),e.useLayoutEffect(()=>{if(!S)return;const ee=h.length;if(v.current!==ee){v.current=ee,D.current=[...h],O.current=[],B([...D.current]),b([]),G(!1),L(!1);return}const ce=new Map(h.map(V=>[V.key,V])),x=V=>V.map(z=>ce.get(z.key)||z);B(x),b(x)},[h,S]),e.useImperativeHandle(r,()=>({refreshOverflow:Z}),[Z]);const ie=e.useMemo(()=>{const ee=[Vn];return k.length>0&&ee.push(Sl),ee.join(" ")},[k]),re=e.useMemo(()=>{const ee=[Dl];return n===Ye.Extended&&ee.push(wl),C&&ee.push(vl),ee.join(" ")},[n,C]),Ne=e.useMemo(()=>{const ee=[yl];return n===Ye.Extended&&ee.push(bl),u&&ee.push(u),P&&ee.push(Rl),ee.join(" ")},[n,u,P]);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ie,children:R}),k.length>0&&a.jsx("div",{ref:_,className:re,tabIndex:0,role:"button","aria-haspopup":"true","aria-label":"overflow","aria-expanded":C?"true":"false",onClick:w,children:a.jsx("div",{className:`${C?gl:Tl} ${Nl}`,children:C?a.jsx(Vs,{}):a.jsx(Zn,{})})}),k.length>0&&a.jsx(It,{ref:T,className:Ne,relateTo:s.current,offsetY:t===tt.Vertical?0:y(),open:C,onOpen:I,onClose:q,targetType:"container",collision:{Y:f?it.None:it.None,X:it.None},position:A==="rtl"?{X:"left",Y:"top"}:{X:"right",Y:"top"},width:n===Ye.Extended&&t===tt.Horizontal?N():void 0,offsetX:n===Ye.Extended&&t===tt.Horizontal?0:void 0,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},style:se,onClick:ue,children:k})]})}));oo.displayName="ToolbarPopup";var Ye;(function(o){o.Scrollable="Scrollable",o.Popup="Popup",o.MultiRow="MultiRow",o.Extended="Extended"})(Ye||(Ye={}));const xl="sf-toolbar",Al="sf-toolbar-vertical",Ol="sf-toolbar-items",Ll="sf-rtl",Cs="sf-hscroll-nav",Tn="sf-toolbar-hor-nav",pr="sf-toolbar-popup-items",Il="sf-toolbar-extended",kl="sf-toolbar-multirow",_l="sf-tbar-extended",Pl="sf-toolbar-popup",io=e.memo(e.forwardRef((o,r)=>{const{keyboardNavigation:s=!0,children:t,className:n="",collision:i=!0,orientation:l=tt.Horizontal,overflowMode:u=Ye.Scrollable,scrollStep:f=void 0,...d}=o,E=e.useRef(null),m=e.useRef({toolbar:[],popup:[]}),g=e.useRef(null),h=e.useRef(null),c=e.useRef(null),{dir:v}=$e(),[D,O]=e.useState(!1),[_,T]=e.useState(!1),A=e.useCallback(H=>H.hasAttribute("disabled")||H.getAttribute("aria-disabled")==="true"||H.classList.contains("sf-disabled"),[]),R=e.useCallback((H,U,ne)=>{if(!H.length)return-1;const Q=H.length;let J=U,Se=0;for(;Se<Q;){if(J=(J+ne+Q)%Q,!A(H[J]))return J;Se++}return-1},[A]),B=e.useCallback(()=>{if(s&&E.current){const H=Q=>E.current?Array.from(E.current.querySelectorAll(`.${Q} .sf-btn`)):[];m.current.toolbar=H(Ol),(u===Ye.Extended||u===Ye.Popup)&&(m.current.popup=H(pr));let U=0;g.current&&(U=m.current.toolbar.indexOf(g.current),U=U===-1?0:U);const ne=[...m.current.toolbar,...m.current.popup];U>=0&&U<ne.length&&A(ne[U])&&(U=R(ne,-1,1)),ne.forEach((Q,J)=>{Q.tabIndex=J===U?0:-1,J===U&&(g.current=Q)})}},[s,u,A,R]),k=e.useCallback(H=>{const U=!!Dt(H,"."+pr);return{isToolbar:!U,items:U?m.current.popup:m.current.toolbar,currentIndex:U?m.current.popup.indexOf(H):m.current.toolbar.indexOf(H)}},[]),b=e.useCallback(H=>!Be(Dt(H,"."+pr)),[]),S=e.useCallback(H=>!Be(Dt(H,"."+Tn)),[]),L=e.useCallback((H,U)=>{const ne=U?m.current.toolbar:m.current.popup;if(H>-1&&H<ne.length){ne.forEach(J=>{J.tabIndex=-1});const Q=ne[parseInt(H.toString(),10)];Q.tabIndex=0,Q.focus(),U&&(g.current=Q)}},[]),C=e.useCallback((H,U)=>{const{isToolbar:ne,items:Q,currentIndex:J}=k(H);if(!Q.length)return;let Se;switch(U){case"next":Se=R(Q,J,1);break;case"previous":Se=R(Q,J,-1);break;case"first":Se=R(Q,-1,1);break;case"last":Se=R(Q,Q.length,-1);break}Se!==-1&&L(Se,ne)},[k,L,R]),G=e.useCallback((H,U)=>{if(l===tt.Horizontal){const ne=H.classList.contains(Tn),Q=H.classList.contains(Cs);if(U==="ArrowRight"&&E.current===H){L(0,!0);return}(U==="ArrowRight"||U==="ArrowLeft")&&!ne&&!Q&&C(H,U==="ArrowRight"?"next":"previous")}},[L,C,l]),P=e.useCallback((H,U)=>{const ne=l===tt.Vertical,Q=b(H),J=S(H);U==="ArrowUp"&&!J&&(ne||Q)?C(H,"previous"):U==="ArrowDown"&&(J&&_&&m.current.popup.length>0?L(0,!1):(ne||Q)&&C(H,"next"))},[b,S,_,L,C,l]),X=e.useCallback((H,U)=>{C(H,U==="Home"?"first":"last")},[C]),se=e.useCallback(H=>{const U=H.classList.contains(Tn),ne=H.classList.contains(Cs),Q=E.current;if(!ne&&!U&&Q===H&&m.current.toolbar)if(g.current&&!A(g.current))g.current.focus();else{const J=R(m.current.toolbar,-1,1);J!==-1&&L(J,!0)}},[L,A,R]),fe=e.useCallback(H=>{H.classList.contains(Tn)&&T(ne=>!ne)},[]),pe=e.useCallback(()=>{u===Ye.Popup&&_&&T(!1)},[_,u]),K=e.useCallback(H=>{if(!E.current||!s||["INPUT","TEXTAREA","SELECT"].includes(H.target.tagName))return;const U=H.target;H.preventDefault();const Q={ArrowRight:()=>G(U,H.key),ArrowLeft:()=>G(U,H.key),ArrowUp:()=>P(U,H.key),ArrowDown:()=>P(U,H.key),Home:()=>X(U,H.key),End:()=>X(U,H.key),Tab:()=>se(U),Enter:()=>fe(U),Escape:()=>pe()}[H.key];Q&&Q()},[s,G,P,X,se,fe,pe]),M=e.useCallback(H=>{if(!s||["INPUT","TEXTAREA","SELECT"].includes(H.target.tagName))return;const U=u===Ye.Popup&&_;H.key==="Tab"&&H.target.classList.contains(Tn)&&U&&T(!1),(H.key==="ArrowDown"||H.key==="ArrowUp"||H.key==="End"||H.key==="Home")&&H.preventDefault()},[s,u,_]),y=e.useCallback(H=>{T(H)},[]),N=e.useCallback(()=>{u===Ye.Scrollable&&h.current?h.current.refreshOverflow():(u===Ye.Popup||u===Ye.Extended)&&c.current&&c.current.refreshOverflow()},[u]);e.useLayoutEffect(()=>{kt("toolbar"),O(!0)},[]);const I=e.useMemo(()=>{const H=["sf-control",xl,"sf-lib"];switch(v==="rtl"&&H.push(Ll),u){case Ye.MultiRow:H.push(kl);break;case Ye.Popup:H.push(Pl);break;case Ye.Extended:H.push(Il),_&&H.push(_l);break}return l===tt.Vertical&&H.push(Al),n&&H.push(n),H.join(" ")},[n,v,l,_,u]),q={keyboardNavigation:s,collision:i,orientation:l,overflowMode:u,scrollStep:f};return e.useImperativeHandle(r,()=>({...q,refreshOverflow:N,element:E.current})),a.jsx("div",{ref:E,className:I,role:"toolbar","aria-orientation":l.toLowerCase(),onKeyDown:M,onKeyUp:K,...d,children:(()=>{switch(u){case Ye.Scrollable:return a.jsx(ro,{ref:h,toolbarRef:E,orientation:l,scrollStep:f,onOverflowChange:B,className:n,children:t},`scrollable-${l}-toolbar`);case Ye.MultiRow:return a.jsx(no,{onOverflowChange:B,children:t});case Ye.Popup:case Ye.Extended:return a.jsx(oo,{ref:c,toolbarRef:E,isToolbarRefReady:D,orientation:l,overflowMode:u,collision:i,isPopupVisible:_,onPopupOpenChange:y,onOverflowChange:B,className:n,children:t},`${u===Ye.Popup?"popup":"extended"}-${l}-toolbar`)}})()})}));io.displayName="Toolbar";const lo=e.forwardRef((o,r)=>{var w,Z,ie;const{children:s,className:t="",icon:n,iconPosition:i=qe.Left,items:l=[],popupWidth:u="auto",animation:f={show:{name:"SlideDown",duration:100,timingFunction:"ease"},hide:{name:"SlideUp",duration:100,timingFunction:"ease"}},disabled:d=!1,lazyOpen:E=!1,itemTemplate:m,target:g,relateTo:h,color:c,variant:v,size:D=Kt.Medium,onClose:O,onOpen:_,onSelect:T,...A}=o,R=e.useRef(null),B=e.useRef(null),k=e.useRef(null),b=e.useRef([]),[S,L]=e.useState(null),[C,G]=e.useState(!1),[P,X]=e.useState(l),{dir:se}=$e(),[fe,pe]=e.useState(!1);e.useEffect(()=>{pe(!0)},[]);const K=e.useRef(!0),M=e.useCallback((re,Ne)=>{re.disabled||(G(!1),T&&T({event:Ne,item:re}))},[T]),y=(re,Ne)=>{K&&Ne(ee=>re.length!==ee.length||re.some((ce,x)=>{const V=ee[x];return ce.id!==(V==null?void 0:V.id)||ce.text!==(V==null?void 0:V.text)||ce.url!==(V==null?void 0:V.url)||ce.disabled!==(V==null?void 0:V.disabled)||typeof ce.icon=="string"?ce.icon!==(V==null?void 0:V.icon):!e.isValidElement(ce.icon)})?re:ee)};e.useEffect(()=>(y(l,X),()=>{K.current=!1}),[l]),e.useEffect(()=>{kt("dropDownButton")},[]);const N=e.useMemo(()=>P.map((re,Ne)=>!re.disabled&&!re.hasSeparator?Ne:-1).filter(re=>re>=0),[P]),I=e.useCallback((re,Ne)=>{const ee=N.length;if(!ee)return-1;const oe=N.indexOf(re);if(oe<0)return N[Ne?0:ee-1];const ce=(oe+(Ne?1:-1)+ee)%ee;return N[ce]},[N]),q=e.useCallback(re=>re!=null&&N.includes(re)?re:null,[N]),H=e.useCallback(re=>{var ee;const Ne=q(re);L(Ne),Ne!=null&&((ee=b.current[Ne])==null||ee.focus())},[q]);e.useEffect(()=>{L(re=>q(re))},[P,q]),e.useEffect(()=>{const re=ee=>{var V,z;const oe=(V=R.current)==null?void 0:V.element,ce=(z=B.current)==null?void 0:z.element,x=ee.target;oe&&ce&&!oe.contains(x)&&!ce.contains(x)&&(G(!1),O&&C&&O(ee))},Ne=ee=>{var oe,ce;((ee.altKey||ee.metaKey)&&ee.key==="ArrowUp"||ee.key==="Escape"||ee.key==="Esc")&&(ee.preventDefault(),ee.stopPropagation(),G(!1),O==null||O(ee),(ce=(oe=R.current)==null?void 0:oe.element)==null||ce.focus())};return C&&(document.addEventListener("mousedown",re),document.addEventListener("keydown",Ne)),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("keydown",Ne)}},[C,O]);const U={iconPosition:i,icon:n,target:g,popupWidth:u,items:l,lazyOpen:E,relateTo:h,itemTemplate:m,color:c,variant:v,size:D},ne=((w=f.show)==null?void 0:w.name)!==void 0?{name:(Z=f.show)==null?void 0:Z.name,duration:f.show.duration,timingFunction:f.show.timingFunction}:null,Q=re=>{var Ne,ee;if(C)G(!1),O&&O(re);else{if(ne){const ce=en(ne);if(ce.animate){const x=(ee=(Ne=B.current)==null?void 0:Ne.element)==null?void 0:ee.children[0];x&&ce.animate(x,{begin:V=>{const z=V==null?void 0:V.element;if(z&&z.parentElement){const te=z.parentElement,he=te.style.display;te.style.display="block",te.style.maxHeight=te.offsetHeight+"px",te.style.display=he}}})}}G(!0),_&&_(re);const oe=q(S);H(oe)}};e.useImperativeHandle(r,()=>{var re;return{...U,toggle:Q,element:(re=R.current)==null?void 0:re.element}},[U]);const J=e.useCallback(re=>{var Ne,ee,oe,ce;switch(re.key){case"ArrowDown":{if(re.preventDefault(),re.stopPropagation(),re.altKey||re.metaKey)Q(re);else{const x=I(S??-1,!0);H(x)}break}case"ArrowUp":{if(re.preventDefault(),re.stopPropagation(),re.altKey||re.metaKey)G(!1),O==null||O(re),(ee=(Ne=R.current)==null?void 0:Ne.element)==null||ee.focus();else{const x=I(S??-1,!1);H(x)}break}case"Home":{C&&(re.preventDefault(),H(N[0]??null));break}case"End":{C&&(re.preventDefault(),H(N[N.length-1]??null));break}case"Enter":case" ":{if(re.preventDefault(),C){const x=q(S);x!=null&&M(P[x],re)}else Q(re);break}case"Escape":case"Esc":{re.preventDefault(),C&&(G(!1),O==null||O(re),(ce=(oe=R.current)==null?void 0:oe.element)==null||ce.focus());break}}},[C,S,N,I,q,Q,G,O,R,H,M,P]),Se=e.useCallback(re=>{if(m)return m(re);const Ne=a.jsxs(a.Fragment,{children:[re.icon&&a.jsx("span",{className:"sf-menu-icon",children:typeof re.icon=="string"?a.jsx("span",{className:re.icon}):re.icon}),a.jsx("span",{children:re.text})]});return re.url?a.jsx("a",{href:re.url,className:"sf-menu-link",children:Ne}):Ne},[m]),ve=e.useCallback((re,Ne)=>{Ne.stopPropagation();const ee=Ne.currentTarget,oe=b.current.findIndex(ce=>ce===ee);H(oe),M(re,Ne)},[M,H]),ue=e.useCallback(()=>a.jsx("ul",{role:"menu",tabIndex:0,"aria-label":"dropdown menu",ref:k,onKeyDown:J,onMouseDown:re=>re.preventDefault(),children:P.map((re,Ne)=>{const ee=S===Ne,oe=`sf-item sf-ellipsis ${re.hasSeparator?"sf-separator":""} ${re.disabled?"sf-disabled":""} ${ee?"sf-focused":""}`;return a.jsx("li",{ref:ce=>{b.current[Ne]=ce},className:oe,role:re.hasSeparator?"separator":"menuitem","aria-label":re.text,"aria-disabled":re.disabled?"true":"false",onClick:re.disabled||re.hasSeparator?void 0:ce=>ve(re,ce),children:!re.hasSeparator&&Se(re)},re.id||`item-${Ne}`)})}),[P,Se,ve,S,H,J]);return a.jsxs(a.Fragment,{children:[a.jsx(Qe,{ref:R,className:`${t} sf-dropdown-btn sf-drp-btn-${D.toLowerCase().substring(0,2)} ${C?"sf-active":""}`,icon:n,color:c,dropIcon:!0,variant:v,size:D,iconPosition:i,disabled:d,onKeyDown:J,onClick:re=>{re.preventDefault(),Q(re)},"aria-haspopup":"true","aria-expanded":C?"true":"false",...A,children:s}),fe&&(C||!E)&&typeof document<"u"&&qt.createPortal(a.jsx(It,{open:C,ref:B,targetRef:g||R.current,relateTo:h||((ie=R.current)==null?void 0:ie.element),position:{X:"left",Y:"bottom"},animation:f,collision:se==="rtl"?{X:it.Fit,Y:it.Flip}:{X:it.Flip,Y:it.Flip},width:u,className:`sf-dropdown-popup sf-drp-btn-${D.toLowerCase().substring(0,2)} ${u!=="auto"?"sf-dropdown-popup-width":""}`,onClose:()=>{var re;G(!1),(re=R.current)!=null&&re.element&&R.current.element.focus()},onOpen:()=>{var re;(re=k.current)==null||re.focus()},children:ue()}),document.body)]})});e.memo(lo);const co=o=>{const{onClick:r,ariaLabel:s,title:t,disabled:n=!1,icon:i=a.jsx(Wo,{}),text:l,color:u,variant:f,className:d}=o,{locale:E}=$e(),{getString:m}=nt(E||"en-US");return xe.isDevice?a.jsx(Qe,{icon:i,color:u||vt.Secondary,variant:f||Ge.Standard,className:d||p.TODAY_BUTTON,onClick:r,"aria-label":s||m("today"),title:t||m("today"),disabled:n}):a.jsx(Qe,{icon:i,variant:f||Ge.Outlined,color:u||vt.Secondary,className:d||p.TODAY_BUTTON,onClick:r,"aria-label":s||m("today"),title:t,disabled:n,children:l||m("today")})},ao=o=>{const{onClick:r,ariaLabel:s,title:t,disabled:n=!1,icon:i=a.jsx(_s,{}),color:l,variant:u,className:f}=o,{locale:d}=$e(),{getString:E}=nt(d||"en-US");return a.jsx(Qe,{className:f||p.PREVIOUS_ICON,icon:i,color:l||vt.Secondary,variant:u||Ge.Standard,onClick:r,"aria-label":s||E("previous"),title:t,disabled:n})},uo=o=>{const{onClick:r,ariaLabel:s,title:t,disabled:n=!1,icon:i=a.jsx(ks,{}),color:l,variant:u,className:f}=o,{locale:d}=$e(),{getString:E}=nt(d||"en-US");return a.jsx(Qe,{className:f||p.NEXT_ICON,icon:i,color:l||vt.Secondary,variant:u||Ge.Standard,onClick:r,"aria-label":s||E("next"),title:t,disabled:n})},Ml=(o,r)=>{const{onClick:s,ariaLabel:t,title:n,disabled:i=!1,dateRangeContent:l,showCalendar:u=!1,ariaExpanded:f,color:d,variant:E,icon:m=a.jsx(Zn,{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true"}),onKeyDown:g,className:h}=o;return a.jsx(Qe,{ref:r,onClick:c=>{c.stopPropagation(),s==null||s(c)},"aria-haspopup":"dialog","aria-label":t,"aria-expanded":f!==void 0?f:u,className:h||p.DATEPICKER_BUTTON,color:d||vt.Secondary,variant:E||Ge.Standard,iconPosition:qe.Right,title:n,disabled:i,onKeyDown:g,icon:m,children:l})},jr=e.forwardRef(Ml);jr.displayName="DateRangeButton";const fo=o=>{var m;const{items:r,currentView:s,onSelect:t,ariaLabel:n,title:i,disabled:l=!1,className:u,variant:f=Ge.Outlined,color:d=vt.Secondary}=o,E=((m=r.find(g=>g.id===s))==null?void 0:m.text)||s;return a.jsx("div",{onClick:g=>g.stopPropagation(),children:a.jsx(lo,{items:r,variant:f,className:u||p.VIEW_BUTTON,color:d,onSelect:t,"aria-label":n,title:i,disabled:l,children:E})})};co.displayName="TodayButton";ao.displayName="PreviousButton";uo.displayName="NextButton";fo.displayName="ViewButton";const Hl=({view:o,availableViews:r,onViewButtonClick:s,onPreviousClick:t,onNextClick:n,onTodayClick:i,onDateDropdownClick:l,dateRangeText:u,showCalendar:f=!1,selectedDate:d=new Date,firstDayOfWeek:E=0,calendarView:m=Un.Month,handleCalendarChange:g,renderDates:h,customizeHeader:c})=>{var G,P;const v=e.useRef(null),D=e.useRef(null);Mr(D,!!f,()=>{f&&l&&l()});const O=(r||[]).map(X=>({id:X.name,text:X.displayName})),_=e.useCallback(X=>{var fe;const se=(fe=X.item)==null?void 0:fe.id;se&&s(se)},[s]),T=O.map(X=>`${X.id}:${X.text}`).join("|"),R=h&&h.length>=2?`${(G=h[0])==null?void 0:G.toDateString()} - ${(P=h[h.length-1])==null?void 0:P.toDateString()}`:u;let B=u;const k=X=>[X.today,X.previous,X.next,X.dateRange,a.jsx(Hr,{},"spacer"),X.viewSwitcher].filter(Boolean),b=X=>{var se;return{today:(X==null?void 0:X.todayProps)!==null&&a.jsx(Yt,{children:a.jsx(co,{onClick:i,...(X==null?void 0:X.todayProps)||{}})},"today"),previous:(X==null?void 0:X.previousProps)!==null&&a.jsx(Yt,{children:a.jsx(ao,{onClick:t,...(X==null?void 0:X.previousProps)||{}})},"previous"),next:(X==null?void 0:X.nextProps)!==null&&a.jsx(Yt,{children:a.jsx(uo,{onClick:n,...(X==null?void 0:X.nextProps)||{}})},"next"),dateRange:(X==null?void 0:X.dateRangeProps)!==null&&a.jsx(Yt,{children:a.jsx(jr,{ref:v,onClick:l,ariaLabel:R,dateRangeContent:B,showCalendar:f,onKeyDown:fe=>{fe.key==="Escape"&&f&&(l==null||l())},...(X==null?void 0:X.dateRangeProps)||{}})},"dateRange"),viewSwitcher:(X==null?void 0:X.viewSwitcherProps)!==null&&((r==null?void 0:r.length)??0)>1&&a.jsx(Yt,{children:a.jsx(fo,{items:O,currentView:o,onSelect:_,ariaLabel:((se=r==null?void 0:r.find(fe=>fe.name===o))==null?void 0:se.displayName)??o,...(X==null?void 0:X.viewSwitcherProps)||{}})},"viewSwitcher")}};let S,L=Ye.Popup;const C=b();if(c){const X=c({}),se=e.isValidElement(X)?X.props:{},fe=b(se),pe={overflowMode:(se==null?void 0:se.overflowMode)??Ye.Popup,today:fe.today,previous:fe.previous,next:fe.next,dateRange:fe.dateRange,viewSwitcher:fe.viewSwitcher,children:k(fe)},K=c(pe);if(K&&e.isValidElement(K)){const M=K.props;if(L=(M==null?void 0:M.overflowMode)??Ye.Popup,M!=null&&M.dateRangeTemplate&&h&&h.length>=2&&(B=M.dateRangeTemplate({startDate:h[0],endDate:h[h.length-1],view:o})),M!=null&&M.children)M.children===pe.children?S=k(b(M)):S=M.children;else{const y=b(M);S=k(y)}}else S=k(C)}else S=k(C);return a.jsxs("div",{ref:D,className:p.SCHEDULER_TOOLBAR_CONTAINER,children:[a.jsx(io,{overflowMode:L,style:{width:"auto"},children:S},`tb-${T}-${u}`),f&&v.current&&a.jsx(It,{open:!0,relateTo:v.current.element,position:{X:"left",Y:"bottom"},collision:{X:it.Fit,Y:it.None},actionOnScroll:Ps.Hide,onClose:l,className:p.CALENDAR_POPUP_CONTAINER,viewPortElementRef:D,onKeyDown:X=>{X.key==="Escape"&&(l==null||l())},children:a.jsx(Vo,{className:p.SCHEDULER_CALENDAR,value:d,onChange:g,showTodayButton:!0,firstDayOfWeek:E,start:m,depth:m})})]})};jr.__docgenInfo={description:"DateRange button component",methods:[],displayName:"DateRangeButton"};const mo=(o,r,s)=>{const[t,n]=e.useState(!1),[i,l]=e.useState(null),u=jl(t),f=e.useRef(null),d=e.useRef(null),E=e.useRef(null),m=e.useRef(null),g=e.useCallback(()=>{n(!1)},[s]);po(g),e.useEffect(()=>{i&&(d.current=i.closest(".sf-scheduler"))},[i]);const h=e.useCallback(A=>{u&&typeof u=="object"&&"current"in u&&(u.current=A),f.current=A},[u]),c=e.useCallback(()=>{var A,R;(A=E.current)==null||A.hide(),(R=m.current)==null||R.hide()},[]),v=e.useCallback((A,R)=>{var B;(B=E.current)==null||B.handleCellClick(A,R)},[]),D=e.useCallback((A,R)=>{var B;(B=E.current)==null||B.handleEventClick(A,R)},[]),O=e.useCallback(()=>{c()},[]),_=e.useCallback(A=>{o&&o(A),!A.cancel&&A&&A.element&&(A.nativeEvent&&A.nativeEvent.stopPropagation(),v(A,A.element))},[o,v]),T=e.useCallback(A=>{r&&r(A),!A.cancel&&A&&A.data&&A.event.currentTarget&&D(A.data,A.event.currentTarget)},[r,D]);return{visible:t,setVisible:n,target:i,setTarget:l,containerRef:u,popupElement:f,schedulerElement:d,handleClose:g,handleRef:h,cellEditRef:E,eventEditRef:m,handleCellClick:v,handleEventClick:D,handleEditEvent:O,closeAllPopups:c,onCellClickHandler:_,onEventClickHandler:T}},po=o=>{e.useEffect(()=>{const r=s=>{s.key==="Escape"&&o()};return document==null||document.addEventListener("keydown",r),()=>{document==null||document.removeEventListener("keydown",r)}},[o])},jl=o=>{const r=e.useRef(null),s=e.useRef(null);return e.useEffect(()=>{if(o&&r.current){s.current=document==null?void 0:document.activeElement;const t=r.current.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'),n=t[0],i=t[t.length-1],l=u=>{i&&(document==null?void 0:document.activeElement)===i&&!u.shiftKey&&(u.preventDefault(),n.focus()),n&&(document==null?void 0:document.activeElement)===n&&u.shiftKey&&(u.preventDefault(),i.focus())};return document==null||document.addEventListener("keydown",l),()=>{var u;document==null||document.removeEventListener("keydown",l),(u=s.current)!=null&&u.focus&&s.current.focus()}}return()=>{}},[o]),r};class dt{static calculateEventPosition(r,s,t,n){const i=r.event.isAllDay&&r.event.isBlock?"0px":this.calculateTopPosition(r.startDate,s,t),l=this.calculateHeight(r,s,t,n);let u=96,f=r.event.isBlock?"1px":"0%";r.totalOverlapping>1&&(u=(u-r.totalOverlapping)/r.totalOverlapping,f=`${r.positionIndex*u+r.positionIndex}%`);const d=r.event.isBlock?"calc(100% - 2px)":`${u}%`;return{top:i,height:l,width:d,left:f}}static getOverflowDirection(r,s,t,n){var h,c;if(!r.totalSegments&&!t&&!n||!((h=r.event)!=null&&h.startTime)||!((c=r.event)!=null&&c.endTime)||!(s!=null&&s.length))return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:!1,isOverflowBottom:!1};const i=F.normalizeDate(r.event.startTime),l=F.normalizeDate(r.event.endTime),u=F.normalizeDate(s[0]),f=F.normalizeDate(s[s.length-1]);let d=r.isFirstDay===!1,E=r.isLastDay===!1;if(!i||!l||!u||!f)return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:d,isOverflowBottom:E};const m=i.getTime()<u.getTime(),g=l.getTime()>f.getTime();return t&&n&&(i.setHours(t[0],t[1],0,0),l.setHours(n[0],n[1],0,0),!d&&i>r.event.startTime&&(d=!0),!E&&l<r.event.endTime&&(E=!0)),{isOverflowLeft:m,isOverflowRight:g,isOverflowTop:d,isOverflowBottom:E}}static calculatePositionStyles(r,s,t,n,i){return r.totalSegments?{top:`${r.positionIndex*(qn+Dn)}px`,width:this.calculateEventWidth(r,s)}:!r.event.isBlock&&r.positionIndex!==void 0&&(r.event.isAllDay||r.isMonthEvent)?{top:`${r.positionIndex*(qn+Dn)}px`}:t&&n&&i?this.calculateEventPosition(r,t,n,i):{}}static calculateTopPosition(r,s,t){const n=F.getStartEndHours(t),i=n.getHours()*Ze+n.getMinutes(),u=r.getHours()*Ze+r.getMinutes()-i,d=vs/(s.interval/s.slotCount),E=u*d;return`${Math.max(0,E)}px`}static calculateHeight(r,s,t,n){const i=new Date(r.startDate),l=new Date(r.endDate);r.event.isBlock&&r.event.isAllDay&&(i.setHours(0,0,0,0),l.setDate(l.getDate()+1),l.setHours(0,0,0,0));const u=s.interval/s.slotCount,{schedulerStartMinutes:f,schedulerEndMinutes:d}=F.getSchedulerStartAndEndMinutes(t,n),E=i.getHours()*Ze+i.getMinutes(),m=Math.max(E,f),g=d-m;let h;if(F.isSameDay(i,l)){const v=i.getDate()!==l.getDate()?Fo:l.getHours()*Ze+l.getMinutes();h=(Math.min(v,d)-m)/u;const O=Math.ceil(g/u);h=Math.min(h,O)}else h=Math.min(g/u);let c=Math.round(h*vs-2);return c=c>0?c:1,`${c}px`}static calculateEventWidth(r,s){const t=F.normalizeDate(r.event.startTime),n=F.normalizeDate(r.event.endTime),i=F.normalizeDate(s[0]),l=F.normalizeDate(s[s.length-1]),{isOverflowLeft:u,isOverflowRight:f}=this.getOverflowDirection(r,s);if(s.length<=7){const{visibleDayCount:d,startDayIndex:E}=F.getVisibleAndStartDays(s,t,n,r.event);if(d>0&&E!==-1)return`calc(${d*100}% - 4px)`}if(u&&f)return`${s.length*100}%`;if(u){const d=n.getTime()<=l.getTime()?n:l;return`${(Math.floor((d.getTime()-i.getTime())/gr)+1)*100}%`}else return f?`${(Math.floor((l.getTime()-t.getTime())/gr)+1)*100}%`:`${r.totalSegments?r.totalSegments*100:100}%`}static setIndexPosition(r,s,t){const n=F.generateDateKey(s),i=r.get(n)||[];for(;i.length<=t;)i.push(!1);return i.splice(t,1,!0),r.set(n,i),r}}const Xn=o=>{const r=o.closest(".sf-scheduler");if(r){const s=r.querySelector("."+p.SELECTED_CELL);s&&(s.classList.remove(p.SELECTED_CELL),s.removeAttribute("tabindex"))}o.classList.add(p.SELECTED_CELL),o.tabIndex=0,o.focus()},wr=(o,r,s)=>{if(!o||r<0||s<0)return null;const n=o.querySelectorAll(`.${p.WORK_CELLS_ROW}`).item(r);return n?n.querySelectorAll(`.${p.WORK_CELLS}`).item(s)??null:null},Qn=o=>{const r=o.closest("."+p.SCHEDULER);r&&(r.querySelectorAll("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE).forEach(t=>{t.classList.remove(p.APPOINTMENT_ACTIVE)}),Xn(r)),o.classList.add(p.APPOINTMENT_ACTIVE)},Ds=(o,r)=>{const s=r.querySelector("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE),t=s==null?void 0:s.getAttribute("data-guid");return{data:Me.getEventByGuid(o,t),element:s}},$l=o=>{var t,n;let r;const s=((t=o==null?void 0:o.getAttribute)==null?void 0:t.call(o,"data-date"))??((n=o.dataset)==null?void 0:n.date)??void 0;if(s){const i=parseInt(s,10);r=new Date(i)}return r},Vl=(o,r)=>{const s=Array.isArray(o)?o==null?void 0:o[0]:o,n=s.classList.contains(p.ALL_DAY_CELL)||s.classList.contains(p.WORK_DAYS)||!((r==null?void 0:r.enable)??!0),i=$l(s);let l;if(n)i&&(l=F.addDays(i,1));else if(i&&r){const u=r.interval/r.slotCount,f=new Date(i);f.setMinutes(f.getMinutes()+u),l=f}return{startTime:i,endTime:l??i,isAllDay:n,element:s}},qn=24,Dn=4,vs=40;class Me{static filterEventsByDateRange(r,s){if(!(r!=null&&r.length)||!(s!=null&&s.length))return[];const t=F.normalizeDate(s[0]),n=F.normalizeDate(s[s.length-1]);return r.filter(i=>{if(!i.startTime||!i.endTime)return!1;const l=F.normalizeDate(i.startTime);return!(F.normalizeDate(i.endTime)<t||l>n)})}static findNonConflictingPosition(r,s,t,n,i){let l=0,u=!1;for(;!u;){u=!0;for(const f of r){const d=F.normalizeDate(f);if(d>=s&&(d<t||d.getTime()===t.getTime()&&n)){const m=F.generateDateKey(f);if((i.get(m)||[]).findIndex((c,v)=>v===l&&c)!==-1){u=!1,l++;break}}}}return l}static mapEventData(r,s){if(!r||r.length===0)return[];const t=s||{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException"};return r.map(n=>{const i={};if(t.id&&Object.prototype.hasOwnProperty.call(n,t.id)&&(i.id=n[t.id]),t.subject&&Object.prototype.hasOwnProperty.call(n,t.subject)&&(i.subject=n[t.subject]),t.startTime&&Object.prototype.hasOwnProperty.call(n,t.startTime)){const f=n[t.startTime];f instanceof Date?i.startTime=f:(typeof f=="string"||typeof f=="number")&&(i.startTime=new Date(f))}if(t.endTime&&Object.prototype.hasOwnProperty.call(n,t.endTime)){const f=n[t.endTime];f instanceof Date?i.endTime=f:(typeof f=="string"||typeof f=="number")&&(i.endTime=new Date(f))}t.isAllDay&&Object.prototype.hasOwnProperty.call(n,t.isAllDay)&&(i.isAllDay=n[t.isAllDay]),t.location&&Object.prototype.hasOwnProperty.call(n,t.location)&&(i.location=n[t.location]),t.description&&Object.prototype.hasOwnProperty.call(n,t.description)&&(i.description=n[t.description]),t.isReadonly&&Object.prototype.hasOwnProperty.call(n,t.isReadonly)&&(i.isReadonly=n[t.isReadonly]),t.isBlock&&Object.prototype.hasOwnProperty.call(n,t.isBlock)&&(i.isBlock=n[t.isBlock]),t.recurrenceRule&&Object.prototype.hasOwnProperty.call(n,t.recurrenceRule)&&(i.recurrenceRule=n[t.recurrenceRule]),t.recurrenceID&&Object.prototype.hasOwnProperty.call(n,t.recurrenceID)&&(i.recurrenceID=n[t.recurrenceID]),t.recurrenceException&&Object.prototype.hasOwnProperty.call(n,t.recurrenceException)&&(i.recurrenceException=n[t.recurrenceException]);const l=new Set(Object.values(t)),u=Object.fromEntries(Object.entries(n).filter(([f])=>!l.has(f)));return Object.assign(i,u),i.guid=Me.generateEventGuid(),i})}static sortEventsByStartTimeAndDuration(r){return[...r].sort((s,t)=>{if(!s.event.startTime||!t.event.startTime)return 0;const n=s.event.startTime.getTime()-t.event.startTime.getTime();if(n!==0)return n;const i=s.event.endTime?s.event.endTime.getTime()-s.event.startTime.getTime():0;return(t.event.endTime?t.event.endTime.getTime()-t.event.startTime.getTime():0)-i})}static calculateOverlappingEvents(r,s=!0){if(!r||r.length===0)return[];if(!s)return this.resolveOverlappingEvents(r);const t=this.sortEventsByStartTimeAndDuration(r);return this.identifyOverlapGroups(t)}static identifyOverlapGroups(r){const s=[];for(const t of r){let n=!1;for(const i of s)if(i.some(u=>this.eventsOverlap(t,u))){i.push(t),n=!0;break}n||s.push([t])}return this.convertOverlapGroupsToEventGroups(s)}static convertOverlapGroupsToEventGroups(r){return r.filter(t=>t.length>0).map(t=>{if(t.length===1)return[{...t[0],positionIndex:0,totalOverlapping:1}];const n=[...t].sort((u,f)=>!u.event.startTime||!f.event.startTime?0:u.event.startTime.getTime()-f.event.startTime.getTime()),i=[],l=[];return n.forEach(u=>{let f=i.findIndex(d=>d<=u.event.startTime);f===-1?(f=i.length,i.push(u.event.endTime)):i[parseInt(f.toString(),10)]=u.event.endTime,l.push(f)}),n.map((u,f)=>({...u,positionIndex:l[parseInt(f.toString(),10)],totalOverlapping:i.length}))})}static prioritizeEvents(r){return[...r].sort((s,t)=>{if(s.event.isAllDay&&!t.event.isAllDay)return-1;if(!s.event.isAllDay&&t.event.isAllDay)return 1;if(!s.event.startTime||!t.event.startTime||!s.event.endTime||!t.event.endTime)return 0;const n=s.event.endTime.getTime()-s.event.startTime.getTime(),i=t.event.endTime.getTime()-t.event.startTime.getTime();return n!==i?i-n:s.event.startTime.getTime()-t.event.startTime.getTime()})}static resolveOverlappingEvents(r){if(!r||r.length===0)return[];const s=this.prioritizeEvents(r),t=[],n=new Set;return s.forEach(i=>{if(n.has(i))return;const l=s.filter(f=>i!==f&&!n.has(f)&&this.eventsOverlap(i,f)),u=[{...i,positionIndex:0,totalOverlapping:1}];t.push(u),n.add(i),l.forEach(f=>{n.add(f)})}),t}static eventsOverlap(r,s){return!(r!=null&&r.event.startTime)||!(r!=null&&r.event.endTime)||!(s!=null&&s.event.startTime)||!(s!=null&&s.event.endTime)?!1:r.event.startTime<s.event.endTime&&r.event.endTime>s.event.startTime||s.event.startTime<r.event.endTime&&s.event.endTime>r.event.startTime}static checkEventOverlap(r,s,t=!0,n){const i=t?r.startTime:r[n.startTime],l=t?r.endTime:r[n.endTime];if(!i||!l)return!1;const u=F.normalizeDate(i),f=F.normalizeDate(l);return(s||[]).filter(E=>{if(E.isBlock||!E.startTime||!E.endTime)return!1;const m=F.normalizeDate(E.startTime);return!(F.normalizeDate(E.endTime)<u||m>f)}).some(E=>{const m=E.startTime,g=E.endTime,h=E.isAllDay;return E.id===r.id||E.id===r.Id||E.guid===r.guid||!m||!g?!1:h?i<=g&&l>=m:i<g&&l>m})}static isBlockRange(r,s,t=!0,n){const i=Array.isArray(r)?r:[r];if(i&&i.length===0)return!1;const l=(s==null?void 0:s.filter(u=>u.isBlock))||[];if(l&&l.length===0)return!1;for(const u of l){const f=u.startTime,d=u.endTime;if(!f||!d)continue;const E=u.isAllDay||Me.isMultiDayEvent(u);for(const m of i){const g=t?m.startTime:m[n.startTime],h=t?m.endTime:m[n.endTime];if(!g||!h)continue;let c;if(E){const v=F.normalizeDate(g),D=F.normalizeDate(h),O=F.normalizeDate(f),_=F.normalizeDate(d);c=v<=_&&O<=D}else c=g<d&&h>f;if(c)return!0}}return!1}static splitEventByDay(r,s){const t=[],n=F.normalizeDate(r.startTime),i=F.normalizeDate(r.endTime),l=s.filter(f=>{const d=F.normalizeDate(f);return d>=n&&d<=i}).length;let u=0;return s.forEach((f,d)=>{const E=F.normalizeDate(f);if(E>=n&&E<=i){const m=E.getTime()===n.getTime(),g=E.getTime()===i.getTime(),h=m?new Date(r.startTime):new Date(E.getFullYear(),E.getMonth(),E.getDate(),0,0,0),c=g?new Date(r.endTime):new Date(E.getFullYear(),E.getMonth(),E.getDate()+1,0,0,0),v={event:r,startDate:h,endDate:c,isFirstDay:m,isLastDay:g,segmentIndex:u,totalSegments:l,columnIndex:d};t.push(v),u++}}),t}static isAlldayHasMoreEvents(r,s,t=2){let n=!1;return r.forEach(i=>{const l=F.generateDateKey(i);(s.get(l)||[]).length>t&&(n=!0)}),n}static isMultiDayEvent(r){if(!(r!=null&&r.startTime)||!(r!=null&&r.endTime))return!1;const s=new Date(r.startTime),t=new Date(r.endTime);if(F.isSameDay(s,t))return!1;if(r.isAllDay)return!0;const n=F.normalizeDate(s),i=F.normalizeDate(t),l=Math.round((i.getTime()-n.getTime())/gr);return l<=0?!1:l>=2?!0:!F.isMidnight(t)}static getAriaLabel(r){const{subject:s,startTime:t,endTime:n}=r,i=t?t.toString():"",l=n?n.toString():"";return`${s} Begin From ${i} Ends At ${l}`}static generateEventGuid(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}static getEventClassNames(r){const s=[];return r.isBlock?s.push("sf-block-appointment"):(s.push("sf-appointment"),r.isReadonly&&s.push("sf-read-only")),s}static getEventsMap(r,s){const t=new Map;return r.forEach(n=>{const i=F.generateDateKey(n);t.set(i,[])}),s.forEach(n=>{if(!n.startDate)return;const i=F.generateDateKey(n.startDate),l=t.get(i)||[];l&&(l.push(n),t.set(i,l))}),t}static getMaxEventsInCell(r,s){let t=0;return s.forEach(n=>{var u;const i=F.generateDateKey(n),l=(u=r.get(i))==null?void 0:u.filter(f=>!f.event.isBlock);t=Math.max(t,l==null?void 0:l.length)}),t}static processDayEvents(r,s){if(!(r!=null&&r.length)||!(s!=null&&s.length))return[];const t=Me.filterEventsByDateRange(s,r),n=[];let i=new Map;return r.forEach(u=>{const f=F.generateDateKey(u);i.set(f,[])}),F.sortByTimeAndSpan(t).forEach(u=>{if(!u.startTime||!u.endTime)return;const f=Me.getEventClassNames(u),d=F.normalizeDate(u.startTime),E=F.normalizeDate(u.endTime),m=Me.isMultiDayEvent(u),g=m?F.getDaysCount(u.startTime,u.endTime,u.isAllDay):1,h=u.isAllDay?!0:!F.isMidnight(u.endTime),c=u.isBlock?null:Me.findNonConflictingPosition(r,d,E,h,i);if(m)for(const v of r){const D=F.normalizeDate(v);if(!(D>=d&&(D<E||D.getTime()===E.getTime()&&h)))continue;u.isBlock||(i=dt.setIndexPosition(i,v,c));const _=D.getTime()===d.getTime(),T=D.getTime()===E.getTime()&&h,A=Math.floor((D.getTime()-d.getTime())/(1e3*60*60*24)),R=r.findIndex(S=>{const L=F.normalizeDate(S);return L>=d&&(L<E||L.getTime()===E.getTime()&&h)})===r.findIndex(S=>F.normalizeDate(S).getTime()===D.getTime()),B=_?new Date(u.startTime.getTime()):new Date(D.getFullYear(),D.getMonth(),D.getDate(),0,0,0),k=T?new Date(u.endTime.getTime()):new Date(D.getFullYear(),D.getMonth(),D.getDate()+1,0,0,0),b=`${v.toISOString()}-${u.id}`;n.push({event:u,startDate:B,endDate:k,isFirstDay:_,isLastDay:T,isFirstSegmentInRenderRange:R,segmentIndex:A,totalSegments:g,positionIndex:c,eventClasses:f,eventKey:b,isMonthEvent:!0})}else{u.isBlock||(i=dt.setIndexPosition(i,d,c));const v=`${d.toISOString()}-${u.id}`;n.push({event:u,startDate:u.startTime,endDate:u.endTime,positionIndex:c,eventClasses:f,eventKey:v,isMonthEvent:!0})}}),n.sort((u,f)=>{const d=u.positionIndex??0,E=f.positionIndex??0;return d-E})}static cloneEventPosition(r,s,t,n,i=!1,l,u){const f=F.normalizeDate(s.startDate),d=F.normalizeDate(s.endDate),{visibleDayCount:E}=F.getVisibleAndStartDays(s.week,f,d,s.event),m=Math.max(0,t*E-Dn);let g,h,c;if(n){const D=r==null?void 0:r.querySelector(`.${p.ALL_DAY_ROW}`);g=D.querySelectorAll(`.${p.ALL_DAY_CELL}`).item(s.columnIndex),h=D.offsetTop}else g=wr(r,s.rowIndex,s.columnIndex),l?h=g.querySelector(`.${p.APPOINTMENT_WRAPPER}`).offsetTop:(h=g==null?void 0:g.offsetTop,c=Math.max(0,u.offsetHeight));const v={top:`${h}px`,width:`${m}px`,height:`${c}px`};if(i){const D=g.parentElement?Math.max(0,g.parentElement.clientWidth-(g.offsetLeft+g.offsetWidth)):0;v.insetInlineStart=`${D}px`}else v.insetInlineStart=`${g.offsetLeft}px`;return v}static splitEventByWeek(r,s){const t=new Date(s.startTime),n=new Date(s.endTime),i=F.normalizeDate(t),l=F.normalizeDate(n),u=[];return r.forEach((f,d)=>{const E=F.normalizeDate(f[0]),m=F.normalizeDate(f[f.length-1]),g=F.addDays(m,1);if(!(t<=g&&n>=E))return;const c=i>=E&&i<=m,v=l>=E&&l<=m,D=c?t:E,O=v?n:g,_=f.map(b=>F.normalizeDate(b).getTime()),T=F.normalizeDate(D).getTime();let A=_.indexOf(T);A===-1&&(A=0);const R=i.getTime()<E.getTime(),B=l.getTime()>m.getTime(),k={event:s,startDate:D,endDate:O,week:f,rowIndex:d,columnIndex:A,isOverflowLeft:R,isOverflowRight:B};u.push(k)}),u}static processCloneEvent(r,s,t,n,i,l,u,f=!1,d,E){const m=u?[s]:F.getRenderWeeks(s,n,i),g=this.splitEventByWeek(m,t),h=Me.isMultiDayEvent(t);return g.forEach(c=>{var v;c.eventStyle=this.cloneEventPosition(r,c,l,u,f,d,E),c.totalSegments=h?F.getDaysCount(c.startDate,c.endDate,(v=c.event)==null?void 0:v.isAllDay):1}),g}static processTimeSlotCloneEvent(r,s,t,n,i,l,u,f=!1){const d=this.splitEventByDay(t,s);return d.forEach(E=>{const m=dt.calculateTopPosition(E.startDate,n,i),g=dt.calculateHeight(E,n,i,l),h=wr(r,0,E.columnIndex);if(E.eventStyle={top:m,height:g,width:`${u}px`},f){const c=h.parentElement?Math.max(0,h.parentElement.clientWidth-(h.offsetLeft+h.offsetWidth)):0;E.eventStyle.right=`${c}px`}else E.eventStyle.left=`${h.offsetLeft}px`}),d}static getEventByGuid(r,s){if(!(!(r!=null&&r.length)||!s))return r.find(t=>(t==null?void 0:t.guid)===s)}}function Wl(o,r){if(!o||o.length===0||!r||r.length===0)return o;const s=[];for(const t of o)if(t.recurrenceRule&&!t.recurrenceID){const n=Fl(t);s.push(...n)}else s.push(t);return s}function Fl(o){const r=Bo(o.startTime,o.recurrenceRule,o.recurrenceException,0),s=o.endTime.getTime()-o.startTime.getTime(),t=[];for(let n=0;n<r.length;n++){const i=r[n],l=bt({},o,null,!0);l.startTime=new Date(i),l.endTime=new Date(new Date(i).getTime()+s),l.recurrenceID=l.id,l.guid=Bl(),delete l.recurrenceException,t.push(l)}return t}function Bl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{const r=Math.random()*16|0;return(o==="x"?r:r&3|8).toString(16)})}function ho(o,r,s,t,n,i){var g,h,c,v,D;if(!o[(i==null?void 0:i.recurrenceID)||"recurrenceID"]||!o[(i==null?void 0:i.recurrenceRule)||"recurrenceRule"])return{isValid:!0,shouldAlert:!1,messageKey:Pt.SameDayAlert};const l=t.find(O=>O.id===o[(i==null?void 0:i.recurrenceID)||"recurrenceID"]);let u=n.filter(O=>O.recurrenceID===l.id&&O.recurrenceRule);u=u.sort((O,_)=>O.startTime.getTime()-_.startTime.getTime());const f=u.findIndex(O=>O.guid===o[(i==null?void 0:i.guid)||"guid"]);if(f===-1)return{isValid:!0,shouldAlert:!1};const d=(h=F.normalizeDate((g=u[f-1])==null?void 0:g.startTime))==null?void 0:h.getTime(),E=(v=F.normalizeDate((c=u[f+1])==null?void 0:c.startTime))==null?void 0:v.getTime(),m=F.normalizeDate(r).getTime();return f===0&&m<E?{isValid:!0,shouldAlert:!1}:f===u.length-1&&m>d?{isValid:!0,shouldAlert:!1}:m>d&&m<E?((D=u[f+1])==null?void 0:D.startTime.getTime())<s.getTime()?{isValid:!1,shouldAlert:!0,messageKey:Pt.SameDayAlert}:{isValid:!0,shouldAlert:!1}:m<d&&m<E||m>d&&m>E||!d&&m>E||!E&&m<d?{isValid:!1,shouldAlert:!0,messageKey:Pt.OccurrenceAlert}:{isValid:!1,shouldAlert:!0,messageKey:Pt.SameDayAlert}}function Sr(o,r,s){return r==null?void 0:r.find(t=>t.id===(o.recurrenceID||o[s.recurrenceID]))}function ys(o,r){return(o==null?void 0:o.reduce((s,t)=>{const n=Number(t[r.id]||t.id);return Math.max(s,n)},0))??0}function Eo(o,r,s,t,n,i){var u;const l={};return(Array.isArray(i)||o||n)&&(l[n.id]=o.id,Ul(l,o,r,s,n),(u=t==null?void 0:t.current)!=null&&u.saveEvent&&t.current.saveEvent(l,o.recurrenceID?ze.EditOccurrence:ze.Edit)),l}function Rs(o,r,s){const t=Sr(o,s,r),n=t[r.recurrenceException]||t.recurrenceException?String(t[r.recurrenceException]??t.recurrenceException):"",i=n?`${n},${o.recurrenceException||o[r.recurrenceException]}`:o.recurrenceException||o[r.recurrenceException]||n;return{[r.id]:t[r.id]||t.id,[r.recurrenceException]:i}}function Ul(o,r,s,t,n){o[n.subject]=r.subject,o[n.startTime]=s,o[n.endTime]=t,o[n.isAllDay]=r.isAllDay,o[n.recurrenceID]=r.recurrenceID,o[n.recurrenceException]=r.recurrenceException,o[n.recurrenceRule]=r.recurrenceRule}function zl(o,r,s,t){t==null||t.show({title:o,message:r,confirmText:s,showCancel:!1,onConfirm:()=>t.hide()})}function zn(o,r,s,t){const i={[ht.RecurrenceEdit]:{title:s("editEvent"),message:s("editEventContent"),showCancel:!1},[ht.RecurrenceDelete]:{title:s("deleteEvent"),message:s("editEventContent"),showCancel:!1},[ht.SeriesChange]:{title:s("alert"),message:s("seriesChangeAlert"),showCancel:!0,confirmText:s("yes")}}[o];r==null||r.show({action:o,title:i.title,message:i.message,confirmText:i.confirmText||s("ok"),showCancel:i.showCancel??!1,onConfirm:l=>{t(l),r.hide()}})}const Yl=o=>{const{activeViewProps:r,renderDates:s,confirmationDialog:t}=o,{eventSettings:n,readOnly:i,onDataChangeStart:l,onDataChangeComplete:u,onError:f,onDataRequest:d,enableRecurrenceValidation:E}=r,[m,g]=e.useState(),[h,c]=e.useState(),{locale:v}=$e(),{getString:D}=nt(v||"en-US"),O=e.useMemo(()=>(n==null?void 0:n.dataSource)instanceof or?n.dataSource:Array.isArray(n==null?void 0:n.dataSource)?new or(n.dataSource):new or([]),[n==null?void 0:n.dataSource]),_=e.useMemo(()=>(n==null?void 0:n.query)instanceof ts?n==null?void 0:n.query:new ts,[n==null?void 0:n.query]),T=(y,N)=>{const I=_.clone();return y&&N&&(I.addParams("StartDate",y.toISOString()),I.addParams("EndDate",N.toISOString())),I},A=y=>O.executeQuery(y),R=()=>n.query?n.query.clone().fromTable:null,B=y=>{const N={result:y.result,count:y.count};d&&d(N);const I=N.result,q=Me.mapEventData(I,n.fields),H=Wl(q,s);c(q),g(H)},k=y=>{f&&f(y)},b=e.useCallback(()=>{if(!s||s.length===0)return;const y=T(s[0],s[s.length-1]);A(y).then(I=>B(I)).catch(I=>k(I))},[s,A,T]),S=y=>(typeof y[n.fields.startTime]=="string"&&(y[n.fields.startTime]=F.getDateFromString(y[n.fields.startTime])),typeof y[n.fields.endTime]=="string"&&(y[n.fields.endTime]=F.getDateFromString(y[n.fields.endTime])),y),L=e.useCallback(y=>{var I;const N={cancel:!1,addedRecords:y.editParams.addedRecords,changedRecords:y.editParams.changedRecords,deletedRecords:y.editParams.deletedRecords};(I=O.dataSource)!=null&&I.offline?(u&&u(N),b()):y.promise.then(()=>{u&&u(N),b()}).catch(q=>{f&&f(q)})},[u,f,b,O]),C=e.useCallback(y=>{const N={addedRecords:[],changedRecords:[],deletedRecords:[]};let I;if(y.addedRecords instanceof Array){for(let H of y.addedRecords){H=S(H),H[n.fields.recurrenceRule]&&(H[n.fields.id]=ys(m,n.fields)+1);const U=bt({},H,null,!0);N.addedRecords.push(U)}I=O.saveChanges(N,n.fields.id,R(),T())}L({cancel:!1,promise:I,editParams:N})},[O,n,R,T,L,m]),G=e.useCallback((y,N)=>{let I;const q={addedRecords:[],changedRecords:[],deletedRecords:[]};if(N==="DeleteOccurrence"||N==="DeleteSeries")for(let U of y.deletedRecords)if(U.recurrenceID||U[n.fields.recurrenceID]){if(N==="DeleteOccurrence")U.recurrenceID!==U.id||U[n.fields.recurrenceID]!==U[n.fields.id]?q.deletedRecords.push(U):(U.startTime?U.recurrenceException=Cn(U.startTime):U[n.fields.recurrenceException]=Cn(U[n.fields.startTime]),U=Rs(U,n.fields,h),q.changedRecords.push(U));else if(N==="DeleteSeries"){const ne=(h||[]).filter(Q=>(Q.recurrenceID||Q.id)===(U.recurrenceID||U[n.fields.recurrenceID]));q.deletedRecords.push(...ne)}}else q.deletedRecords.push(U);else q.deletedRecords=q.deletedRecords.concat(y.deletedRecords);q.deletedRecords.length>1||q.changedRecords.length>0?I=O.saveChanges(q,n.fields.id,R(),T()):q.deletedRecords.length===1?I=O.remove(n.fields.id,q.deletedRecords[0],R(),T()):I=Promise.resolve(),L({cancel:!1,promise:I,editParams:q})},[O,n,R,T,L,h]),P=(y,N)=>{for(let I of y){if(!I[n.fields.recurrenceID])continue;const q=I[n.fields.id]!==I[n.fields.recurrenceID],H=!!I[n.fields.recurrenceRule];if(q&&!H){I=S(I),N.changedRecords.push(bt({},I,null,!0));continue}if(H){const U=I[n.fields.startTime],ne=I[n.fields.endTime],Q=E?ho(I,U,ne,h,m,n.fields):{isValid:!0,messageKey:Pt.SameDayAlert};if(!Q.isValid){zl(D("alert"),D(Q.messageKey),D("ok"),t);return}}if(I=S(I),q)N.changedRecords.push(bt({},I,null,!0));else{const U=Rs(I,n.fields,h);N.changedRecords.push(U),I[n.fields.id]=ys(m,n.fields)+1,N.addedRecords.push(S(I))}}},X=(y,N,I)=>{var q;for(let H of y)if(H[n.fields.recurrenceID]){let U={},ne=!1;const Q=(q=h||[])==null?void 0:q.filter(J=>((J.recurrenceID&&J.recurrenceID===H[n.fields.recurrenceID]&&J.id!==H[n.fields.recurrenceID]||!J.recurrenceID&&J.recurrenceRule&&J.id===H[n.fields.recurrenceID]&&J.recurrenceException)&&(ne=!0),J.id===H[n.fields.recurrenceID]&&(U=J),(J.recurrenceID||J.id)===H[n.fields.recurrenceID]));if(H[n.fields.id]=U.id,H[n.fields.recurrenceRule]=U.recurrenceRule,delete H[n.fields.recurrenceID],ne)if(I==="EditEntireSeries"){delete H[n.fields.recurrenceException];const J=Q;N.deletedRecords.push(...J),N.addedRecords.push(S(H))}else I==="EditCurrentSeries"&&N.changedRecords.push(S(H));else H=S(H),N.changedRecords.push(bt({},H,null,!0))}},se=(y,N)=>{if(y instanceof Array)for(let I of y)I=S(I),N.changedRecords.push(bt({},I,null,!0));else{const I=y;N.changedRecords.push(I)}},fe=e.useCallback((y,N)=>{let I;const q={addedRecords:[],changedRecords:[],deletedRecords:[]};switch(N){case"EditOccurrence":y.changedRecords instanceof Array&&y.changedRecords.length>0&&P(y.changedRecords,q);break;case"EditCurrentSeries":case"EditEntireSeries":case"EditSeries":y.changedRecords instanceof Array&&y.changedRecords.length>0&&X(y.changedRecords,q,N);break;default:se(y.changedRecords,q);break}q.changedRecords.length>1||q.addedRecords.length>0||q.deletedRecords.length>0?I=O.saveChanges(q,n.fields.id,R(),T()):q.changedRecords.length===1?I=O.update(n.fields.id,q.changedRecords[0],R(),T()):I=Promise.resolve(),L({cancel:!1,promise:I,editParams:q})},[O,n,R,T,L,S,m,h]),pe=e.useCallback(async y=>{if(n.allowAdding&&!i){const N=y instanceof Array?y:[y];if(N.length===0)return;const I={cancel:!1,addedRecords:N,changedRecords:[],deletedRecords:[]};l&&l(I),I.promise?I.promise.then(q=>{q&&C(I)}).catch(q=>{f&&f(q)}):C(I)}},[n,i,l,f,C]),K=e.useCallback(async(y,N)=>{if(n.allowDeleting&&!i){const I=y instanceof Array?y:[y];if(I.length===0)return;const q={cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:I};l&&l(q),q.promise?q.promise.then(H=>{H&&G(q,N)}).catch(H=>{f&&f(H)}):G(q,N)}},[n,i,l,f,G]),M=e.useCallback(async(y,N)=>{if(n.allowEditing&&!i){const I=y instanceof Array?y:[y];if(I.length===0)return;const q={cancel:!1,addedRecords:[],changedRecords:I,deletedRecords:[]};l&&l(q),q.promise?q.promise.then(H=>{H&&fe(q,N)}).catch(H=>{f&&f(H)}):fe(q,N)}},[n,i,l,f,fe]);return e.useEffect(()=>{b()},[O,_,s]),{eventsData:m,eventsProcessed:h,addEvent:pe,deleteEvent:K,saveEvent:M}},Nr=(o,r="Close")=>a.jsx(Qe,{className:`${p.POPUP_CLOSE} ${p.ROUND}`,onClick:o,"aria-label":r,icon:a.jsx(Kn,{}),color:vt.Secondary,variant:Ge.Standard},"close-btn"),Kl=({visible:o,target:r,schedulerElement:s,popupPosition:t,onClose:n,onOpen:i,children:l,adaptive:u})=>{if(!o||!r)return null;const{dir:f}=$e();return xe.isDevice&&u?qt.createPortal(a.jsx("div",{className:`${p.CONTROL} ${p.POPUP_WRAPPER} ${p.MOBILE_POPUP}
                ${f==="rtl"?p.RTL:""}`,children:l}),document==null?void 0:document.body):a.jsx(It,{open:o,relateTo:r,position:t,collision:{X:it.Flip,Y:it.Fit},actionOnScroll:Ps.None,autoReposition:!0,onOpen:i,onClose:n,className:`${p.POPUP_WRAPPER}`,viewPortElementRef:s,zIndex:1003,children:l})},Xl=(o,r)=>({show:()=>o(!0),hide:()=>o(!1),element:r.current}),$r=e.forwardRef((o,r)=>{var V;const{onClose:s,onEditEvent:t,onMoreDetails:n}=o,{schedulerRef:i,eventSettings:l,showQuickInfoPopup:u,showDeleteAlert:f,showRecurrenceDeleteAlert:d,view:E,readOnly:m,timeFormat:g,quickInfo:h}=We(),[c,v]=e.useState({}),[D,O]=e.useState({}),[_,T]=e.useState({}),[A,R]=e.useState(null),[B,k]=e.useState({X:"right",Y:"top"}),[b,S]=e.useState(!1),L=e.useRef(null),C=e.useRef(null),{visible:G,setVisible:P,target:X,setTarget:se,popupElement:fe,schedulerElement:pe,handleClose:K,closeAllPopups:M,handleRef:y}=mo(s),{locale:N}=$e();Mr(fe,G,K);const{getString:I}=nt(N||"en-US");e.useEffect(()=>{b&&(requestAnimationFrame(()=>{U()}),S(!1))},[b]),e.useImperativeHandle(r,()=>({...Xl(P,fe),handleCellClick:(z,te)=>{u&&(v(z),se(te),R("cell"),T({[l.fields.startTime]:z.startTime,[l.fields.endTime]:z.isAllDay?F.addDays(z.endTime,-1):z.endTime,[l.fields.isAllDay]:z.isAllDay}),H(),P(!0))},handleEventClick:(z,te)=>{u&&(O(z),se(te),R("event"),H(),P(!0),Qn(te))},handleDelete:ve}));const q=()=>{k((E==null?void 0:E.toLowerCase())==="day"?{X:"center",Y:"center"}:{X:"right",Y:"top"}),S(!0)},H=()=>{(L||C)&&K(),requestAnimationFrame(()=>{U()})},U=()=>{A==="cell"?L.current&&L.current.element&&L.current.element.focus():A==="event"&&C.current&&C.current.element&&C.current.element.focus()},ne=e.useCallback(z=>{const te=z.value,he={..._,[l.fields.subject]:te};T(he)},[_]),Q=e.useCallback(()=>{var te,he;const z={..._,[l.fields.id]:Me.generateEventGuid(),[l.fields.subject]:_[l.fields.subject]||I("newEvent")};(he=(te=i==null?void 0:i.current)==null?void 0:te.addEvent)==null||he.call(te,z),K(),M()},[_,K]),J=e.useCallback(()=>{t(D),K()},[D,K,t]),Se=e.useCallback(()=>{var te;const z={...c,[l.fields.subject]:(te=L==null?void 0:L.current)==null?void 0:te.value};n(z),K()},[c,K,n]),ve=e.useCallback(()=>{const z=he=>{var Ee,be;if(A==="event"&&D){const ke=he===rt.Occurrence?ze.DeleteOccurrence:ze.DeleteSeries;(be=(Ee=i==null?void 0:i.current)==null?void 0:Ee.deleteEvent)==null||be.call(Ee,D,ke)}K(),M()},te=()=>{var he,Ee;A==="event"&&D&&((Ee=(he=i==null?void 0:i.current)==null?void 0:he.deleteEvent)==null||Ee.call(he,D)),K(),M()};A==="event"&&D&&D.recurrenceID?d==null||d(z):f==null||f(te),P(!1)},[A,D,K,M,i,f,d,l]),ue=z=>te=>{(te.key==="Enter"||te.key===" "&&te.target.type==="button")&&(te.preventDefault(),z())},w={startTime:c.startTime,endTime:c.endTime,isAllDay:c.isAllDay,element:c.element},Z=a.jsx(a.Fragment,{children:h!=null&&h.addHeader?h==null?void 0:h.addHeader({cellData:w}):a.jsx("div",{className:p.POPUP_HEADER,children:a.jsx("div",{className:`${p.POPUP_HEADER_WRAP} ${p.CONTENT_RIGHT}`,children:Nr(K,I("close"))})})}),ie=a.jsx(a.Fragment,{children:h!=null&&h.addContent?h==null?void 0:h.addContent({cellData:w}):a.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[a.jsx("div",{className:p.POPUP_INPUT_WRAP,children:a.jsx(Tr,{ref:L,className:p.POPUP_CELL_SUBJECT,placeholder:I("addTitle"),onKeyDown:ue(Q),onChange:ne,value:_[(V=l==null?void 0:l.fields)==null?void 0:V.subject]||"",size:Kt.Large})}),c.startTime&&c.endTime&&a.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[a.jsx(ds,{}),a.jsx("span",{className:p.POPUP_TIME_TEXT,children:F.formatCellDateRange(new Date(c.startTime),new Date(c.endTime),N,g)})]})]})}),re=a.jsx(a.Fragment,{children:h!=null&&h.addFooter?h==null?void 0:h.addFooter({cellData:w}):a.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[a.jsx(Qe,{className:p.POPUP_MORE_DETAILS,onClick:Se,color:vt.Primary,variant:Ge.Standard,children:I("moreDetails")}),a.jsx(Qe,{className:p.SAVE_EVENT,onClick:Q,onKeyDown:ue(Q),color:vt.Primary,variant:Ge.Standard,children:I("save")})]})}),Ne=a.jsx(a.Fragment,{children:h!=null&&h.editHeader?h==null?void 0:h.editHeader({eventData:D}):a.jsxs("div",{className:`${p.POPUP_HEADER} ${p.POPUP_CELL_HEADER} ${p.DISPLAY_FLEX}`,children:[a.jsx("div",{className:p.POPUP_EVENT_SUBJECT,children:D.subject||I("addTitle")}),a.jsx("div",{className:`${p.POPUP_HEADER_WRAP}`,children:Nr(K,I("close"))})]})}),ee=a.jsx(a.Fragment,{children:h!=null&&h.editContent?h==null?void 0:h.editContent({eventData:D}):a.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[D.startTime&&D.endTime&&a.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[a.jsx(ds,{}),a.jsx("span",{className:p.POPUP_TIME_TEXT,children:F.formatPopupDateRange(D,N,g)})]}),D.location&&a.jsxs("div",{className:`${p.LOCATION} ${p.DISPLAY_FLEX}`,children:[a.jsx(Ei,{}),a.jsx("span",{className:p.POPUP_LOCATION_TEXT,children:D.location})]}),D.description&&a.jsxs("div",{className:`${p.DESCRIPTION} ${p.DISPLAY_FLEX}`,children:[a.jsx(Ti,{}),a.jsx("span",{className:p.POPUP_DESCRIPTION_TEXT,children:D.description})]})]})}),oe=a.jsx(a.Fragment,{children:h!=null&&h.editFooter?h==null?void 0:h.editFooter({eventData:D}):a.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[a.jsx(Qe,{ref:C,className:p.EDIT_EVENT,disabled:!!(D!=null&&D.isReadonly)||m,onClick:J,onKeyDown:ue(J),color:vt.Primary,variant:Ge.Standard,children:I("edit")}),a.jsx(Qe,{className:p.DELETE_EVENT,disabled:!!(D!=null&&D.isReadonly)||m,onClick:ve,onKeyDown:ue(ve),color:vt.Primary,variant:Ge.Standard,children:I("delete")})]})}),ce=()=>a.jsxs("div",{ref:y,className:`${p.QUICK_INFO_WRAPPER} ${p.CELL_POPUP}`,children:[Z,ie,re]}),x=()=>a.jsxs("div",{ref:y,className:`${p.QUICK_INFO_WRAPPER} ${p.EVENT_POPUP}`,children:[Ne,ee,oe]});return a.jsx(Kl,{visible:G,target:X,popupPosition:B,schedulerElement:pe,onClose:K,onOpen:q,adaptive:(h==null?void 0:h.adaptive)??!0,children:A==="cell"?ce():x()})});$r.displayName="QuickInfoPopup";$r.__docgenInfo={description:"Combined QuickInfoPopup component that handles both cell and event popups",methods:[],displayName:"QuickInfoPopup"};function ql(){const{renderDates:o}=gt(),{showWeekNumber:r,workDays:s,weekRule:t,firstDayOfWeek:n}=We(),{locale:i}=$e(),[l,u]=e.useState(!0),[f,d]=e.useState(!1),E=o.length>0&&r?F.getWeekNumber(o[0],t,n):null,m=e.useCallback(c=>{d(c)},[]),g=e.useCallback(()=>{u(c=>!c)},[]);return{headerCells:o.map((c,v)=>{const D=F.isSameDay(c,new Date),O=F.isWeekend(c,s),_=ft(c,{type:"date",skeleton:"E",locale:i}),T=ft(c,{type:"date",skeleton:"d",locale:i}),A=["sf-header-cells",D?"sf-current-day":"",O?"sf-weekend":""].filter(Boolean).join(" ");return{date:c,dayName:_,dateNumber:T,isToday:D,isWeekend:O,className:A,key:`sf-header-cells-${v}`}}),isAllDayCollapsed:l,showAllDayToggle:f,weekNumber:E,toggleAllDayCollapse:g,handleMoreEventsChange:m}}function Vr(){const{onViewChange:o,onSelectedDateChange:r,getAvailableViews:s}=We();return{handleDateClick:e.useCallback((n,i)=>{n.preventDefault(),n.stopPropagation(),pt.isDayViewAvailable(s)&&(r({value:i}),o({value:"Day"}))},[r,o])}}const Gl=()=>{const[o,r]=e.useState({date:null,events:[],visible:!1,target:null}),s=e.useRef(null),t=e.useRef(null),{locale:n}=$e(),{handleDateClick:i}=Vr(),{quickPopupRef:l}=We();e.useEffect(()=>{o.target&&(t.current=o.target.closest(".sf-scheduler"))},[o.target]);const u=()=>{r({date:null,events:[],target:null,visible:!1})};po(u);const f=(m,g)=>{var h;(h=l.current)==null||h.handleEventClick(m,g)},d=(m,g)=>{g&&(i(m,o.date),u())},E=(m,g,h)=>{r({date:m,events:g,target:h,visible:!0})};return{date:o.date,events:o.events,visible:o.visible,target:o.target,popupElement:s,schedulerElement:t,locale:n,handleClose:u,handleEventClick:f,handleNavigation:d,open:E}},Wr=e.forwardRef((o,r)=>{const{date:s,events:t,visible:n,target:i,popupElement:l,schedulerElement:u,locale:f,handleClose:d,handleEventClick:E,handleNavigation:m,open:g}=Gl(),{eventTemplate:h,getAvailableViews:c}=We(),v=pt.isDayViewAvailable(c),{getString:D}=nt(f||"en-US");e.useImperativeHandle(r,()=>({element:l.current,open:g})),Mr(l,n,d);const O=e.useCallback(T=>h?h(T):a.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:T.subject||D("addTitle")}),[h]),_=()=>a.jsxs("div",{ref:l,className:p.MORE_EVENT_POPUP,children:[a.jsxs("div",{className:p.MORE_EVENT_HEADER,children:[a.jsxs("div",{className:`${p.MORE_EVENT_DATE_HEADER} ${v?p.LINK:""}`,onClick:T=>m(T,v),tabIndex:0,children:[ft(s,{format:"E",calendar:"gregorian",locale:f})," ",ft(s,{format:"d",calendar:"gregorian",locale:f})]}),a.jsx("div",{className:"sf-more-event-close",children:Nr(d,D("close"))})]}),a.jsx("div",{className:p.MORE_EVENT_CONTENT,children:t.map(T=>a.jsx("div",{className:p.APPOINTMENT,onClick:A=>E(T,A.currentTarget),onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),E(T,A.currentTarget))},"data-id":`Appointment_${T.id}`,"data-guid":T.guid,role:"button",tabIndex:0,children:O(T)},`eventId-${T.id}`))})]});return!n||!i?null:xe.isDevice?qt.createPortal(a.jsx("div",{className:`${p.CONTROL} ${p.MORE_POPUP_WRAPPER} ${p.MOBILE_POPUP}`,children:_()}),document==null?void 0:document.body):a.jsx(It,{open:n,relateTo:i,position:{X:"right",Y:"top"},collision:{X:it.Flip,Y:it.Flip},autoReposition:!0,onClose:d,className:p.MORE_POPUP_WRAPPER,viewPortElementRef:u||null,zIndex:1e3,children:_()})});Wr.displayName="MorePopup";Wr.__docgenInfo={description:"MorePopup component for displaying additional events in month view",methods:[],displayName:"MorePopup"};const Zl=(o,r)=>{const{schedulerRef:s,keyboardNavigation:t,handleTodayClick:n,eventSettings:i,readOnly:l,showDeleteAlert:u,showQuickInfoPopup:f,getAvailableViews:d,handleCurrentViewChange:E,handlePreviousClick:m,handleNextClick:g}=o,h=(k,b)=>{k.getAttribute("tabindex")!=="0"&&k.setAttribute("tabindex","0"),k.focus(),b.preventDefault()},c=k=>{var L;const b=(L=s.current)==null?void 0:L.element,S=b==null?void 0:b.querySelector(`.${p.CONTENT_TABLE} .${p.WORK_CELLS}`);S&&(h(S,k),S.classList.add(p.SELECTED_CELL))},v=k=>{n&&(n(),k.preventDefault())},D=k=>{m&&(m(),k.preventDefault(),k.stopPropagation())},O=k=>{g&&(g(),k.preventDefault(),k.stopPropagation())},_=k=>{const b=k.code.replace("Digit",""),S=parseInt(b,10)-1;if(isNaN(S)||S<0)return;const L=d==null?void 0:d();if(!(!L||L.length===0)&&S<L.length){const C=L[parseInt(S.toString(),10)];E&&(E(C.name),k.preventDefault(),k.stopPropagation())}},T=k=>{var L,C,G,P,X,se;let b=document==null?void 0:document.activeElement;const S=(L=s.current)==null?void 0:L.element;if((!b||!((C=b.classList)!=null&&C.contains(p.APPOINTMENT))||Dt(b,"."+p.POPUP_WRAPPER))&&(b=Ds(r||[],S).element),b&&b.classList.contains(p.APPOINTMENT)){if(Qn(b),l||i&&!i.allowDeleting)return;if(f&&((P=(G=o.quickPopupRef)==null?void 0:G.current)!=null&&P.element))(X=o.quickPopupRef)==null||X.current.handleDelete();else if(u){const fe=Ds(r||[],S).data,pe=Array.isArray(fe)?fe:[fe],K=pe[0];if(K&&K.recurrenceID&&o.showRecurrenceDeleteAlert){const M=y=>{var N,I;if(K){const q=y===rt.Occurrence?ze.DeleteOccurrence:ze.DeleteSeries;(I=(N=s==null?void 0:s.current)==null?void 0:N.deleteEvent)==null||I.call(N,K,q)}};(se=o.showRecurrenceDeleteAlert)==null||se.call(o,M)}else u(()=>{pe.forEach(y=>{var N,I;(I=(N=s==null?void 0:s.current)==null?void 0:N.deleteEvent)==null||I.call(N,y)})})}k.preventDefault()}},A=(k,b,S,L,C,G)=>{let P=b,X=S;switch(k){case At.Left:{if(S>0)X=S-1;else if(b>0){P=b-1;const se=C(P);X=Math.max(0,((se==null?void 0:se.length)??1)-1)}break}case At.Right:{S<((G==null?void 0:G.length)??0)-1?X=S+1:b<L.length-1&&(P=b+1,X=0);break}case At.Up:{if(b===0)return null;P=b-1;const se=C(P);X=Math.min(S,Math.max(0,((se==null?void 0:se.length)??1)-1));break}case At.Down:{if(b>=L.length-1)return null;P=b+1;const se=C(P);X=Math.min(S,Math.max(0,((se==null?void 0:se.length)??1)-1));break}}return{nextRow:P,nextCol:X}},R=(k,b)=>{var y,N,I;const S=(y=s.current)==null?void 0:y.element,L=(I=(N=b.target).closest)==null?void 0:I.call(N,"."+p.WORK_CELLS_ROW),C=S.querySelectorAll(`.${p.WORK_CELLS_ROW}`),G=Array.prototype.indexOf.call(C,L),P=q=>{var H;return(H=C.item(q))==null?void 0:H.querySelectorAll(`.${p.WORK_CELLS}`)},X=P(G),se=Array.prototype.indexOf.call(X,b.target);let fe=G,pe=se;const K=A(k,G,se,C,P,X);if(!K)return;fe=K.nextRow,pe=K.nextCol;const M=wr(S,fe,pe);M&&(Xn(M),b.preventDefault(),b.stopPropagation())};return k=>{var S,L,C,G;if(!t)return;const b=k.target;if(!(b&&["INPUT","TEXTAREA","SELECT"].indexOf(b.tagName)>-1&&b.closest(`.${p.POPUP_WRAPPER}`))){if(k.shiftKey&&k.altKey&&k.code==="KeyY"){v(k);return}if(k.altKey&&k.code>="Digit1"&&k.code<="Digit6"){_(k);return}switch(k.key){case"Home":{c(k);break}case"ArrowUp":{!k.ctrlKey&&!k.metaKey&&((S=b==null?void 0:b.closest)!=null&&S.call(b,"."+p.WORK_CELLS))&&R(At.Up,k);break}case"ArrowDown":{!k.ctrlKey&&!k.metaKey&&(L=b==null?void 0:b.closest)!=null&&L.call(b,"."+p.WORK_CELLS)&&R(At.Down,k);break}case"Delete":{T(k);break}case"ArrowLeft":{k.ctrlKey||k.metaKey?D(k):(C=b==null?void 0:b.closest)!=null&&C.call(b,"."+p.WORK_CELLS)&&R(At.Left,k);break}case"ArrowRight":{k.ctrlKey||k.metaKey?O(k):(G=b==null?void 0:b.closest)!=null&&G.call(b,"."+p.WORK_CELLS)&&R(At.Right,k);break}}}}},go=e.createContext(void 0),Ql=({children:o})=>{const[r,s]=e.useState({visible:!1,guid:null,segments:[],isDayEvent:!1}),t=e.useCallback(l=>{s({visible:!0,guid:l==null?void 0:l.guid,segments:(l==null?void 0:l.segments)??[],isDayEvent:!!(l!=null&&l.isDayEvent)})},[]),n=e.useCallback(()=>{s({visible:!1,guid:null,segments:[],isDayEvent:!1})},[]),i=e.useMemo(()=>({...r,show:t,hide:n}),[r,t,n]);return a.jsx(go.Provider,{value:i,children:o})},Fr=()=>{const o=e.useContext(go);if(!o)throw new Error("useCloneEventContext must be used within CloneEventProvider");return o},Xt=({event:o})=>{if(!(o.recurrenceRule||o.recurrenceID)||xe.isDevice)return null;const s=o.id!==o.recurrenceID,t=s?Di:yi,n=s?p.EVENT_RECURRENCE_EDIT_ICON_CLASS:p.EVENT_RECURRENCE_ICON_CLASS;return a.jsx("div",{className:`${p.ICONS} ${n}`,children:a.jsx(t,{})})};Xt.displayName="RecurrenceIcon";const Jl=o=>{const{event:r,eventStyle:s,totalSegments:t,isOverflowLeft:n=!1,isOverflowRight:i=!1}=o,{timeFormat:l}=We(),{locale:u}=$e(),f=c=>ft(c??new Date,{type:"time",skeleton:"short",format:l,locale:u}),d=c=>a.jsx("div",{className:`sf-indicator sf-icons sf-${c}-icon`,children:c==="left"?a.jsx(_r,{}):a.jsx(Pr,{})}),E=c=>a.jsx("div",{className:p.TIME,children:c}),h=t?(()=>{const{subject:c,isAllDay:v,startTime:D,endTime:O}=r,_=n?d("left"):!v&&E(f(D)),T=i?d("right"):!v&&E(f(O));return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[_,a.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:c||"Add title"}),T,a.jsx(Xt,{event:r})]})})():(()=>{const{subject:c,startTime:v,isAllDay:D}=r;return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!D&&E(f(v)),a.jsx("div",{className:`${p.SUBJECT}`,children:c||"Add title"}),a.jsx(Xt,{event:r})]})})();return a.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:s,children:h})},ec=o=>{const{timeFormat:r,startHourTuple:s,endHourTuple:t}=We(),{renderDates:n}=gt(),{locale:i}=$e(),l=(E,m)=>{let g=r;g||(g=Uo({type:"time",skeleton:"short",format:r},!1));const h=ft(E,{type:"time",format:g,locale:i}),c=ft(m,{type:"time",format:g,locale:i});return`${h} - ${c}`},u=E=>{const{event:m}=E,g=m.startTime&&m.endTime?l(m.startTime,m.endTime):"";return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[a.jsx("div",{className:`${p.SUBJECT}`,children:m.subject||"Add title"}),m.location&&a.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:m.location}),a.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:g}),a.jsx(Xt,{event:m})]})},f=E=>{const{isOverflowTop:m,isOverflowBottom:g}=dt.getOverflowDirection(E,n,s,t);return a.jsxs(e.Fragment,{children:[m&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:a.jsx($s,{})}),u(E),g&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:a.jsx(js,{})})]})},d=o.totalSegments&&o.totalSegments>1||s||t?f(o):u(o);return a.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:o.eventStyle,children:d})},tc=()=>{var n,i,l,u;const o=Fr(),{schedulerRef:r}=We();e.useEffect(()=>{const f=E=>{var h,c,v,D;const m=(E==null?void 0:E.detail)||{},g=(h=r.current)==null?void 0:h.element;g&&(m!=null&&m.container)&&(m.container===g||g.contains(m.container))&&o.show({guid:(c=m.payload)==null?void 0:c.guid,segments:(v=m.payload)==null?void 0:v.segments,isDayEvent:(D=m.payload)==null?void 0:D.isDayEvent})},d=E=>{var h;const m=(E==null?void 0:E.detail)||{},g=(h=r.current)==null?void 0:h.element;g&&(m!=null&&m.container)&&(m.container===g||g.contains(m.container))&&o.hide()};return window==null||window.addEventListener("showCloneEvent",f),window==null||window.addEventListener("hideCloneEvent",d),()=>{window==null||window.removeEventListener("showCloneEvent",f),window==null||window.removeEventListener("hideCloneEvent",d)}},[r,o]);const s=o.isDayEvent?(i=(n=r.current)==null?void 0:n.element)==null?void 0:i.querySelector(`.${p.DAY_CLONE_CONTAINER}`):(u=(l=r.current)==null?void 0:l.element)==null?void 0:u.querySelector(`.${p.TIME_SLOT_CLONE_CONTAINER}`),t=a.jsx(a.Fragment,{children:o.visible&&o.segments.map((f,d)=>o.isDayEvent?a.jsx(Jl,{...f},`${f==null?void 0:f.guid}-${d}`):a.jsx(ec,{...f},`${f==null?void 0:f.guid}-${d}`))});return s?qt.createPortal(t,s):null},nc=o=>{const{visible:r,onConfirm:s,onCancel:t,title:n,message:i,confirmText:l,showCancel:u=!0,action:f="delete"}=o,{locale:d}=$e(),{getString:E}=nt(d||"en-US"),m=f===ht.RecurrenceEdit||f===ht.RecurrenceDelete,g=f===ht.RecurrenceDelete;return a.jsx(yn,{header:n||E("deleteEvent"),open:r,style:{maxWidth:"400px"},animation:{effect:"Zoom",duration:400,delay:1},footer:a.jsxs(a.Fragment,{children:[m?a.jsxs(a.Fragment,{children:[a.jsx(Qe,{onClick:()=>s(rt.Occurrence),variant:Ge.Standard,children:E(g?"deleteEvent":"editThisEvent")}),a.jsx(Qe,{onClick:()=>s(rt.Series),variant:Ge.Standard,children:E("editEntireSeries")})]}):f===ht.SeriesChange?a.jsxs(a.Fragment,{children:[a.jsx(Qe,{onClick:()=>s(rt.Yes),variant:Ge.Standard,children:E("yes")}),a.jsx(Qe,{onClick:()=>s(rt.No),variant:Ge.Standard,children:E("no")})]}):a.jsx(Qe,{onClick:()=>s(),variant:Ge.Standard,children:l||E("delete")}),u&&a.jsx(Qe,{onClick:t,variant:Ge.Standard,children:E("cancel")})]}),onClose:t,children:a.jsx("div",{children:i||E("confirmDeleteMessage")})})},To=e.createContext(null),Jn=()=>{const o=e.useContext(To);if(!o)throw new Error("useEditorContext must be used within EditorProvider");return o},rc=({editorState:o,children:r})=>a.jsx(To.Provider,{value:o,children:r}),sc=o=>{const{locale:r}=$e(),{getString:s}=nt(r||"en-US"),{schedulerRef:t,showDeleteAlert:n,eventSettings:i,eventOverlap:l,confirmationDialog:u,onEditorSubmit:f}=We(),{eventsData:d,eventsProcessed:E}=Gt(),{data:m,action:g,originalData:h,startDateOnly:c,startTimeOnly:v,endDateOnly:D,endTimeOnly:O,slotDuration:_,formRef:T,validateRequiredFields:A}=Jn(),R=e.useCallback(()=>{var P,X,se,fe,pe,K,M;let L,C;if(m!=null&&m.isAllDay){const y=c?F.normalizeDate(c):void 0,N=D?F.normalizeDate(D):y;L=y,C=N}else{const y=(N,I)=>F.combineDateAndTime(N,I);if(L=y(c,v)??(m==null?void 0:m.startTime),C=y(D,O)??(m==null?void 0:m.endTime),L&&C&&C<=L){const N=new Date(L);N.setMinutes(N.getMinutes()+_),C=N}}const G={[((P=i==null?void 0:i.fields)==null?void 0:P.subject)||"subject"]:(m==null?void 0:m.subject)||s("newEvent"),[((X=i==null?void 0:i.fields)==null?void 0:X.startTime)||"startTime"]:L,[((se=i==null?void 0:i.fields)==null?void 0:se.endTime)||"endTime"]:C,[((fe=i==null?void 0:i.fields)==null?void 0:fe.isAllDay)||"isAllDay"]:!!(m!=null&&m.isAllDay),[((pe=i==null?void 0:i.fields)==null?void 0:pe.location)||"location"]:(m==null?void 0:m.location)||"",[((K=i==null?void 0:i.fields)==null?void 0:K.description)||"description"]:(m==null?void 0:m.description)||"",[((M=i==null?void 0:i.fields)==null?void 0:M.recurrenceRule)||"recurrenceRule"]:(m==null?void 0:m.recurrenceRule)||""};if(g==="Edit"&&h){const y=new Set(["id","subject","startTime","endTime","isAllDay","location","description","isReadonly","isBlock"]),N=new Set(Object.values(i==null?void 0:i.fields).filter(q=>{var H;return q!==((H=i==null?void 0:i.fields)==null?void 0:H.id)}));return{...Object.fromEntries(Object.entries(h).filter(([q])=>!y.has(q)&&!N.has(q))),...G,[i.fields.id]:h.id}}else return{...G,[i.fields.id]:Me.generateEventGuid()}},[m==null?void 0:m.isAllDay,c,v,D,O,_,m==null?void 0:m.startTime,m==null?void 0:m.endTime,i,m==null?void 0:m.subject,m==null?void 0:m.location,m==null?void 0:m.description,g,h]),B=e.useCallback(L=>!l&&Me.checkEventOverlap(L,d,!1,i.fields)?(u==null||u.show({title:s("eventOverlap"),message:s("overlapAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>u.hide()}),!1):Me.isBlockRange(L,d,!1,i.fields)?(u==null||u.show({title:s("alert"),message:s("blockAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>u.hide()}),!1):!0,[l,d,i,u]),k=e.useCallback(()=>{var G,P,X,se,fe,pe,K,M,y;const L=A(s);if(L){u==null||u.show({title:s("alert"),message:L,confirmText:s("ok"),showCancel:!1,onConfirm:()=>u.hide()});return}if(T!=null&&T.current&&!((G=T.current)!=null&&G.validate()))return;let C=R();if(f){const N={data:C,cancel:!1,requestType:g,originalData:g===ze.Add?void 0:h};if(f(N),N.cancel)return;C=N.data}if(B(C)){if(h&&(C[i.fields.id]=h.id,C[i.fields.recurrenceID]=h.recurrenceID,C[i.fields.guid]=h.guid),g===ze.Edit&&h)(X=(P=t==null?void 0:t.current)==null?void 0:P.saveEvent)==null||X.call(P,C);else if(g===ze.EditOccurrence&&h)C[i.fields.recurrenceException]=Cn(h.startTime),(fe=(se=t==null?void 0:t.current)==null?void 0:se.saveEvent)==null||fe.call(se,C,ze.EditOccurrence);else if(g===ze.EditSeries){let N=!1;for(const I of E)if(I.recurrenceID&&I.recurrenceID===h.recurrenceID&&I.id!==h.recurrenceID||!I.recurrenceID&&I.recurrenceRule&&I.id===h.recurrenceID&&I.recurrenceException){N=!0;break}if(N){zn(ht.SeriesChange,u,s,I=>{var q,H,U,ne;I===rt.Yes?(H=(q=t==null?void 0:t.current)==null?void 0:q.saveEvent)==null||H.call(q,C,ze.EditEntireSeries):I===rt.No&&((ne=(U=t==null?void 0:t.current)==null?void 0:U.saveEvent)==null||ne.call(U,C,ze.EditCurrentSeries)),o()});return}else(K=(pe=t==null?void 0:t.current)==null?void 0:pe.saveEvent)==null||K.call(pe,C,ze.EditSeries)}else(y=(M=t==null?void 0:t.current)==null?void 0:M.addEvent)==null||y.call(M,C);o()}},[A,R,B,g,h,t,o,u]),b=e.useCallback(()=>{if(!h)return;const L=()=>{var G,P;const C=g===ze.EditSeries&&h.recurrenceID?ze.DeleteSeries:ze.DeleteOccurrence;(P=(G=t==null?void 0:t.current)==null?void 0:G.deleteEvent)==null||P.call(G,h,C)};o(),n==null||n(L)},[h,g,t,o,n]),S=e.useCallback(()=>o(),[o]);return{handleSave:k,handleDelete:b,handleCancel:S,buildEventData:R,validateEventConflicts:B}},bs=[{name:"subject",visible:!0,className:p.SUBJECT_CONTAINER},{name:"location",visible:!0,className:p.LOCATION_CONTAINER},{name:"startDate",visible:!0,className:p.START_DATE_CONTAINER},{name:"startTime",visible:!0,className:p.START_TIME_CONTAINER},{name:"endDate",visible:!0,className:p.END_DATE_CONTAINER},{name:"endTime",visible:!0,className:p.END_TIME_CONTAINER},{name:"isAllDay",visible:!0,className:p.ALL_DAY_CONTAINER},{name:"description",visible:!0,className:p.DESCRIPTION_CONTAINER},{name:"repeatMode",visible:!0,className:p.REPEAT_MODE}],oc=[["subject","location"],["startDate","startTime"],["endDate","endTime"],["isAllDay"],["repeatMode"],["description"]],ic=({fields:o})=>{const{locale:r}=$e(),{getString:s}=nt(r||"en-US"),{dateFormat:t,timeFormat:n,timeScale:i}=We(),{data:l,startDateOnly:u,startTimeOnly:f,endDateOnly:d,endTimeOnly:E,slotDuration:m,repeatData:g,repeatModeValue:h,formState:c,formRef:v,setFormState:D,handleSubjectChange:O,handleLocationChange:_,handleDescriptionChange:T,handleStartDateChange:A,handleStartTimeChange:R,handleEndDateChange:B,handleEndTimeChange:k,handleIsAllDayChange:b,handleRepeatModeChange:S,setSlotDuration:L,action:C}=Jn(),G=e.useMemo(()=>o?o.reduce((ve,ue)=>(ue.validationRule&&(ve[ue.name]=ue.validationRule),ve),{}):{},[o]),P=e.useMemo(()=>{const ve={};return l!=null&&l.subject&&(ve.subject=l.subject),l!=null&&l.location&&(ve.location=l.location),l!=null&&l.description&&(ve.description=l.description),u&&(ve.startDate=u),f&&(ve.startTime=f),d&&(ve.endDate=d),E&&(ve.endTime=E),(l==null?void 0:l.isAllDay)!==void 0&&(ve.isAllDay=l.isAllDay),ve},[l,u,f,d,E]),X=e.useMemo(()=>(i==null?void 0:i.interval)/(i==null?void 0:i.slotCount)||30,[i]);e.useEffect(()=>{L==null||L(X)},[X]);const se=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(xt,{name:"subject",children:[a.jsx(Tr,{placeholder:ue.placeholder??s("title"),value:ue.value??((c==null?void 0:c.values.subject)||(l==null?void 0:l.subject)),onChange:Z=>{var ie;c==null||c.onChange("subject",{value:Z.value||""}),(ie=ue.onChange??O)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("subject"),className:`${ue.className??p.EVENT_SUBJECT} ${c!=null&&c.errors.subject?"sf-error":""}`,labelMode:ue.labelMode??"Always",...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.subject)&&a.jsx("div",{className:"sf-form-error",children:c.errors.subject})]})},fe=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(xt,{name:"location",children:[a.jsx(Tr,{placeholder:ue.placeholder??s("location"),value:ue.value??((c==null?void 0:c.values.location)||(l==null?void 0:l.location)),onChange:Z=>{var ie;c==null||c.onChange("location",{value:Z.value||""}),(ie=ue.onChange??_)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("location"),className:`${ue.className??p.EVENT_LOCATION} ${c!=null&&c.errors.location?"sf-error":""}`,labelMode:ue.labelMode??"Always",...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.location)&&a.jsx("div",{className:"sf-form-error",children:c.errors.location})]})},pe=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(xt,{name:"startDate",children:[a.jsx(ns,{placeholder:ue.placeholder??s("startDate"),className:`${ue.className??p.EVENT_START_DATE} ${c!=null&&c.errors.startDate?"sf-error":""}`,labelMode:ue.labelMode??"Always",value:ue.value||(c==null?void 0:c.values.startDate)||u,format:ue.format??t,onChange:Z=>{var ie;c==null||c.onChange("startDate",{value:Z.value}),(ie=ue.onChange??A)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("startDate"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.startDate)&&a.jsx("div",{className:"sf-form-error",children:c.errors.startDate})]})},K=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(xt,{name:"startTime",children:[a.jsx(Dr,{placeholder:ue.placeholder??s("startTime"),className:`${ue.className??p.EVENT_START_TIME} ${c!=null&&c.errors.startTime?"sf-error":""}`,labelMode:ue.labelMode??"Always",step:ue.step??m,value:ue.value??((c==null?void 0:c.values.startTime)||f),format:ue.format??n,onChange:Z=>{var ie;c==null||c.onChange("startTime",{value:Z.value}),(ie=ue.onChange??R)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("startTime"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.startTime)&&a.jsx("div",{className:"sf-form-error",children:c.errors.startTime})]})},M=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(xt,{name:"endDate",children:[a.jsx(ns,{placeholder:ue.placeholder??s("endDate"),className:`${ue.className??p.EVENT_END_DATE} ${c!=null&&c.errors.endDate?"sf-error":""}`,labelMode:ue.labelMode??"Always",value:ue.value??((c==null?void 0:c.values.endDate)||d),format:ue.format??t,onChange:Z=>{var ie;c==null||c.onChange("endDate",{value:Z.value}),(ie=ue.onChange??B)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("endDate"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.endDate)&&a.jsx("div",{className:"sf-form-error",children:c.errors.endDate})]})},y=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(xt,{name:"endTime",children:[a.jsx(Dr,{placeholder:ue.placeholder??s("endTime"),className:`${ue.className??p.EVENT_END_TIME} ${c!=null&&c.errors.endTime?"sf-error":""}`,labelMode:ue.labelMode??"Always",step:ue.step??m,value:ue.value??((c==null?void 0:c.values.endTime)||E),format:ue.format??n,onChange:Z=>{var ie;c==null||c.onChange("endTime",{value:Z.value}),(ie=ue.onChange??k)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("endTime"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.endTime)&&a.jsx("div",{className:"sf-form-error",children:c.errors.endTime})]})},N=(ve={})=>{var w,Z;const ue=ve.props??{};return a.jsxs(xt,{name:"isAllDay",children:[a.jsx(Yo,{label:ue.label??s("allDay"),className:`${ue.className??p.EVENT_ALLDAY} ${c!=null&&c.errors.isAllDay?"sf-error":""}`,checked:ue.checked??(c==null?void 0:c.values.isAllDay)??(l==null?void 0:l.isAllDay),onChange:ie=>{var re;c==null||c.onChange("isAllDay",{value:ie.value}),(re=ue.onChange??b)==null||re(ie)},...ue}),((w=c==null?void 0:c.modified)==null?void 0:w.isAllDay)&&((Z=c==null?void 0:c.errors)==null?void 0:Z.isAllDay)&&a.jsx("div",{className:"sf-form-error",children:c.errors.isAllDay})]})},I=(ve={})=>{const ue=ve.props??{};return a.jsx(xt,{name:"repeatMode",children:a.jsx(zo,{dataSource:g,fields:{text:"text",value:"value"},value:ue.value??h,placeholder:ue.placeholder??s("repeat"),labelMode:"Always",onChange:ue.onChange??S,...ue})})},q=(ve={})=>{var w;const ue=ve.props??{};return a.jsx("div",{className:p.DESCRIPTION_ROW,children:a.jsxs(xt,{name:"description",children:[a.jsx(Ni,{placeholder:ue.placeholder??s("description"),className:`${ue.className??p.EVENT_DESCRIPTION} ${c!=null&&c.errors.description?"sf-error":""}`,labelMode:ue.labelMode??"Always",value:ue.description??((c==null?void 0:c.values.description)||(l==null?void 0:l.description)),width:ue.width??"100%",resizeMode:ue.resizeMode??Mt.Vertical,onChange:Z=>{var ie;c==null||c.onChange("description",{value:Z.value||""}),(ie=ue.onChange??T)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("description"),...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.description)&&a.jsx("div",{className:"sf-form-error",children:c.errors.description})]})})},H={subject:se,location:fe,startDate:pe,startTime:K,endDate:M,endTime:y,isAllDay:N,repeatMode:I,description:q},U=e.useMemo(()=>!o||o.length===0?bs:o.filter(ve=>ve.visible!==!1),[o]),ne=e.useMemo(()=>{const ve=[],ue=new Map(U.map(w=>[w.name,w]));return oc.forEach(w=>{const Z=w.map(ie=>ue.get(ie)).filter(ie=>!!ie);Z.length>0&&ve.push(Z)}),ve},[U]),Q=ve=>{var ue;return(ue=bs.find(w=>w.name===ve))==null?void 0:ue.className},J=e.useCallback(ve=>{const ue=[p.EDITOR_FIELD_CONTAINER,Q(ve.name),ve.className].filter(Boolean).join(" ");if(ve.component)return a.jsx("div",{className:ue,children:ve.component},ve.name);const w=H[ve.name];return w?(ve.name==="startTime"||ve.name==="endTime")&&(l!=null&&l.isAllDay)||ve.name==="repeatMode"&&C==="EditOccurrence"?null:a.jsx("div",{className:ue,children:w(ve)},ve.name):null},[l==null?void 0:l.isAllDay,s,H,C]);return!o||o.length===0?a.jsx(Cr,{ref:v,rules:G,initialValues:P,onFormStateChange:D,validateOnChange:!0,autoComplete:"off",children:a.jsxs("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:[a.jsxs("div",{className:`${p.TITLE_LOCATION_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[a.jsx("div",{className:`${p.SUBJECT_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:se()}),a.jsx("div",{className:`${p.LOCATION_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:fe()})]}),a.jsxs("div",{className:`${p.START_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[a.jsx("div",{className:`${p.START_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:pe()}),!(l!=null&&l.isAllDay)&&a.jsx("div",{className:`${p.START_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:K()})]}),a.jsxs("div",{className:`${p.END_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[a.jsx("div",{className:`${p.END_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:M()}),!(l!=null&&l.isAllDay)&&a.jsx("div",{className:`${p.END_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:y()})]}),a.jsx("div",{className:`${p.ALL_DAY_TIMEZONE_ROW} ${p.DISPLAY_FLEX}`,children:a.jsx("div",{className:`${p.ALL_DAY_CONTAINER}`,children:N()})}),C!=="EditOccurrence"&&a.jsx("div",{className:`${p.REPEAT_MODE_ROW} ${p.DISPLAY_FLEX}`,children:a.jsx("div",{className:`${p.REPEAT_MODE}`,children:I()})}),a.jsx("div",{className:p.DESCRIPTION_ROW,children:a.jsx("div",{className:p.DESCRIPTION_CONTAINER,children:q()})})]})}):a.jsx(Cr,{ref:v,rules:G,initialValues:P,onFormStateChange:D,validateOnChange:!0,autoComplete:"off",children:a.jsx("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:ne.map((ve,ue)=>{const w=ve.map(J).filter(Boolean);return w.length?a.jsx("div",{className:`${p.EDITOR_FIELDS_ROW} ${p.DISPLAY_FLEX}`,children:w},`row-${ue}`):null})})})},lc=()=>{const{locale:o}=$e(),{getString:r}=nt(o||"en-US"),{recurrenceOpen:s,closeRecurrenceEditor:t,recurrenceStart:n,recurrenceRule:i,handleRecurrenceRuleChange:l}=Jn(),[u,f]=e.useState(i),d=e.useCallback(h=>{f(h.value)},[]),E=e.useCallback(()=>{l(u),t()},[u,t,l]),m=e.useCallback(()=>{t()},[t]),g=e.useMemo(()=>a.jsxs("div",{className:p.DIALOG_FOOTER,children:[a.jsx(Qe,{className:p.SAVE_EVENT,variant:Ge.Standard,onClick:E,children:r("save")}),a.jsx(Qe,{className:p.CANCEL_EVENT,variant:Ge.Standard,onClick:m,children:r("cancel")})]}),[E,m]);return s?a.jsx(yn,{header:r("customRecurrence"),footer:g,open:s,onClose:t,modal:!0,style:{width:"500px",minHeight:"388px"},className:`${p.DIALOG}`,children:a.jsx(Ko,{value:u,onChange:d,startDate:n})}):null},cc=({open:o,onClose:r,fields:s,action:t,children:n,dialogProps:i,className:l,style:u})=>{const{locale:f}=$e(),{getString:d}=nt(f||"en-US"),{handleCancel:E,handleDelete:m,handleSave:g}=sc(r),{formState:h}=Jn(),c=e.useMemo(()=>i!=null&&i.header?i.header:t===ze.Add?d("newEvent"):d("editEvent"),[i==null?void 0:i.header,t,d]),v=e.useMemo(()=>i!=null&&i.footer?i==null?void 0:i.footer:a.jsxs(a.Fragment,{children:[t!==ze.Add&&a.jsx(Qe,{className:p.DELETE_EVENT,variant:Ge.Standard,onClick:m,children:d("delete")}),a.jsx(Qe,{className:p.SAVE_EVENT,variant:Ge.Standard,onClick:g,children:d("save")}),a.jsx(Qe,{className:p.CANCEL_EVENT,variant:Ge.Standard,onClick:E,children:d("cancel")})]}),[i==null?void 0:i.footer,t,m,g,E,h==null?void 0:h.allowSubmit]);return a.jsxs(a.Fragment,{children:[a.jsx(yn,{header:c,open:o,onClose:r,modal:(i==null?void 0:i.modal)??!0,style:{width:"500px",minHeight:"300px",...u},className:`${p.DIALOG} ${l||""}`,footer:v,...i,children:a.jsx("div",{className:p.FORM_CONTAINER,children:n||a.jsx(ic,{fields:s})})}),a.jsx(lc,{})]})};function ac(o,r){switch(r.type){case"setField":return{...o,[r.key]:r.value};case"setMany":return{...o,...r.payload};default:return o}}const uc=(o,r,s,t,n)=>{const[i,l]=e.useState(!1),[u,f]=e.useState(),d=e.useRef(null),E=e.useRef(n);e.useEffect(()=>{E.current=n},[n]);const m=[{value:"Never",text:"Never"},{value:"FREQ:DAILY",text:"Daily"},{value:"FREQ:WEEKLY",text:"Weekly"},{value:"FREQ:MONTHLY",text:"Monthly"},{value:"Custom",text:"Custom"}],g={subject:"",location:"",description:"",startTime:void 0,endTime:void 0,isAllDay:!1,action:ze.Add,originalData:void 0,repeatData:m,recurrenceRule:void 0},[h,c]=e.useReducer(ac,g),v=e.useCallback(Y=>c({type:"setField",key:"subject",value:Y}),[c]),D=e.useCallback(Y=>c({type:"setField",key:"location",value:Y}),[c]),O=e.useCallback(Y=>c({type:"setField",key:"description",value:Y}),[c]),_=e.useCallback(Y=>c({type:"setField",key:"startTime",value:Y}),[c]),T=e.useCallback(Y=>c({type:"setField",key:"endTime",value:Y}),[c]),A=e.useCallback(Y=>c({type:"setField",key:"isAllDay",value:Y}),[c]),R=e.useCallback(Y=>c({type:"setField",key:"recurrenceRule",value:Y}),[c]),B=e.useCallback(Y=>c({type:"setField",key:"action",value:Y}),[c]),k=e.useCallback(Y=>c({type:"setField",key:"originalData",value:Y}),[c]),{eventSettings:b}=We(),S=e.useCallback((Y,De)=>{const me=[{value:"Never",text:"Never"},{value:_n("DAILY",Y),text:"Daily"},{value:_n("WEEKLY",Y),text:"Weekly"},{value:_n("MONTHLY",Y),text:"Monthly"},{value:_n("YEARLY",Y),text:"Yearly"},{value:"Custom",text:"Custom"}];if(De){const Oe=me.find(Pe=>Pe.value===De);if(Oe){c({type:"setField",key:"repeatData",value:me}),R(De),Ne(Oe.value);return}if(typeof De=="string"){const Pe={value:De,text:De},Ke=Math.max(0,me.length-1),He=[...me.slice(0,Ke),Pe,...me.slice(Ke)];c({type:"setField",key:"repeatData",value:He}),R(De),Ne(De);return}c({type:"setField",key:"repeatData",value:me}),R(""),Ne("Never")}else c({type:"setField",key:"repeatData",value:me}),R(""),Ne("Never")},[c]),L=e.useCallback(Y=>{if(o==null||o(Y),Y.cancel)return;s==null||s();const De=Y.isAllDay?F.normalizeDate(Y.startTime):Y.startTime,me={startTime:De,endTime:Y.isAllDay?De:Y.endTime};S(De),c({type:"setMany",payload:{subject:"",location:"",description:"",isAllDay:Y.isAllDay,action:ze.Add,startTime:me.startTime,endTime:me.endTime}}),l(!0)},[o,s]),C=e.useCallback(Y=>{if(r==null||r(Y),Y.cancel)return;s==null||s(),Y!=null&&Y.data||(Y.data={});const De=!!Y.data.isAllDay,me=De?F.normalizeDate(Y.data.startTime):Y.data.startTime,Oe=De?F.normalizeDate(Y.data.endTime):Y.data.endTime;S(me,Y.data.recurrenceRule);const Pe={originalData:Y.data,subject:Y.data.subject??"",location:Y.data.location??"",description:Y.data.description??"",isAllDay:De,startTime:me,endTime:Oe};if(Y.data.recurrenceID||Y.data[b.fields.recurrenceID]){t==null||t(Ke=>{let He={};Ke===rt.Series&&(He=Sr(Y.data,E.current,b.fields),S(me,Y.data.recurrenceRule??(He==null?void 0:He.recurrenceRule))),c({type:"setMany",payload:{action:Ke===rt.Series?ze.EditSeries:ze.EditOccurrence,...Pe,startTime:Ke===rt.Series?He.startTime:me,endTime:Ke===rt.Series?He.endTime:Oe}}),l(!0)});return}c({type:"setMany",payload:{action:ze.Edit,...Pe}}),l(!0)},[r,s,b,t]),G=e.useCallback(()=>l(!1),[]),{subject:P,location:X,description:se,startTime:fe,endTime:pe,isAllDay:K,action:M,originalData:y,recurrenceRule:N,repeatData:I}=h,[q,H]=e.useState(30),[U,ne]=e.useState(void 0),[Q,J]=e.useState(void 0),[Se,ve]=e.useState(void 0),[ue,w]=e.useState(void 0),[Z,ie]=e.useState(!1),[re,Ne]=e.useState("Never"),[ee,oe]=e.useState(!1);e.useEffect(()=>{if(!i)return;const Y=fe?new Date(fe):void 0,De=pe?new Date(pe):void 0;ne(Y?F.normalizeDate(Y):void 0),ve(De?F.normalizeDate(De):void 0),ie(!1),J(fe?new Date(fe):Q),w(pe?new Date(pe):ue)},[i,fe,pe]);const ce=e.useCallback((Y,De)=>F.combineDateAndTime(Y,De),[]),x=e.useCallback(Y=>{ne(Y==null?void 0:Y.value)},[]),V=e.useCallback(Y=>{const De=Y==null?void 0:Y.value;if(J(De),!De)return;const me=ce(U,De),Oe=ce(Se??U,ue);if(!Z&&F.isMidnight(ue)){const Pe=new Date(De);Pe.setMinutes(Pe.getMinutes()+q),w(Pe)}else if(me&&Oe&&Oe<=me){const Pe=new Date(De);Pe.setMinutes(Pe.getMinutes()+q),w(Pe)}},[U,Se,ue,Z,q,ce]),z=e.useCallback(Y=>{ve(Y==null?void 0:Y.value)},[]),te=e.useCallback(Y=>{const De=Y==null?void 0:Y.value;w(De),ie(!!De)},[]),he=e.useCallback(Y=>{if(A(Y==null?void 0:Y.value),M==="Add"&&(Y==null?void 0:Y.value)===!1)if(!Z&&F.isMidnight(ue)){const De=Q?new Date(Q):new Date(0);Q||De.setHours(0,0,0,0),De.setMinutes(De.getMinutes()+q),w(De)}else{const De=ce(U,Q),me=ce(Se??U,ue);if(De&&me&&me<=De){const Oe=Q?new Date(Q):new Date(me);Oe.setMinutes(Oe.getMinutes()+q),w(Oe)}}},[M,Z,ue,Q,q,ce,U,Se]),Ee=e.useCallback(Y=>{v(Y.value)},[]),be=e.useCallback(Y=>{D(Y.value)},[]),ke=e.useCallback(()=>{oe(!0)},[]),de=e.useCallback(()=>{oe(!1)},[]),Ce=e.useCallback(Y=>{const De=Y==null?void 0:Y.value;Ne(De),De!=="Never"&&De!=="Custom"&&R(De),De==="Never"&&R(""),De==="Custom"&&ke()},[Ne,ke]),$=e.useCallback(Y=>{R(Y)},[]),W=e.useCallback(Y=>{O(Y==null?void 0:Y.value)},[]),ae=e.useCallback(Y=>{if(!Y)return;const De=(me,Oe,Pe)=>{v(Y.subject),D(Y.location),O(Y.description),_(Pe===rt.Series?Oe.startTime:Y.startTime),T(Pe===rt.Series?Oe.endTime:Y.endTime),A(!!Y.isAllDay),k(Y),S(Y.startTime,Y.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule)),me&&R(me),l(!0)};Y.recurrenceID||Y[b.fields.recurrenceID]?t==null||t(me=>{let Oe={};me===rt.Series&&(Oe=Sr(Y,E.current,b.fields)),B(me===rt.Series?ze.EditSeries:ze.EditOccurrence);const Pe=me===rt.Series?Y.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule):void 0;De(Pe,Oe,me)}):(B(ze.Edit),De())},[b,b.fields,t]),ge=e.useCallback(Y=>{B(ze.Add);const De={subject:Y[b.fields.subject]??"",location:Y[b.fields.location]??"",description:Y[b.fields.description]??"",startTime:Y[b.fields.startTime]??Y.startTime,endTime:Y[b.fields.endTime]??Y.endTime,isAllDay:Y[b.fields.isAllDay]??(Y==null?void 0:Y.isAllDay)??!1};if(v(De.subject),D(De.location),O(De.description),k(void 0),De.isAllDay){const me=F.normalizeDate(De.startTime);_(me),T(me)}else _(De.startTime),T(De.endTime);A(De.isAllDay),S(De.startTime),l(!0)},[]),Ae=e.useCallback(Y=>{if(!U||!Se)return Y("invalidDateValue");if(!K&&(!Q||!ue))return Y("invalidTimeValue");let De,me;return K?(De=U?F.normalizeDate(U):void 0,me=Se?F.normalizeDate(Se):void 0):(De=F.combineDateAndTime(U,Q),me=F.combineDateAndTime(Se,ue)),De&&me&&me<De?Y("invalidDateRange"):null},[U,Q,Se,ue,K]),Re=e.useMemo(()=>K?U?F.normalizeDate(U):fe:F.combineDateAndTime(U,Q)??fe,[K,U,Q,fe]);return{open:i,data:{subject:P,location:X,startTime:fe,endTime:pe,isAllDay:K,description:se,recurrenceRule:N},action:M,originalData:y,setOpen:l,onCellDoubleClickHandler:L,onEventDoubleClickHandler:C,onClose:G,startDateOnly:U,startTimeOnly:Q,endDateOnly:Se,endTimeOnly:ue,slotDuration:q,recurrenceStart:Re,repeatModeValue:re,repeatData:I,recurrenceOpen:ee,recurrenceRule:N,setRepeatModeValue:Ne,setSlotDuration:H,handleSubjectChange:Ee,handleLocationChange:be,handleDescriptionChange:W,handleStartDateChange:x,handleStartTimeChange:V,handleEndDateChange:z,handleEndTimeChange:te,handleIsAllDayChange:he,handleRecurrenceRuleChange:$,handleRepeatModeChange:Ce,closeRecurrenceEditor:de,onEditEvent:ae,onMoreDetails:ge,formState:u,setFormState:f,formRef:d,validateRequiredFields:Ae}},dc=()=>{const o=e.useRef({visible:!1}),r=e.useRef(null),s=e.useCallback(n=>{var i;o.current={...n,visible:!0},(i=r.current)==null||i.call(r,o.current)},[]),t=e.useCallback(()=>{var n;o.current.visible=!1,(n=r.current)==null||n.call(r,{...o.current})},[]);return{show:s,hide:t,setStateUpdater:n=>{r.current=n}}},fc=({children:o,onTooltipOpen:r,content:s,arrow:t,...n})=>{const[i,l]=e.useState(null),{locale:u}=$e(),{getString:f}=nt(u),{timeFormat:d}=We(),{eventsData:E}=Gt(),m=e.useRef(E);e.useEffect(()=>{m.current=E},[E]);const g=c=>{const v=c.closest("."+p.APPOINTMENT);if(!v)return!1;const D=v==null?void 0:v.getAttribute("data-guid"),O=Me.getEventByGuid(m.current,D),_={cancel:!1,data:O};if(r==null||r(_),_.cancel)return!1;if(typeof s=="function"){const T=s({data:O});l(T)}else if(s!=null)l(s);else{const T=h(O);l(T)}return!0},h=e.useCallback(c=>{const v=c.subject??c.description??f("addTitle"),D=F.formatStartAndEndDateRange(c.startTime,c.endTime,u),O=F.formatTimeDisplay(c,u,d);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:p.SCHEDULER_TOOLTIP_SUBJECT,children:v}),a.jsxs("div",{className:p.SCHEDULER_TOOLTIP_TEXT,children:[D?a.jsx("div",{children:D}):null,!c.isAllDay&&O?a.jsx("div",{children:O}):null]})]})},[f,d,u]);return a.jsx(Fs,{className:p.SCHEDULER_TOOLTIP,onFilterTarget:g,arrow:t??!1,content:a.jsx(a.Fragment,{children:i}),...n,children:o})},Co=e.forwardRef((o,r)=>{const{height:s,width:t,selectedDate:n,defaultSelectedDate:i,view:l,defaultView:u,eventSettings:f,timeScale:d,workHours:E,startHour:m,endHour:g,showWeekend:h,firstDayOfWeek:c,workDays:v,showTimeIndicator:D,showWeekNumber:O,dateFormat:_,timeFormat:T,dateHeader:A,cell:R,headerIndent:B,eventOverlap:k,rowAutoHeight:b,readOnly:S,showQuickInfoPopup:L,header:C,quickInfo:G,keyboardNavigation:P,onDataRequest:X,onSelectedDateChange:se,onViewChange:fe,onCellClick:pe,onCellDoubleClick:K,onEventClick:M,onEventDoubleClick:y,onDataChangeStart:N,onDataChangeComplete:I,eventDrag:q,eventResize:H,onResizeStart:U,onResizing:ne,onResizeStop:Q,onDragStart:J,onDrag:Se,onDragStop:ve,onError:ue,onMoreEventsClick:w,eventTooltip:Z,onTooltipOpen:ie,onEditorSubmit:re,editor:Ne,children:ee,className:oe,weekRule:ce,enableRecurrenceValidation:x,...V}=Hs(Or,o),z=e.useRef(null),te=e.useRef(null),he=e.useRef(null),Ee=dc(),[be,ke]=e.useState({visible:!1});e.useEffect(()=>{Ee.setStateUpdater(ke)},[]);const{locale:de}=$e(),{getString:Ce}=nt(de||"en-US"),{cellEditRef:$,handleClose:W,onCellClickHandler:ae,onEventClickHandler:ge}=mo(pe,M),Ae=e.useRef(null),Re=uc(K,y,W,Fe=>zn(ht.RecurrenceEdit,Ee,Ce,Fe),Ae.current),{open:Le,data:Y,originalData:De,action:me,onClose:Oe,onCellDoubleClickHandler:Pe,onEventDoubleClickHandler:Ke,onMoreDetails:He,onEditEvent:Tt}=Re,lt=e.useMemo(()=>pt.getViewsInfo(ee,Ce),[ee]),{classNames:Ot,selectedDate:Lt,view:Ct,renderDates:jt,activeViewProps:$t,dateRangeText:rr,showCalendar:Rn,calendarView:sr,handleViewButtonClick:on,handlePreviousClick:ln,handleNextClick:bn,handleTodayClick:cn,handleDateDropdownClick:wn,handleCalendarChange:yt,renderCurrentView:Sn}=Yi({className:oe,height:s,width:t,selectedDate:n,defaultSelectedDate:i,view:l,defaultView:u,eventSettings:f,timeScale:d,workHours:E,startHour:m,endHour:g,showWeekend:h,firstDayOfWeek:c,workDays:v,showTimeIndicator:D,showWeekNumber:O,dateFormat:_,timeFormat:T,dateHeader:A,cell:R,headerIndent:B,editor:Ne,quickInfo:G,eventOverlap:k,showQuickInfoPopup:L,header:C,keyboardNavigation:P,rowAutoHeight:b,readOnly:S,onEditorSubmit:re,onDataRequest:X,onSelectedDateChange:se,onViewChange:fe,onCellClick:ae,onCellDoubleClick:Pe,onEventClick:ge,onEventDoubleClick:Ke,onMoreEventsClick:w,onDataChangeStart:N,onDataChangeComplete:I,eventDrag:q,eventResize:H,onResizeStart:U,onResizing:ne,onResizeStop:Q,onDragStart:J,onDrag:Se,onDragStop:ve,enableRecurrenceValidation:x,viewComponents:lt,weekRule:ce}),{eventsData:Vt,eventsProcessed:Qt,addEvent:Wt,deleteEvent:Ft,saveEvent:an}=Yl({activeViewProps:$t,renderDates:jt,confirmationDialog:Ee});Ae.current=Qt;const Nn=(Fe,st)=>{var dn,zt;if((j=>!!j&&"guid"in j)(Fe)){st&&((dn=$.current)==null||dn.handleEventClick(Fe,st));return}Fe&&(Fe!=null&&Fe.element)&&((zt=$.current)==null||zt.handleCellClick(Fe,Fe==null?void 0:Fe.element))},_t=(Fe,st,wt)=>{Fe===ze.Add?He(st):Fe===ze.Edit&&Tt(st)},xn=Fe=>{var zt;const st=Fe&&"current"in Fe?Fe==null?void 0:Fe.current:Fe,wt=(zt=st==null?void 0:st.getAttribute)==null?void 0:zt.call(st,"data-guid");return Me.getEventByGuid(Vt,wt)??null},ct=Fe=>{const st=Vl(Fe,d);return{startTime:st.startTime,endTime:st.endTime,isAllDay:st.isAllDay,element:st.element}},An=$t.editor??Ne??cc,Bt=e.useMemo(()=>({element:z.current,addEvent:Wt,deleteEvent:Ft,saveEvent:an,openEditor:_t,closeEditor:()=>{Oe()},getEventDetails:xn,getCellDetails:ct,closeQuickInfoPopup:()=>{var Fe;(Fe=$.current)==null||Fe.hide()},openQuickInfoPopup:Nn}),[Wt,Ft,an,z.current,Vt,Oe]);e.useEffect(()=>{te.current=Bt},[Bt]),e.useEffect(()=>{kt("scheduler")},[]),e.useImperativeHandle(r,()=>Bt,[Bt]);const Ut={...$t,handleCalendarChange:yt,handleViewButtonClick:on,handlePreviousClick:ln,handleNextClick:bn,handleTodayClick:cn,schedulerRef:te,morePopupRef:he,quickPopupRef:$,keyboardNavigation:P,confirmationDialog:Ee,showDeleteAlert:Fe=>{Ee==null||Ee.show({title:Ce("deleteEvent"),message:Ce("confirmDeleteMessage"),confirmText:Ce("delete"),showCancel:!0,onConfirm:()=>{Fe(),Ee.hide()}})},showRecurrenceEditAlert:Fe=>zn(ht.RecurrenceEdit,Ee,Ce,Fe),showRecurrenceDeleteAlert:Fe=>zn(ht.RecurrenceDelete,Ee,Ce,Fe)},On=Z===!0||typeof Z=="object",un=typeof Z=="object"?Z:void 0,Ln=a.jsxs(a.Fragment,{children:[a.jsx("div",{className:p.TABLE_CONTAINER,children:a.jsx("div",{className:p.TABLE_WRAP,children:a.jsxs(Ql,{children:[a.jsx(tc,{}),Sn()]})})}),a.jsx(Wr,{ref:he})]});return a.jsx("div",{ref:z,className:Ot,style:{height:s,width:t},tabIndex:0,role:"application","aria-label":"Scheduler",onKeyDown:Zl(Ut,Vt),...V,children:a.jsx(Lr.Provider,{value:Ut,children:a.jsx(Ir.Provider,{value:{renderDates:jt},children:a.jsxs(kr.Provider,{value:{eventsData:Vt,eventsProcessed:Qt},children:[C!==!1&&a.jsx(Hl,{view:Ct,availableViews:lt,onViewButtonClick:on,onPreviousClick:ln,onNextClick:bn,onTodayClick:cn,onDateDropdownClick:wn,dateRangeText:rr,showCalendar:Rn,calendarView:sr,selectedDate:Lt,firstDayOfWeek:$t.firstDayOfWeek,handleCalendarChange:yt,renderDates:jt,customizeHeader:typeof C=="function"?C:void 0}),On?a.jsx(fc,{...un||{},onTooltipOpen:ie,children:Ln}):Ln,a.jsx($r,{ref:$,onClose:W,onEditEvent:Tt,onMoreDetails:He}),a.jsx(rc,{editorState:Re,children:a.jsx(An,{open:Le,onClose:Oe,data:Y,action:me,originalData:De})}),a.jsx(nc,{visible:be.visible,title:be.title,message:be.message,confirmText:be.confirmText,showCancel:be.showCancel,action:be.action,onConfirm:be.onConfirm||(()=>Ee.hide()),onCancel:Ee.hide})]})})})})});Co.displayName="Scheduler";Co.__docgenInfo={description:`The React Scheduler component that displays a list of events scheduled at specific dates and times, helping users plan and manage their schedule effectively.

\`\`\`typescript
import { Scheduler, DayView, WeekView, WorkWeekView, MonthView } from '@syncfusion/react-scheduler';

<Scheduler>
  <DayView />
  <WeekView />
  <WorkWeekView />
  <MonthView />
</Scheduler>
\`\`\``,methods:[],displayName:"Scheduler"};const mc=o=>a.jsx(a.Fragment,{children:o.children});mc.displayName="SchedulerHeader";const pc=({showTimeIndicator:o,startHour:r,endHour:s,renderDates:t,onPositionUpdate:n})=>{const[i,l]=e.useState(0),[u,f]=e.useState(new Date),[d,E]=e.useState(!1),[m,g]=e.useState(!1),h=e.useRef(null),c=t.length>1,v=!!(t&&t.length>0),D=e.useCallback(()=>{const A=new Date,R=F.getStartEndHours(r),B=F.getStartEndHours(s),k=A.getHours()*Ze+A.getMinutes(),b=R.getHours()*Ze+R.getMinutes(),S=B.getHours()===0&&B.getMinutes()===0?rs*Ze:B.getHours()*Ze+B.getMinutes();return k>=b&&k<=S},[r,s]),O=e.useCallback(()=>{const A=new Date,R=F.getStartEndHours(r),B=F.getStartEndHours(s),k=(A.getHours()-R.getHours())*Ze+(A.getMinutes()-R.getMinutes()),b=R.getHours()*Ze+R.getMinutes(),L=(B.getHours()===0&&B.getMinutes()===0?rs*Ze:B.getHours()*Ze+B.getMinutes())-b,C=k/L*100;return Math.max(0,Math.min(100,C))},[r,s]),_=e.useCallback(()=>{const A=new Date,R=D();if(Math.abs(A.getTime()-u.getTime())>=sn&&f(A),m!==R&&g(R),d!==(R&&o)&&E(R&&o),!R)return;const B=O();Math.abs(B-i)>.1&&l(B)},[O,u,d,m,i,o,D]);e.useEffect(()=>{if(o)return _(),h.current=setInterval(()=>{_()},sn),()=>{h.current&&(clearInterval(h.current),h.current=null)}},[o,_]);const T=e.useCallback(()=>{const A=new Date,R=(t==null?void 0:t.length)>0&&t.some(k=>F.isSameDay(k,A));if(!v||!R)return{isMultiDayView:c,hasValidRenderDates:v,columns:[],isCurrentDayRendered:!1};if(!c){const k=t.length===1&&F.isSameDay(t[0],A);return{isMultiDayView:c,hasValidRenderDates:v,columns:[],isCurrentDayRendered:k}}const B=t.map((k,b)=>{const S=F.isSameDay(k,A),L=k<A&&!F.isSameDay(k,A);if(k>A&&!F.isSameDay(k,A)||!S&&!L)return null;const G=100/t.length,P=b*G;return{key:k.getTime(),isCurrentDay:S,leftPosition:P,columnWidth:G}}).filter(Boolean);return{isMultiDayView:c,hasValidRenderDates:v,columns:B,isCurrentDayRendered:R}},[c,v,t]);return e.useEffect(()=>{n&&n(i,d&&m&&T().isCurrentDayRendered)},[i,d,m,n,T]),{position:i,currentTime:u,isVisible:d,isWithinBounds:m,multiDayViewInfo:T(),updatePosition:_}},hc=o=>{const{onPositionUpdate:r}=o,{renderDates:s}=gt(),{showTimeIndicator:t,startHour:n,endHour:i}=We(),{position:l,isVisible:u,isWithinBounds:f,multiDayViewInfo:d}=pc({showTimeIndicator:t,startHour:n,endHour:i,renderDates:s,onPositionUpdate:r});return!u||!f||!d.isCurrentDayRendered?null:!d.isMultiDayView||!d.hasValidRenderDates?a.jsx("div",{className:p.CURRENT_TIMELINE,style:{top:`${l}%`}}):a.jsx(a.Fragment,{children:d.columns.map(E=>a.jsx("div",{className:E.isCurrentDay?p.CURRENT_TIMELINE:p.PREVIOUS_TIMELINE,style:{top:`${l}%`,width:`${E.columnWidth}%`,insetInlineStart:`${E.leftPosition}%`}},E.key))})},Ec=(o,r,s,t)=>{let n=0,i=!1;for(;!i;){i=!0;for(const l of o){const u=F.normalizeDate(l);if(u>=r&&u<=s){const f=F.generateDateKey(l);if((t.get(f)||[]).findIndex((m,g)=>g===n&&m)!==-1){i=!1,n++;break}}}}return n},gc=(o,r=2)=>{const{eventSettings:s}=We(),{renderDates:t}=gt(),{eventsData:n}=Gt(),i=e.useMemo(()=>{if(!(t!=null&&t.length)||!(n!=null&&n.length))return[];const h=n.filter(T=>!T.startTime||!T.endTime||T.isBlock?!1:T.isAllDay&&!Me.isMultiDayEvent(T)),c=n.filter(T=>!T.startTime||!T.endTime?!1:s.spannedEventPlacement==="AllDayRow"?!T.isAllDay&&F.isLessthan24Hours(T.startTime,T.endTime)?!1:Me.isMultiDayEvent(T):T.isAllDay&&Me.isMultiDayEvent(T));let v=new Map;t.forEach(T=>{const A=F.generateDateKey(T);v.set(A,[])});const D=[],O=[...h,...c];return F.sortByTimeAndSpan(O).forEach(T=>{if(!T.startTime||!T.endTime)return;const A=F.normalizeDate(T.startTime),R=F.normalizeDate(T.endTime),B=Me.isMultiDayEvent(T),k=B?F.getDaysCount(A,R)+1:1,b=Ec(t,A,R,v),S=["sf-appointment"];if((T.isAllDay||k>1)&&S.push("sf-all-day-appointment"),T.isReadonly&&S.push("sf-read-only"),B)for(const L of t){const C=F.normalizeDate(L);if(C>=A&&C<=R){v=dt.setIndexPosition(v,L,b);const G=C.getTime()===A.getTime(),P=C.getTime()===R.getTime(),X=Math.floor((C.getTime()-A.getTime())/(1e3*60*60*24)),se=t.findIndex(M=>{const y=F.normalizeDate(M);return y>=A&&y<=R})===t.findIndex(M=>F.normalizeDate(M).getTime()===C.getTime()),fe=G?new Date(T.startTime.getTime()):new Date(C.getFullYear(),C.getMonth(),C.getDate(),0,0,0),pe=P?new Date(T.endTime.getTime()):new Date(C.getFullYear(),C.getMonth(),C.getDate(),0,0,0),K=`${L.toISOString()}-${T.id}`;D.push({event:T,startDate:fe,endDate:pe,isFirstDay:G,isLastDay:P,isFirstSegmentInRenderRange:se,segmentIndex:X,totalSegments:k,positionIndex:b,eventClasses:S,eventKey:K})}}else{v=dt.setIndexPosition(v,A,b);const L=`${A.toISOString()}-${T.id}`;D.push({event:T,startDate:T.startTime,endDate:T.endTime,positionIndex:b,eventClasses:S,eventKey:L})}}),D.sort((T,A)=>{const R=T.positionIndex??0,B=A.positionIndex??0;return R-B})},[n,t,s.spannedEventPlacement,s.fields]),l=e.useMemo(()=>Me.getEventsMap(t,i),[t,i]),u=e.useMemo(()=>Me.isAlldayHasMoreEvents(t,l,r),[l,r,t]),f=e.useMemo(()=>Me.getMaxEventsInCell(l,t),[l,t]),d=e.useMemo(()=>o?f>r?r-1:r:1/0,[o,f,r]),E=e.useCallback(()=>{const h=Me.getMaxEventsInCell(l,t);return h>3&&!o?h*(qn+Dn):Math.min(3,h)*(qn+Dn)},[o,l,t]),m=e.useCallback(h=>[...l.get(h)||[]].sort((D,O)=>(D.positionIndex??0)-(O.positionIndex??0)).slice(0,d),[l,d]),g=e.useCallback(h=>{const c=l.get(h)||[];return Math.max(0,c.length-d)},[l,d]);return{allDayRowEvents:i,eventsByDate:l,hasEventsExceedingMaxCount:u,maxEventsInAnyColumn:f,visibleEventLimit:d,calculateHeight:E,getVisibleEvents:m,getHiddenEventCount:g}},Tc=o=>{const{eventInfo:r,renderDates:s}=o,t=e.useMemo(()=>({...r.event}),[r]),n=e.useMemo(()=>dt.getOverflowDirection(r,s),[r.event.startTime,r.event.endTime,s,r]),i=e.useMemo(()=>dt.calculatePositionStyles(r,s),[r,s]);return{processedEvent:t,overflowDirection:n,positionStyle:i}};class Ht{constructor(){Object.defineProperty(this,"isActionPerformed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"removeDocListenersRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cellWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scrollInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slotInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isMonthView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isAllDaySource",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"cloneRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"minScrollSpeed",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"minScrollThreshold",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"enableScroll",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"currentCell",{enumerable:!0,configurable:!0,writable:!0,value:null})}performAutoScrolling(r,s){var A,R;const{clientX:t,clientY:n}=this.getPointerCoordinates(r);if(t==null||n==null)return;const i=s==null?void 0:s.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}`),l=(A=s==null?void 0:s.closest(`.${p.SCHEDULER}`))==null?void 0:A.querySelector(`.${p.MAIN_SCROLL_CONTAINER}`),u=[i,l].filter(Boolean);if(u.length===0)return;const f=u.find(B=>B.scrollHeight>B.clientHeight)||null,d=u.find(B=>B.scrollWidth>B.clientWidth)||null;if(!f&&!d)return;const E=((R=f||d)==null?void 0:R.closest(`.${p.SCHEDULER}`))||(s==null?void 0:s.closest(`.${p.SCHEDULER}`)),m=E==null?void 0:E.querySelector(`.${p.STICKY_HEADER}, .${p.HEADER_SECTION}, .${p.HEADER_ROW}`),g=f?f.getBoundingClientRect():null,h=d?d.getBoundingClientRect():null,c=(m==null?void 0:m.getBoundingClientRect().bottom)??(g?g.top:h?h.top:0);this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);const v=(B,k=this.minScrollThreshold)=>{if(B>k||B<0)return 0;const b=Math.floor((1-B/k)*this.minScrollSpeed);return isFinite(b)?b:0},D=()=>{let B=0;if(f&&g){const k=Math.max(0,f.scrollHeight-f.clientHeight),b=Math.max(0,n-c),S=Math.max(0,d?d.offsetHeight-d.clientHeight:0,f?f.offsetHeight-f.clientHeight:0),L=g.bottom-S,C=Math.max(0,L-n),G=this.minScrollThreshold+S,P=f.scrollTop<=0,X=Math.ceil(f.scrollTop)>=k;b<this.minScrollThreshold&&!P?B=-v(b):C<G&&!X&&(B=v(C,G))}return B},O=()=>{let B=0;if(d&&h){const k=Math.max(0,d.scrollWidth-d.clientWidth),b=Math.max(0,t-h.left),S=Math.max(0,h.right-t),L=d.scrollLeft<=0,C=d.scrollLeft>=k;b<this.minScrollThreshold&&!L?B=-v(b):S<this.minScrollThreshold&&!C&&(B=v(S))}return B},_=D(),T=O();if(_!==0||T!==0){const B=()=>{let k=!1;if(!(!this.currentCell&&Ht.currentActionName!=="resize")&&!this.isAllDaySource){if(f&&_!==0){const b=Math.max(0,f.scrollHeight-f.clientHeight),S=Math.max(0,Math.min(b,f.scrollTop+_));S!==f.scrollTop&&(f.scrollTop=S,k=!0)}if(d&&T!==0){const b=Math.max(0,d.scrollWidth-d.clientWidth),S=Math.max(0,Math.min(b,d.scrollLeft+T));S!==d.scrollLeft&&(d.scrollLeft=S,k=!0)}if(!k){this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);return}this.scrollInterval=requestAnimationFrame(B)}};this.scrollInterval=requestAnimationFrame(B)}}getPointerCoordinates(r){if(!r)return{clientX:null,clientY:null};let s=null,t=null;return r.touches&&r.touches.length>0?(s=r.touches[0].clientX,t=r.touches[0].clientY):r.changedTouches&&r.changedTouches.length>0?(s=r.changedTouches[0].clientX,t=r.changedTouches[0].clientY):r.clientX!=null&&r.clientY!=null&&(s=r.clientX,t=r.clientY),{clientX:s,clientY:t}}getContentWrap(r){return r?r.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}, .${p.DATE_HEADER_CONTAINER}`):null}getCurrentTargetDate(r,s){var l,u;if(!r&&!s)return null;let t=null;const n=(l=r||s)==null?void 0:l.closest(`.${p.SCHEDULER}`),i=s==null?void 0:s.closest(`.${p.ALL_DAY_ROW}`);if(n&&i&&s){const d=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`)).indexOf(s),E=n.querySelector(`.${p.CONTENT_TABLE}, .${p.WORK_CELLS_ROW}`),g=(u=(E?Array.from(E.querySelectorAll(`.${p.WORK_CELLS}`)):[])[d])==null?void 0:u.getAttribute("data-date");g&&(t=Number(g))}return t}getCell(r,s,t){const n=document==null?void 0:document.elementsFromPoint(r,s);for(const i of n){const l=i.classList.contains(`${p.WORK_CELLS}`)||i.classList.contains(`${p.ALL_DAY_CELL}`)?i:null;if(l&&(t||!(this!=null&&this.isAllDaySource)||i.classList.contains(p.ALL_DAY_CELL)))return l}return null}getCellUnderPointer(r){const{clientX:s,clientY:t}=this.getPointerCoordinates(r);return s==null||t==null?null:this.getCell(s,t,!0)}getCellUnderClone(r){if(!this.cloneRef||!r)return null;const s=this.getContentWrap(r),t=s==null?void 0:s.getBoundingClientRect();if(!s||!t)return null;const n=(v,D=0)=>isFinite(v)?v:D,i=s.scrollLeft||0;let l=0,u=0;const f=s.querySelector(`.${p.ALL_DAY_ROW}`);if(!f)return null;const d=Array.from(f.querySelectorAll(`.${p.ALL_DAY_CELL}`));if(d.length===0)return null;const E=d[0],m=Math.max(1,E.offsetWidth||this.cellWidth||1),g=n(parseFloat(this.direction==="rtl"?this.cloneRef.style.right:this.cloneRef.style.left||"0"),0),h=Math.max(1,Math.ceil(this.cloneRef.offsetWidth/m));l=this.direction==="rtl"?t.right-g-this.cloneRef.offsetWidth/h+i:t.left+g+this.cloneRef.offsetWidth/h-i;const c=Math.max(0,E.offsetHeight);return u=t.top+f.offsetTop+c/2,this.getCell(l,u,!1)}cloneFromSource(r,s){const t=r.cloneNode(!0);return t.classList.add(p.DRAG_CLONE,p.NO_POINTER,p.POSITION_ABSOLUTE),s!=null&&s.externalDragAndDrop&&(t.classList.add(p.EXTERNAL_DRAG_CLONE,p.CONTROL),t.style.zIndex=Is(t).toString()),t}suppressEvent(r){var s,t;(this.isActionPerformed||Ht.currentActionName==="resize")&&(Ht.currentActionName="",(s=r==null?void 0:r.preventDefault)==null||s.call(r),(t=r==null?void 0:r.stopPropagation)==null||t.call(r))}addDocSuppressors(){const r=["click"],s=t=>this.suppressEvent(t);r.forEach(t=>document==null?void 0:document.addEventListener(t,s,!0)),this.removeDocListenersRef=()=>{this.removeDocListenersRef&&(r.forEach(t=>document==null?void 0:document.removeEventListener(t,s,!0)),this.removeDocListenersRef=void 0)}}setCursorClass(r){document!=null&&document.body&&(document.body.classList.remove(p.SCHEDULER_CURSOR_MOVE,p.SCHEDULER_CURSOR_NOT_ALLOWED,p.SCHEDULER_CURSOR_DEFAULT),r==="move"?document.body.classList.add(p.SCHEDULER_CURSOR_MOVE):r==="notAllowed"?document.body.classList.add(p.SCHEDULER_CURSOR_NOT_ALLOWED):document.body.classList.add(p.SCHEDULER_CURSOR_DEFAULT))}getCurrentTargetCell(r){if(!r)return null;const s=r.closest(`.${p.DATE_HEADER_CONTAINER}`);if(s){const t=r.closest(`.${p.HEADER_CELLS}`),n=s.querySelector(`.${p.HEADER_ROW}`),i=s.querySelector(`.${p.ALL_DAY_ROW}`);if(n&&i){const l=Array.from(n.querySelectorAll(`.${p.HEADER_CELLS}`)),u=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`));let f=-1;if(t)f=l.indexOf(t);else for(let d=0;d<l.length;d++)if(l[d].contains(r)){f=d;break}if(f>=0&&u[f])return u[f];if(u.length)return u[0]}}return r.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}getSteppedCellDate(r,s,t,n,i,l){const u=s,f=u?this.getPointerCoordinates(u):{clientY:null},d=l==null?void 0:l.getBoundingClientRect();let E=i;if(d&&f.clientY!=null&&n>0){let m=Math.max(0,Math.round((f.clientY-d.top+l.scrollTop)*n));const g=Math.max(0,this.slotInterval||0);g>0&&(m=Math.floor(m/g)*g);const h=new Date(i);h.setHours(0,0,0,0),E=h.getTime()+(r+m)*sn,E=E-t}else E=i-t;return new Date(E)}}Object.defineProperty(Ht,"currentActionName",{enumerable:!0,configurable:!0,writable:!0,value:""});function Cc({ref:o,data:r,containerProps:s}){const t=We(),{timeScale:n,startHour:i,endHour:l,schedulerRef:u,eventSettings:f,showWeekend:d,workDays:E,onDragStart:m,onDrag:g,onDragStop:h,eventOverlap:c,confirmationDialog:v,eventDrag:D,enableRecurrenceValidation:O}=t,_=e.useMemo(()=>({...r,startTime:new Date(r==null?void 0:r.startTime),endTime:new Date(r==null?void 0:r.endTime)}),[r]),{getString:T}=nt(),{dir:A}=$e(),{eventsData:R,eventsProcessed:B}=Gt(),{renderDates:k}=gt(),b=Fr(),S=e.useRef(null),L=S,C=e.useRef(null),G=e.useRef({}),P=e.useRef({minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}),X=e.useRef(null),se=e.useRef(0),fe=e.useRef(0),pe=e.useRef(!0),K=e.useRef(null),M=e.useRef(!1),y=e.useRef(null),N=e.useRef(null),I=e.useRef(!1);Zt(S,{tapHold:()=>{pe.current=!1}}),e.useEffect(()=>{n&&C.current&&(C.current.slotInterval=n.interval/n.slotCount)},[n]);const q=e.useCallback($=>{S.current=$,typeof o=="function"?o($):o&&(o.current=$)},[o,b]),H=e.useCallback($=>{if(!$||!C.current)return{};const W=C.current.getContentWrap($),ae=W?W.getBoundingClientRect():null,ge=$.getBoundingClientRect(),Ae=ae?Math.round(ge.left-ae.left+((W==null?void 0:W.scrollLeft)||0)):$.offsetLeft,Re=ae?Math.round(ge.top-ae.top+((W==null?void 0:W.scrollTop)||0)):$.offsetTop;return{left:Ae,top:Re}},[b]),U=e.useCallback(()=>{var $,W;se.current=0,fe.current=0,G.current={},K.current=null,M.current=!1,C.current&&(C.current.setCursorClass("default"),C.current.isActionPerformed=!1,C.current.enableScroll=!0,C.current.scrollInterval!=null&&(cancelAnimationFrame(C.current.scrollInterval),C.current.scrollInterval=null),(W=($=C.current)==null?void 0:$.removeDocListenersRef)==null||W.call($)),X.current!=null&&(cancelAnimationFrame(X.current),X.current=null),P.current={minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}},[]);e.useEffect(()=>()=>{U()},[U]);const ne=()=>{if(X.current=null,!C.current||C.current.scrollInterval==null)return;const $=G.current.lastDragEvent;if($){let W=C.current.getCellUnderPointer($);if(!W){const ae=$.target||null;W=C.current.getCurrentTargetCell(ae)}if(W&&C.current.currentCell){let ae=new Date(Number(W.getAttribute("data-date")));C.current.isAllDaySource&&(ae=F.normalizeDate(ae)),!C.current.isMonthView&&!C.current.isAllDaySource&&(ce(W),P.current.finalDragStartTime&&(ae=P.current.finalDragStartTime)),ie(ae)}}C.current&&C.current.scrollInterval!=null&&(X.current=requestAnimationFrame(ne))},Q=e.useCallback($=>{if(!C.current)return;const W=D.externalDragAndDrop&&C.current.getCellUnderPointer($)||S.current;C.current.performAutoScrolling($,W),C.current.scrollInterval!==null&&X.current===null&&!C.current.isMonthView&&(X.current=requestAnimationFrame(ne))},[H]),J=$=>{const W=C.current.getContentWrap($);if(C.current.isAllDaySource=I.current=$.classList.contains(`${p.ALL_DAY_APPOINTMENT}`),C.current.isAllDaySource){const ae=Me.getEventByGuid(R,r.guid);ae.endTime=new Date(F.normalizeDate(ae.endTime).getTime()+C.current.slotInterval*sn)}if(W){const ae=W.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`);ae&&(se.current=ae.offsetHeight??0,C.current.cellWidth=ae.offsetWidth??0)}return P.current.minutesPerPixel=se.current>0?C.current.slotInterval/se.current:0,C.current.isMonthView=!!($!=null&&$.closest(`.${p.MONTH_VIEW}`)),$.draggable=!1,W},Se=($,W)=>{var ae;if(C.current.cloneRef=$,D!=null&&D.externalDragAndDrop){C.current.isMonthView&&$.classList.add(`${p.MONTH_EVENT}`);const ge=C.current.isMonthView||C.current.isAllDaySource;ge||($.style.height=S.current.style.height),$.style.width=`${ge?S.current.clientWidth:C.current.cellWidth}px`}else $.style.width="1px",$.style.height="1px";(ae=D.externalDragAndDrop&&(document==null?void 0:document.querySelector(D.eventDragArea))||W||(document==null?void 0:document.body))==null||ae.appendChild($)},ve=()=>{var ae,ge,Ae,Re;const $=(ge=C.current)==null?void 0:ge.getContentWrap((ae=C.current)==null?void 0:ae.currentCell);return((Ae=$==null?void 0:$.closest)==null?void 0:Ae.call($,`.${p.TABLE_WRAP}`))||y.current||((Re=u.current)==null?void 0:Re.element)||null},ue=($,W)=>{const ae=ve();if(!ae)return;const ge={container:ae,payload:{guid:r.guid,segments:$,isDayEvent:W}};window==null||window.dispatchEvent(new CustomEvent("showCloneEvent",{detail:ge}))},w=()=>{C.current.currentCell=y.current=null;const $=document==null?void 0:document.querySelectorAll(`.${p.SCHEDULER}`);$.length&&$.forEach(W=>window==null?void 0:window.dispatchEvent(new CustomEvent("hideCloneEvent",{detail:{container:W}})))},Z=$=>{if(!$)return 0;let W=Math.max(0,$.endTime.getTime()-$.startTime.getTime());return W===0&&$.startTime.getTime()===$.endTime.getTime()&&(W=C.current.slotInterval*sn),W},ie=($,W,ae)=>{var De,me;const ge=D.externalDragAndDrop,Ae=Me.getEventByGuid(R,r.guid);if(!Ae||!C.current)return;let Re=k;if($){const Oe=Z(Ae);Ae.startTime=new Date($),Ae.endTime=new Date(Ae.startTime.getTime()+Oe)}if(ge&&$){const Oe=F.normalizeDate(W??$).getTime();(!Re.some(Ke=>F.normalizeDate(Ke).getTime()===Oe)||t.view!==N.current)&&(t.selectedDate=W??$,Re=F.getRenderDates(N.current,t.selectedDate,t,W,ae))}const Le=C.current.isMonthView||C.current.isAllDaySource;if(Le||!n.enable){const Oe=Me.processCloneEvent(ge?y.current:(De=u.current)==null?void 0:De.element,Re,Ae,d,E,C.current.cellWidth,C.current.isAllDaySource,A==="rtl",C.current.isMonthView,S.current);ge?ue(Oe,Le):b==null||b.show({guid:r.guid,segments:Oe,isDayEvent:Le});return}const Y=Me.processTimeSlotCloneEvent(ge?y.current:(me=u.current)==null?void 0:me.element,Re,Ae,n,i,l,C.current.cellWidth,A==="rtl");ge?ue(Y,!1):b==null||b.show({guid:r.guid,segments:Y,isDayEvent:!1})},re=$=>{var Ae,Re,Le;if(!S.current||((Ae=$.sender)==null?void 0:Ae.type)==="touchmove"&&pe.current)return null;(Le=(Re=C.current)==null?void 0:Re.cloneRef)!=null&&Le.parentElement&&C.current.cloneRef.parentElement.removeChild(C.current.cloneRef),C.current=new Ht,C.current.direction=A,C.current.slotInterval=(n==null?void 0:n.interval)/(n==null?void 0:n.slotCount),N.current=t.view;const W=S.current,ae=J(W),ge=C.current.cloneFromSource(W,D);return Se(ge,ae),ge},Ne=$=>{var ge,Ae,Re,Le;if(!C.current)return;G.current={};const W=C.current;W.isActionPerformed=!0,x($),W.addDocSuppressors(),(ge=S.current)==null||ge.classList.add(p.DRAGGING),C.current.setCursorClass("move"),G.current.lastDragEvent=$.event,ee($);const ae={...$,data:r};if(m==null||m(ae),ae.cancel){$.cancel=!0,z(),U(),C.current=null;return}D&&(D.interval&&(M.current=W.slotInterval!==D.interval,W.slotInterval=D.interval),W.enableScroll=((Ae=D.scroll)==null?void 0:Ae.enable)??!0,W.minScrollSpeed=((Re=D.scroll)==null?void 0:Re.scrollBy)??W.minScrollSpeed,W.minScrollThreshold=((Le=D.scroll)==null?void 0:Le.timeDelay)??W.minScrollThreshold,K.current=D.excludeSelectors??null)},ee=$=>{try{const W=S.current;if(!W)return;const ae=C.current.getContentWrap(W),ge=ae==null?void 0:ae.getBoundingClientRect(),{clientY:Ae,clientX:Re}=C.current.getPointerCoordinates($.event);if(!ae||!ge||Ae==null&&Re==null)return;const Le=W.getBoundingClientRect(),Y={top:ae.scrollTop||0,left:ae.scrollLeft||0};P.current.dragAnchorOffsetPx=Ae!=null?Ae-ge.top+Y.top-(Le.top-ge.top+Y.top):null,P.current.dragAnchorOffsetX=Re!=null?Re-ge.left+Y.left-(Le.left-ge.left+Y.left):null}catch{P.current.dragAnchorOffsetPx=P.current.dragAnchorOffsetX=null}},oe=$=>{var W;!((W=C.current)!=null&&W.isAllDaySource)&&C.current.enableScroll&&Q($.event)},ce=$=>{var Ae;if(!((Ae=C.current)!=null&&Ae.cloneRef&&$&&C.current))return;const W=C.current,ae=W.getContentWrap($);if((ae==null?void 0:ae.getBoundingClientRect())&&r){let Re=Number($.getAttribute("data-date"));if(!Re||isNaN(Re))return;W.isAllDaySource&&(Re=Number(F.normalizeDate(new Date(Re))));let Le=new Date;if(t.view===N.current)if(I.current&&!W.isAllDaySource)Le=new Date(Re);else if(M.current&&!W.isAllDaySource&&!W.isMonthView){const{schedulerStartMinutes:me}=F.getSchedulerStartAndEndMinutes(i,l);Le=C.current.getSteppedCellDate(me,G.current.lastDragEvent,fe.current,P.current.minutesPerPixel,Re,ae)}else W.isAllDaySource===I.current&&(Re=Re-fe.current),Le=new Date(Re);else Le=new Date(Re),D.externalDragAndDrop&&N.current==="Month"&&F.setHours(Le,_.startTime);if(isNaN(Le.getTime()))return;P.current.finalDragStartTime=new Date(Le);const Y=Me.getEventByGuid(R,r.guid),De=Z(Y);P.current.finalDragEndTime=new Date(P.current.finalDragStartTime.getTime()+De)}},x=$=>{const W=C.current.getCellUnderPointer($.event);if(W&&C.current&&W&&r){const ae=W.getAttribute("data-date");if(!ae||isNaN(Number(ae)))return;const ge=Me.getEventByGuid(R,r.guid);if(!ge)return;const Ae=new Date(ge.startTime).getTime();fe.current=Number(ae)-Ae}},V=$=>{var ae,ge,Ae,Re,Le,Y,De,me,Oe,Pe,Ke,He,Tt;if(!C.current)return;let W=C.current.getCellUnderPointer($.event);if(W||(W=C.current.getCurrentTargetCell($.target)),D.externalDragAndDrop&&(w(),t.view!==N.current&&(C.current.cellWidth=((ge=(ae=$.target.closest(`.${p.SCHEDULER}`))==null?void 0:ae.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`))==null?void 0:ge.clientWidth)??S.current.clientWidth),C.current.isMonthView=!!((Ae=W||$.target)!=null&&Ae.closest(`.${p.MONTH_VIEW}`)),(Re=W||$.target)!=null&&Re.closest(`.${p.DAY_VIEW}`)?N.current="Day":(Le=W||$.target)!=null&&Le.closest(`.${p.WEEK_VIEW}`)?N.current="Week":(Y=W||$.target)!=null&&Y.closest(`.${p.WORK_WEEK_VIEW}`)?N.current="WorkWeek":C.current.isMonthView&&(N.current="Month")),C.current.currentCell=W,C.current.isMonthView||(C.current.isAllDaySource=r.isAllDay=((De=W||$.target)==null?void 0:De.classList.contains(p.ALL_DAY_CELL))||!!((me=$.target)!=null&&me.closest(`.${p.DATE_HEADER_CONTAINER}`))),W){C.current.setCursorClass("move"),oe($),D.externalDragAndDrop&&(y.current=W.closest(`.${p.SCHEDULER}`),C.current.cloneRef.classList.add(p.DRAG_CLONE));let lt=new Date(Number(W.getAttribute("data-date"))),Ot=lt,Lt=lt;if(C.current.isMonthView){const Ct=(Oe=W.closest(`.${p.CONTENT_TABLE}`))==null?void 0:Oe.querySelectorAll(`.${p.WORK_CELLS}`);lt=new Date(Number((Pe=Ct[0])==null?void 0:Pe.getAttribute("data-date"))),Lt=new Date(Number((Ke=Ct[(Ct==null?void 0:Ct.length)-1])==null?void 0:Ke.getAttribute("data-date")))}G.current.lastDragEvent=$.event,ce(W),P.current.finalDragStartTime&&(Ot=P.current.finalDragStartTime),ie(Ot,lt,Lt)}else D.externalDragAndDrop&&((Tt=(He=$.target)==null?void 0:He.closest)!=null&&Tt.call(He,`.${p.SCHEDULER_TOOLBAR_CONTAINER}, .${p.STICKY_HEADER}, .${p.HEADER_SECTION},
                .${p.HEADER_ROW}, .${p.LEFT_INDENT}`)&&(document!=null&&document.body)?C.current.setCursorClass("notAllowed"):document!=null&&document.body&&C.current.setCursorClass("default"),C.current.cloneRef.classList.remove(p.DRAG_CLONE));g==null||g({...$,data:r})},z=()=>{var $,W,ae,ge;($=S.current)==null||$.removeAttribute("aria-grabbed"),(W=S.current)==null||W.classList.remove(p.DRAGGING),C.current.setCursorClass("default"),(ge=(ae=C.current)==null?void 0:ae.cloneRef)!=null&&ge.parentElement&&C.current.cloneRef.parentElement.removeChild(C.current.cloneRef)},te=()=>{C.current&&(C.current.cloneRef=null)},he=$=>{var ge,Ae,Re,Le,Y,De,me;let W=null,ae=null;if((ge=C.current)!=null&&ge.isAllDaySource?W=((Re=C.current)==null?void 0:Re.getCellUnderClone((Ae=C.current)==null?void 0:Ae.cloneRef))||((Le=C.current)==null?void 0:Le.getCellUnderPointer($.event)):W=(Y=C.current)==null?void 0:Y.getCellUnderPointer($.event),W||(W=(De=C.current)==null?void 0:De.getCurrentTargetCell($.target)),W){const Oe=W.getAttribute("data-date");ae=Oe?Number(Oe):(me=C.current)==null?void 0:me.getCurrentTargetDate($.target,W)}return{cell:W,finalDropTimestamp:ae}},Ee=($,W)=>{var Y,De,me;const ae=new Date($.startTime),ge=new Date($.endTime),Ae=Math.max(0,ge.getTime()-ae.getTime());let Re=new Date(W);(Y=C.current)!=null&&Y.isAllDaySource?F.setHours(Re,ae):(De=C.current)!=null&&De.isMonthView?(Re=F.normalizeDate(Re),F.setHours(Re,ae)):(W=W-fe.current,Re=new Date(W));const Le=new Date(Re.getTime()+Ae);return(me=C.current)!=null&&me.isAllDaySource&&F.setHours(Le,ge),{originalStart:ae,originalEnd:ge,durationMs:Ae,newStartTime:Re,newEndTime:Le}},be=($,W,ae,ge)=>{if(!C.current)return;const Ae=Eo($,W,ae,u,f.fields,R);U(),ge.cancel=!0,h==null||h({...ge,data:Ae})},ke=e.useCallback($=>{if(!K.current)return!0;const W=K.current.split(",");for(const ae of W)if($!=null&&$.classList.contains(ae.trim()))return!1;return!0},[]),de=$=>{if(!C.current)return;if(z(),$.element){const Re=$.element.closest(`.${p.TABLE_WRAP}`);Re&&(C.current.cloneRef=Re.querySelector(`.${p.APPOINTMENT}.${p.EVENT_CLONE}`))}const{cell:W,finalDropTimestamp:ae}=he($);te(),D.externalDragAndDrop?w():b==null||b.hide();const ge=Array.isArray(r)?r[0]:r,Ae=(Re,Le)=>{const Y=Me.getEventByGuid(R,r.guid);Y&&(Y.startTime=_.startTime,Y.endTime=_.endTime,Y.isAllDay=_.isAllDay),U(),$.cancel=!0,Re!==null&&Le!==null&&(v==null||v.show({title:T(Re),message:T(Le),confirmText:T("ok"),showCancel:!1,onConfirm:()=>v.hide()})),h==null||h({...$,data:ge}),C.current=null};if(!W){Ae(null,null);return}if(ke(W)){let Re,Le;if(P.current.finalDragStartTime&&P.current.finalDragEndTime)Re=P.current.finalDragStartTime,Le=P.current.finalDragEndTime;else if(W&&ae){const{newStartTime:Y,newEndTime:De}=Ee(ge,ae);Re=Y,Le=De}if(Re&&Le){const Y={...ge,startTime:Re,endTime:Le};if(!c&&Me.checkEventOverlap(Y,R,!0)){Ae("eventOverlap","overlapAlert");return}if(Me.isBlockRange(Y,R,!0)){Ae("alert","blockAlert");return}if(I.current&&C.current.isMonthView&&(r.isAllDay=!0),ge.recurrenceID&&ge.recurrenceRule){ge.startTime=_.startTime,ge.endTime=_.endTime;const De=O?ho(ge,Re,Le,B,R):{isValid:!0};if(De.isValid)ge.recurrenceException=ge.recurrenceException??Cn(_.startTime);else{const me=De.messageKey||Pt.SameDayAlert;Ae("alert",me);return}}be(ge,Re,Le,$);return}}else{const Re=Me.getEventByGuid(R,r.guid);Re.startTime=ge.startTime,Re.endTime=ge.endTime}U(),h==null||h({...$,data:r}),C.current=null};nn(L,{clone:!0,cursorAt:D!=null&&D.externalDragAndDrop?{left:-20,top:-20}:{left:-5,top:-5},dragArea:(D==null?void 0:D.eventDragArea)??`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}`,abort:`.${p.EVENT_RESIZE_CLASS}, .${p.LEFT_RESIZE_HANDLER}, .${p.RIGHT_RESIZE_HANDLER}, .${p.TOP_RESIZE_HANDLER}, .${p.BOTTOM_RESIZE_HANDLER}, .${p.BLOCK_APPOINTMENT}`,distance:5,helper:$=>re($),onDragStart:$=>Ne($),onDrag:$=>V($),onDragStop:$=>de($),enableTailMode:D==null?void 0:D.externalDragAndDrop});const Ce={...s||{},onClick:$=>{var W,ae,ge;(W=C.current)==null||W.suppressEvent($),!((ae=C.current)!=null&&ae.isActionPerformed)&&((ge=s==null?void 0:s.onClick)==null||ge.call(s,$))}};return{mergedRef:q,composedProps:Ce}}const er=e.memo(e.forwardRef((o,r)=>{const{children:s,data:t,className:n,containerProps:i}=o,{mergedRef:l,composedProps:u}=Cc({ref:r,data:t,containerProps:i});return a.jsx("div",{ref:l,className:n,...u,children:s})}));er.displayName="DraggableEvent";er.__docgenInfo={description:"",methods:[],displayName:"DraggableEvent"};function Dc(o){var ee,oe,ce,x;const{onResizeStart:r,onResizing:s,onResizeStop:t,timeScale:n,startHour:i,endHour:l,schedulerRef:u,showWeekend:f,workDays:d,eventOverlap:E,confirmationDialog:m,eventResize:g,eventSettings:h}=We(),{eventsData:c}=Gt(),{renderDates:v}=gt(),D=Fr(),{dir:O}=$e(),_=e.useRef(null),T=e.useRef(null),A=10,R=e.useRef(new Date),B=e.useRef(0),k=e.useRef(0),b=e.useRef(0),S=e.useRef(0),L=e.useRef(qe.Right),C=e.useRef(void 0),G=e.useRef(void 0),P=e.useRef(null),X=e.useRef(void 0),se=e.useRef(!1),fe=e.useRef(0),pe=e.useRef(0),{getString:K}=nt(),M=e.useRef(null);e.useEffect(()=>()=>{I(),T.current=null,_.current=null},[]);const y=()=>{Ve.add(document,"mousemove",w,!0),Ve.add(document,"touchmove",w,{capture:!0,passive:!1}),Ve.add(document,"mouseup",Z,!0),Ve.add(document,"touchend",Z,{capture:!0})},N=()=>{Ve.remove(document,"mousemove",w),Ve.remove(document,"touchmove",w),Ve.remove(document,"mouseup",Z),Ve.remove(document,"touchend",Z)},I=()=>{ue(),N(),se.current=!1,fe.current=0,pe.current=0},q=()=>{document.body.style.userSelect="none",document.body.style.cursor=L.current===qe.Left||L.current===qe.Right?"ew-resize":"ns-resize"},H=()=>{document.body.style.userSelect="",document.body.style.cursor=""},U=(V,z)=>{const te=(z==null?void 0:z.offsetWidth)||0,he=V.classList.contains(p.ALL_DAY_APPOINTMENT),Ee=!!V.closest(`.${p.MONTH_VIEW}`),be=T.current.slotInterval;fe.current=(z==null?void 0:z.offsetHeight)||0,pe.current=fe.current>0?be/fe.current:0,C.current=o!=null&&o.startTime?new Date(o.startTime):void 0,G.current=o!=null&&o.endTime?new Date(o.endTime):void 0,bt(T.current,{cellWidth:te,isAllDaySource:he,isMonthView:Ee,slotInterval:be,interval:be},null,!0)},ne=()=>{if(!_.current||!(_.current.offsetParent||_.current.parentElement))return;const z=T.current.cloneFromSource(_.current);T.current.cloneRef=z},Q=e.useCallback((V,z)=>{var de,Ce,$,W;const te=z.nativeEvent,he=(de=z.target)==null?void 0:de.closest(`.${p.APPOINTMENT}`);if(!he)return;T.current=new Ht,T.current.slotInterval=n!=null&&n.interval&&(n!=null&&n.slotCount)?n.interval/n.slotCount:30,T.current.isActionPerformed=!1,L.current=V,T.current.direction=O,_.current=he,b.current=he.offsetTop,S.current=he.offsetHeight;const Ee=T.current.getCellUnderPointer(z.nativeEvent);U(he,Ee),L.current===qe.Top?R.current=C.current:L.current===qe.Bottom&&(R.current=G.current);const be=J(te),ke=T.current.getPointerCoordinates(te);ke.clientX!=null&&(B.current=ke.clientX),ke.clientY!=null&&(k.current=ke.clientY),X.current=te,r==null||r(be),!be.cancel&&(M.current={startTime:new Date(o.startTime),endTime:new Date(o.endTime)},g&&(g.interval>0&&!T.current.isAllDaySource&&!T.current.isMonthView&&(se.current=T.current.slotInterval!==g.interval,se.current&&(T.current.slotInterval=g.interval)),T.current.enableScroll=((Ce=g.scroll)==null?void 0:Ce.enable)??!0,T.current.minScrollSpeed=(($=g.scroll)==null?void 0:$.scrollBy)??T.current.minScrollSpeed,T.current.minScrollThreshold=((W=g.scroll)==null?void 0:W.timeDelay)??T.current.minScrollThreshold),y())},[r,v,o]),J=V=>({event:V,cancel:!1,startTime:C.current,endTime:G.current,data:_.current?o:void 0}),Se=V=>(T.current.performAutoScrolling(V,_.current),T.current.scrollInterval!==null&&P.current===null&&(P.current=requestAnimationFrame(Ne)),!1),ve=(V,z)=>{if(!T.current.isActionPerformed){if(Math.hypot(V,z)<A)return;const he=_.current;if(!he)return;T.current.isActionPerformed=!0,T.current.addDocSuppressors(),he.classList.add(p.RESIZING),ne(),document!=null&&document.body&&q()}},ue=()=>{P.current!=null&&(cancelAnimationFrame(P.current),P.current=null)},w=e.useCallback(V=>{var de,Ce;if(!T.current)return;const z=T.current.getPointerCoordinates(V),te=z.clientX-B.current,he=z.clientY-k.current;if(ve(te,he),!T.current.isActionPerformed)return;X.current=V;const Ee=J(V);if(s==null||s(Ee),Ee.cancel)return;Ht.currentActionName="resize",Ee.startTime&&(C.current=Ee.startTime),Ee.endTime&&(G.current=Ee.endTime);const be=_.current;!T.current.isAllDaySource&&T.current.enableScroll&&Se(V);const ke=T.current.getCellUnderPointer(V);T.current.cloneRef&&be&&n.enable&&!(T.current.isAllDaySource||T.current.isMonthView)&&ie(ke),re(ke),(de=V.preventDefault)==null||de.call(V),(Ce=V==null?void 0:V.stopPropagation)==null||Ce.call(V)},[(ee=T.current)==null?void 0:ee.isActionPerformed,_.current,v,o,B.current,k.current,L.current,(oe=T.current)==null?void 0:oe.cloneRef,s]),Z=e.useCallback(V=>{var ke,de;if((ke=_.current)==null||ke.classList.remove(p.RESIZING),T.current.scrollInterval&&cancelAnimationFrame(T.current.scrollInterval),T.current.scrollInterval=null,I(),document!=null&&document.body&&H(),T.current.cloneRef=null,(de=D==null?void 0:D.hide)==null||de.call(D),!T.current.isActionPerformed){T.current.isActionPerformed=!1;return}T.current.isActionPerformed=!1;const z=J(V);if(t==null||t(z),z.cancel){const Ce=z.data;Ce&&(C.current=Ce.startTime,G.current=Ce.endTime);return}const te=Array.isArray(o)?o[0]:o,he={...te,startTime:new Date(te.startTime),endTime:new Date(te.endTime)};if(L.current===qe.Top)F.setHours(he.startTime,R.current);else if(L.current===qe.Bottom){const Ce=F.isMidnight(he.endTime),$=F.isMidnight(R.current);F.setHours(he.endTime,R.current);const W=Ce&&!$?-1:!Ce&&$?1:0;he.endTime=F.addDays(he.endTime,W)}if(T.current.isAllDaySource||T.current.isMonthView||!n.enable){const Ce=T.current.getCellUnderPointer(V),$=(Ce==null?void 0:Ce.getAttribute("data-date"))??T.current.getCurrentTargetDate(V.target,Ce);if(!$)return;let ae=new Date(Number($));if(L.current===qe.Right){const ge=F.normalizeDate(he.startTime);ae.getTime()<ge.getTime()&&(ae=ge),F.setYear(he.endTime,ae)}else if(L.current===qe.Left){const ge=F.normalizeDate(he.endTime);ae.getTime()>ge.getTime()&&(ae=ge),F.setYear(he.startTime,ae)}}const Ee={...he,startTime:he.startTime,endTime:he.endTime},be=(Ce,$)=>{const W=Me.getEventByGuid(c,o.guid);W&&M.current&&(W.startTime=new Date(M.current.startTime),W.endTime=new Date(M.current.endTime)),m==null||m.show({title:K(Ce),message:K($),confirmText:K("ok"),showCancel:!1,onConfirm:()=>m.hide()})};if(!E&&Me.checkEventOverlap(Ee,c,!0)){be("eventOverlap","overlapAlert");return}if(Me.isBlockRange(Ee,c,!0)){be("alert","blockAlert");return}he.recurrenceRule&&he.recurrenceID&&(he.recurrenceException=he.recurrenceException??Cn(M.current.startTime)),Eo(he,he.startTime,he.endTime,u,h.fields,c),T.current=null},[(ce=T.current)==null?void 0:ce.isActionPerformed,_.current,T,(x=T.current)==null?void 0:x.cloneRef,w,t]),ie=V=>{var $;const z=V==null?void 0:V.getAttribute("data-date");if(!z)return;const te=new Date(Number(z));let he=te.getHours()*Ze+te.getMinutes();const Ee=C.current?new Date(C.current):void 0,be=G.current?new Date(G.current):void 0;let ke=!1,de=!1,Ce=te;if(_.current.querySelector(`.${p.INDICATOR}`)&&(ke=_.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.UP_ARROW_ICON}`),de=_.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.DOWN_ARROW_ICON}`)),se.current){const W=X.current,ae=($=T.current)==null?void 0:$.getContentWrap(V);if(ae&&W){const{schedulerStartMinutes:ge}=F.getSchedulerStartAndEndMinutes(i,l);Ce=T.current.getSteppedCellDate(ge,W,0,pe.current,Number(z),ae)}}if(L.current===qe.Top){const W=be.getHours()*Ze+be.getMinutes();de||W>he||W===0?(Ee.setTime(Ce.getTime()),R.current=Ee):g.resizeToZero&&(R.current=be)}else if(L.current===qe.Bottom){he=he+T.current.slotInterval;const W=Ee.getHours()*Ze+Ee.getMinutes();if(se.current){const ae=Ce.getHours()*Ze+Ce.getMinutes();ke||W<ae?(be.setTime(Ce.getTime()),R.current=be):g.resizeToZero&&(R.current=Ee)}else ke||W<he?(be.setHours(te.getHours(),te.getMinutes()+T.current.slotInterval),R.current=be):g.resizeToZero&&(R.current=Ee)}},re=V=>{var ke,de,Ce,$;if(!o.guid)return;const z=Me.getEventByGuid(c,o.guid);if(!z)return;const te={...z,startTime:new Date(z.startTime),endTime:new Date(z.endTime)},he=((ke=T.current)==null?void 0:ke.isMonthView)||((de=T.current)==null?void 0:de.isAllDaySource);if(!he&&n.enable){const W={...te};if(L.current===qe.Top)F.setHours(W.startTime,R.current);else if(L.current===qe.Bottom){const ge=F.isMidnight(W.endTime),Ae=F.isMidnight(R.current);F.setHours(W.endTime,R.current);const Re=ge&&!Ae?-1:!ge&&Ae?1:0;W.endTime=F.addDays(W.endTime,Re)}const ae=Me.processTimeSlotCloneEvent((Ce=u.current)==null?void 0:Ce.element,v,W,n,i,l,T.current.cellWidth,O==="rtl");D==null||D.show({guid:o.guid,segments:ae,isDayEvent:!1});return}let Ee=null;if(V){const W=V.getAttribute("data-date");Ee=W?new Date(Number(W)):null}if(!Ee&&V){const W=T.current.getCurrentTargetDate(V,V);Ee=W!=null?new Date(W):null}if(Ee){const W=F.normalizeDate(te.startTime),ae=F.normalizeDate(te.endTime);L.current===qe.Right?(Ee.getTime()<W.getTime()&&(Ee=W),F.setYear(te.endTime,Ee)):L.current===qe.Left&&(Ee.getTime()>ae.getTime()&&(Ee=new Date(ae)),F.setYear(te.startTime,Ee))}const be=Me.processCloneEvent(($=u.current)==null?void 0:$.element,v,te,f,d,T.current.cellWidth,T.current.isAllDaySource,O==="rtl",T.current.isMonthView,_.current);D==null||D.show({guid:o.guid,segments:be,isDayEvent:he})},Ne=()=>{if(P.current=null,!T.current||T.current.scrollInterval==null)return;const V=X.current;if(V){let z=T.current.getCellUnderPointer(V);if(!z){const te=V.target||null;z=te==null?void 0:te.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}z&&(T.current.cloneRef&&!(T.current.isAllDaySource||T.current.isMonthView)&&ie(z),re(z))}T.current&&T.current.scrollInterval!=null&&(P.current=requestAnimationFrame(Ne))};return{resizeStart:Q,onClick:V=>{var z;(z=T.current)!=null&&z.suppressEvent&&T.current.suppressEvent(V)}}}const Fn=typeof document<"u"&&typeof window<"u",Bn=o=>{var r,s;o==null||o.stopPropagation(),o!=null&&o.nativeEvent&&((s=(r=o.nativeEvent).stopImmediatePropagation)==null||s.call(r))},vc=o=>{switch(o){case qe.Top:return p.TOP_RESIZE_HANDLER;case qe.Bottom:return p.BOTTOM_RESIZE_HANDLER;case qe.Left:return p.LEFT_RESIZE_HANDLER;default:return p.RIGHT_RESIZE_HANDLER}},ws=({dir:o,resizeStart:r,showResizeHandle:s})=>xe.isDevice&&!s?null:a.jsxs("div",{className:`${p.EVENT_RESIZE_CLASS} ${vc(o)}`,onMouseDown:t=>{Bn(t),r==null||r(o,t)},onTouchStart:t=>{Bn(t),r==null||r(o,t)},children:[o===qe.Top||o===qe.Bottom?a.jsx("div",{className:p.VERTICAL_RESIZE_INNER}):a.jsx("div",{className:p.HORIZONTAL_RESIZE_INNER}),xe.isDevice&&s&&a.jsx("div",{className:p.MOB_RESIZE_DOT,onMouseDown:t=>{Bn(t),r==null||r(o,t)},onTouchStart:t=>{Bn(t),r==null||r(o,t)}})]}),vn=e.memo(({isVertical:o=!1,data:r,children:s,hasPrevious:t,hasNext:n})=>{const{eventResize:i}=We();if(!i)return a.jsx(a.Fragment,{children:s});const{resizeStart:l}=Dc(r),u=e.useRef(null),f=e.useRef(null),[d,E]=e.useState(!1);Zt(f,{tapHold:()=>{xe.isDevice&&E(!0)}}),e.useEffect(()=>{const c=f.current;if(!c)return;const v=D=>{D.preventDefault()};return c.addEventListener("contextmenu",v,!0),()=>{c.removeEventListener("contextmenu",v,!0)}},[]);const m=e.useCallback((c,v)=>{if(l(c,v),!xe.isDevice)return;const D=()=>{E(!1),Fn&&(document.removeEventListener("mouseup",D,!0),document.removeEventListener("touchend",D,!0))};Fn&&(document.addEventListener("mouseup",D,{capture:!0,once:!0}),document.addEventListener("touchend",D,{capture:!0,once:!0}))},[l]);e.useEffect(()=>{if(!xe.isDevice||!d)return;const c=v=>{const D=v.target;u.current&&D&&!u.current.contains(D)&&E(!1)};return Fn&&(document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0)),()=>{Fn&&(document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0))}},[d]);const g=o?qe.Top:qe.Left,h=o?qe.Bottom:qe.Right;return a.jsxs("div",{className:`${p.RESIZE_CONTAINER}`,ref:c=>{u.current=c,f.current=c?c.closest(`.${p.APPOINTMENT}`):null},children:[!t&&i.startResizable&&a.jsx(ws,{dir:g,resizeStart:m,showResizeHandle:d}),s,!n&&i.endResizable&&a.jsx(ws,{dir:h,resizeStart:m,showResizeHandle:d})]})});vn.displayName="ResizeHandlers";const Gn=o=>{const{weekRenderDates:r,isBlockedEvent:s,...t}=o,{renderDates:n}=gt(),{timeFormat:i,eventTemplate:l,onEventClick:u,onEventDoubleClick:f,eventDrag:d,eventResize:E,quickPopupRef:m,readOnly:g}=We(),{locale:h}=$e(),{getString:c}=nt(h||"en-US"),v=e.useRef(null),{processedEvent:D,overflowDirection:O,positionStyle:_}=Tc({eventInfo:t,renderDates:r||n}),{isOverflowLeft:T,isOverflowRight:A}=O,R=e.useCallback(M=>{if(s){M==null||M.preventDefault(),M==null||M.stopPropagation();return}if(Qn(M.currentTarget),M.stopPropagation(),u){const y={event:M,data:t.event,element:M.currentTarget};u(y)}},[u,D]),B=e.useCallback(M=>{var y;if(t.event.isReadonly||g||s){M==null||M.preventDefault(),M==null||M.stopPropagation();return}if(M.stopPropagation(),f){(y=m==null?void 0:m.current)==null||y.hide();const N={event:M,data:t.event,element:M.currentTarget};f(N)}},[f,D]),k=M=>ft(M??new Date,{type:"time",skeleton:"short",format:i,locale:h}),b=M=>a.jsx("div",{className:`sf-indicator sf-icons sf-${M}-icon`,children:M==="left"?a.jsx(_r,{}):a.jsx(Pr,{})}),S=M=>a.jsx("div",{className:p.TIME,children:M}),L=e.useCallback(()=>{const{subject:M,isAllDay:y,startTime:N,endTime:I}=D;if(!t.totalSegments)return null;const q=()=>T?b("left"):!y&&S(k(N)),H=()=>A?b("right"):!y&&S(k(I));return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[q(),a.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:M||c("addTitle")}),H(),a.jsx(Xt,{event:t.event})]})},[D,t,h,i,T,A]),C=e.useCallback(()=>{const{subject:M,startTime:y,isAllDay:N}=D;return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!N&&S(k(y)),a.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:M||c("addTitle")}),a.jsx(Xt,{event:t.event})]})},[D,t]),G=e.useCallback(()=>{const{subject:M}=D;return a.jsx("div",{className:p.APPOINTMENT_DETAILS,children:a.jsx("div",{className:`${p.SUBJECT}`,children:M||c("addTitle")})})},[D,t]),P=e.useCallback(()=>l?l(D):s?G():t.totalSegments?L():C(),[l,D,L,C,G,t,T,A]),X={...t.eventStyle||{},..._},se=t.eventClasses.join(" "),fe={"data-id":D.id,"aria-label":Me.getAriaLabel(D),"data-guid":t.event.guid,role:"button",tabIndex:0,onClick:R,onDoubleClick:B,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&(M.stopPropagation(),R(M))},style:X},pe=P(),K=!s&&!t.event.isReadonly&&!g;return d!=null&&d.enable&&K?a.jsx(er,{data:D,className:se,containerProps:fe,ref:v,children:E!=null&&E.enable&&K?a.jsx(vn,{data:D,hasPrevious:T,hasNext:A,children:pe}):a.jsx(a.Fragment,{children:pe})}):a.jsx("div",{ref:v,className:se,...fe,children:E!=null&&E.enable&&K?a.jsx(vn,{data:D,hasPrevious:T,hasNext:A,children:pe}):a.jsx(a.Fragment,{children:pe})})};Gn.displayName="DayEvent";const tr=()=>{const{timeScale:o,onCellClick:r,onCellDoubleClick:s,readOnly:t,quickPopupRef:n}=We(),i=e.useCallback((d,E,m)=>{const g=new Date(E);return!o.enable||m?(E.setHours(0,0,0,0),g.setDate(g.getDate()+1),g.setHours(0,0,0,0),m=!0):g.setTime(E.getTime()+o.interval/o.slotCount*sn),{cancel:!1,nativeEvent:d.nativeEvent,startTime:E,endTime:g,isAllDay:!!m,element:d.currentTarget}},[o]),l=e.useCallback((d,E,m)=>{var g,h;if(!((g=d.target)!=null&&g.classList.contains(p.DATE_HEADER)||(h=d.target)!=null&&h.classList.contains(p.HEADER_DATE)||t)&&(Xn(d.currentTarget),r)){const c=i(d,E,m);if(r(c),c.cancel)return}},[r,i]),u=e.useCallback((d,E,m)=>{var g;if(!t&&(Xn(d.currentTarget),s)){(g=n==null?void 0:n.current)==null||g.hide();const h=i(d,E,m);if(s(h),h.cancel)return}},[s,i]);return{handleCellClick:l,handleCellDoubleClick:u,handleKeyDown:(d,E)=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),l(d,E))}}},Do=o=>{const{date:r,visibleEvents:s,hiddenEventCount:t,onMoreIndicatorClick:n}=o,{timeScale:i}=We(),{locale:l}=$e(),{getString:u}=nt(l||"en-US"),{handleCellClick:f,handleCellDoubleClick:d}=tr(),E=()=>t<=0?null:a.jsx("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,onClick:g=>{g==null||g.stopPropagation(),g==null||g.preventDefault(),n()},role:"button",tabIndex:0,"aria-label":`${t} more events`,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g==null||g.stopPropagation(),g==null||g.preventDefault(),n())},children:xe.isDevice?`+${t}`:`+${t} ${u("more")}`}),m=()=>s.map(g=>{const{totalSegments:h,isFirstSegmentInRenderRange:c,event:v,eventKey:D}=g;return h&&h>1&&c||(!h||h<=1)&&v.isAllDay&&!v.isBlock?a.jsx(Gn,{...g},D):null});return a.jsx("div",{className:p.ALL_DAY_CELL,"data-date":r.getTime(),onClick:g=>f(g,r,!0),onDoubleClick:g=>d(g,r,!0),onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),f(g,r,!0))},children:i.enable&&a.jsxs(a.Fragment,{children:[m(),E()]})},F.generateDateKey(r))};Do.displayName="AllDayRowCell";const Br=e.forwardRef((o,r)=>{const{isCollapsed:s,onCollapseChange:t,onMoreEventsChange:n}=o,{renderDates:i}=gt(),{timeScale:l}=We(),u=e.useRef(null),f=3,[d,E]=e.useState("auto"),{eventsByDate:m,hasEventsExceedingMaxCount:g,calculateHeight:h,getVisibleEvents:c,getHiddenEventCount:v}=gc(s,f),D=e.useCallback(()=>{t&&t()},[t]);e.useImperativeHandle(r,()=>({hasMoreEvents:g})),e.useEffect(()=>{n&&n(g)},[g,n]),e.useEffect(()=>{if(u.current)if(!l.enable)E("auto");else{const T=h();E(`${T}px`)}},[s,m,h]);const O=["sf-all-day-row",s?"sf-all-day-collapsed":"",g?"sf-has-more-events":""].filter(Boolean).join(" "),_=T=>{const A=F.generateDateKey(T),R=c(A),B=v(A);return a.jsx(Do,{date:T,visibleEvents:R,hiddenEventCount:B,onMoreIndicatorClick:D},A)};return a.jsx("div",{ref:u,className:O,style:{height:d},children:i.map(_)})});Br.displayName="AllDayRow";Br.__docgenInfo={description:"",methods:[],displayName:"AllDayRow"};const vo=()=>{const{timeScale:o,dateHeader:r,headerIndent:s}=We(),{handleDateClick:t}=Vr(),{locale:n}=$e(),{getString:i}=nt(n||"en-US"),{headerCells:l,isAllDayCollapsed:u,showAllDayToggle:f,weekNumber:d,toggleAllDayCollapse:E,handleMoreEventsChange:m}=ql(),{handleCellClick:g,handleCellDoubleClick:h}=tr(),c=D=>a.jsx("div",{className:D.className,onClick:O=>g(O,D.date,!0),onDoubleClick:O=>h(O,D.date,!0),children:r?r({date:D.date}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:p.HEADER_DAY,children:D.dayName}),a.jsx("div",{className:`${p.HEADER_DATE} ${D.isToday?p.TODAY:""}`,onClick:O=>t(O,D.date),children:D.dateNumber})]})},D.key),v=()=>a.jsx("div",{className:p.ALL_DAY_APPOINTMENT_SECTION,onClick:E,role:"button",tabIndex:0,"aria-label":i(u?"expandAllDaySection":"collapseAllDaySection"),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&E()},children:a.jsx(Zn,{className:u?p.APPOINTMENT_EXPAND:p.APPOINTMENT_COLLAPSE})});return a.jsxs("div",{className:p.HEADER_SECTION,children:[o.enable&&a.jsxs("div",{className:p.LEFT_INDENT,children:[s?s({weekNumber:d}):a.jsx(a.Fragment,{children:d&&a.jsx("div",{className:p.WEEK_NUMBER,children:a.jsx("div",{title:`Week ${d}`,children:d})})}),f&&v()]}),a.jsx("div",{className:p.RIGHT_SECTION,children:a.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:a.jsxs("div",{className:p.DATE_HEADER,children:[a.jsx("div",{className:p.HEADER_ROW,children:l.map(D=>c(D))}),a.jsx("div",{className:p.DAY_CLONE_CONTAINER}),a.jsx(Br,{isCollapsed:u,onCollapseChange:E,onMoreEventsChange:m})]})})})]})};vo.displayName="DateHeader";const yc=o=>{const{currentTime:r=new Date,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{startHour:n,endHour:i,timeFormat:l,timeScale:u}=We(),{locale:f}=$e(),{hours:d,minutes:E}=F.parseTimeString(n),{hours:m,minutes:g}=F.parseTimeString(i),[h,c]=e.useState(null),[v,D]=e.useState(0),O=e.useMemo(()=>{const T=[],A=d*Ze+E,R=m*Ze+g;let B=A;for(;B<R;){for(let k=0;k<u.slotCount;k++){const b=B+k*(u.interval/u.slotCount);if(b>=R)break;const S=Math.floor(b/Ze),L=Math.floor(b%Ze),C=new Date;C.setHours(S,L,0,0);const G=k===0,P=k===u.slotCount-1,se=b+u.interval/u.slotCount>=R,fe={date:C,type:G?"majorSlot":"minorSlot"};T.push({key:`${S}-${L}`,date:C,isMajorSlot:G,isLastSlotOfInterval:P,isLastSlotBeforeEnd:se,label:ft(C,{type:"time",skeleton:"h",format:l,locale:f}),templateProps:fe,index:T.length})}B+=u.interval}return D(T.length),T},[d,E,m,g,l,u,f]);e.useEffect(()=>{if(!t){h!==null&&c(null);return}const T=100/v,A=Math.floor(s/T);A!==h&&c(A)},[s,h,v,t]);const _=ft(r,{type:"time",skeleton:"short",format:l,locale:f});return{timeSlots:O,totalSlots:v,hiddenSlotIndex:h,currentTimeString:_}},yo=o=>{const{currentTime:r,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{showTimeIndicator:n,timeScale:i}=We(),{timeSlots:l,hiddenSlotIndex:u,currentTimeString:f}=yc({currentTime:r,currentTimePosition:s,isTimeWithinBounds:t}),d=()=>l.map(E=>a.jsx("div",{className:`${p.TIME_SLOTS} ${E.isLastSlotOfInterval||E.isLastSlotBeforeEnd?"sf-time-cells":""} ${u===E.index?"sf-hide-children":""}`,children:E.isMajorSlot?i.majorSlot?i.majorSlot(E.templateProps):a.jsx("span",{children:E.label}):i.minorSlot?i.minorSlot(E.templateProps):null},E.key));return a.jsx("div",{className:p.LEFT_INDENT,children:a.jsxs("div",{className:p.TIME_CELLS_WRAP,children:[a.jsx("div",{className:p.SCHEDULER_TABLE,children:d()}),n&&t&&a.jsx("div",{className:p.CURRENT_TIME,style:{top:`${s}%`},children:f})]})})};yo.displayName="TimeCells";const Rc=o=>{const{renderDates:r,workDays:s,workHours:t,cell:n,timeScale:i,startHour:l,endHour:u}=o,{hours:f,minutes:d}=F.parseTimeString(l||"00:00"),{hours:E,minutes:m}=u==="24:00"?{hours:24,minutes:0}:F.parseTimeString(u||"24:00"),g=c=>n?n({date:c,type:"workCell"}):null;return{workCellRows:e.useMemo(()=>{const c=[];if(i.enable){const v=f*Ze+d,D=E*Ze+m;let O=v;for(;O<D;){for(let _=0;_<i.slotCount;_++){const T=O+_*(i.interval/i.slotCount);if(T>=D)break;const A=Math.floor(T/Ze),R=Math.floor(T%Ze),k=!(_===i.slotCount-1),b=`${A}-${R}`,S=`${A}:${R.toString().padStart(2,"0")}`,L=r.map(C=>{const G=new Date(C);G.setHours(A,R,0,0);const P=F.isWorkHour(G,t,s),X=F.isSameDay(C,new Date),se=F.isWeekend(C,s),fe=["sf-work-cells",k?"sf-alternate-cells":"",X?"sf-today":"",se?"sf-weekend":"",P?"sf-work-hours":""].filter(Boolean).join(" ");return{date:G,className:fe,key:`${C.getTime()}-${A}-${R}`,dataAttributes:{date:G.getTime()},isWorkHour:P,isToday:X,isWeekend:se,isAlternate:k}});c.push({key:b,dataAttribute:S,cells:L})}O+=i.interval}}else{const v=r.map(D=>{const O=new Date(D);O.setHours(0,0,0,0);const _=F.isSameDay(D,new Date),T=F.isWeekend(D,s),A=["sf-work-cells","sf-timescale-disabled-cell",_?"sf-today":"",T?"sf-weekend":""].filter(Boolean).join(" ");return{date:O,className:A,key:`${D.getTime()}-timescale-disabled`,dataAttributes:{date:O.getTime(),dateKey:F.generateDateKey(D)},isToday:_,isWeekend:T}});c.push({key:"disabled-timescale-row",cells:v})}return c},[r,i,f,d,E,m,s,t]),renderCellTemplate:g}},Ro=()=>{const{renderDates:o}=gt(),{workDays:r,workHours:s,cell:t,timeScale:n,startHour:i,endHour:l}=We(),{workCellRows:u,renderCellTemplate:f}=Rc({renderDates:o,workDays:r,workHours:s,cell:t,timeScale:n,startHour:i,endHour:l}),{handleCellClick:d,handleCellDoubleClick:E,handleKeyDown:m}=tr();return a.jsx("div",{className:p.CONTENT_TABLE,children:u.map(g=>a.jsx("div",{className:p.WORK_CELLS_ROW,"data-date":g.dataAttribute,children:g.cells.map(h=>a.jsx("div",{className:h.className,"data-date":h.dataAttributes.date,"data-date-key":h.dataAttributes.dateKey,onClick:c=>d(c,h.date),onDoubleClick:c=>E(c,h.date),onKeyDown:c=>{m(c,h.date)},children:f(h.date)},h.key))},g.key))})};Ro.displayName="WorkCells";const hr=118,Ss=2,bc=()=>{const{eventSettings:o,eventOverlap:r,timeFormat:s,timeScale:t,startHour:n,endHour:i,maxEventsPerRow:l=3,startHourTuple:u,endHourTuple:f}=We(),{renderDates:d}=gt(),{eventsData:E}=Gt(),{locale:m,dir:g}=$e(),h=e.useCallback((v,D)=>{const O=(A,R)=>{if(u&&f){const B=F.normalizeDate(A),k=F.normalizeDate(F.isMidnight(R)?F.addDays(R,-1):R);return B==null||B.setHours(u[0],u[1],0,0),k==null||k.setHours(f[0],f[1],0,0),R>B&&A<k}else return!0};if(t!=null&&t.enable){const A=o.spannedEventPlacement||"AllDayRow",R=[];let B=D.filter(P=>!P.isAllDay&&!P.isBlock&&Me.isMultiDayEvent(P));A==="AllDayRow"&&(B=B.filter(P=>F.isLessthan24Hours(P.startTime,P.endTime))),B.forEach(P=>{const X=Me.splitEventByDay(P,[v]);R.push(...X.filter(se=>O(se.startDate,se.endDate)))});const b=D.filter(P=>!P.isAllDay&&!P.isBlock&&!Me.isMultiDayEvent(P)&&F.isSameDay(new Date(P.startTime),v)&&O(P.startTime,P.endTime)).map(P=>({event:P,startDate:P.startTime,endDate:P.endTime}));R.push(...b);const S=Me.calculateOverlappingEvents(R,r),L=D.filter(P=>P.isBlock&&F.isSameDay(new Date(P.startTime),v)),C=[],G=(P,X={})=>{const{event:se}=P;if(!se.startTime||!se.endTime)return;const fe=dt.calculateEventPosition(P,t,n,i),pe=`${v.toISOString()}-${se.id}`,K=F.formatTimeDisplay(se,m,s),M=Me.getEventClassNames(se),y={width:fe.width||"96%",height:`${fe.height}`,top:fe.top||"0px"};g==="rtl"?y.right=fe.left||"0%":y.left=fe.left||"0%",C.push({event:se,timeDisplay:K,eventKey:pe,eventClasses:M,eventStyle:y,...X})};return S.forEach(P=>{P.forEach(X=>{G(X,{totalOverlapping:X.totalOverlapping,totalSegments:X.totalSegments,isFirstDay:X.isFirstDay,isLastDay:X.isLastDay,positionIndex:X.positionIndex,segmentIndex:X.segmentIndex})})}),L.forEach(P=>{const X={event:P,startDate:P.startTime,endDate:P.endTime};G(X)}),C}const _=Me.processDayEvents(d,D),T=[];return _.forEach(A=>{if(!F.isSameDay(A.startDate,v)||!O(A.startDate,A.endDate))return;const R=`${A.startDate.toISOString()}-${A.event.id}`,B=F.formatTimeDisplay(A.event,m,s),k=dt.calculatePositionStyles(A,d).width,b=A.positionIndex??0,S={height:`${hr}px`,top:`${b*(hr+Ss)}px`,width:k||"96%"};g==="rtl"?S.right="0%":S.left="0%",T.push({...A,timeDisplay:B,eventKey:R,eventStyle:S})}),T},[o,r,t,n,i,d,g,m,s]);return{dayWrappers:e.useMemo(()=>!d||d.length===0||!E||E.length===0?null:d.map(v=>{const D=F.generateDateKey(v),O=h(v,E);let _;return t.enable||(_=l*(hr+Ss)),{key:D,dateTimestamp:v.getTime(),events:O,moreIndicatorTopPx:_}}),[d,o,r,t,s,n,i,m,E])}},Ns=24,wc=124,Er=4,Ur=(o,r)=>{const{height:s,rowAutoHeight:t,numberOfWeeks:n,eventSettings:i,schedulerRef:l}=We(),{eventsData:u}=Gt(),f=e.useMemo(()=>Me.processDayEvents(o,u),[u,o]),d=e.useMemo(()=>Me.getEventsMap(o,f),[o,f]),E=e.useMemo(()=>{var S,L,C,G,P,X,se,fe,pe;const T=Me.getMaxEventsInCell(d,o),A=((C=(L=(S=l==null?void 0:l.current)==null?void 0:S.element)==null?void 0:L.querySelector("."+p.MONTH_VIEW+" ."+p.APPOINTMENT))==null?void 0:C.offsetHeight)??Ns,R=((X=(P=(G=l==null?void 0:l.current)==null?void 0:G.element)==null?void 0:P.querySelector("."+p.MONTH_VIEW+" ."+p.DATE_HEADER))==null?void 0:X.offsetHeight)??0;let B=((pe=(fe=(se=l==null?void 0:l.current)==null?void 0:se.element)==null?void 0:fe.querySelector("."+p.MONTH_VIEW+" ."+p.WORK_CELLS_ROW))==null?void 0:pe.offsetHeight)??wc;const k=K=>K*A+(K>0?K-1:0)*Er,b=()=>{var I,q,H,U,ne,Q,J,Se;const K=((H=(q=(I=l==null?void 0:l.current)==null?void 0:I.element)==null?void 0:q.querySelector("."+p.SCHEDULER_TOOLBAR_CONTAINER))==null?void 0:H.offsetHeight)??0,M=((Q=(ne=(U=l==null?void 0:l.current)==null?void 0:U.element)==null?void 0:ne.querySelector("."+p.MONTH_VIEW+" ."+p.HEADER_ROW))==null?void 0:Q.offsetHeight)??0,N=(((Se=(J=l==null?void 0:l.current)==null?void 0:J.element)==null?void 0:Se.offsetHeight)??parseInt(s,10))-K-M;return parseInt(Math.abs(N/n).toFixed(2),10)};if(t){const K=k(T)+R+(t&&(i!=null&&i.ignoreWhitespace)?0:Ns);return s!=="auto"&&n&&(B=b()),`${Math.max(K,B)}px`}if(n&&s!=="auto"&&r>=3){const K=b(),M=k(r)+R+A+Er;return`${Math.max(M,K)}px`}if(T>=3){const K=Math.min(T,r),M=k(K)+R+(T>r?A:0)+Er;return`${Math.max(M,B)}px`}return`${B}px`},[o,d,t,n,s,i==null?void 0:i.ignoreWhitespace,r,l]),m=e.useCallback(T=>{const A=h(T);return t?A:A.slice(0,r)},[d,r,t]),g=e.useCallback(T=>d.get(T).find(B=>B.event.isBlock&&(B.event.isAllDay||F.isFullDayEvent(B.startDate,B.endDate))),[d,r]),h=e.useCallback(T=>{var B;return[...(B=d.get(T))==null?void 0:B.filter(k=>!k.event.isBlock)].sort((k,b)=>(k.positionIndex||0)-(b.positionIndex||0))},[d]),c=e.useCallback(T=>{var R;if(g(T))return 0;const A=(R=d.get(T))==null?void 0:R.filter(B=>!B.event.isBlock);return Math.max(0,A.length-r)},[d,r]),v=e.useCallback(T=>c(T)>0,[c]),D=e.useCallback(T=>d.get(T).some(R=>R.event.isBlock&&!R.event.isAllDay&&!F.isFullDayEvent(R.startDate,R.endDate)),[d]),O=e.useCallback(T=>d.get(T).some(R=>R.event.isBlock&&(R.event.isAllDay||F.isFullDayEvent(R.startDate,R.endDate))),[d]);return{getVisibleEvents:m,getAlldayBlockEvent:g,getHiddenEventCount:c,getAllEventsForDate:h,hasMoreIndicator:v,hasBlockIndicator:D,hasAllDayBlock:O,calculatedRowHeight:E,sortEventsByTime:T=>T.sort((A,R)=>new Date(A.startTime).getTime()-new Date(R.startTime).getTime())}};function bo(o){const{onMoreEventsClick:r,morePopupRef:s}=We();return{handleMoreClick:e.useCallback((n,i)=>{var l;if(n&&typeof n.stopPropagation=="function"&&n.stopPropagation(),i&&n.target){const u=F.generateDateKey(i),d=o(u).map(m=>m.event),E={cancel:!1,data:d};if(r&&r(E),E.cancel)return;(l=s==null?void 0:s.current)==null||l.open(i,d,n.target)}},[o,r,s])}}const wo=o=>{const{date:r,count:s,onMoreClick:t,topPx:n}=o,{locale:i}=$e(),{getString:l}=nt(i||"en-US"),u=n!==void 0?{top:`${n}px`}:void 0,f=d=>{if(d.key==="Enter"||d.key===" "){const E={...d,currentTarget:d.currentTarget,type:"click"};t(E,r)}};return a.jsxs("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,style:u,onClick:d=>t(d,r),onKeyDown:f,tabIndex:0,role:"button",children:["+",s," ",!xe.isDevice&&`${l("more")}`]})},So=e.memo(()=>{const{eventTemplate:o,onEventClick:r,onEventDoubleClick:s,eventDrag:t,eventResize:n,maxEventsPerRow:i=3,timeScale:l,readOnly:u,quickPopupRef:f,startHourTuple:d,endHourTuple:E}=We(),{dayWrappers:m}=bc(),{locale:g}=$e(),{getString:h}=nt(g||"en-US"),{renderDates:c}=gt(),{getAllEventsForDate:v,getHiddenEventCount:D}=Ur(c,i),{handleMoreClick:O}=bo(v),_=S=>{if(l.enable){const{isOverflowTop:L,isOverflowBottom:C}=dt.getOverflowDirection(S,c,d,E);return a.jsxs(e.Fragment,{children:[L&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:a.jsx($s,{})}),T(S),C&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:a.jsx(js,{})})]})}else{const{isOverflowLeft:L,isOverflowRight:C}=dt.getOverflowDirection(S,c);return a.jsxs(e.Fragment,{children:[L&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.LEFT_ARROW_ICON}`,children:a.jsx(_r,{})}),T(S),C&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.RIGHT_ARROW_ICON}`,children:a.jsx(Pr,{})})]})}},T=S=>{const{event:L,timeDisplay:C}=S;return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[a.jsx("div",{className:`${p.SUBJECT}`,children:L.subject||h("addTitle")}),!L.isBlock&&L.location&&a.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:L.location}),!L.isBlock&&a.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:C}),a.jsx(Xt,{event:L})]})},A=S=>o?o(S.event):S.totalSegments||d||E?_(S):T(S),R=(S,L)=>{if(L.event.isBlock){S==null||S.preventDefault(),S==null||S.stopPropagation();return}if(Qn(S.currentTarget),r){const C={event:S,data:L.event,element:S.currentTarget};r(C)}},B=(S,L)=>{var C;if(L.event.isReadonly||u||L.event.isBlock){S==null||S.preventDefault(),S==null||S.stopPropagation();return}if(s){(C=f==null?void 0:f.current)==null||C.hide();const G={event:S,data:L.event,element:S.currentTarget};s(G)}},k=(S,L)=>{(S.key==="Enter"||S.key===" ")&&R(S,L)};if(!m)return a.jsx("div",{className:p.EVENT_CONTAINER});const b=!(l&&l.enable);return a.jsx("div",{className:p.EVENT_CONTAINER,children:m.map(S=>{const L=S.events.filter(K=>!K.event.isBlock),C=S.events.filter(K=>K.event.isBlock),G=b?L.slice(0,i):L,P=new Date(S.dateTimestamp),X=F.generateDateKey(P),se=b?D(X):0,fe=G.filter(K=>K.totalSegments&&K.totalSegments>1&&K.isFirstSegmentInRenderRange||!K.totalSegments||K.totalSegments<=1),pe=b?fe:[...C,...fe];return a.jsxs("div",{className:p.DAY_WRAPPER,"data-date":S.dateTimestamp,children:[pe.map(K=>{const{isOverflowTop:M,isOverflowBottom:y}=dt.getOverflowDirection(K,c,d,E),N=K.eventClasses.join(" "),I={style:K.eventStyle,"data-id":String(K.event.id),"data-guid":K.event.guid,"aria-label":Me.getAriaLabel(K.event),tabIndex:0,onClick:U=>R(U,K),onDoubleClick:U=>B(U,K),onKeyDown:U=>k(U,K)},q=A(K),H=!K.event.isBlock&&!K.event.isReadonly&&!u;return t.enable&&H?a.jsx(er,{data:K.event,className:N,containerProps:I,children:n.enable&&H?a.jsx(vn,{isVertical:l.enable,data:K.event,hasPrevious:M,hasNext:y,children:q}):a.jsx(a.Fragment,{children:q})},K.eventKey):a.jsx("div",{className:N,...I,children:n.enable&&H?a.jsx(vn,{isVertical:l.enable,data:K.event,hasPrevious:M,hasNext:y,children:q}):a.jsx(a.Fragment,{children:q})},K.eventKey)}),b&&se>0&&a.jsx(wo,{date:new Date(S.dateTimestamp),count:se,onMoreClick:O,topPx:S.moreIndicatorTopPx})]},S.key)})})});So.displayName="TimeSlotEvent";const Sc=o=>{const{timeScale:r}=We(),[s,t]=e.useState(0),[n,i]=e.useState(new Date),[l,u]=e.useState(!1),f=e.useCallback((m,g)=>{t(m),i(new Date),u(g)},[]),d=e.useMemo(()=>{let m="";switch(o){case"Day":m=p.DAY_VIEW;break;case"Week":m=p.WEEK_VIEW;break;case"WorkWeek":m=p.WORK_WEEK_VIEW;break}return m},[o]),E=e.useMemo(()=>`${r.enable?"":"sf-timescale-disabled"}`,[r.enable]);return{currentTime:n,currentTimePosition:s,isTimeWithinBounds:l,viewClassName:d,contentSectionClassName:E,handleTimePositionUpdate:f}},nr=o=>{const{viewType:r}=o,{timeScale:s,showTimeIndicator:t}=We(),{currentTime:n,currentTimePosition:i,isTimeWithinBounds:l,viewClassName:u,contentSectionClassName:f,handleTimePositionUpdate:d}=Sc(r);return a.jsx("div",{className:`${p.VERTICAL_VIEW} ${u}`,children:a.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[a.jsx("div",{className:p.STICKY_HEADER,children:a.jsx(vo,{})}),a.jsxs("div",{className:`${p.CONTENT_SECTION} ${f}`,children:[s.enable&&a.jsx(yo,{currentTime:n,currentTimePosition:i,isTimeWithinBounds:l}),a.jsxs("div",{className:p.WORK_CELLS_CONTAINER,children:[a.jsx("div",{className:p.TIME_SLOT_CLONE_CONTAINER}),a.jsxs("div",{className:p.CONTENT_WRAP,children:[a.jsx(So,{}),a.jsx(Ro,{})]}),t&&s.enable&&a.jsx(hc,{onPositionUpdate:d})]})]})]})})};nr.displayName="VerticalView";const Nc=()=>a.jsx(nr,{viewType:"Day"});Nc.displayName="DayView";const xc=()=>a.jsx(nr,{viewType:"Week"});xc.displayName="WeekView";const Ac=()=>a.jsx(nr,{viewType:"WorkWeek"});Ac.displayName="WorkWeekView";function Oc(){const{locale:o}=$e(),{firstDayOfWeek:r,showWeekend:s,workDays:t}=We(),n=e.useCallback(()=>{const l=[],u="gregorian",f=xe.isDevice?"abbreviated":"wide",d=`days.stand-alone.${f}`;let E;if(!o||o==="en"||o==="en-US")E=tn(d,Xo(u));else{const m=`main.${o}.dates.calendars.${u}.days.format.${f}`;E=tn(m,qo)}for(const m of Object.keys(E))l.push(tn(m,E));return Array.from({length:7},(m,g)=>{const h=(g+r)%7;return l[h>=0&&h<l.length?h:0]})},[r,o]);return{weekdayHeaderCells:e.useCallback(()=>{const l=n(),u=new Date().getDay();if(s)return l.map((f,d)=>{const m=(d+r)%7===u;return{day:f,isCurrentDay:m,className:`sf-header-cells ${m?"sf-current-day":""}`,key:`header-${d}`}});{const f=[];for(let d=0;d<7;d++){const E=(d+r)%7;if(t.includes(E)){const m=E===u;f.push({day:l[d>=0&&d<l.length?d:0],isCurrentDay:m,className:`sf-header-cells ${m?"sf-current-day":""}`,key:`header-${d}`})}}return f}},[r,s,t,n])()}}const No=()=>{const{showWeekNumber:o,weekDay:r}=We(),{weekdayHeaderCells:s}=Oc(),t=n=>a.jsx("div",{className:n.className,children:r?r({day:n.day}):a.jsx("div",{className:p.HEADER_DAY,children:n.day})},n.key);return a.jsxs("div",{className:p.HEADER_SECTION,children:[o&&a.jsx("div",{className:p.LEFT_INDENT}),a.jsx("div",{className:p.RIGHT_SECTION,children:a.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:a.jsx("div",{className:p.DATE_HEADER,children:a.jsx("div",{className:p.HEADER_ROW,children:s.map(n=>t(n))})})})})]})};No.displayName="WeekDayHeader";function Lc(){const{numberOfWeeks:o,interval:r,showTrailingAndLeadingDates:s=!0,showWeekend:t,workDays:n,weekRule:i,firstDayOfWeek:l}=We(),{renderDates:u}=gt(),{weeksToRender:f,weekNumbers:d}=e.useMemo(()=>{if(!u||u.length===0)return{weeksToRender:[],weekNumbers:[]};const h=[],c=[],v=t?Go:n==null?void 0:n.length;for(let D=0;D<u.length;D+=v){const O=u.slice(D,D+v);if(O.length>0){h.push(O);const _=F.getWeekNumber(O[0],i,l);c.push(_)}}return{weeksToRender:h,weekNumbers:c}},[u,t,n,i,l]),E=e.useMemo(()=>!s&&!(o||r>1),[s,o,r]),m=e.useMemo(()=>o?{"--week-count":o}:void 0,[o]),g=e.useMemo(()=>[o&&"sf-custom-weeks",E&&"sf-hide-dates"].filter(Boolean).join(" "),[o,E]);return{weekNumbers:d,weeksToRender:f,contentTableStyle:m,additionalClass:g,hideOtherMonths:E}}function Ic(o){const{weekRenderDates:r,rowIndex:s}=o,{selectedDate:t,workDays:n,showWeekend:i,maxEventsPerRow:l=3}=We(),{locale:u}=$e(),{renderDates:f}=gt(),{getAllEventsForDate:d}=Ur(f,l),{handleMoreClick:E}=bo(d),m=e.useCallback(c=>{let v="sf-work-cells";return F.isWorkDay(c,n)&&(v+=" sf-work-days"),F.isToday(c)&&(v+=" sf-current-date"),F.isSameMonth(c,t)||(v+=" sf-other-month"),v},[n,t]),g=e.useCallback(c=>c.getDate()===1&&!xe.isDevice?ft(c,{type:"dateTime",format:"MMM d",locale:u}):ft(c,{type:"dateTime",format:"d",locale:u}),[u]);return{workCells:e.useCallback(()=>(i?r:r.filter(v=>F.isWorkDay(v,n))).map((v,D)=>({date:v,className:m(v),dateTimestamp:v.getTime(),displayText:g(v),key:`date-${s}-${D}`})),[r,m,g,i,n,s])(),handleMoreClick:E}}const kc=o=>{const{weekRenderDates:r,hideOtherMonths:s,rowIndex:t,onHeightCalculated:n}=o,{maxEventsPerRow:i=2,cellHeader:l,cell:u,rowAutoHeight:f,getAvailableViews:d}=We(),{workCells:E,handleMoreClick:m}=Ic(o),{handleCellClick:g,handleCellDoubleClick:h,handleKeyDown:c}=tr(),{handleDateClick:v}=Vr(),{getVisibleEvents:D,getAlldayBlockEvent:O,getHiddenEventCount:_,hasMoreIndicator:T,hasBlockIndicator:A,hasAllDayBlock:R,calculatedRowHeight:B}=Ur(r,i),k=L=>a.jsx(wo,{date:L,count:_(F.generateDateKey(L)),onMoreClick:m}),b=L=>{const C=F.generateDateKey(L),G=D(C);if(R(C)){const P=O(C);if(P&&(P.totalSegments&&P.totalSegments>1&&P.isFirstSegmentInRenderRange||!P.totalSegments||P.totalSegments<=1))return a.jsx(Gn,{...P,weekRenderDates:r,isBlockedEvent:!0},P.eventKey||P.event.guid)}return G.map(P=>{const{totalSegments:X,isFirstSegmentInRenderRange:se,event:fe,eventKey:pe}=P;return!fe.isBlock&&(X&&X>1&&se||!X||X<=1)?a.jsx(Gn,{...P,weekRenderDates:r},pe||P.event.guid):null})},S=()=>a.jsx("div",{className:`${p.ICONS} ${p.BLOCK_INDICATOR}`,children:a.jsx(pi,{})});return e.useLayoutEffect(()=>{n(t,B)},[B]),a.jsx("div",{className:p.WORK_CELLS_ROW,style:{height:f||i>=3?B:""},children:E.map(L=>{if(s&&L.className.includes("sf-other-month"))return a.jsx("div",{className:L.className},L.key);const C=F.generateDateKey(L.date),G=pt.isDayViewAvailable(d);return a.jsxs("div",{className:L.className,"data-date":L.dateTimestamp,onClick:P=>g(P,L.date,!0),onDoubleClick:P=>h(P,L.date,!0),onKeyDown:P=>{c(P,L.date)},children:[a.jsxs("div",{className:p.DATE_HEADER_CONTAINER,children:[a.jsx("div",{className:p.DATE_HEADER,children:l?l({date:L.date}):a.jsx("span",{className:G?p.LINK:"",onClick:P=>v(P,L.date),children:L.displayText})}),A(C)&&S()]}),a.jsxs("div",{className:p.APPOINTMENT_WRAPPER,children:[b(L.date),!f&&T(C)&&k(L.date)]}),u&&u({date:L.date,type:"monthCell"})]},L.key)})})},_c=()=>{const{showWeekNumber:o,numberOfWeeks:r,rowAutoHeight:s}=We(),{weekNumbers:t,weeksToRender:n,contentTableStyle:i,additionalClass:l,hideOtherMonths:u}=Lc(),f=e.useRef([]),[d,E]=e.useState([]),m=e.useCallback((h,c)=>{f.current[Number(h)]!==c&&(f.current[Number(h)]=c,E([...f.current]))},[]);e.useEffect(()=>{const h=n.length,c=f.current.length;if(h!==c){const v=f.current[0],D=new Array(h).fill(v).map((O,_)=>f.current[parseInt(_.toString(),10)]||O);f.current=D,E([...D])}},[n.length]);const g=e.useCallback(()=>t==null?void 0:t.map((h,c)=>a.jsx("div",{className:p.WEEK_NUMBER,title:`Week ${h}`,style:{height:s?d[Number(c)]:""},children:h},`week-${c}`)),[d,t]);return a.jsxs(a.Fragment,{children:[o&&a.jsx("div",{className:`sf-left-indent ${r?"sf-custom-weeks":""}`,style:r?{"--week-count":r}:void 0,children:a.jsx("div",{className:p.WEEK_NUMBER_WRAPPER,children:g()})}),a.jsxs("div",{className:`sf-content-table ${l}`,style:i,children:[a.jsx("div",{className:p.DAY_CLONE_CONTAINER}),n.map((h,c)=>a.jsx(kc,{weekRenderDates:h,hideOtherMonths:u,rowIndex:c,onHeightCalculated:m},`week-${c}`))]})]})},Pc=()=>a.jsx("div",{className:`${p.VERTICAL_VIEW} ${p.MONTH_VIEW}`,children:a.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[a.jsx("div",{className:p.STICKY_HEADER,children:a.jsx(No,{})}),a.jsx("div",{className:p.CONTENT_SECTION,children:a.jsx("div",{className:p.WORK_CELLS_CONTAINER,children:a.jsx(_c,{})})})]})});Pc.displayName="MonthView";export{Nc as D,Cr as F,Ei as L,Pc as M,Ye as O,Co as S,Dr as T,xc as W,Ac as a,mc as b,Yt as c,Tr as d,Hr as e,Zt as f,cc as g,xt as h,Ni as i};
