import{j as u,r as Ft}from"./index-DlC1yEB1.js";import{r as t}from"./index-D5jfS-9e.js";import{n as Pt,a as Ae,o as So,q as qt,r as Be,s as Ss,t as Kr,v as Xr,w as xo,x as An,y as Et,z as qr,E as Ao,G as Oo,H as wr,I as $,c as mt,S as Vt,u as $e,p as Lt,J as xs,K as Nr,M as As,N as at,L as Os,Q as Fn,A as Xt,T as Gr,X as On,h as Zr,Y as Lo,i as Io,Z as Ot,e as Qr,g as ko,_ as _o,B as Qe,V as Ge,C as gt,$ as Bn,a0 as Ls,a1 as Po,f as ut,a2 as Mo,a3 as un,a4 as Ho,a5 as jo,a6 as st,a7 as Wn,a8 as Is,a9 as ks,aa as tt,ab as Xe,ac as _s,m as $o,ad as nt,ae as Vo,af as qe,ag as Wo,ah as pr,ai as Kn,aj as Fo,b as nr,ak as Jr,al as Bo,D as Uo,k as zo,j as es,R as Yo,am as Ln,an as ts,ao as Qt,ap as Ko,aq as Xo,ar as qo}from"./recurrence-editor-BLBGnPtU.js";const Sr={height:"auto",width:"auto",defaultSelectedDate:new Date,defaultView:"Week",eventSettings:{dataSource:[],fields:{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException"},spannedEventPlacement:"AllDayRow",enableIndicator:!1,allowAdding:!0,allowDeleting:!0,allowEditing:!0,ignoreWhitespace:!1},timeScale:{enable:!0,interval:60,slotCount:2},workHours:{highlight:!0,start:"09:00",end:"18:00"},startHour:"00:00",endHour:"24:00",showWeekend:!0,firstDayOfWeek:0,workDays:[1,2,3,4,5],showTimeIndicator:!0,showWeekNumber:!1,eventOverlap:!0,keyboardNavigation:!0,showQuickInfoPopup:!0,header:!0,rowAutoHeight:!1,readOnly:!1,eventDrag:!0,eventResize:!0,enableRecurrenceValidation:!0,weekRule:"FirstDay"},xr=t.createContext(Sr),Fe=()=>{const o=t.useContext(xr);if(o===void 0)throw new Error("useSchedulerPropsContext must be used within a Scheduler");return o};xr.displayName="SchedulerPropsContext";const Ar=t.createContext(void 0),pt=()=>{const o=t.useContext(Ar);if(o===void 0)throw new Error("useSchedulerRenderDatesContext must be used within a Scheduler");return o};Ar.displayName="SchedulerRenderDatesContext";const Or=t.createContext(void 0),Mt=()=>{const o=t.useContext(Or);if(o===void 0)throw new Error("useSchedulerEventsContext must be used within a Scheduler");return o};Or.displayName="SchedulerEventsContext";function ns(o){return o!=null&&typeof o=="object"&&!Array.isArray(o)&&o.constructor===Object}function Ps(o,n){const r={...o};for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const s=n[e],i=r[e];if(typeof s>"u")continue;ns(s)&&ns(i)?r[e]=Ps(i,s):r[e]=s}return r}function Ms(o,n){return Ps(o,n)}class ft{static getViewsInfo(n,r){const e=[],s=new Set;return t.Children.forEach(n,i=>{if(t.isValidElement(i)){const l=i.type,c=i.props||{};let f=null;switch(l.displayName){case"DayView":f="Day";break;case"WeekView":f="Week";break;case"WorkWeekView":f="WorkWeek";break;case"MonthView":f="Month";break}if(f){const d=c.name||c.displayName||f;s.has(d)||(s.add(d),e.push({viewType:f,name:d,displayName:c.displayName||r(f.toLowerCase()),interval:c.interval||1,component:i}))}}}),e}static findViewByNameOrType(n,r){const e=n.find(i=>i.name===r);if(e)return e;const s=r;return n.find(i=>i.viewType===s)||null}static getDefaultView(n){return n.length>0?n[0]:void 0}static isViewAvailable(n,r){const e=n==null?void 0:n();return Array.isArray(e)&&e.some(s=>s.viewType===r)}static isDayViewAvailable(n){return ft.isViewAvailable(n,"Day")}}const We=(()=>{function o(i){return i?"__eventList"in i?i.__eventList.events||[]:(i.__eventList={},i.__eventList.events=[]):null}function n(i,l,c,f,d){if(!i)return null;const h=o(i);let g=d?So(c,d):c;f&&(g=g.bind(f));const m=l.split(" ");for(let E=0;E<m.length;E++){h.push({name:m[parseInt(E.toString(),10)],listener:c,debounce:g});const a=Ae.isIE?null:{passive:!1};i.addEventListener(m[parseInt(E.toString(),10)],g,a)}return g}function r(i,l,c){if(!i)return null;const f=o(i),d=l.split(" ");for(let h=0;h<d.length;h++){let g=-1,m=null;f&&f.length!==0&&f.some((E,a)=>E.name===d[parseInt(h.toString(),10)]&&E.listener===c?(g=a,m=E.debounce||null,!0):!1),g!==-1&&f.splice(g,1),m&&i.removeEventListener(d[parseInt(h.toString(),10)],m)}}function e(i){if(!i)return null;const l=o(i),c=Pt([],void 0,l);for(let f=0;f<c.length;f++){const d=c[parseInt(f.toString(),10)];i.removeEventListener(d.name,d.debounce),l.shift()}}function s(i,l,c){if(!i)return null;const f=o(i);for(const d of f)d.name===l&&d.debounce(c)}return{add:n,clearEvents:e,remove:r,trigger:s}})(),Go=()=>{let o=[];const n={};function r(d,h,g,m){if(Be(h))return;const E=g||{};f(d)?n[`${d}`]=[{handler:h,context:E,id:m}]:m&&!o.includes(m)?(o.push(m),n[`${d}`].push({handler:h,context:E,id:m})):n[`${d}`].some(a=>a.handler===h)||n[`${d}`].push({handler:h,context:E})}function e(d,h,g){if(f(d))return;const m=qt(d,n);if(h)for(let E=0;E<m.length;E++){const a=m[parseInt(E.toString(),10)];if(g&&a.id===g){m.splice(E,1),o=o.filter(C=>C!==g);break}else if(h===a.handler){m.splice(E,1);break}}else delete n[`${d}`]}function s(d,h,g,m){if(f(d)){g&&g(h);return}h&&(h={...h,name:d});const E=qt(d,n).slice(0);for(const a of E)try{a.handler(h)}catch(C){m&&m(C)}g&&g(h)}function i(d){try{JSON.parse(d)}catch{return!1}return!0}function l(){Object.keys(n).forEach(d=>{delete n[`${d}`]}),o=[]}function c(){const d=n.notifyExternalChange;if(d){for(let h=0;h<d.length;h++){const g=d[parseInt(h.toString(),10)],m=g.context;m&&m.detectFunction&&m.randomId&&m.isReactMock&&(e("notifyExternalChange",g.handler,m.randomId),h--)}n.notifyExternalChange.length||delete n.notifyExternalChange}}function f(d){return!n[`${d}`]||n[`${d}`].length===0}return{isJson:i,on:r,off:e,notify:s,destroy:l,ranArray:o,boundedEvents:n,offIntlEvents:c}},Zo=new RegExp("]");function Qo(o,n){const e={isDestroyed:!1,isProtectedOnChange:!0,modelObserver:Go(),...o};return e.element=t.useRef(null),e.addEventListener=(s,i)=>{e.modelObserver.on(s,i)},e.removeEventListener=(s,i)=>{e.modelObserver.off(s,i)},e.trigger=(s,i,l,c)=>{if(e.isDestroyed!==!0){const f=e.isProtectedOnChange;e.isProtectedOnChange=!1;const d=e.modelObserver.notify(s,i,l,c);if(Zo.test(s)){const h=qt(s,e);h&&h.call(e,i),l&&l.call(e,i)}return e.isProtectedOnChange=f,d}},e.destroy=()=>{e.modelObserver.destroy(),e.isDestroyed=!0},t.useLayoutEffect(()=>{e.isDestroyed=!1},[]),e}let In,kn,rs,ss;function os(o,n,r,e,s){let i,l,c=0,f=0,d;if(typeof o==="string"?d=Ss(o):d=o,d){const g=d.getBoundingClientRect();i=d.scrollWidth?d.scrollWidth:g.right-g.left,l=d.scrollHeight?o&&!Be(n)&&n.classList.contains("sf-treeview")?d.clientHeight:d.scrollHeight:g.bottom-g.top;const m=["Top","Left","Bottom","Right"],E=getComputedStyle(d);for(let a=0;a<m.length;a++){const C=m[parseInt(a.toString(),10)],v=E["border"+C+"Width"],R=E["padding"+C],j=C.toLowerCase();r[`${j}`]=isNaN(parseFloat(v))?0:parseFloat(v),e[`${j}`]=isNaN(parseFloat(R))?0:parseFloat(R)}o&&!Be(n)&&n.classList.contains("sf-treeview")?c=g.top+document.scrollingElement.scrollTop:c=g.top,f=g.left,s.left=f+r.left+e.left,s.top=d.offsetTop+r.top+e.top,s.right=f+i-(r.right+e.right),s.bottom=c+l-(r.bottom+e.bottom)}}function is(o){const n=document.body,r=document.documentElement;return Math.max(n["scroll"+o],r["scroll"+o],n["offset"+o],r["offset"+o],r["client"+o])}function rr(o){for(kn=o.offsetTop,In=o.offsetLeft,rs=o.offsetWidth,ss=o.offsetHeight;o.offsetParent;)o=o.offsetParent,kn+=o.offsetTop,In+=o.offsetLeft;return kn>=window.pageYOffset&&In>=window.pageXOffset&&kn+ss<=window.pageYOffset+window.innerHeight&&In+rs<=window.pageXOffset+window.innerWidth}function dn(o){return o.type.indexOf("touch")>-1?o.changedTouches[0]:o}function sr(o){if(Be(o))return{left:0,top:0};const n=o.getBoundingClientRect(),r=getComputedStyle(o);return{left:n.left+window.pageXOffset-parseInt(r.marginLeft,10),top:n.top+window.pageYOffset-parseInt(r.marginTop,10)}}function ls(o){const n=o.clientX>0?o.clientX:0,r=o.clientY>0?o.clientY:0;return document.elementsFromPoint(n,r)}function as(o,n){const r=n?[...o].reverse():o;for(const i of r){const c=window.getComputedStyle(i).overflowY;if((c==="auto"||c==="scroll")&&i.scrollHeight>i.clientHeight)return i}const e=document.scrollingElement;return window.getComputedStyle(e).overflowY==="visible"?(e.style.overflow="auto",e):null}const Jo=t.createContext(void 0),ei=()=>{const o=t.useContext(Jo);if(o)return o},ti={left:0,top:0,bottom:0,right:0},or={isDragged:!1};function ni(o){return{left:0,top:0,...o}}function Gt(o,n){const r=ei(),e={cursorAt:ni({}),clone:!1,dragArea:null,isDragScroll:!1,isReplaceDragEle:!1,isPreventSelect:!0,distance:1,handle:"",abort:"",helper:null,scope:"default",dragTarget:"",dragDirection:null,queryPositionInfo:null,enableTailMode:!1,skipDistanceCheck:!1,preventDefault:!0,enableAutoScroll:!1,enableTapHold:!1,tapHoldThreshold:750,enableScrollHandler:!1,element:o,...n},s=t.useRef(e);let i,l,c,f,d,h,g,m=Gt.getDefaultPosition(),E=Gt.getDefaultPosition();const a=Gt.getDefaultPosition();let C,v=0,R=0,j=0,y=!1,D=null,S,k,z=!1,N=0,b,M,T,H,w=0,I=0,Y=0,Z=0;const ue={};function K(A){let re;!Be(s.current.handle)&&s.current.handle!==""&&(re=Ss(s.current.handle,o.current));const U=s.current.enableTapHold&&Ae.isDevice&&Ae.isTouch?O:de;A?We.remove(re||o.current,Ae.isSafari()?"touchstart":Ae.touchStartEvent,U):We.add(re||o.current,Ae.isSafari()?"touchstart":Ae.touchStartEvent,U)}function O(A){const re=A.currentTarget;D=setTimeout(()=>{z=!0,V(),de(A,re)},s.current.tapHoldThreshold),We.add(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,V,this),We.add(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,V,this)}function L(A){wr(A)?(We.add(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,q,this),We.add(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,te,this),x(!1,o.current,A)):(K(),document.body.classList.remove("sf-prevent-select"))}function V(){clearTimeout(D),We.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,V),We.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,V)}function ee(){w=0,I=0}function de(A,re){var G;if(o.current=Kr(o),k=A.target,se())return;if(se(!0),z=!1,i=A.currentTarget||re,y=!1,s.current.abort){let ge=s.current.abort;typeof ge=="string"&&(ge=[ge]);for(let ce=0;ce<ge.length;ce++)if(!Be(Et(A.target,ge[`${ce}`]))){se()&&se(!0);return}}s.current.preventDefault&&!An(A.changedTouches)&&A.type!=="touchstart"&&A.preventDefault(),(G=o==null?void 0:o.current)==null||G.setAttribute("aria-grabbed","true");const U=dn(A);if(l={x:U.pageX,y:U.pageY},!s.current.clone){const ge=o.current.getBoundingClientRect();ee(),c=U.pageX-(ge.left+w),f=U.pageY-(ge.top+I)}z?F(A):(We.add(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,F,this),We.add(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,e.intDestroy,this)),K(!0),A.type!=="touchstart"&&s.current.isPreventSelect&&document.body.classList.add("sf-prevent-select"),z=!1,We.trigger(document.documentElement,Ae.isSafari()?"touchstart":Ae.touchStartEvent,A)}function F(A){V(),document.scrollingElement&&(Y=document.scrollingElement.scrollLeft,Z=document.scrollingElement.scrollTop);const re=!An(A.changedTouches);if(re&&A.changedTouches.length!==1)return;const U=dn(A);let G;const ge=getComputedStyle(o.current);d={left:parseInt(ge.marginLeft,10),top:parseInt(ge.marginTop,10),right:parseInt(ge.marginRight,10),bottom:parseInt(ge.marginBottom,10)};let ce=o.current;if(s.current.clone&&s.current.dragTarget){const Re=Et(A.target,s.current.dragTarget);Be(Re)||(ce=Re)}s.current.isReplaceDragEle&&(ce=fe(A.target,ce)),h=sr(ce),g=ve(A,s.current.isDragScroll);const ye=l.x-U.pageX,Ie=l.y-U.pageY;if(Math.sqrt(ye*ye+Ie*Ie)>=s.current.distance||z){const Re=me(A);if(!Re)return;re&&A.preventDefault();const _=M=Re;if(H=sr(_.offsetParent),s.current&&s.current.onDragStart){const xe=Ce(A),we={event:A,element:ce,target:xe,bindEvents:null,dragElement:_};if(s.current.onDragStart(we),we.cancel){e.intDestroy();return}}s.current.dragArea?os(s.current.dragArea,M,E,a,m):(m={left:0,right:0,bottom:0,top:0},E={top:0,left:0}),G={left:g.left-H.left,top:g.top-H.top},s.current.clone&&!s.current.enableTailMode&&(v=g.left-h.left,N=g.top-h.top),ee();const X=getComputedStyle(ce),J=parseFloat(X.marginTop);s.current.clone&&J!==0&&(G.top+=J),s.current.enableScrollHandler&&!s.current.clone&&(G.top-=I,G.left-=w);const he=Se({top:`${G.top-N}px`,left:`${G.left-v}px`});s.current.dragArea&&typeof s.current.dragArea!="string"&&s.current.dragArea.classList.contains("sf-kanban-content")&&s.current.dragArea.style.position==="relative"&&(G.top+=s.current.dragArea.scrollTop),S={top:G.top,left:G.left},qr(_,Q({position:"absolute",left:he.left,top:he.top})),We.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,F),We.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,e.intDestroy),L(_)}}function q(A){var Ye;if(!An(A.changedTouches)&&A.changedTouches.length!==1)return;s.current.clone&&A.changedTouches&&Ae.isDevice&&Ae.isTouch&&A.preventDefault();let re,U;g=ve(A,s.current.isDragScroll);const G=is("Height");G<g.top&&(g.top=G);const ge=is("Width");if(ge<g.left&&(g.left=ge),s.current&&s.current.onDrag){const He=Ce(A);s.current.onDrag({event:A,element:o.current,target:He})}const ce=B(A);if(ce.target&&ce.instance){let He=!0;T&&(T.instance!==ce.instance?oe(A,ce):He=!1),He&&(ce.instance.dragData[s.current.scope]=ue[s.current.scope],ce.instance.intOver(A,ce.target),T=ce)}else T&&oe(A,ce);const ye=(Ye=ue==null?void 0:ue[s.current.scope])==null?void 0:Ye.helper;if(!ye)return;H=sr(ye.offsetParent);const Ie=H.left,pe=H.top,Re=dn(A),_=Re.pageX,X=Re.pageY,J=g.left-v,he=g.top-N,xe=getComputedStyle(ye);if(s.current.dragArea){if(s.current.enableAutoScroll&&os(s.current.dragArea,ye,E,a,m),C!==_||s.current.skipDistanceCheck){const He=ye.offsetWidth+(parseFloat(xe.marginLeft)+parseFloat(xe.marginRight));m.left>J&&J>0?re=m.left:m.right+window.pageXOffset<J+He&&J>0?re=J-(J-m.right)+window.pageXOffset-He:re=J<0?m.left:J}if(b!==X||s.current.skipDistanceCheck){const He=ye.offsetHeight+(parseFloat(xe.marginTop)+parseFloat(xe.marginBottom));m.top>he&&he>0?U=m.top:m.bottom+window.pageYOffset<he+He&&he>0?U=he-(he-m.bottom)+window.pageYOffset-He:U=he<0?m.top:he}}else re=J,U=he;const we=pe+E.top,Le=Ie+E.left;y&&(Be(U)&&(U=j),Be(re)&&(re=R));let W,De;if(ye.classList.contains("sf-treeview"))s.current.dragArea?(m.top=s.current.clone?m.top:0,W=U-we<0?m.top:U-E.top,De=re-Le<0?m.left:re-E.left):(W=U-E.top,De=re-E.left);else if(s.current.dragArea){const He=ye.classList.contains("sf-dialog");m.top=s.current.clone?m.top:0,W=U-we<0?m.top:U-we,De=re-Le<0?He?re-(Le-E.left):S.left:re-Le}else W=U-we,De=re-Le;const Ee=o.current?parseFloat(getComputedStyle(o.current).marginTop):0;if(Ee>0&&(s.current.clone&&(W+=Ee,he<0&&(Ee+he>=0?W=Ee+he:W-=Ee),s.current.dragArea&&(W=m.bottom<W?m.bottom:W)),U-we<0))if(he+Ee+(ye.offsetHeight-we)>=0){const He=m.top+he-we;He+Ee+we<0?W-=Ee+we:W=He}else W-=Ee+we;if(s.current.dragArea&&ye.classList.contains("sf-treeview")){const He=ye.offsetHeight+(parseFloat(xe.marginTop)+parseFloat(xe.marginBottom));W=W+He>m.bottom?m.bottom-He:W}s.current.enableScrollHandler&&!s.current.clone&&(W-=I,De-=w),s.current.dragArea&&typeof s.current.dragArea!="string"&&s.current.dragArea.classList.contains("sf-kanban-content")&&s.current.dragArea.style.position==="relative"&&(W+=s.current.dragArea.scrollTop);const Oe=Se({top:W+"px",left:De+"px"});qr(ye,Q(Oe)),!rr(ye)&&s.current.enableAutoScroll&&!ye.classList.contains("sf-treeview")&&ye.scrollIntoView();let Pe=document.querySelectorAll(":hover");if(s.current.enableAutoScroll&&ye.classList.contains("sf-treeview")){Pe.length===0&&(Pe=ls(A));let He=as(Pe,!1);rr(ye)?ae(He,W):rr(ye)||(Pe=[].slice.call(document.querySelectorAll(":hover")),Pe.length===0&&(Pe=ls(A)),He=as(Pe,!0),ae(He,W))}y=!0,R=re,j=U,g.left=re,g.top=U,C=_,b=X}function te(A){var G;if(y=!1,Y=0,Z=0,!An(A.changedTouches)&&A.changedTouches.length!==1)return;if(["touchend","pointerup","mouseup"].indexOf(A.type)!==-1){if(s.current&&s.current.onDragStop){const ge=Ce(A);s.current.onDragStop({event:A,element:o.current,target:ge,helper:M})}e.intDestroy()}else(G=o==null?void 0:o.current)==null||G.setAttribute("aria-grabbed","false");const U=B(A);U.target&&U.instance&&(U.instance.dragStopCalled=!0,U.instance.dragData[s.current.scope]=ue[s.current.scope],U.instance.intDrop(A,U.target)),x(!0),document.body.classList.remove("sf-prevent-select")}function ne(){K(),Ae.isIE&&Xr([e.element.current],"sf-block-touch"),ue[s.current.scope]={}}e.intDestroy=()=>{var A;y=!1,K(),document.body.classList.remove("sf-prevent-select"),(A=o==null?void 0:o.current)==null||A.setAttribute("aria-grabbed","false"),We.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,F),We.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,te),We.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,e.intDestroy),We.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,q),se()&&se(!0)},e.destroy=()=>{K(!0)};function oe(A,re){T.instance.intOut(A,re.target),T.instance.dragData[s.current.scope]=null,T=null}function Ce(A){const re=dn(A);let U;const G=M.style.pointerEvents||"",ge=A.type.indexOf("pointer")!==-1&&Ae.info.name==="safari"&&parseInt(Ae.info.version,10)>12;return Oo(A.target,M)||A.type.indexOf("touch")!==-1||ge?(M.style.pointerEvents="none",U=document.elementFromPoint(re.clientX,re.clientY),M.style.pointerEvents=G):U=A.target,U}function ve(A,re){const U=A.srcElement!==void 0?A.srcElement:A.target,G=dn(A);let ge,ce;const ye=Be(U.offsetParent);if(re){if(ge=s.current.clone?G.pageX:G.pageX+(ye?0:U.offsetParent.scrollLeft)-c,ce=s.current.clone?G.pageY:G.pageY+(ye?0:U.offsetParent.scrollTop)-f,!s.current.clone){const Ie=U.offsetParent;if(!ye&&Ie){const pe=Ie.scrollLeft,Re=Ie.scrollTop,_=pe-Y,X=Re-Z;ge=ge-_,ce=ce-X}}}else if(ge=s.current.clone?G.pageX:G.pageX+window.pageXOffset-c,ce=s.current.clone?G.pageY:G.pageY+window.pageYOffset-f,document.scrollingElement&&!s.current.clone){const Ie=document.scrollingElement,pe=Ie.scrollLeft,Re=Ie.scrollTop,_=pe-Y,X=Re-Z;ge=ge-_,ce=ce-X}return{left:ge-(d.left+s.current.cursorAt.left),top:ce-(d.top+s.current.cursorAt.top)}}function me(A){let re;return s.current.clone?s.current&&s.current.helper?re=s.current.helper({sender:A,element:i}):(re=Ao("div",{className:"sf-drag-helper sf-block-touch",innerHTML:"Draggable"}),document.body.appendChild(re)):re=e.element.current,re}function x(A,re,U){ue[s.current.scope]=A?null:{draggable:re,helper:U,draggedElement:e.element.current}}function B(A){const re=Ce(A);let U=le(re);if(!U&&re&&!Be(re.parentNode)){const G=Et(re.parentNode,".sf-droppable")||re.parentElement;G&&(U=le(G))}return{target:re,instance:U}}function le(A){let re,U;if(r){const{getAllDroppables:G}=r;re=G();for(const ge in re)if(Object.prototype.hasOwnProperty.call(re,ge)){const ce=re[`${ge}`];if(ce.element&&ce.element.current===A){U=ce;break}}}else return;return U}function se(A){return A&&(or.isDragged=!or.isDragged),or.isDragged}function Se(A){return s.current&&s.current.queryPositionInfo?s.current.queryPositionInfo(A):A}function Q(A){const re={...A};return s.current.dragDirection&&(s.current.dragDirection==="x"?delete re.top:s.current.dragDirection==="y"&&delete re.left),re}function ae(A,re){if(A===document.scrollingElement)A.clientHeight+A.scrollTop-M.clientHeight<re&&A.getBoundingClientRect().height+H.top>re?A.scrollTop+=M.clientHeight:A.scrollTop>re-M.clientHeight&&(A.scrollTop-=M.clientHeight);else if(A){const U=document.scrollingElement.scrollTop,G=M.clientHeight;A.clientHeight+A.getBoundingClientRect().top-G+U<re?A.scrollTop+=M.clientHeight:A.getBoundingClientRect().top>re-G-U&&(A.scrollTop-=M.clientHeight)}}function fe(A,re){let U;return!Be(k)&&k!==A?U=k:U=Be(re)?A:re,U}return t.useLayoutEffect(()=>{if(e.element.current=Kr(e.element),!!e.element.current)return s.current={...e,...n},Xr([e.element.current],["sf-lib","sf-draggable"]),ne(),()=>{e.element.current&&xo([e.element.current],["sf-lib","sf-draggable"]),e.destroy()}}),e}Gt.getDefaultPosition=()=>Pt({},ti);const ri=/(Up|Down)/;function Bt(o,n){const r=Qo(),e={...n};let s=!1,i={clientX:0,clientY:0},l=null,c={clientX:0,clientY:0},f="",d=!1,h=!1,g={originalEvent:null},m=0,E=0,a="",C=0,v=!0,R=null,j=null,y=0;t.useLayoutEffect(()=>(D(),()=>{k(),r.destroy()}),[]);function D(){o.current&&(S(),Ae.isIE&&o.current.classList.add("sf-block-touch"))}function S(){We.add(o.current,Ae.touchStartEvent,N,void 0)}function k(){We.remove(o.current,Ae.touchStartEvent,N)}function z(L){const V=getComputedStyle(L),ee=V.overflow+V.overflowX+V.overflowY;return/(auto|scroll)/.test(ee)}function N(L){if(v===!0){const V=O(L);L.changedTouches!==void 0&&(v=!1),s=!1,a="",i=c={clientX:V.clientX,clientY:V.clientY},l=V,d=h=!1,C=Date.now(),j=setTimeout(()=>{T(L)},e.tapHoldThreshold?e.tapHoldThreshold:750),We.add(o.current,Ae.touchMoveEvent,b,void 0),We.add(o.current,Ae.touchEndEvent,H,void 0),We.add(o.current,Ae.touchCancelEvent,M,void 0)}}function b(L){const V=O(L);s=!(V.clientX===i.clientX&&V.clientY===i.clientY);let ee={};if(s){clearTimeout(j),Z(L);const de={startEvents:l,originalEvent:L,startX:i.clientX,startY:i.clientY,distanceX:m,distanceY:E,scrollDirection:f,velocity:ue(V)};ee=Pt(ee,{},de),r.trigger("scroll",ee,e.scroll),c={clientX:V.clientX,clientY:V.clientY}}}function M(L){clearTimeout(j),clearTimeout(R),y=0,w(L),We.remove(o.current,Ae.touchCancelEvent,M)}function T(L){y=0,v=!0,We.remove(o.current,Ae.touchMoveEvent,b),We.remove(o.current,Ae.touchEndEvent,H);const V={originalEvent:L};r.trigger("tapHold",V,e.tapHold),We.remove(o.current,Ae.touchCancelEvent,M)}function H(L){w(L),s||typeof e.tap=="function"&&(r.trigger("tap",{originalEvent:L,tapCount:++y},e.tap),R=setTimeout(()=>{y=0},e.tapThreshold?e.tapThreshold:350)),I()}function w(L){clearTimeout(j),clearTimeout(R);const V=O(L);let ee=V.clientX-i.clientX,de=V.clientY-i.clientY;ee=Math.floor(ee<0?-1*ee:ee),de=Math.floor(de<0?-1*de:de),s=ee>1||de>1,/Firefox/.test(Ae.userAgent)&&V.clientX===0&&V.clientY===0&&L.type==="mouseup"&&(s=!1),Y(L);const q={originalEvent:L,startEvents:l,startX:i.clientX,startY:i.clientY,distanceX:m,distanceY:E,swipeDirection:a,velocity:ue(V)};if(s){const te=e.swipeSettings?e.swipeSettings.swipeThresholdDistance:50,ne=Pt(void 0,g,q);let oe=!1;const Ce=z(o.current),ve=ri.test(a);te&&(te<m&&!ve||te<E&&ve)&&(Ce?oe=K(o.current,ve):oe=!0),oe&&r.trigger("swipe",ne,e.swipe)}I()}function I(){setTimeout(()=>{v=!0},typeof e.tap!="function"?0:20),We.remove(o.current,Ae.touchMoveEvent,b),We.remove(o.current,Ae.touchEndEvent,H),We.remove(o.current,Ae.touchCancelEvent,M)}function Y(L){const V=O(L);g={originalEvent:L},m=Math.abs(Math.abs(V.clientX)-Math.abs(i.clientX)),E=Math.abs(Math.abs(V.clientY)-Math.abs(i.clientY)),a=m>E?V.clientX>i.clientX?"Right":"Left":V.clientY<i.clientY?"Up":"Down"}function Z(L){const V=O(L);g={originalEvent:L},m=Math.abs(Math.abs(V.clientX)-Math.abs(c.clientX)),E=Math.abs(Math.abs(V.clientY)-Math.abs(c.clientY)),(m>E||d)&&!h?(f=V.clientX>c.clientX?"Right":"Left",d=!0):(f=V.clientY<c.clientY?"Up":"Down",h=!0)}function ue(L){const V=L.clientX,ee=L.clientY,de=Date.now(),F=V-i.clientX,q=ee-i.clientY,te=de-C;return Math.sqrt(F*F+q*q)/te}function K(L,V){const ee=["scroll","offset"],de=V?["Height","Top"]:["Width","Left"];return L[ee[0]+de[0]]<=L[ee[1]+de[0]]?!0:L[ee[0]+de[1]]===0||L[ee[1]+de[0]]+L[ee[0]+de[1]]>=L[ee[0]+de[0]]}function O(L){return L.changedTouches&&L.changedTouches.length!==0?L.changedTouches[0]:L}return e}class ir{static addWorkDays(n,r,e,s){if(r<=0)return new Date(n);let i=new Date(n),l=0;for(;l<r;){const c=$.addDays(i,e);$.isWorkDay(c,s)&&(l+=1),i=c}return i}static navigate(n,r){const{currentDate:e,viewType:s,interval:i,showWeekend:l,workDays:c}=r;switch(s){case"Day":return l===!1?this.addWorkDays(e,i,n,c):$.addDays(e,n*i);case"Week":case"WorkWeek":return $.addDays(e,n*7*i);case"Month":return $.addMonths(e,n*i);default:return $.addDays(e,n)}}static navigateToPrevious(n){return this.navigate(-1,n)}static navigateToNext(n){return this.navigate(1,n)}static navigateToToday(){return new Date}}const si=u.jsx("path",{d:"M11.5 10.0858L5.50003 4.08582L4.08582 5.50003L11.5 12.9142L18.9142 5.50003L17.5 4.08582L11.5 10.0858ZM11.5 17.0858L5.50003 11.0858L4.08582 12.5L11.5 19.9142L18.9142 12.5L17.5 11.0858L11.5 17.0858Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Hs=mt(si),oi=u.jsx("path",{d:"M5 7.08578L12 14.0858L19 7.08578L20.4142 8.5L12 16.9142L3.58578 8.5L5 7.08578Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Xn=mt(oi),ii=u.jsx("path",{d:"M6.41418 12L12.4142 6L11 4.58578L3.58575 12L11 19.4142L12.4142 18L6.41418 12ZM13.4142 12L19.4142 6L18 4.58578L10.5858 12L18 19.4142L19.4142 18L13.4142 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Lr=mt(ii),li=u.jsx("path",{d:"M10.5858 12L4.58582 18L6.00003 19.4142L13.4142 12L6.00003 4.58575L4.58582 5.99997L10.5858 12ZM17.5858 12L11.5858 18L13 19.4142L20.4142 12L13 4.58575L11.5858 5.99997L17.5858 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ir=mt(li),ai=u.jsx("path",{d:"M11.5 6.91418L17.5 12.9142L18.9142 11.5L11.5 4.08575L4.08575 11.5L5.49997 12.9142L11.5 6.91418ZM11.5 13.9142L17.5 19.9142L18.9142 18.5L11.5 11.0858L4.08575 18.5L5.49997 19.9142L11.5 13.9142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),js=mt(ai),ci=u.jsx("path",{d:"M6.00003 16.4142L12 10.4142L18 16.4142L19.4142 15L12 7.58578L4.58582 15L6.00003 16.4142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),$s=mt(ci),ui=u.jsx("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13 11.382V5H11V12.618L16.4472 15.3416L17.3416 13.5528L13 11.382Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),di=mt(ui),fi=u.jsx("path",{d:"M6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM4.9681 6.38231C3.73647 7.92199 3 9.87499 3 12C3 16.9706 7.02944 21 12 21C14.125 21 16.078 20.2635 17.6177 19.0319L4.9681 6.38231ZM12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),mi=mt(fi),pi=u.jsx("path",{d:"M17 9C17 9.59519 16.7516 10.6096 16.1971 11.9583C15.6652 13.2521 14.932 14.6644 14.1531 15.9825C13.4 17.257 12.6299 18.4 12 19.2216C11.3701 18.4 10.5999 17.257 9.84685 15.9825C9.06796 14.6644 8.33481 13.2521 7.80291 11.9583C7.24843 10.6096 7 9.59519 7 9C7 6.23858 9.23858 4 12 4C14.7614 4 17 6.23858 17 9ZM19 9C19 13 13 22 12 22C11 22 5 13 5 9C5 5.13401 8.13401 2 12 2C15.866 2 19 5.13401 19 9ZM12 11.5C13.3807 11.5 14.5 10.3807 14.5 9C14.5 7.61929 13.3807 6.5 12 6.5C10.6193 6.5 9.5 7.61929 9.5 9C9.5 10.3807 10.6193 11.5 12 11.5Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),hi=mt(pi),Ei=u.jsx("path",{d:"M3 3C3 1.89543 3.89543 1 5 1H13.5858C14.1162 1 14.6249 1.21071 15 1.58579L20.4142 7C20.7893 7.37507 21 7.88378 21 8.41421V21C21 22.1046 20.1046 23 19 23H5C3.89543 23 3 22.1046 3 21V3ZM5 3L13 3V9H19V21H5V3ZM11 6H7V8H11V6ZM7 11H11V13H7V11ZM17 13V11H13V13H17ZM7 16H11V18H7V16ZM17 18V16H13V18H17Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),gi=mt(Ei),Ti=u.jsx("path",{d:"M20 13V17.6862L18 15.1528V13V12H20V13ZM17.0417 20L18.7151 22.1196L20.2849 20.8803L5.28485 1.88034L3.71509 3.11963L4.75394 4.43551C4.29445 4.80196 4 5.36659 4 6V11V12H6V11V6.01385L15.4627 18H6V15L1 19L6 23V20H17.0417ZM18 6H10.7741L9.19513 4H18V1L23 5L18 9V6Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ci=mt(Ti),Di=u.jsx("path",{d:"M18 9L23 5L18 1V4H6C4.89543 4 4 4.89543 4 6V12H6V6H18V9ZM18 18H6V15L1 19L6 23V20H18C19.1046 20 20 19.1046 20 18V12H18V18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),vi=mt(Di),yi=u.jsx("path",{d:"M8 1V3H16V1H18V3H20C21.1046 3 22 3.89543 22 5V8V9V10V11.7546C21.3984 11.2724 20.7257 10.8753 20 10.5815V10H4V21H9.58152C9.87526 21.7257 10.2724 22.3984 10.7546 23H4C2.89543 23 2 22.1046 2 21V10V9V8V5C2 3.89543 2.89543 3 4 3H6V1H8ZM4 8H20V5H18H16H8H6H4V8ZM13 18C13 15.7909 14.7909 14 17 14C19.2091 14 21 15.7909 21 18C21 20.2091 19.2091 22 17 22C14.7909 22 13 20.2091 13 18ZM17 12C13.6863 12 11 14.6863 11 18C11 21.3137 13.6863 24 17 24C20.3137 24 23 21.3137 23 18C23 14.6863 20.3137 12 17 12ZM18 15V17H20V19H16V15H18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),cs=mt(yi);var us;(function(o){o.Success="Success",o.Warning="Warning",o.Error="Error"})(us||(us={}));const hr=t.forwardRef((o,n)=>{const{disabled:r=!1,onChange:e,onBlur:s,onFocus:i,clearButton:l=!1,labelMode:c="Never",className:f="",id:d,readOnly:h=!1,value:g,defaultValue:m,width:E,placeholder:a="",variant:C,size:v=Vt.Medium,color:R,prefix:j,suffix:y,...D}=o,k=t.useRef(d||`default_${t.useId()}`).current,z=g!==void 0,[N,b]=t.useState(z?g:m||""),[M,T]=t.useState(!1),H=t.useRef(null),{locale:w,dir:I}=$e(),Y={clearButton:l,labelMode:c,disabled:r,readOnly:h,variant:C,size:v,color:R,value:g},Z=()=>ue(at.INPUTGROUP,at.WRAPPER,c!=="Never"?at.FLOATINPUT:"",f,I==="rtl"?at.RTL:"",r?at.DISABLE:"",M?at.TEXTBOX_FOCUS:"",N!==""?at.VALIDINPUT:"",C&&C.toLowerCase()!=="standard"?C.toLowerCase()==="outlined"?"sf-outline":`sf-${C.toLowerCase()}`:"",v&&v.toLowerCase()!=="small"?`sf-${v.toLowerCase()}`:"",R?`sf-${R.toLowerCase()}`:"",j?"sf-has-prefix":"","sf-control"),ue=(...q)=>q.filter(Boolean).join(" "),K=Z();t.useEffect(()=>{Lt("textbox")},[]),t.useEffect(()=>{z&&b(g||"")},[g,z]),t.useImperativeHandle(n,()=>({...Y,element:H.current}));const O=t.useCallback((q,te)=>{z||b(q),e&&e({event:te,value:q})},[e,z]),L=t.useCallback(q=>{const te=q.target.value;O(te,q)},[O]),V=t.useCallback(q=>{T(!0),i&&i(q)},[i]),ee=t.useCallback(()=>{z||(b(""),H.current&&(H.current.value="")),e&&e({value:"",event:void 0})},[z,e]),de=t.useCallback(q=>{T(!1),s&&s(q)},[s]),F=z?g:N;return u.jsxs("div",{className:K,style:{width:E||"100%"},children:[j&&u.jsx("span",{className:"sf-input-icon sf-no-hover",children:j}),u.jsx(xs,{id:k,floatLabelType:c,ref:H,...D,readOnly:h,value:z?F:void 0,defaultValue:z?void 0:N||"",disabled:r,placeholder:c==="Never"?a:void 0,className:"sf-textbox sf-lib sf-ellipsis",onChange:L,"aria-label":c==="Never"?"textbox":void 0,onFocus:V,onBlur:de}),Nr(c||"Never",M||F!=="",F,a,k),l&&As(M?F:"",ee,l,"textbox",w),y&&u.jsx("span",{className:"sf-input-icon sf-no-hover",children:y})]})}),bi="sf-multi-line-input",Ri="sf-auto-width";var kt;(function(o){o.None="None",o.Both="Both",o.Horizontal="Horizontal",o.Vertical="Vertical"})(kt||(kt={}));const wi={[kt.None]:"sf-resize-none",[kt.Both]:"sf-resize-xy",[kt.Horizontal]:"sf-resize-x",[kt.Vertical]:"sf-resize-y"},Ni=t.forwardRef((o,n)=>{const{readOnly:r=!1,value:e,defaultValue:s,labelMode:i="Never",placeholder:l="",disabled:c=!1,width:f,resizeMode:d=kt.Both,maxLength:h,cols:g=null,rows:m=null,clearButton:E=!1,autoResize:a=!1,className:C="",size:v=Vt.Medium,variant:R,onChange:j,onBlur:y,onFocus:D,...S}=o,k=e!==void 0,[z,N]=t.useState(s||""),b=k?e:z,M=`textArea_${t.useId()}`,[T,H]=t.useState(!1),w=t.useMemo(()=>S.id||M,[S.id]),I=t.useRef(null),Y=t.useRef(null),Z=t.useRef(null),ue=t.useRef(null),{locale:K,dir:O}=$e(),L={clearButton:E,labelMode:i,disabled:c,readOnly:r,resizeMode:d};t.useEffect(()=>{Lt("textarea")},[]),t.useEffect(()=>{k&&N(e||"")},[k,e]);const V=()=>ee(at.INPUTGROUP,at.WRAPPER,i!=="Never"?at.FLOATINPUT:"",bi,C,O==="rtl"?at.RTL:"",c?at.DISABLE:"",T?at.TEXTBOX_FOCUS:"",b!==""?at.VALIDINPUT:"",R&&R.toLowerCase()!=="standard"?R.toLowerCase()==="outlined"?"sf-outline":`sf-${R.toLowerCase()}`:"",Ri,v&&v.toLowerCase()!=="small"?`sf-${v.toLowerCase()}`:"","sf-control"),ee=(...x)=>x.filter(Boolean).join(" "),de=V();t.useImperativeHandle(n,()=>({...L,element:I.current}));const F=t.useCallback(x=>{x&&(x.style.height="auto",x.style.height=`${x.scrollHeight}px`)},[]),q=t.useCallback(()=>{!a||!I.current||(Y.current!==null&&(cancelAnimationFrame(Y.current),Y.current=null),Y.current=requestAnimationFrame(()=>{F(I.current)}))},[a,F]),te=x=>{const B=Array.isArray(x.contentBoxSize)?x.contentBoxSize[0]:x.contentBoxSize;if(B&&typeof B.inlineSize=="number")return B.inlineSize;const le=x.contentRect.width;return typeof le=="number"?le:null};t.useEffect(()=>()=>{Y.current!==null&&(cancelAnimationFrame(Y.current),Y.current=null)},[]),t.useEffect(()=>{if(!a||!I.current)return;let x=!1;const B=()=>{x||(x=!0,requestAnimationFrame(()=>{x=!1,I.current&&q()}))};if("ResizeObserver"in window){const Se=ae=>{const fe=ae[0];if(!fe)return;const A=te(fe);A!==null&&ue.current===A||(ue.current=A,B())},Q=new ResizeObserver(Se);return Q.observe(I.current),Z.current=Q,()=>{Q.disconnect(),Z.current=null,ue.current=null}}const le=I.current.ownerDocument?I.current.ownerDocument.defaultView:null;if(!le)return;const se=()=>{B()};return le.addEventListener("resize",se),()=>{le.removeEventListener("resize",se)}},[a,q]),t.useLayoutEffect(()=>{!a||!I.current||q()},[a,b,f,m,g]);const ne=t.useCallback(x=>{const B=x.target.value;k||N(B),j&&j({event:x,value:B}),a&&q()},[k,j,z,e,a,q]),oe=t.useCallback(x=>{H(!0),D&&D(x)},[D]),Ce=t.useCallback(x=>{H(!1),y&&y(x)},[y]),ve=t.useCallback(()=>{k||(N(""),I.current&&(I.current.value="")),j&&j({value:"",event:void 0}),a&&q()},[j,k,q]),me=x=>wi[`${x}`];return u.jsxs("div",{className:de,children:[u.jsx("textarea",{ref:I,id:w,value:k?e:void 0,defaultValue:k?void 0:s,onChange:ne,onFocus:oe,onBlur:Ce,readOnly:r,placeholder:i==="Never"?l:void 0,disabled:c,maxLength:h,cols:g??void 0,rows:m??void 0,...S,style:{width:f?typeof f=="number"?`${f}px`:f:void 0,resize:d==="None"||a?"none":void 0,overflowY:a?"hidden":void 0},className:`sf-textarea sf-lib sf-input ${me(d)}`,"aria-labelledby":`label_${w}`}),Nr(i,T||b!=="",b,l,w),E&&As(b&&T?b.toString():"",ve,E,"textarea",K)]})}),Kt={EMAIL:/^(?!.*\.\.)[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,URL:/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/,DATE_ISO:/^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,DIGITS:/^[0-9]*$/,PHONE:/^[+]?[0-9]{9,13}$/,CREDIT_CARD:/^\d{13,16}$/},Vs=t.createContext(null),Si=Vs.Provider,Er=t.forwardRef((o,n)=>{const{rules:r,onSubmit:e,onReset:s,children:i,onFormStateChange:l,initialValues:c={},validateOnChange:f=!1,className:d="",...h}=o,g=t.useRef(null),{locale:m,dir:E}=$e(),a=t.useRef({values:{...c},errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C=t.useCallback(()=>{l&&(M.current=te(),l(M.current))},[l]),v=t.useCallback((x,B)=>{a.current={...a.current,values:{...a.current.values,[x]:B},modified:{...a.current.modified,[x]:!0}}},[]),R=t.useCallback(x=>{a.current={...a.current,touched:{...a.current.touched,[x]:!0}}},[]),j=t.useCallback(x=>{a.current={...a.current,visited:{...a.current.visited,[x]:!0}}},[]),y=t.useCallback((x,B)=>{const le={...a.current.errors};B?le[x]=B:delete le[x],a.current={...a.current,errors:le}},[]),D=t.useCallback(x=>{a.current={...a.current,submitted:x}},[]),S=t.useCallback(x=>{a.current={values:x,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}},C()},[C]),k=t.useCallback(()=>{const x={};Object.keys(a.current.values).forEach(B=>{x[B]=!0}),a.current={...a.current,touched:x}},[]),z=t.useCallback(()=>{const x={};Object.keys(a.current.values).forEach(B=>{x[B]=!0}),a.current={...a.current,visited:x}},[]),N=t.useCallback(x=>{const B={...a.current.errors};Object.entries(x).forEach(([le,se])=>{se?B[le]=se:delete B[le]}),a.current={...a.current,errors:B},C()},[C]),b=t.useRef(r),M=t.useRef(null),T=t.useRef(null),H={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date (ISO).",creditCard:"Please enter valid card number.",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",equalTo:"Please enter the same value again."},w=t.useRef({}),I=x=>{w.current[x]=!0};t.useEffect(()=>(T.current=Os("formValidator",H,m),()=>{T.current=null}),[m]),t.useEffect(()=>(C(),Y(),Lt("formValidator"),()=>{T.current=null,b.current={},w.current={},g.current&&(g.current=null),M.current=null}),[]),t.useEffect(()=>{b.current=r},[r]);const Y=()=>{if(Object.keys(c).length>0){const x={};for(const B in c)if(Object.prototype.hasOwnProperty.call(c,B)&&Object.prototype.hasOwnProperty.call(b.current,B)){const le=K(B,c[B]);le?x[B]=le:x[B]=null}Object.keys(x).length>0&&N(x)}},Z=(x,B)=>{var se;let le=(se=T.current)==null?void 0:se.getConstant(x);return Array.isArray(B)?B.forEach((Se,Q)=>{const ae=`{${Q}}`;le.includes(ae)&&(le=le.replace(ae,String(Se)))}):le=le.replace("{0}",String(B)),le},ue=x=>{if(!Kt.CREDIT_CARD.test(x))return!1;const B=x.replace(/[\s-]/g,"");let le=0,se=!1;for(let Se=B.length-1;Se>=0;Se--){let Q=parseInt(B.charAt(Se),10);se&&(Q*=2,Q>9&&(Q-=9)),le+=Q,se=!se}return le%10===0},K=(x,B)=>{const le=b.current[x];if(!le||!w.current[x])return null;const se=B==null||B.toString().trim()==="",Se=le.required!=null&&le.required[0]!==!1;if(se&&!Se)return null;for(const Q in le)if(Object.prototype.hasOwnProperty.call(le,Q)){const ae=le[Q];if(!ae)continue;let fe=!0,A=null,re;if(Q==="customValidator"&&typeof ae=="function"){const U=ae(B);if(U)return U;continue}if(Array.isArray(ae)&&(A=ae[0],re=ae[1],Q==="required"&&A===!1)||Q!=="required"&&(B===""||B===null||B===void 0))continue;switch(Q){case"required":fe=!se;break;case"email":fe=Kt.EMAIL.test(B);break;case"url":fe=Kt.URL.test(B);break;case"date":fe=!isNaN(Date.parse(B));break;case"dateIso":fe=Kt.DATE_ISO.test(B);break;case"number":fe=!isNaN(Number(B))&&String(B).indexOf(" ")===-1;break;case"digits":fe=Kt.DIGITS.test(B);break;case"creditCard":fe=ue(B);break;case"minLength":fe=String(B).length>=Number(A);break;case"maxLength":fe=String(B).length<=Number(A);break;case"rangeLength":Array.isArray(A)&&(fe=String(B).length>=A[0]&&String(B).length<=A[1]);break;case"min":fe=Number(B)>=Number(A);break;case"max":fe=Number(B)<=Number(A);break;case"range":Array.isArray(A)&&(fe=Number(B)>=A[0]&&Number(B)<=A[1]);break;case"regex":A instanceof RegExp?fe=A.test(B):typeof A=="string"&&(fe=new RegExp(A).test(B));break;case"tel":fe=Kt.PHONE.test(B);break;case"equalTo":typeof A=="string"&&(fe=B===a.current.values[A]);break}if(!fe)return re||Z(Q,A)}return null},O=()=>{const x={},B=Object.keys(b.current);for(const le of B){const se=K(le,a.current.values[le]);a.current.values[le]||v(le,a.current.values[le]),se&&(x[le]=se)}return x},L=()=>{const x=O();for(const le in x)Object.prototype.hasOwnProperty.call(x,le)&&y(le,x[le]);const B=Object.keys(b.current);for(const le of B)x[le]||y(le,null);return Object.keys(x).length===0&&(a.current={...a.current,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C(),Object.keys(x).length===0},V=x=>{x==null||x.preventDefault();const B=L();k(),z(),D(!0),C(),B&&(e==null||e(a.current.values))},ee=(x,{value:B})=>{if(v(x,B),f){const le=K(x,B);y(x,le)}C()},de=x=>{R(x);const B=K(x,a.current.values[x]);y(x,B),C()},F=x=>{S({...c}),s==null||s(x)},q=()=>{F()},te=()=>{const x=a.current;return{values:x.values,errors:x.errors,submitted:x.submitted,touched:x.touched,visited:x.visited,modified:x.modified,valid:Object.keys(b.current).reduce((B,le)=>(B[le]=!x.errors[le],B),{}),allowSubmit:Object.keys(x.errors).length===0,onChange:ee,onBlur:de,onFocus:ve,onFormReset:F,onSubmit:V,fieldNames:Object.keys(w.current).reduce((B,le)=>(B[le]=le,B),{})}},ne=x=>{const B=K(x,a.current.values[x]);return y(x,B),C(),!B},oe=t.useMemo(()=>({rules:r,initialValues:c,validateOnChange:f}),[r,c,f]);t.useImperativeHandle(n,()=>({...oe,validate:L,reset:q,validateField:ne,element:g.current}),[oe]);const Ce=t.useMemo(()=>["sf-control sf-form-validator",E==="rtl"?"sf-rtl":"",d].filter(Boolean).join(" "),[E,d]),ve=x=>{j(x),C()},me={registerField:I};return u.jsx(Si,{value:me,children:u.jsx("form",{ref:g,className:Ce,onSubmit:V,onReset:F,noValidate:!0,...h,children:i})})});Er.displayName="Form";const wt=o=>{const{name:n,children:r}=o;if(!n)return null;const e=t.useContext(Vs);return e?(e.registerField&&e.registerField(n),u.jsx(u.Fragment,{children:r})):null};wt.displayName="FormField";const xi=1500,Ai=500,ds=0,fs=8,Oi=2,Rt=2,Li="sf-control sf-tooltip",Ii="sf-bigger",ki="sf-tooltip-close",lr="sf-tooltip-wrap",_i="sf-tooltip-content sf-content",ms="sf-tooltip-arrow",Pi="sf-tooltip-arrow-outer",Mi="sf-tooltip-arrow-inner",_n="bottom",ar="top",cr="left",Pn="right",ps="sf-popup",hs="sf-lib",Hi="M10.5858 12.0001L2.58575 4.00003L3.99997 2.58582L12 10.5858L20 2.58582L21.4142 4.00003L13.4142 12.0001L21.4142 20L20 21.4142L12 13.4143L4.00003 21.4142L2.58581 20L10.5858 12.0001Z",ji="M20.7929 7H3.20712C2.76167 7 2.53858 7.53857 2.85356 7.85355L11.6465 16.6464C11.8417 16.8417 12.1583 16.8417 12.3536 16.6464L21.1465 7.85355C21.4614 7.53857 21.2384 7 20.7929 7Z",$i="M20.7929 17H3.20712C2.76167 17 2.53858 16.4615 2.85356 16.1465L11.6465 7.3536C11.8417 7.15834 12.1583 7.15834 12.3536 7.3536L21.1465 16.1465C21.4614 16.4615 21.2384 17 20.7929 17Z",Vi="M7 20.7928L7 3.20706C7 2.76161 7.53857 2.53852 7.85355 2.8535L16.6464 11.6464C16.8417 11.8417 16.8417 12.1582 16.6464 12.3535L7.85355 21.1464C7.53857 21.4614 7 21.2383 7 20.7928Z",Wi="M17 3.20718L17 20.793C17 21.2384 16.4614 21.4615 16.1464 21.1465L7.35354 12.3536C7.15828 12.1584 7.15828 11.8418 7.35354 11.6465L16.1464 2.85363C16.4614 2.53864 17 2.76173 17 3.20718Z",Ws=t.forwardRef((o,n)=>{const{width:r="auto",height:e="auto",position:s="TopCenter",offsetX:i=0,offsetY:l=0,arrow:c=!0,windowCollision:f=!1,arrowPosition:d="Auto",opensOn:h="Auto",followCursor:g=!1,sticky:m=!1,animation:E={open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:a=0,closeDelay:C=0,children:v,target:R,content:j,container:y,className:D,open:S,onClose:k,onOpen:z,title:N,style:b,onFilterTarget:M,...T}=o,[H,w]=t.useState(!0),[I,Y]=t.useState(!1),[Z,ue]=t.useState(void 0),[K,O]=t.useState(null),[L,V]=t.useState(!1),[ee,de]=t.useState(_n),[F,q]=t.useState({top:0,left:0}),[te,ne]=t.useState({}),[oe,Ce]=t.useState({top:"",left:""}),[ve,me]=t.useState({style:b}),x=t.useRef(null),B=t.useRef({show:null,hide:null,autoClose:null}),le=t.useRef({x:"Center",y:"Top"}),se=t.useRef(null),Se=t.useRef({event:null,target:null}),Q=t.useRef(!0),ae=t.useRef(null),fe=t.useRef(null),A=t.useRef(null),re=t.useRef(null),U=t.useRef({event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null}),G=t.useRef(typeof document<"u"?document.body:null),ge=t.useRef(S),ce=t.useRef(!1);Ae.isDevice&&(se.current=Bt(fe));const ye={width:"auto",height:"auto",position:"TopCenter",offsetX:0,offsetY:0,arrow:!0,windowCollision:!1,arrowPosition:"Auto",opensOn:"Auto",followCursor:!1,sticky:!1,animation:{open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:0,closeDelay:0,target:R,content:j,container:y,open:S};t.useEffect(()=>{pe(),Re(s),x.current&&x.current.element&&ae.current&&xe(ae.current)},[s]),t.useEffect(()=>{x.current&&x.current.element&&ae.current&&xe(ae.current)},[d]),t.useEffect(()=>{var P,ie;x.current&&x.current.element&&ae.current&&(en(ae.current),Ht(ae.current,(P=U.current)==null?void 0:P.event,(ie=U.current)==null?void 0:ie.showAnimation))},[H,ae.current]),t.useEffect(()=>(Cn(),jt(h),()=>{Sn(h)}),[h,R]),t.useEffect(()=>{if(!(typeof document>"u"))return document.addEventListener("wheel",Ut),document.addEventListener("scroll",Ut),document.addEventListener("touchend",Nn),document.addEventListener("keydown",wn),window.addEventListener("resize",he),()=>{typeof document>"u"||(document.removeEventListener("wheel",Ut),document.removeEventListener("scroll",Ut),document.removeEventListener("touchend",Nn),document.removeEventListener("keydown",wn),window.removeEventListener("resize",he))}},[ye]),t.useEffect(()=>{var P,ie,be,Te,Ne,_e;!S&&ge.current===S||(ge.current=S,S?(P=U.current)!=null&&P.showTarget?(Jt((ie=U.current)==null?void 0:ie.showTarget,U.current.event,U.current.showAnimation),U.current={...U.current,showTarget:null}):ht(R!=null&&R.current?R==null?void 0:R.current:fe.current,E.open):(be=U.current)!=null&&be.hideAnimation?(yt(),sn((Te=U.current)==null?void 0:Te.hideAnimation,(Ne=U.current)==null?void 0:Ne.hideTarget,(_e=U.current)==null?void 0:_e.hideEvent),U.current={...U.current,hideEvent:null,hideAnimation:null,hideTarget:null}):Ct(E.close))},[S]),t.useLayoutEffect(()=>(Lt("tooltip"),Ie(),()=>{clearTimeout(B.current.show),clearTimeout(B.current.hide),clearTimeout(B.current.autoClose),B.current={show:null,hide:null,autoClose:null},x.current=null,se.current=null,U.current={event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null},Se.current={event:null,target:null},g&&ae.current&&(ae.current.removeEventListener("mousemove",it),ae.current.removeEventListener("touchstart",it),ae.current.removeEventListener("mouseenter",it)),ae.current=null,fe.current=null,re.current=null,G.current=null,A.current=null}),[]),t.useImperativeHandle(n,()=>({...ye,animation:E,openTooltip:(P,ie)=>{if(Be(ie)&&(ie=E==null?void 0:E.open),Be(P)&&(P=fe.current),P){if(P.style.display==="none")return;ht(P,ie)}},closeTooltip:P=>{P||(P=E==null?void 0:E.close),Ct(P)},refresh:()=>{var P;x.current&&x.current.element&&xe(ae.current?ae.current:fe.current),!Be(o.target)&&!Be((P=o.target)==null?void 0:P.current)&&(Sn(h),jt(h))},element:fe.current}));const Ie=t.useCallback(()=>{pe()},[ye]),pe=()=>{if(!s)return;let P=null,ie=null;s.indexOf("Top")===0||s.indexOf("Bottom")===0?[ie,P]=s.split(/(?=[A-Z])/):[P,ie]=s.split(/(?=[A-Z])/),le.current.x=P,le.current.y=ie},Re=t.useCallback(P=>{let ie;if(!Be(P))return P.indexOf("Right")===0?ie=cr:P.indexOf("Bottom")===0?ie=ar:P.indexOf("Left")===0?ie=Pn:ie=_n,de(ie),ie},[]),_=P=>{var be,Te;if(g&&((be=U.current)!=null&&be.event)){it((Te=U.current)==null?void 0:Te.event);return}const ie=J(P);q(ie)},X=P=>{var Te,Ne;if(!P)return{x:1,y:1};const ie={x:1,y:1},be=P.closest('[style*="transform: scale"]');if(be&&be!==((Te=x.current)==null?void 0:Te.element)&&be.contains((Ne=x.current)==null?void 0:Ne.element)){const je=window.getComputedStyle(be).getPropertyValue("transform");if(je!=="none"){const Ue=je.match(/scale\(([\d., ]+)\)/);if(Ue){const ke=Ue[1].split(",").map(parseFloat);ie.x=ke[0],ie.y=ke.length>1?ke[1]:ke[0]}else{const ke=je.match(/matrix\(([^)]+)\)/);if(ke){const Ke=ke[1].split(",").map(parseFloat);ie.x=Ke[0],ie.y=Ke[3]}}}}return ie},J=P=>{var Ke,Je,rt,lt,Dt;x.current&&x.current.element&&(x.current.element.style.visibility="hidden",x.current.element.style.display="block");const ie=(Ke=fe.current)==null?void 0:Ke.closest('[style*="zoom"]');ie&&x.current&&x.current.element&&!ie.contains((Je=x.current)==null?void 0:Je.element)&&(x.current.element.style.zoom=getComputedStyle(ie).zoom);const be=Zr(P,(rt=le.current.x)==null?void 0:rt.toLowerCase(),(lt=le.current.y)==null?void 0:lt.toLowerCase(),Q.current||(Dt=G.current)==null?void 0:Dt.getBoundingClientRect()),Te=X(P),Ne=W(s,Te.x,Te.y),_e=vn(be,Ne),je=_e[0],Ue=_e[1],ke=yn(P,je,Ue);return ke.left=ke.left/Te.x,ke.top=ke.top/Te.y,!Q.current&&G.current&&(ke.left-=window.scrollX*2,ke.top-=window.scrollY*2),x.current&&x.current.element&&(x.current.element.style.display="",g&&(x.current.element.style.visibility="visible")),ke},he=()=>{xe(ae.current)},xe=P=>{if(x.current&&x.current.element&&P){const ie=J(P);q(ie),x.current.element.style.visibility="visible"}},we=()=>{g||xe(ae.current)},Le=()=>{var ie;It();const P=t.createRef();P.current=(ie=x.current)==null?void 0:ie.element,Xt.stop(P.current),ce.current=!1,w(!0)},W=(P,ie,be)=>{var rt,lt,Dt,dt,et,bt,an,Br,Ur,zr;const Te={top:0,left:0};let Ne,_e,je,Ue,ke,Ke,Je;if(ie!==1||be!==1){const Yr=(lt=(rt=x.current)==null?void 0:rt.element)==null?void 0:lt.getBoundingClientRect();let cn;je=Math.round(Yr.width),Ue=Math.round(Yr.height),A.current&&(cn=A.current.getBoundingClientRect()),Ne=cn?Math.round(cn.width):0,_e=cn?Math.round(cn.height):0,ke=c?ds:fs,Ke=_e/2+Rt+(Ue-((Dt=x.current)==null?void 0:Dt.element).clientHeight*be),Je=Ne/2+Rt+(je-((dt=x.current)==null?void 0:dt.element).clientWidth*ie)}else je=((et=x.current)==null?void 0:et.element).offsetWidth,Ue=((bt=x.current)==null?void 0:bt.element).offsetHeight,Ne=A.current?A.current.offsetWidth:0,_e=A.current?A.current.offsetHeight:0,ke=c?ds:fs,Ke=_e/2+Rt+(((an=x.current)==null?void 0:an.element).offsetHeight-((Br=x.current)==null?void 0:Br.element).clientHeight),Je=Ne/2+Rt+(((Ur=x.current)==null?void 0:Ur.element).offsetWidth-((zr=x.current)==null?void 0:zr.element).clientWidth);switch(g&&(ke+=Oi),P){case"RightTop":Te.left+=Ne+ke,Te.top-=Ue-Ke;break;case"RightCenter":Te.left+=Ne+ke,Te.top-=Ue/2;break;case"RightBottom":Te.left+=Ne+ke,Te.top-=Ke;break;case"BottomRight":Te.top+=_e+ke,Te.left-=Je;break;case"BottomCenter":Te.top+=_e+ke,Te.left-=je/2;break;case"BottomLeft":Te.top+=_e+ke,Te.left-=je-Je;break;case"LeftBottom":Te.left-=Ne+je+ke,Te.top-=Ke;break;case"LeftCenter":Te.left-=Ne+je+ke,Te.top-=Ue/2;break;case"LeftTop":Te.left-=Ne+je+ke,Te.top-=Ue-Ke;break;case"TopLeft":Te.top-=Ue+_e+ke,Te.left-=je-Je;break;case"TopRight":Te.top-=Ue+_e+ke,Te.left-=Je;break;default:Te.top-=Ue+_e+ke,Te.left-=je/2;break}return Te.left+=i,Te.top+=l,Te},De=(P,ie,be,Te)=>{var rt,lt,Dt,dt;if(c===!1||A.current===null)return;const Ne=Re(ie);let _e,je;const Ue=((rt=x.current)==null?void 0:rt.element).clientWidth,ke=((lt=x.current)==null?void 0:lt.element).clientHeight,Ke=A.current.offsetWidth,Je=A.current.offsetHeight;if(Ne===_n||Ne===ar){if(Ne===_n?(je="99.9%",Ce(et=>({...et,top:`-${Je-2}px`}))):(je=-(Je-1)+"px",Ce(et=>({...et,top:`-${Je-6}px`}))),P){const et=be!=="Center"||Ue>P.offsetWidth||g;et&&be==="Left"||!et&&d==="End"?_e=Ue-Ke-Rt+"px":et&&be==="Right"||!et&&d==="Start"?_e=Rt+"px":et&&(d==="End"||d==="Start")?_e=d==="End"?P.offsetWidth+(((Dt=x.current)==null?void 0:Dt.element).offsetWidth-P.offsetWidth)/2-Ke/2-Rt+"px":(((dt=x.current)==null?void 0:dt.element).offsetWidth-P.offsetWidth)/2-Ke/2+Rt+"px":_e=Ue/2-Ke/2+"px"}}else{Ne===Pn?(_e="99.9%",Ce(bt=>({...bt,left:`-${Ke-2}px`}))):(_e=-(Ke-1)+"px",Ce(bt=>({...bt,left:`${-Ke+(Ke-2)}px`})));const et=Te!=="Center"||ke>P.offsetHeight||g;et&&Te==="Top"||!et&&d==="End"?je=ke-Je-Rt+"px":et&&Te==="Bottom"||!et&&d==="Start"?je=Rt+"px":je=ke/2-Je/2+"px"}A.current.style.top=je,A.current.style.left=_e},Ee=()=>{var ie;if(ae.current&&!Be(ae.current.getAttribute("title"))&&(ae.current.setAttribute("data-content",ae.current.getAttribute("title")),ae.current.removeAttribute("title")),t.isValidElement(j))return j;let P="";return typeof j=="function"?P=j():(ie=ae==null?void 0:ae.current)!=null&&ie.getAttribute("data-content")&&(P=ae.current.getAttribute("data-content")),P},Oe=(P,ie)=>{const be=(P.getAttribute("aria-describedby")||"").split(/\s+/);be.indexOf(ie)<0&&be.push(ie),Lo(P,{"aria-describedby":be.join(" ").trim(),"data-tooltip-id":ie})},Pe=P=>{const ie=P.getAttribute("data-tooltip-id"),be=(P.getAttribute("aria-describedby")||"").split(/\s+/),Te=be.indexOf(ie);Te!==-1&&be.splice(Te,1),P.removeAttribute("data-tooltip-id");const Ne=be.join(" ").trim();Ne?P.setAttribute("aria-describedby",Ne):P.removeAttribute("aria-describedby")},Ye=t.useCallback(P=>{P&&(clearTimeout(B.current.autoClose),ot(P.originalEvent))},[]),He=()=>{if(m)return;const P=()=>{Ve()};B.current.autoClose=setTimeout(P,xi)},Tt=P=>{var Te;let ie;if((Te=o.target)!=null&&Te.current?ie=o.target.current.contains(P.target)?o.target.current:void 0:ie=M?P.target:fe.current,Be(ie))return;const be=P;!x.current||x.current&&ie!==ae.current?be.type==="mousedown"&&be.button===2||ot(P):m||Ct(E.close,P,ie)},ot=P=>{var be,Te,Ne,_e;let ie;if(M){if(!(M==null?void 0:M(P.target)))return;ie=P.target}else(be=o.target)!=null&&be.current?ie=o.target.current.contains(P.target)?o.target.current:void 0:ie=fe.current;if(!(Be(ie)||x.current&&ie===ae.current&&!g)){if(x.current&&((Te=x.current.element)!=null&&Te.getAttribute("sf-animation-id"))){const je=C+((Ne=E==null?void 0:E.close)!=null&&Ne.delay?E.close.delay:0)+((_e=E==null?void 0:E.close)!=null&&_e.duration?E.close.duration:0);setTimeout(()=>{St(ie),ht(ie,E.open,P)},je);return}St(ie),ht(ie,E.open,P)}},vt=P=>{Se.current.event=P},yt=()=>{Se.current.target&&(Se.current.target.removeEventListener("mousemove",vt),Se.current.target.removeEventListener("touchstart",vt))},ht=(P,ie,be)=>{clearTimeout(B.current.show),clearTimeout(B.current.hide),a&&g&&(yt(),Se.current.target=P,Se.current.target.addEventListener("mousemove",vt),Se.current.target.addEventListener("touchstart",vt)),U.current={...U.current,event:be,showAnimation:ie,showTarget:P},z==null||z(be),(Be(S)||S)&&Jt(P,be,ie)},Jt=(P,ie,be)=>{var Te,Ne,_e;if(ae.current=P,w(!1),Be(x.current)){const je=(Te=fe.current)!=null&&Te.getAttribute("id")?Fn((Ne=fe.current)==null?void 0:Ne.getAttribute("id")):Fn("tooltip");me(Ue=>({...Ue,id:je+"_content"}))}else if(P){De(P,s,le.current.x,le.current.y),Oe(P,ve==null?void 0:ve.id);const je=t.createRef();je.current=(_e=x.current)==null?void 0:_e.element,Xt.stop(je.current),xe(P),Ht(P,ie,be)}},Cn=()=>{(y==null?void 0:y.current)instanceof HTMLElement&&(Q.current=!1,G.current=y.current),G.current||(G.current=typeof document<"u"?document.body:null)},en=P=>{var ie;if(P){Cn(),Oe(P,ve==null?void 0:ve.id),c&&Re(s),_(P),De(P,s,le.current.x,le.current.y);const be=t.createRef();be.current=(ie=x.current)==null?void 0:ie.element,Xt.stop(be.current),xe(P)}},Ht=(P,ie,be)=>{P&&er(P,be,ie)},er=(P,ie,be)=>{const Te={name:ie.effect==="None"&&Gr==="Enable"?"FadeIn":E.open.effect,duration:ie.duration,delay:ie.delay,timingFunction:"ease-out"};if(a>0){const Ne=()=>{var _e;g&&(P.addEventListener("mousemove",it),P.addEventListener("touchstart",it),P.addEventListener("mouseenter",it)),(_e=x.current)!=null&&_e.element&&(O(P),ue(je=>({show:Te,hide:je==null?void 0:je.hide})),Y(!0),Se.current.event&&g&&it(Se.current.event))};B.current.show=setTimeout(Ne,a)}else x.current&&(O(P),ue(Ne=>({show:Te,hide:Ne==null?void 0:Ne.hide})),Y(!0));be&&tr(be,P)},Dn=(P,ie)=>{var _e;const be={left:P,top:ie,position:s,horizontal:le.current.x,vertical:le.current.y},Te=nn(),Ne=Io((_e=x.current)==null?void 0:_e.element,Te?Te.current:null,m&&s.indexOf("Right")>=0?re.current.offsetWidth+P:P,ie);return Ne.length>0&&(be.horizontal=Ne.indexOf("left")>=0?"Right":Ne.indexOf("right")>=0?"Left":le.current.x,be.vertical=Ne.indexOf("top")>=0?"Bottom":Ne.indexOf("bottom")>=0?"Top":le.current.y),be},vn=(P,ie)=>[Q.current?P.left+ie.left:P.left-G.current.getBoundingClientRect().left+ie.left+window.pageXOffset+G.current.scrollLeft,Q.current?P.top+ie.top:P.top-G.current.getBoundingClientRect().top+ie.top+window.pageYOffset+G.current.scrollTop],yn=(P,ie,be)=>{var Je,rt,lt,Dt;const Te=Dn(ie,be);let Ne=Te.position;le.current.y!==Te.vertical&&(Ne=(s==null?void 0:s.indexOf("Bottom"))===0||(s==null?void 0:s.indexOf("Top"))===0?Te.vertical+le.current.x:le.current.x+Te.vertical),le.current.x!==Te.horizontal&&(Ne.indexOf("Left")===0&&(Te.vertical=Ne==="LeftTop"||Ne==="LeftCenter"?"Top":"Bottom",Ne=Te.vertical+"Left"),Ne.indexOf("Right")===0&&(Te.vertical=Ne==="RightTop"||Ne==="RightCenter"?"Top":"Bottom",Ne=Te.vertical+"Right"),Te.horizontal=le.current.x);const _e=Te.vertical,je=Te.horizontal;if(Te.position!==Ne){const dt=Zr(P,je.toLowerCase(),_e.toLowerCase(),Q.current||(Je=G.current)==null?void 0:Je.getBoundingClientRect());De(P,Ne,je,_e);const et=X(P),bt=W(Ne,et.x,et.y);Q.current||(bt.top-=tn("TopBottom",Ne,l),bt.left-=tn("RightLeft",Ne,i)),Te.position=Ne;const an=vn(dt,bt);Te.left=an[0],Te.top=an[1]}else De(P,Ne,je,_e);const Ue={left:Te.left,top:Te.top},ke=nn(),Ke=Q.current?ko((rt=x.current)==null?void 0:rt.element,ke?ke.current:null,{X:!0,Y:f},Ue):Ue;if(c&&A.current!=null&&(Ne.indexOf("Bottom")===0||Ne.indexOf("Top")===0)){let dt=parseInt(A.current.style.left,10)-(Ke.left-Te.left);dt<0?dt=0:dt+A.current.offsetWidth>((lt=x.current)==null?void 0:lt.element).clientWidth&&(dt=((Dt=x.current)==null?void 0:Dt.element).clientWidth-A.current.offsetWidth),A.current.style.left=dt.toString()+"px"}return Ue.left=Ke.left,Ue.top=Ke.top,Ue},tn=(P,ie,be)=>P.indexOf(s.split(/(?=[A-Z])/)[0])!==-1&&P.indexOf(ie.split(/(?=[A-Z])/)[0])!==-1?2*be:0,nn=()=>!f&&(R!=null&&R.current)?fe:null,Ct=(P,ie,be)=>{if(C>0){clearTimeout(B.current.hide),clearTimeout(B.current.show);const Te=()=>{C&&x.current&&x.current.element&&L||bn(P,ie,be)};B.current.hide=setTimeout(Te,C)}else bn(P,ie,be)},bn=(P,ie,be)=>{var Ne,_e,je;let Te;if(ie?Te=(Ne=o.target)!=null&&Ne.current||M?be||ie.target:fe.current:Te=ae.current,U.current={...U.current,hideEvent:ie,hideAnimation:P,hideTarget:Te},x.current&&((_e=x.current.element)!=null&&_e.getAttribute("sf-animate"))){const Ue=t.createRef();Ue.current=(je=x.current)==null?void 0:je.element,Xt.stop(Ue.current,{end:()=>{rn(P,Te,ie)}})}else rn(P,Te,ie)},rn=(P,ie,be)=>{k==null||k(be),Be(S)?(yt(),sn(P,ie,be)):S&&!k?w(!1):S||(yt(),sn(P,ie,be))},sn=(P,ie,be)=>{ie&&be&&St(ie);const Te={name:P.effect==="None"&&Gr==="Enable"?"FadeOut":E.close.effect,duration:P.duration,delay:P.delay,timingFunction:"ease-in"};x.current&&(ue(Ne=>({hide:Te,show:Ne==null?void 0:Ne.show})),Y(!1))},St=P=>{xn(P),Be(P.getAttribute("data-content"))||(P.setAttribute("title",P.getAttribute("data-content")),P.removeAttribute("data-content")),Pe(P)},It=()=>{const P=ae.current;P&&St(P),H&&(Ce({top:"",left:""}),x.current=null)},on=()=>{x.current&&x.current.element&&V(!0)},ln=P=>{V(!1),Ct(E.close,P,ae.current)},xt=P=>{const ie=P.relatedTarget;if(ie){const be=Et(ie,`.${lr}.${hs}.${ps}`);be?(g&&it(P),be.addEventListener("mouseleave",Rn)):(Ct(E.close,P,ae.current),C===0&&E.close.effect==="None"&&It())}else Ct(E.close,P,ae.current),It()},Rn=P=>{var ie,be;(be=(ie=x.current)==null?void 0:ie.element)==null||be.removeEventListener("mouseleave",Rn),(!P.relatedTarget||Et(P.relatedTarget,".sf-tooltip")!==fe.current)&&(Ct(E.close,P,ae.current),It())},it=P=>{var Je;let ie=0,be=0;if(P.type.indexOf("touch")>-1?(P.preventDefault(),ie=P.touches[0].pageX,be=P.touches[0].pageY):(ie=P.pageX,be=P.pageY),Be(x.current))return;x.current&&(x.current.element.style.display="block");const Te=t.createRef();Te.current=(Je=x.current)==null?void 0:Je.element,Xt.stop(Te.current),De(P.target,s,le.current.x,le.current.y);const Ne=X(P.target),_e=W(s,Ne.x,Ne.y),je=ie+_e.left+i,Ue=be+_e.top+l,ke=Dn(je,Ue);if(le.current.x!==ke.horizontal||le.current.y!==ke.vertical){const rt=(s==null?void 0:s.indexOf("Bottom"))===0||(s==null?void 0:s.indexOf("Top"))===0?ke.vertical+ke.horizontal:ke.horizontal+ke.vertical;ke.position=rt,De(P.target,ke.position,ke.horizontal,ke.vertical);const lt=W(ke.position,Ne.x,Ne.y);ke.left=ie+lt.left-i,ke.top=be+lt.top-l}const Ke={position:"absolute",left:ke.left+"px",top:ke.top+"px",zIndex:1e3,width:On(r),height:On(e),display:"block"};q(ke),me(rt=>({...rt,style:{...(rt==null?void 0:rt.style)||{},...Ke}}))},wn=P=>{x.current&&x.current.element&&P.key==="Escape"&&Ve()},Nn=P=>{x.current&&x.current.element&&Et(P.target,".sf-tooltip")===null&&!m&&!h.includes("Focus")&&Ve()},Ut=P=>{x.current&&x.current.element&&!m&&!g&&!ce.current&&(Et(P.target,`.${lr}.${hs}.${ps}`)||(Y(ie=>(ie||w(!0),ie)),ce.current=!0,Ve()))},jt=P=>{var Te,Ne;const ie=zt(P),be={};for(const _e of ie){if(_e==="Custom")return;_e==="Focus"&&(!Be(o.target)&&!Be((Te=o.target)==null?void 0:Te.current)?(Ne=o.target)==null||Ne.current.addEventListener("focus",ot):be.onFocus=ot),_e==="Click"&&(be.onMouseDown=Tt),_e==="Hover"&&(Ae.isDevice?(se.current&&(se.current.tapHoldThreshold=Ai,se.current.tapHold=Ye),be.onTouchEnd=He):be.onMouseOver=ot)}ne(be)},zt=P=>P?(P==="Auto"&&(P=Ae.isDevice?"Hover":"Hover Focus"),P.split(" ")):[],tr=(P,ie)=>{var be;x.current&&x.current.element&&(m||(P.type==="focus"&&(!Be(o.target)&&!Be((be=o.target)==null?void 0:be.current)||M?ie.addEventListener("blur",xt):ne(Te=>({...Te,onBlur:xt}))),P.type==="mouseover"&&ie.addEventListener("mouseleave",xt),C&&(x.current.element.addEventListener("mouseenter",on),x.current.element.addEventListener("mouseleave",ln))),g&&a===0&&(ie.addEventListener("mousemove",it),ie.addEventListener("mouseenter",it)))},Sn=P=>{var be,Te;const ie=zt(P);for(const Ne of ie){if(Ne==="Custom")return;Ne==="Focus"&&!Be(o.target)&&!Be((be=o.target)==null?void 0:be.current)&&fe.current&&((Te=o.target)==null||Te.current.removeEventListener("focus",ot)),Ne==="Hover"&&se.current&&se.current.destroy&&se.current.destroy()}},xn=P=>{if(!m){const ie=zt(h);for(const be of ie)be==="Focus"&&(P.removeEventListener("blur",xt),ne(Te=>{const Ne={...Te};return delete Ne.onBlur,Ne})),be==="Hover"&&!Ae.isDevice&&P.removeEventListener("mouseleave",xt);C&&(P.removeEventListener("mouseenter",on),P.removeEventListener("mouseleave",ln))}g&&(P.removeEventListener("mousemove",it),P.removeEventListener("mouseenter",xt))},Ve=()=>{Ct(E.close)},Ze=t.useMemo(()=>{switch(ee){case ar:return $i;case Pn:return Vi;case cr:return Wi;default:return ji}},[ee]),Yt=()=>u.jsxs(Ot,{ref:x,open:I,role:"tooltip","aria-hidden":!1,animation:Z,relativeElement:K,targetRef:ae,position:{X:F.left,Y:F.top},viewPortElementRef:G.current?G:void 0,width:On(r),height:On(e),onOpen:we,onClose:Le,className:[lr,D,Ae.isDevice?Ii:""].filter(Boolean).join(" "),...ve,...T,children:[u.jsx("div",{className:_i,children:Ee()}),c&&u.jsxs("div",{ref:A,className:`${ms} ${ms}-${ee} sf-pos-absolute sf-overflow-hidden ${ee===cr||ee===Pn?"sf-tooltip-arrow-x":"sf-tooltip-arrow-y"}`,children:[u.jsx("div",{className:`${Pi}-${ee} sf-pos-absolute`}),u.jsx("div",{className:`${Mi}-${ee} sf-pos-absolute`,style:oe,children:u.jsx(Qr,{d:Ze})})]}),m&&u.jsx("div",{ref:re,className:`${ki}`,role:"button","aria-label":"Close Tooltip",onClick:()=>{Ve()},children:u.jsx(Qr,{d:Hi})})]});return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:fe,className:[Li,D].filter(Boolean).join(" "),title:N,...te,children:v}),!H&&G.current&&Ft.createPortal(Yt(),G.current)]})});t.memo(Ws);const fn=20,Tn=t.forwardRef((o,n)=>{const{open:r,header:e,footer:s,modal:i=!0,onClose:l,onDragStart:c,onDrag:f,onDragStop:d,onResizeStart:h,onResize:g,onResizeStop:m,closeIcon:E=!0,initialFocusRef:a,draggable:C=!1,resizable:v=!1,resizeHandles:R=["SouthEast"],position:j="Center",animation:y={effect:"Fade",duration:400,delay:0},target:D=typeof document<"u"?document.body:void 0,fullScreen:S=!1,className:k="",children:z,style:N,id:b=`dialog_${t.useId()}`,...M}=o,T=t.useRef(null),H=t.useRef(null),w=t.useRef(null),[I,Y]=t.useState({internalOpen:r,dynamicMaxHeight:""}),{internalOpen:Z,dynamicMaxHeight:ue}=I,{locale:K}=$e(),O=t.useMemo(()=>({handle:".sf-dlg-header-content",clone:!1,dragArea:D&&D instanceof HTMLElement?D:typeof document<"u"?document.body:void 0,abort:".sf-dlg-closeicon-btn",isDragScroll:!0,dragStart:pe=>{if(!C){pe.cancel=!0;return}c&&c(pe)},drag:pe=>{C&&f&&f(pe.event)},dragStop:pe=>{C&&d&&d(pe.event)}}),[C,D,c,f,d]),L=t.useRef(null),V=t.useRef(Gt({current:C?L.current:null},O)),ee=t.useMemo(()=>{const pe=(X,J)=>X===void 0?J:X,Re=S&&typeof window<"u"?window.innerWidth:typeof window<"u"?window.innerWidth-fn*2:800,_=S&&typeof window<"u"?window.innerHeight:typeof window<"u"?window.innerHeight-fn*2:600;return{minWidth:pe(N==null?void 0:N.minWidth,100),minHeight:pe(N==null?void 0:N.minHeight,100),maxWidth:pe(N==null?void 0:N.maxWidth,Re),maxHeight:pe(N==null?void 0:N.maxHeight,_)}},[N==null?void 0:N.minWidth,N==null?void 0:N.minHeight,N==null?void 0:N.maxWidth,N==null?void 0:N.maxHeight,S]),de=t.useMemo(()=>({enabled:v&&!S,handles:R,boundary:D&&D instanceof HTMLElement?D:void 0,minWidth:ee.minWidth,minHeight:ee.minHeight,maxWidth:ee.maxWidth,maxHeight:ee.maxHeight,onResizeStart:h,onResize:g,onResizeStop:m}),[v,R,D,ee]),{renderResizeHandles:F}=_o(L,de);t.useEffect(()=>(Lt("dialog"),()=>{var pe,Re,_;V.current&&((pe=V.current.element)!=null&&pe.current)&&((_=(Re=V.current).destroy)==null||_.call(Re)),L.current=null,V.current=null,T.current=null,H.current=null,w.current=null,typeof window<"u"&&window.removeEventListener("resize",ne)}),[]);const q=t.useCallback(()=>{let pe=[];if(L.current){const Re=['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','[contenteditable]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","),_=L.current.querySelectorAll(Re);pe=Array.from(_).filter(X=>!X.hasAttribute("disabled"))}return pe},[L,z,r]);t.useEffect(()=>{if(r){if(typeof document>"u"||typeof window>"u")return;if(w.current=document.activeElement,i){const pe=D&&D instanceof HTMLElement?D:document.body,Re={overflow:pe.style.overflow,paddingRight:pe.style.paddingRight},_=window.innerWidth-document.documentElement.clientWidth;return pe.style.overflow="hidden",pe.style.paddingRight=`${_}px`,()=>{pe.style.overflow=Re.overflow,pe.style.paddingRight=Re.paddingRight,w.current&&r&&w.current.focus()}}}else w.current&&(w.current.focus(),w.current=null);return()=>{w.current&&r&&w.current.focus()}},[Z,i]),t.useEffect(()=>{r&&Y(pe=>({...pe,internalOpen:!0}))},[r]);const te=t.useCallback(()=>S?"100%":D&&D!==document.body&&typeof window<"u"?D.offsetHeight<window.innerHeight?D.offsetHeight-fn+"px":window.innerHeight-fn+"px":(typeof window<"u"?window.innerHeight-fn:600)+"px",[S,D]);t.useEffect(()=>{r&&Y(pe=>({...pe,dynamicMaxHeight:te()}))},[r,te]);const ne=t.useCallback(()=>{Y(pe=>({...pe,dynamicMaxHeight:te()}))},[te]);t.useEffect(()=>{if(!(!r||!Z))return T.current&&Y(pe=>({...pe,dynamicMaxHeight:te()})),typeof window<"u"&&window.addEventListener("resize",ne),()=>{typeof window<"u"&&window.removeEventListener("resize",ne)}},[r,Z,ne,te]);const oe=t.useMemo(()=>({open:r,modal:i,draggable:C,resizable:v,resizeHandles:R,position:j,animation:y,target:D,fullScreen:S,closeIcon:E}),[r,i,C,v,R,j,y,D,S]);t.useImperativeHandle(n,()=>({...oe,element:T.current}),[oe]);const Ce=t.useCallback(pe=>{pe.key==="Escape"&&l&&(pe.preventDefault(),l(pe),typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur())},[l]),ve=t.useCallback(pe=>{var _,X,J,he;if(!i)return;const Re=q();if(Re.length!==0)switch(pe.key){case"Tab":{const xe=typeof document<"u"?document.activeElement:null,we=Re.indexOf(xe);if(we===-1){pe.preventDefault(),(X=(_=Re[Re.length-1])==null?void 0:_.focus)==null||X.call(_);return}pe.preventDefault();let Le;pe.shiftKey?Le=we<=0?Re.length-1:we-1:Le=we>=Re.length-1?0:we+1,(he=(J=Re[Le])==null?void 0:J.focus)==null||he.call(J);break}}},[i,q]),me=t.useCallback(()=>{var pe;if(T.current&&Y(Re=>({...Re,dynamicMaxHeight:te()})),a!=null&&a.current)"element"in a.current&&a.current.element?a.current.element.focus():a.current.focus();else{const _=q().filter(X=>!H.current||H.current&&X!==H.current.element);_.length>0?_[0].focus():(pe=H.current)!=null&&pe.element&&H.current.element.focus()}},[a,te,q]),x=t.useCallback(()=>{T.current&&Y(pe=>({...pe,internalOpen:!1}))},[]),B=t.useCallback(pe=>{l==null||l(pe)},[l]),le=t.useCallback(pe=>{i&&pe.target===pe.currentTarget&&(l==null||l(pe))},[i,l]),se=t.useMemo(()=>Os("dialog",{close:"Close"},K).getConstant("close"),[K]),Se=t.useCallback(()=>u.jsx(Qe,{ref:H,icon:typeof E=="boolean"?u.jsx(Bn,{"aria-label":se}):E,title:se,"aria-label":se,color:gt.Secondary,onClick:B,className:"sf-dlg-closeicon-btn",variant:Ge.Standard}),[E,B,i,se]),Q=(pe,Re)=>{const _={Fade:{show:"FadeIn",hide:"FadeOut"},FadeZoom:{show:"FadeZoomIn",hide:"FadeZoomOut"},FlipLeftDown:{show:"FlipLeftDownIn",hide:"FlipLeftDownOut"},FlipLeftUp:{show:"FlipLeftUpIn",hide:"FlipLeftUpOut"},FlipRightDown:{show:"FlipRightDownIn",hide:"FlipRightDownOut"},FlipRightUp:{show:"FlipRightUpIn",hide:"FlipRightUpOut"},FlipXDown:{show:"FlipXDownIn",hide:"FlipXDownOut"},FlipXUp:{show:"FlipXUpIn",hide:"FlipXUpOut"},FlipYLeft:{show:"FlipYLeftIn",hide:"FlipYLeftOut"},FlipYRight:{show:"FlipYRightIn",hide:"FlipYRightOut"},SlideBottom:{show:"SlideBottomIn",hide:"SlideBottomOut"},SlideLeft:{show:"SlideLeftIn",hide:"SlideLeftOut"},SlideRight:{show:"SlideRightIn",hide:"SlideRightOut"},SlideTop:{show:"SlideTopIn",hide:"SlideTopOut"},Zoom:{show:"ZoomIn",hide:"ZoomOut"},None:{show:"FadeIn",hide:"FadeOut"}},X={show:"FadeIn",hide:"FadeOut"},J=_[pe]||X;return Re?J.show:J.hide},ae=t.useMemo(()=>["sf-control","sf-dialog",i?"sf-dlg-modal":"",S?"sf-dlg-fullscreen":"",v&&!S?"sf-dlg-resizable":"",k].filter(Boolean).join(" "),[i,S,k,v]),fe=t.useMemo(()=>{if(N!=null&&N.top&&(N!=null&&N.left)||j===null)return;const[pe,Re]=j==null?void 0:j.split(/(?=[A-Z])/);return pe&&Re?`sf-dlg-${pe==null?void 0:pe.toLowerCase()}-${Re==null?void 0:Re.toLowerCase()}`:"sf-dlg-center"},[j,N]),A=t.useMemo(()=>{const[pe,Re]=j?j==null?void 0:j.split(/(?=[A-Z])/):[];return pe&&Re?{X:pe,Y:Re}:{X:"Center",Y:"Center"}},[j]),re=t.useMemo(()=>["sf-dlg-container",fe].filter(Boolean).join(" "),[fe]),U=t.useMemo(()=>{const pe={...N};return delete pe.zIndex,{maxHeight:S?"100%":ue,position:pe.left&&pe.top?"absolute":"relative",...!pe.left&&!pe.top?{top:"0px",left:"0px"}:{},...S?{width:"100vw",height:"100vh",maxWidth:"100%",maxHeight:"100%"}:{},...!S&&v?{minWidth:ee.minWidth,minHeight:ee.minHeight,maxWidth:ee.maxWidth,maxHeight:ee.maxHeight}:{},...pe}},[j,S,N,ue,v,ee]),{zIndexBase:G,zIndexPopup:ge,zIndexOverlay:ce}=t.useMemo(()=>{let pe=typeof(N==null?void 0:N.zIndex)=="number"?N.zIndex:1e3;return pe===1e3&&T.current&&(pe=Ls(T.current)),{zIndexBase:Math.max(2,pe),zIndexPopup:Math.max(3,pe+1),zIndexOverlay:Math.max(1,pe-1)}},[N==null?void 0:N.zIndex,r,Z,T.current]);if(!Z)return null;const ye=u.jsxs("div",{className:re,ref:T,style:{zIndex:G,position:typeof document<"u"&&D!==document.body?"absolute":"fixed"},onKeyDown:Ce,children:[u.jsxs(Ot,{ref:pe=>{L.current=pe==null?void 0:pe.element},open:r,position:A,zIndex:ge,relateTo:D,onOpen:me,onClose:x,className:ae,animation:{show:{name:Q(y.effect,!0),duration:y.effect==="None"?0:y.duration,delay:y.delay,timingFunction:"ease-out"},hide:{name:Q(y.effect,!1),duration:y.effect==="None"?0:y.duration,delay:y.delay,timingFunction:"ease-in"}},style:U,role:"dialog",id:b,...z&&{"aria-describedby":`${b}_dialog-content`},...e&&{"aria-labelledby":`${b}_dialog-header`},...!e&&{"aria-label":"Dialog"},"aria-modal":i?"true":"false",tabIndex:-1,onKeyDown:ve,...M,children:[(e||E)&&u.jsxs("div",{className:"sf-dlg-header-content",id:`${b}_dialog-header`,children:[E&&Se(),e&&u.jsx("div",{className:"sf-dlg-header sf-ellipsis",id:`${b}_title`,children:e})]}),u.jsx("div",{className:"sf-dlg-content",id:`${b}_dialog-content`,children:z}),s&&u.jsx("div",{className:"sf-dlg-footer-content sf-content-end",children:s}),v&&!S&&F(u.jsx(Po,{fill:"currentColor"}))]}),i&&u.jsx("div",{className:"sf-dlg-overlay",style:{zIndex:ce},onClick:le,role:"presentation"})]}),Ie=D&&D instanceof HTMLElement?D:typeof document<"u"?document.body:void 0;return Ft.createPortal(ye,Ie)});Tn.displayName="Dialog";t.memo(Tn);const Zt=o=>o?o.getHours()*3600+o.getMinutes()*60+o.getSeconds():-1,Fs=(o,n)=>o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDate()===n.getDate(),Bs=(o,n,r)=>{if(!n&&!r)return!0;const e=Zt(o),s=!!n,i=!!r,l=s?Zt(n):-1,c=i?Zt(r):-1;return s&&i?Fs(n,r)?l===c?e===l:l>c?!1:e>=l&&e<=c:l===c?e===l:l>c?e>=l||e<=c:e>=l&&e<=c:s?e>=l:i?e<=c:!0},Fi=(o,n,r)=>!n&&!r?o:o.filter(e=>Bs(e,n??null,r??null)),Bi=(o,n,r)=>{const e=!!n,s=!!r;if(!e&&!s)return o;const i=Zt(o),l=e?Zt(n):-1,c=s?Zt(r):Number.MAX_SAFE_INTEGER;if(e&&s&&Fs(n,r)&&l>c)return null;if(e&&i<l){const f=n,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(s&&i>c){const f=r,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(e&&s&&l>c&&i>c&&i<l){const f=l-i,d=i-c,h=f<=d?n:r,g=new Date(o);return g.setHours(h.getHours(),h.getMinutes(),h.getSeconds(),0),g}return o},Us=t.forwardRef((o,n)=>{const{times:r,selected:e,onSelect:s,formatter:i,itemTemplate:l,idBase:c,listLabel:f="Time options",ariaHidden:d=!1,className:h="sf-timepicker-list",sizeClass:g="",isOpen:m=!1,dir:E="ltr"}=o,a=t.useRef(null),C=t.useRef([]),v=t.useRef(!1),[R,j]=t.useState(null),y=r.length,D=t.useCallback(K=>i?i(K):K.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),[i]),S=t.useCallback(()=>e?r.findIndex(K=>K.getHours()===e.getHours()&&K.getMinutes()===e.getMinutes()):-1,[r,e]),k=t.useCallback(K=>{if(K==null||K<0)return;const O=C.current[K],L=a.current;if(!O||!L)return;const V=O.offsetTop,ee=O.offsetHeight||32,de=L.clientHeight||0,F=Math.max(0,V-Math.max(0,(de-ee)/2));L.scrollTop=F},[]),z=t.useCallback(()=>{const K=S(),O=K>=0?K:r.length?0:null;if(O==null||O<0)return;const L=C.current[O],V=a.current;if(!L||!V)return;const ee=L.offsetTop,de=L.offsetHeight||32,F=Math.max(0,ee-Math.max(0,(V.clientHeight-de)/2));V.scrollTop=F,j(O)},[S,r.length]);t.useEffect(()=>{m&&!v.current&&(v.current=!0,z()),m||(v.current=!1,j(null))},[m,z]);const N=t.useCallback(()=>{if(!y)return;const K=R!=null&&R>=0&&R<y?R:S(),O=K<0?0:(K+1)%y;j(O),k(O)},[y,R,S,k]),b=t.useCallback(()=>{if(!y)return;const K=R!=null&&R>=0&&R<y?R:S(),O=K<0?y-1:(K-1+y)%y;j(O),k(O)},[y,R,S,k]),M=t.useCallback(()=>{y&&(j(0),k(0))},[y,k]),T=t.useCallback(()=>{y&&(j(y-1),k(y-1))},[y,k]),H=t.useCallback(()=>{if(!y)return;const K=R!=null&&R>=0&&R<y?R:S();K==null||K<0||s(r[K])},[y,R,S,s,r]),w=t.useCallback(K=>{switch(K.key){case"ArrowDown":K.preventDefault(),N();break;case"ArrowUp":K.preventDefault(),b();break;case"Home":K.preventDefault(),M();break;case"End":K.preventDefault(),T();break;case"Enter":K.preventDefault(),H();break}},[N,b,M,T,H]);t.useImperativeHandle(n,()=>({ensureSelectedVisible:z,selectFocused:H,focusNext:N,focusPrev:b,focusFirst:M,focusLast:T,getFocusedIndex:()=>R,handleKeyDown:K=>w(K)}),[z,H,N,b,M,T,R,w]);const I=`${c}_options`,Y=t.useMemo(()=>R!=null&&R>=0&&R<y?`${c}_option_${R}`:void 0,[c,R,y]),Z=[h,g,"sf-ul",E==="rtl"?"sf-rtl":""].filter(Boolean).join(" "),ue=y===0;return u.jsx("ul",{ref:a,className:Z,role:"listbox","aria-label":f,"aria-activedescendant":Y,"aria-hidden":d,id:I,tabIndex:0,onMouseDown:K=>K.preventDefault(),onKeyDown:w,children:ue?u.jsx("li",{className:"sf-timepicker-item sf-timepicker-empty",role:"note",tabIndex:-1,children:"No available times"}):r.map((K,O)=>{const L=D(K),V=!!(e&&K.getHours()===e.getHours()&&K.getMinutes()===e.getMinutes()),ee=R===O,de=l?l(K,V,ee,O):L;return u.jsx("li",{ref:F=>{C.current[O]=F},className:["sf-timepicker-item",V?"sf-active":"",ee?"sf-focus":""].filter(Boolean).join(" "),role:"option","data-value":L,id:`${c}_option_${O}`,"aria-selected":V,onClick:F=>s(K,F),onFocus:()=>j(O),onBlur:()=>j(null),tabIndex:0,children:de},O)})})});Us.displayName="TimeList";function Ui(o){const{step:n,minTime:r,maxTime:e,locale:s,timeFormat:i}=o,[l,c]=t.useState([]),f=t.useRef(null);t.useEffect(()=>{const C=[],v=new Date;v.setHours(0,0,0,0);const R=new Date;R.setHours(23,59,59,999);const j=new Date(v);for(;j<=R;)C.push(new Date(j)),j.setMinutes(j.getMinutes()+n);c(C)},[n]);const d=t.useMemo(()=>Fi(l,r,e),[l,r,e]),h=t.useCallback(C=>!C||isNaN(C.getTime())?"":ut(C,{format:i||"h:mm a",type:"time",locale:s||"en-US"}),[s,i]),g=t.useCallback((C,v=!1)=>{if(!C||!C.trim())return null;const R=C.replace(/(am|pm|Am|aM|pM|Pm)/g,y=>y.toUpperCase()).trim(),j=[i,"h:mm a","h:mm:ss a","HH:mm","HH:mm:ss"].filter(Boolean);for(const y of j){const D=Mo(R,{format:y,type:"time",locale:s||"en-US"});if(D&&!isNaN(D.getTime())&&(!v||ut(D,{format:y,type:"time",locale:s||"en-US"}).trim()===R))return D}if(!v){const D=new Date().toLocaleDateString(s||"en-US"),S=new Date(`${D} ${R}`);if(!isNaN(S.getTime()))return S}return null},[s,i]),m=t.useCallback(C=>!C||isNaN(C.getTime())?!1:Bs(C,r||null,e||null),[r,e]),E=t.useCallback(()=>{var C,v;(v=(C=f.current)==null?void 0:C.ensureSelectedVisible)==null||v.call(C)},[]),a=t.useCallback((C,v)=>{v&&f.current&&typeof f.current.handleKeyDown=="function"&&f.current.handleKeyDown(C)},[]);return{displayedTimes:d,formatTime:h,parseTime:g,isValidTime:m,timeListRef:f,ensureSelectedVisible:E,forwardListKeyDown:a}}const gr=t.forwardRef((o,n)=>{const{value:r,id:e=`timepicker_${t.useId()}`,defaultValue:s,format:i="h:mm a",minTime:l,maxTime:c,step:f=30,placeholder:d="Choose a time",variant:h=Ge.Standard,size:g=Vt.Medium,readOnly:m=!1,disabled:E=!1,itemTemplate:a,clearButton:C=!0,className:v="",zIndex:R=1e3,strictMode:j=!1,open:y,pickerIcon:D=!0,editable:S=!0,fullScreenMode:k=!1,pickerVariant:z=un.Auto,openOnFocus:N=!1,required:b=!1,valid:M,validationMessage:T="",validityStyles:H=!0,labelMode:w="Never",onChange:I,onOpen:Y,onClose:Z,...ue}=o,[K,O]=t.useState(r??s??null),[L,V]=t.useState(!1),ee=t.useRef(null),de=t.useRef(null),F=t.useRef(null),q=t.useRef(null),{dir:te,locale:ne}=$e(),oe=r!==void 0,Ce=oe?r||null:K,ve=z===un.Popup||z===un.Auto&&Ae.isDevice,me=z===un.Inline||z===un.Auto&&!Ae.isDevice,{displayedTimes:x,formatTime:B,parseTime:le,isValidTime:se,timeListRef:Se,ensureSelectedVisible:Q,forwardListKeyDown:ae}=Ui({step:f,minTime:l,maxTime:c,locale:ne,timeFormat:i}),fe=t.useCallback((Ee,Oe)=>{oe||O(Ee),I&&I({value:Ee,event:Oe})},[oe,I,b,M]),A=Ho({locale:ne,inputRef:de,placeholder:d,placeholderKey:"timepicker",disabled:E,readOnly:m,openOnFocus:N,strictMode:j,required:b,valid:M,validationMessage:T,value:Ce,formatValue:B,parseInput:Ee=>le(Ee,!1),isValid:Ee=>se(Ee),commitValue:fe,onOpen:()=>{U()}}),{isOpen:re,showPopup:U,hidePopup:G,togglePopup:ge,zIndexPopup:ce}=jo({open:y,defaultOpen:!1,disabled:E,readOnly:m,onOpen:Y,onClose:Z,containerRef:ee,contentRefs:[F],extraInsideRefs:[q],inputRef:de,baseZIndex:R}),ye=t.useCallback((Ee,Oe)=>{oe||A.setInputValue(B(Ee)),fe(Ee,Oe),G()},[B,fe,G,oe,A]),Ie=t.useCallback(()=>{Ce?(A.setInputValue(B(Ce)),A.setIsInputValid(!0)):(A.setInputValue(""),A.setIsInputValid(!b))},[j,Ce,B,b,fe,A]),pe=t.useCallback((Ee,Oe)=>{const Pe=Bi(Ee,l??null,c??null);Pe?(A.setInputValue(B(Pe)),fe(Pe,Oe),A.setIsInputValid(!0)):(A.setInputValue(""),fe(null,Oe),A.setIsInputValid(!b))},[j,l,c,b,B,fe,A]),Re=t.useCallback(Ee=>{const Oe=A.inputValue;if(Oe.trim()===""){A.inputValue!==""&&A.setInputValue(""),j&&b?Ce?(A.setInputValue(B(Ce)),A.setIsInputValid(!0)):A.setIsInputValid(!b):(fe(null,Ee),A.setIsInputValid(!b));return}if(j){const Ye=le(Oe,!1);if(Ye===null){Ie();return}if(se(Ye)){const Tt=B(Ye);A.setInputValue(Tt),fe(Ye,Ee),A.setIsInputValid(!0)}else pe(Ye,Ee);return}const Pe=le(Oe,!0);Pe&&se(Pe)?(fe(Pe,Ee),A.setIsInputValid(!0)):A.setIsInputValid(!1)},[A,j,b,Ce,le,se,B,fe,Ie,pe]),_=t.useCallback(Ee=>{switch(Ee.key){case"ArrowDown":(Ee.altKey||Ee.metaKey)&&(Ee.preventDefault(),U());break;case"ArrowUp":(Ee.altKey||Ee.metaKey)&&(Ee.preventDefault(),G());break;case"Enter":re||(Ee.preventDefault(),Re(Ee));break}ae(Ee,re)},[re,U,G,Re,ae]),X=t.useCallback(Ee=>{if(!Ee.trim())return!b;if(/^\d{1,2}$/.test(Ee)){const Pe=parseInt(Ee,10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:$/.test(Ee)){const Pe=parseInt(Ee.split(":")[0],10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:\d{1,2}$/.test(Ee)){const[Pe,Ye]=Ee.split(":"),He=parseInt(Pe,10),Tt=parseInt(Ye,10);return He>=0&&He<=23&&Tt>=0&&Tt<=59}const Oe=le(Ee);return Oe!==null&&se(Oe)},[le,se,b]),J=t.useCallback(Ee=>{const Oe=Ee.target.value;A.setInputValue(Oe),M===void 0&&A.setIsInputValid(X(Oe))},[M,X]);t.useEffect(()=>{Lt("timepicker")},[]);const he={placeholder:d,format:i,labelMode:w,disabled:E,readOnly:m,editable:S,openOnFocus:N,open:y,clearButton:C,zIndex:R,strictMode:j,value:Ce,minTime:l,maxTime:c,step:f,required:b,valid:M,validationMessage:T,validityStyles:H};t.useImperativeHandle(n,()=>({...he,element:ee.current}),[he]);const xe=t.useCallback(()=>{var Ee;ge(),V(!0),(Ee=de.current)==null||Ee.focus()},[ge]),we=t.useCallback(Ee=>{Ee.preventDefault(),A.handleClear(),G()},[A,G]),Le=["sf-input-group sf-control","sf-timepicker",E?"sf-disabled":"",m?"sf-readonly":"",re||A.isFocused?"sf-input-focus":"",w!=="Never"?"sf-float-input":"",te==="rtl"?"sf-rtl":"",g===Vt.Small?"sf-small":g===Vt.Large?"sf-large":"sf-medium",!A.isInputValid&&H?"sf-error":"",h&&h.toLowerCase()!=="standard"?h.toLowerCase()==="outlined"?"sf-outline":`sf-${h.toLowerCase()}`:"",v].filter(Boolean).join(" "),W=g.toLowerCase().substring(0,2),De=t.useMemo(()=>u.jsx(Us,{ref:Se,times:x,selected:Ce,onSelect:(Ee,Oe)=>{ye(Ee,Oe)},formatter:B,itemTemplate:a,idBase:`${e}`,className:"sf-timepicker-list",sizeClass:`sf-timepicker-list-${W}`,isOpen:re,dir:te}),[x,Ce,B,a,re,te,ye,W,e,Se]);return u.jsxs("span",{ref:ee,className:Le,...ue,children:[u.jsx(xs,{ref:de,id:e,className:"sf-timepicker",placeholder:w==="Never"?A.getPlaceholder:"",disabled:E,readOnly:m||!S,onFocus:A.handleInputFocus,onBlur:Ee=>{A.setIsFocused(!1),Re(Ee),G()},value:A.inputValue,onChange:S&&!m&&!E?J:void 0,role:"combobox","aria-haspopup":"listbox",autoComplete:"off","aria-expanded":re,"aria-disabled":E,"aria-controls":re?`${e}_options`:void 0,"aria-label":A.getPlaceholder||"Time picker input",onKeyDown:_,tabIndex:0,required:b}),w!=="Never"&&Nr(w,!1,A.inputValue,d,e),C&&A.inputValue&&(A.isFocused||re)&&u.jsx("span",{className:"sf-clear-icon sf-input-icon","aria-label":"clear time value",role:"button",onMouseDown:we,children:u.jsx(Bn,{})}),u.jsx("span",{className:`sf-input-icon sf-time-icon sf-icons ${L?"sf-active":""}`,"aria-label":"select time",role:"button",onClick:xe,onMouseDown:Ee=>{Ee.preventDefault()},children:D===!0?u.jsx(di,{}):D}),re&&Ft.createPortal(k&&Ae.isDevice?u.jsxs("div",{ref:q,className:"sf-timepicker-mob sf-control",style:{zIndex:R},role:"dialog","aria-modal":"true","aria-label":"Time selection",children:[u.jsxs("div",{className:"sf-timepicker-header",children:[u.jsx(Qe,{variant:Ge.Standard,onClick:G,children:u.jsx(Bn,{})}),u.jsx("span",{className:"sf-timepicker-title",children:"Select Time"})]}),De]}):u.jsxs(u.Fragment,{children:[ve&&u.jsxs("div",{className:"sf-timepicker-popup-wrap sf-picker-popup",style:{zIndex:ce.toString()},children:[u.jsx("div",{className:"sf-overlay"}),u.jsx(Ot,{ref:F,className:"sf-timepicker sf-popup sf-content-center",open:re,zIndex:ce,onOpen:()=>{Q()},relateTo:document.body,style:{top:"0px",left:"0px",position:"relative"},position:{X:"center",Y:"center"},collision:{X:st.Fit,Y:st.Fit},"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:De})]}),me&&u.jsx(Ot,{ref:F,className:"sf-timepicker sf-popup",open:re,zIndex:ce,onOpen:()=>{Q()},relateTo:ee.current,position:{X:"left",Y:"bottom"},collision:{X:st.Flip,Y:st.Flip},offsetY:4,"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:De})]}),document.body)]})});gr.displayName="TimePicker";const p={ALL_DAY_APPOINTMENT_SECTION:"sf-all-day-appointment-section",ALL_DAY_APPOINTMENT:"sf-all-day-appointment",ALL_DAY_CONTAINER:"sf-all-day-container",ALL_DAY_CELL:"sf-all-day-cell",ALL_DAY_ROW:"sf-all-day-row",ALL_DAY_TIMEZONE_ROW:"sf-all-day-time-zone-row",APPOINTMENT:"sf-appointment",APPOINTMENT_ACTIVE:"sf-appointment-active",APPOINTMENT_COLLAPSE:"sf-appointment-collapse",APPOINTMENT_DETAILS:"sf-appointment-details",APPOINTMENT_EXPAND:"sf-appointment-expand",APPOINTMENT_WRAPPER:"sf-appointment-wrapper",BOTTOM_RESIZE_HANDLER:"sf-bottom-handler",BLOCK_INDICATOR:"sf-block-indicator",BLOCK_APPOINTMENT:"sf-block-appointment",CALENDAR_POPUP_CONTAINER:"sf-calendar-popup-container",CANCEL_EVENT:"sf-cancel-event",CELL_POPUP:"sf-cell-popup",CELL_TIME:"sf-cell-time",CONTENT_RIGHT:"sf-content-end sf-content-right",CONTENT_SECTION:"sf-content-section",CONTENT_TABLE:"sf-content-table",CONTENT_WRAP:"sf-content-wrap",CONTROL:"sf-control",CURRENT_TIME:"sf-current-time",CURRENT_TIMELINE:"sf-current-timeline",DATE_HEADER:"sf-date-header",DATE_HEADER_CONTAINER:"sf-date-header-container",DATEPICKER_BUTTON:"sf-datepicker-button",DAY_CLONE_CONTAINER:"sf-day-clone-container",DAY_VIEW:"sf-day-view",DAY_WRAPPER:"sf-day-wrapper",DIALOG:"sf-scheduler-dialog",DIALOG_CONTENT:"sf-dialog-content",DELETE_EVENT:"sf-delete-event",DESCRIPTION:"sf-description",DESCRIPTION_CONTAINER:"sf-description-container",DESCRIPTION_ROW:"sf-description-row",DISPLAY_FLEX:"sf-display-flex",DOWN_ARROW_ICON:"sf-down-icon",DRAGGING:"sf-dragging",DRAG_CLONE:"sf-drag-clone",SCHEDULER_CURSOR_MOVE:"sf-scheduler-cursor-move",SCHEDULER_CURSOR_NOT_ALLOWED:"sf-cursor-not-allowed",SCHEDULER_CURSOR_DEFAULT:"sf-cursor-default",EXTERNAL_DRAG_CLONE:"sf-external-drag-clone",EVENT_RESIZE_CLASS:"sf-event-resize",EVENT_CLONE:"sf-event-clone",EDIT_EVENT:"sf-edit-event",EDITOR_FIELDS_ROW:"sf-editor-fields-row",EDITOR_FIELD_CONTAINER:"sf-editor-field-container",ELLIPSIS:"sf-ellipsis",END_DATE_CONTAINER:"sf-end-date-container",END_TIME_CONTAINER:"sf-end-time-container",END_ROW:"sf-end-row",EVENT_ALLDAY:"sf-event-all-day",EVENT_CONTAINER:"sf-event-container",EVENT_DESCRIPTION:"sf-event-description",EVENT_END_DATE:"sf-event-end-date",EVENT_END_TIME:"sf-event-end-time",EVENT_LOCATION:"sf-event-location",EVENT_POPUP:"sf-event-popup",EVENT_START_DATE:"sf-event-start-date",EVENT_START_TIME:"sf-event-start-time",EVENT_SUBJECT:"sf-event-subject",EVENT_TIME:"sf-event-time",FORM_CONTAINER:"sf-form-container",HORIZONTAL_RESIZE_INNER:"sf-horizontal-resize",HEADER_CELLS:"sf-header-cells",HEADER_DATE:"sf-header-date",HEADER_DAY:"sf-header-day",HEADER_ROW:"sf-header-row",HEADER_SECTION:"sf-header-section",ICONS:"sf-icons",INDICATOR:"sf-indicator",LEFT_ARROW_ICON:"sf-left-icon",LEFT_INDENT:"sf-left-indent",LINK:"sf-link",LOCATION:"sf-location",LOCATION_CONTAINER:"sf-location-container",LEFT_RESIZE_HANDLER:"sf-left-handler",MAIN_SCROLL_CONTAINER:"sf-main-scroll-container",MONTH_VIEW:"sf-month-view",MONTH_EVENT:"sf-month-event",MORE_EVENT_CONTENT:"sf-more-event-content",MORE_EVENT_DATE_HEADER:"sf-more-event-date-header",MORE_EVENT_HEADER:"sf-more-event-header",MORE_EVENT_POPUP:"sf-more-event-popup",MORE_INDICATOR:"sf-more-indicator",MORE_POPUP_WRAPPER:"sf-more-popup-wrapper",MOB_RESIZE_DOT:"sf-mob-resize-dot",MOBILE_POPUP:"sf-mobile-popup",NEXT_ICON:"sf-next-icon",NO_POINTER:"sf-no-pointer",POPUP:"sf-popup",POPUP_CELL_HEADER:"sf-popup-cell-header",POPUP_CLOSE:"sf-popup-close",POPUP_CONTENT:"sf-quickinfo-popup-content",POPUP_CELL_SUBJECT:"sf-popup-cell-subject",POPUP_DESCRIPTION_TEXT:"sf-popup-description-text",POPUP_EVENT_SUBJECT:"sf-popup-event-subject",POPUP_FOOTER:"sf-quickinfo-popup-footer",POPUP_HEADER:"sf-quickinfo-popup-header",POPUP_HEADER_WRAP:"sf-header-icon-wrapper",POPUP_INPUT_WRAP:"sf-input-wrap",POPUP_LOCATION_TEXT:"sf-popup-location-text",POPUP_MORE_DETAILS:"sf-popup-more-details",POPUP_TIME_TEXT:"sf-popup-time-text",POPUP_WRAPPER:"sf-quickinfo-popup-wrapper",POSITION_ABSOLUTE:"sf-pos-absolute",PREVIOUS_ICON:"sf-previous-icon",PREVIOUS_TIMELINE:"sf-previous-timeline",QUICK_INFO_WRAPPER:"sf-quick-info-wrapper",RIGHT_ARROW_ICON:"sf-right-icon",RIGHT_SECTION:"sf-right-section",EVENT_RECURRENCE_ICON_CLASS:"sf-event-recurrence-icon",EVENT_RECURRENCE_EDIT_ICON_CLASS:"sf-event-recurrence-edit-icon",ROUND:"sf-round",RTL:"sf-rtl",RIGHT_RESIZE_HANDLER:"sf-right-handler",RESIZING:"sf-resizing",RESIZE_CONTAINER:"sf-resize-container",SAVE_EVENT:"sf-save-event",SCHEDULER:"sf-scheduler",SCHEDULER_CALENDAR:"sf-scheduler-calendar",SCHEDULER_TABLE:"sf-scheduler-table",SCHEDULER_TOOLBAR_CONTAINER:"sf-scheduler-toolbar-container",SCHEDULER_TOOLTIP:"sf-scheduler-tooltip",SCHEDULER_TOOLTIP_SUBJECT:"sf-scheduler-tooltip-subject",SCHEDULER_TOOLTIP_TEXT:"sf-scheduler-tooltip-text",SELECTED_CELL:"sf-selected-cell",START_DATE_CONTAINER:"sf-start-date-container",START_TIME_CONTAINER:"sf-start-time-container",START_ROW:"sf-start-row",STICKY_HEADER:"sf-sticky-header",SUBJECT:"sf-subject",SUBJECT_CONTAINER:"sf-subject-container",TABLE_CONTAINER:"sf-table-container",TABLE_WRAP:"sf-table-wrap",TEXT_CENTER:"sf-text-center",TIME:"sf-time",TIME_CELLS_WRAP:"sf-time-cells-wrap",TIME_SLOT_CLONE_CONTAINER:"sf-time-slot-clone-container",TIME_SLOTS:"sf-time-slots",TITLE_LOCATION_ROW:"sf-title-location-row",TODAY:"sf-today",TODAY_BUTTON:"sf-today-button",TOP_RESIZE_HANDLER:"sf-top-handler",UP_ARROW_ICON:"sf-up-icon",VERTICAL_RESIZE_INNER:"sf-vertical-resize",VERTICAL_VIEW:"sf-vertical-view",VIEW_BUTTON:"sf-view-button",WEEK_NUMBER:"sf-week-number",WEEK_NUMBER_WRAPPER:"sf-week-number-wrapper",WEEK_VIEW:"sf-week-view",WORK_CELLS_CONTAINER:"sf-work-cells-container",WORK_CELLS_ROW:"sf-work-cells-row",WORK_WEEK_VIEW:"sf-work-week-view",WORK_CELLS:"sf-work-cells",WORK_DAYS:"sf-work-days"},zi=o=>{const{className:n,selectedDate:r,view:e,onSelectedDateChange:s,onViewChange:i,viewComponents:l,defaultSelectedDate:c,defaultView:f}=o,d=o.selectedDate!==void 0,h=o.view!==void 0,g=t.useMemo(()=>{const te=d?r:c,ne=te?new Date(te):new Date;return isNaN(ne.getTime())?new Date:ne},[r,c,d]),m=t.useMemo(()=>h?e:f,[h,e,f]),[E,a]=t.useState(g),[C,v]=t.useState(m),R=t.useRef(m),[j,y]=t.useState([]),[D,S]=t.useState(!1),[k,z]=t.useState(Wn.Month);t.useEffect(()=>{d&&a(g)},[g,d]),t.useEffect(()=>{h&&v(m)},[m,h]);const N=t.useCallback(te=>{h||v(te),i&&i({value:te})},[i,h]);t.useEffect(()=>{R.current!==e&&e!==C&&e&&l.some(oe=>oe.name===e)&&v(e),R.current=e||m},[e,C,l,m]),t.useEffect(()=>{if(C==="Week"&&l.length>0&&!l.some(ne=>ne.viewType==="Week")){N(l[0].name);return}},[C,l,N]),t.useEffect(()=>{const te=ft.findViewByNameOrType(l,C);if(te){const ne=te.viewType==="Month"?Wn.Year:Wn.Month;z(ne)}},[l,C]);const{locale:b,dir:M}=$e(),T=t.useMemo(()=>{if(!j||j.length===0)return"";const te=ft.findViewByNameOrType(l,C);if(!te)return"";const ne=te.component.props;return te.viewType==="Month"?$.getMonthRangeText(E,te.interval,ne.displayDate,ne.numberOfWeeks,ne.dateFormat||o.dateFormat,j,b):$.formatDateRange(b,j[0],j[j.length-1])},[j,l,C,E,b,o.dateFormat]),H=te=>{d||a(te),s&&s({value:te})},w=t.useCallback(()=>{const te=[];return l.forEach(ne=>{te.push({viewType:ne.viewType,name:ne.name,displayName:ne.displayName,component:ne.component,interval:ne.interval})}),te},[l]),I=te=>{N(te)},Y=()=>({height:o.height,width:o.width,selectedDate:E,view:C,eventSettings:o.eventSettings,timeScale:o.timeScale,workHours:o.workHours,startHour:o.startHour,endHour:o.endHour,showWeekend:o.showWeekend,firstDayOfWeek:o.firstDayOfWeek,workDays:o.workDays,showTimeIndicator:o.showTimeIndicator,dateFormat:o.dateFormat,timeFormat:o.timeFormat,showWeekNumber:o.showWeekNumber,eventOverlap:o.eventOverlap,rowAutoHeight:o.rowAutoHeight,readOnly:o.readOnly,cell:o.cell,dateHeader:o.dateHeader,headerIndent:o.headerIndent,quickInfo:o.quickInfo,editor:o.editor,onEditorSubmit:o.onEditorSubmit,showQuickInfoPopup:o.showQuickInfoPopup,header:o.header,keyboardNavigation:o.keyboardNavigation,onDataRequest:o.onDataRequest,onSelectedDateChange:te=>H(te.value),onViewChange:te=>N(te.value),onCellClick:o.onCellClick,onCellDoubleClick:o.onCellDoubleClick,onEventClick:o.onEventClick,onEventDoubleClick:o.onEventDoubleClick,onDataChangeStart:o.onDataChangeStart,onDataChangeComplete:o.onDataChangeComplete,eventDrag:o.eventDrag,eventResize:o.eventResize,onResizeStart:o.onResizeStart,onResizing:o.onResizing,onResizeStop:o.onResizeStop,onDragStart:o.onDragStart,onDrag:o.onDrag,onDragStop:o.onDragStop,onMoreEventsClick:o.onMoreEventsClick,enableRecurrenceValidation:o.enableRecurrenceValidation,weekRule:o.weekRule}),ue=(()=>{var ve,me,x,B;const te=ft.findViewByNameOrType(l,C);if(!te)return{};const ne=te.component.props||{},oe=Ms(Sr,Y());typeof oe.eventDrag=="boolean"?oe.eventDrag={enable:oe.eventDrag,externalDragAndDrop:!1}:oe.eventDrag={...oe.eventDrag,enable:oe.eventDrag.enable,externalDragAndDrop:oe.eventDrag.externalDragAndDrop??!1},typeof oe.eventResize=="boolean"?oe.eventResize={enable:oe.eventResize,startResizable:!0,endResizable:!0}:oe.eventResize={...oe.eventResize,enable:oe.eventResize.enable,startResizable:oe.eventResize.startResizable??!0,endResizable:oe.eventResize.endResizable??!0};const Ce={height:oe.height,width:oe.width,selectedDate:$.setValidDate(oe.selectedDate),view:oe.view,eventSettings:oe.eventSettings,workHours:oe.workHours,showTimeIndicator:oe.showTimeIndicator,rowAutoHeight:oe.rowAutoHeight,eventTemplate:ne.eventTemplate,readOnly:ne.readOnly??oe.readOnly,header:oe.header,showQuickInfoPopup:oe.showQuickInfoPopup,displayDate:$.setValidDate(ne.displayDate),numberOfWeeks:ne.numberOfWeeks,weekDay:ne.weekDay,showTrailingAndLeadingDates:ne.showTrailingAndLeadingDates,cellHeader:ne.cellHeader,interval:ne.interval??te.interval,displayName:ne.displayName??te.displayName,maxEventsPerRow:ne.maxEventsPerRow,dateHeader:ne.dateHeader??oe.dateHeader,headerIndent:ne.headerIndent??oe.headerIndent,cell:ne.cell??oe.cell,timeScale:ne.timeScale??oe.timeScale,startHour:ne.startHour??oe.startHour,endHour:ne.endHour??oe.endHour,showWeekend:ne.showWeekend??oe.showWeekend,firstDayOfWeek:$.setValidFirstDayOfWeek(ne.firstDayOfWeek,oe.firstDayOfWeek),workDays:ne.workDays??oe.workDays,dateFormat:ne.dateFormat??oe.dateFormat,timeFormat:ne.timeFormat??oe.timeFormat,showWeekNumber:ne.showWeekNumber??oe.showWeekNumber,eventOverlap:ne.eventOverlap??oe.eventOverlap,quickInfo:ne.quickInfo??oe.quickInfo,editor:ne.editor??oe.editor,onEditorSubmit:oe.onEditorSubmit,onDataRequest:oe.onDataRequest,onSelectedDateChange:oe.onSelectedDateChange,onViewChange:oe.onViewChange,onCellClick:oe.onCellClick,onCellDoubleClick:oe.onCellDoubleClick,onEventClick:oe.onEventClick,onEventDoubleClick:oe.onEventDoubleClick,onDataChangeStart:oe.onDataChangeStart,onDataChangeComplete:oe.onDataChangeComplete,keyboardNavigation:oe.keyboardNavigation,eventDrag:oe.eventDrag,eventResize:oe.eventResize,onResizeStart:oe.onResizeStart,onResizing:oe.onResizing,onResizeStop:oe.onResizeStop,onDragStart:oe.onDragStart,onDrag:oe.onDrag,onDragStop:oe.onDragStop,onMoreEventsClick:oe.onMoreEventsClick,enableRecurrenceValidation:oe.enableRecurrenceValidation,handleCurrentViewChange:N,getAvailableViews:w,weekRule:oe.weekRule};return(Ce.startHour!=="00:00"||Ce.endHour!=="24:00")&&(Ce.startHourTuple=[Number((ve=Ce.startHour)==null?void 0:ve.split(":")[0]),Number((me=Ce.startHour)==null?void 0:me.split(":")[1])],Ce.endHourTuple=[Number((x=Ce.endHour)==null?void 0:x.split(":")[0]),Number((B=Ce.endHour)==null?void 0:B.split(":")[1])]),Ce})();t.useEffect(()=>{const te=ft.findViewByNameOrType(l,C);if(te){const ne=$.getRenderDates(te.viewType,E,ue);y(ne)}},[E,C,l]),t.useEffect(()=>{if(!ft.findViewByNameOrType(l,C)){const ne=w();if(ne.length>0){const oe=ne.find(Ce=>Ce.viewType==="Week")||ne[0];N(oe.name)}}},[C,l,N]);const K=()=>{const te=ft.findViewByNameOrType(l,C);return te?te.component:null},O=te=>{const ne=ft.findViewByNameOrType(l,C);if(!ne)return;const oe={currentDate:E,viewType:ne.viewType,interval:ne.interval,showWeekend:ue.showWeekend,workDays:ue.workDays},Ce=te==="next"?ir.navigateToNext(oe):ir.navigateToPrevious(oe);H(Ce)},L=()=>{O("next")},V=()=>{O("previous")},ee=()=>{const te=ir.navigateToToday();H(te)},de=t.useCallback(te=>{if(te.value){const ne=Array.isArray(te.value)?te.value[0]:te.value;H&&H(ne),S(!1)}},[H]),F=()=>{S(!D)};return{classNames:t.useMemo(()=>{const te=[p.CONTROL,p.SCHEDULER];return M==="rtl"&&te.push(p.RTL),n&&te.push(n),te.join(" ")},[M,n]),selectedDate:E,view:C,renderDates:j,activeViewProps:ue,dateRangeText:T,showCalendar:D,calendarView:k,handleSelectedDateChange:H,handleCurrentViewChange:N,getAvailableViews:w,handleViewButtonClick:I,handlePreviousClick:V,handleNextClick:L,handleTodayClick:ee,handleDateDropdownClick:F,handleCalendarChange:de,renderCurrentView:K}},kr=(o,n,r)=>{t.useEffect(()=>{const e=s=>{var i;n&&o.current&&!o.current.contains(s.target)&&!((i=s.target)!=null&&i.closest(`.${p.POPUP}`))&&r()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n,o])},Yi="sf-hscroll",Mn="sf-rtl",zs="sf-overlay",Ki="sf-hscroll-bar",Xi="sf-hscroll-content",Ys="sf-hscroll-arrow",Ks="sf-nav-right-arrow",Xs="sf-nav-left-arrow",Tr="sf-hscroll-nav",qi="sf-scroll-right-nav",Gi="sf-scroll-left-nav",Zi="sf-scroll-device",qs=t.memo(t.forwardRef((o,n)=>{const{className:r="",scrollStep:e=void 0,isDisabled:s=!1,children:i,...l}=o,c=t.useRef(e),f=t.useRef(Fn("hscroll")),[d,h]=t.useState(!0),[g,m]=t.useState(!1),{dir:E}=$e(),a=t.useRef(null),C=t.useRef(null),v=t.useRef(null),R=t.useRef(null),j=t.useRef(!1),y=t.useRef(null),D={scrollStep:e,isDisabled:s},S=t.useMemo(()=>({name:Ae.info.name,isDevice:Ae.isDevice,isMozilla:Ae.info.name==="mozilla"}),[]);t.useEffect(()=>{(()=>{var L;typeof e!="number"||e<0?c.current=((L=C.current)==null?void 0:L.offsetWidth)||void 0:c.current=e})()},[e]);const k=t.useCallback((O,L)=>{C.current&&(L==="add"?C.current.scrollLeft+=O:C.current.scrollLeft-=O,E==="rtl"&&C.current.scrollLeft>0&&(C.current.scrollLeft=0))},[E]),z=t.useCallback((O,L,V)=>{if(V){k(O,L);return}const de=()=>{var te;let F=O,q=10;(te=a.current)!=null&&te.classList.contains(Mn)&&S.isMozilla&&(F=-O,q=-10),F<10?cancelAnimationFrame(q):(k(q,L),O-=q,requestAnimationFrame(de))};de()},[S.isMozilla,k]),N=t.useCallback((O,L,V)=>{const ee=a.current;let de=L.classList;if(!de.contains(Tr)){const F=L.closest("."+Tr);F&&(L=F)}de=L.querySelector(`.${Ys}`).classList,ee.classList.contains(Mn)&&S.isMozilla&&(O=-O),!ee.classList.contains(Mn)||S.isMozilla?de.contains(Ks)?z(O,"add",V):z(O,"",V):de.contains(Xs)?z(O,"add",V):z(O,"",V)},[S.isMozilla,z]),b=t.useCallback(O=>{if(O){const L=O.originalEvent.target,V=10,ee=()=>{N(V,L,!0)};R.current=window.setInterval(()=>{ee()},50)}},[N]),M=t.useCallback(O=>{if(O.key==="Enter"){const L=()=>{j.current=!0,N(10,O.target,!0)};y.current=window.setTimeout(()=>{L()},100)}},[N]),T=t.useCallback(O=>{O.key==="Enter"&&(j.current?j.current=!1:O.target.click(),clearTimeout(y.current))},[]),H=t.useCallback(()=>{clearInterval(R.current)},[]),w=t.useCallback(O=>{N(c.current,O.target,!1)},[N]),I=t.useCallback(O=>{if(O){const L=C.current;let V;typeof O.velocity=="number"&&typeof O.distanceX=="number"&&(O.velocity<=1?V=O.distanceX/(O.velocity*10):V=O.distanceX/O.velocity);let ee=.5;const de=()=>{const F=Math.sin(ee);F<=0?cancelAnimationFrame(F):(O.swipeDirection==="Left"?L.scrollLeft+=V*F:O.swipeDirection==="Right"&&(L.scrollLeft-=V*F),ee-=.5,requestAnimationFrame(de))};de()}},[]),Y=t.useCallback(O=>{if(O){const L=C.current;if(L&&typeof O.distanceX=="number"){const V=O.distanceX;O.scrollDirection==="Left"?L.scrollLeft=L.scrollLeft+V:O.scrollDirection==="Right"&&(L.scrollLeft=L.scrollLeft-V)}}},[]),Z=O=>{const L=O.target,V=L.offsetWidth;let ee=L.scrollLeft;ee<=0&&(ee=-ee),ee===0?(h(!0),m(!1),H()):Math.ceil(V+ee+.1)>=L.scrollWidth?(h(!1),m(!0),H()):(h(!1),m(!1))};t.useImperativeHandle(n,()=>({...D,element:a.current})),t.useEffect(()=>()=>{R.current&&clearInterval(R.current),y.current&&clearTimeout(y.current)},[]);const ue=t.useMemo(()=>({swipe:I,scroll:Y}),[I,Y]);v.current=Bt(a,ue);const K=t.useMemo(()=>["sf-control","sf-lib",Yi,E==="rtl"&&Mn,S.isDevice&&Zi,s&&zs,r].filter(Boolean).join(" "),[r,E,S.isDevice,s]);return u.jsxs("div",{ref:a,id:f.current,className:K,...l,children:[u.jsx(Cr,{direction:"left",id:f.current,isDisabled:s||d,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b}),u.jsx("div",{ref:C,className:`${Ki} sf-display-flex`,style:{overflowX:"hidden"},onScroll:Z,children:u.jsx("div",{className:Xi,children:i})}),u.jsx(Cr,{direction:"right",id:f.current,isDisabled:s||g,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b})]})}));qs.displayName="HScrollComponent";const Cr=t.memo(({direction:o,id:n,isDisabled:r,onKeyPress:e,onKeyUp:s,onMouseUp:i,onClick:l,onTapHold:c})=>{const f=o==="right",d=`sf-${n}_nav ${Tr} ${f?qi:Gi}`,h=`${f?Ks:Xs} ${Ys} sf-icons`,g=t.useRef(null),m=t.useMemo(()=>({tapHold:c,tapHoldThreshold:500}),[c]);return Bt(g,m),u.jsx("div",{ref:g,className:`${d} ${r?zs:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":r?"true":"false",tabIndex:r?-1:0,onKeyDown:e,onKeyUp:s,onMouseUp:i,onTouchEnd:i,onContextMenu:E=>E.preventDefault(),onClick:l,children:u.jsx("div",{className:h,children:f?u.jsx(Is,{}):u.jsx(ks,{})})})});Cr.displayName="NavIcon";const Qi="sf-vscroll",Ji="sf-rtl",Gs="sf-overlay",el="sf-vscroll-bar",tl="sf-vscroll-content",Zs="sf-vscroll-arrow",Qs="sf-nav-up-arrow",Js="sf-nav-down-arrow",Dr="sf-vscroll-nav",nl="sf-scroll-up-nav",rl="sf-scroll-down-nav",sl="sf-scroll-device",eo=t.memo(t.forwardRef((o,n)=>{const{className:r="",scrollStep:e=void 0,isDisabled:s=!1,children:i,...l}=o,c=t.useRef(e),f=t.useRef(Fn("vscroll")),[d,h]=t.useState(!0),[g,m]=t.useState(!1),{dir:E}=$e(),a=t.useRef(null),C=t.useRef(null),v=t.useRef(null),R=t.useRef(null),j=t.useRef(!1),y=t.useRef(null),D=t.useMemo(()=>({isDevice:Ae.isDevice}),[]),S={scrollStep:e,isDisabled:s};t.useEffect(()=>{(()=>{var V;typeof e!="number"||e<0?c.current=((V=C.current)==null?void 0:V.offsetHeight)||void 0:c.current=e})()},[e]);const k=t.useCallback((L,V)=>{C.current&&(V==="add"?C.current.scrollTop+=L:C.current.scrollTop-=L)},[]),z=t.useCallback((L,V,ee)=>{if(ee){k(L,V);return}const F=()=>{L<10?cancelAnimationFrame(10):(k(10,V),L-=10,requestAnimationFrame(F))};F()},[k]),N=t.useCallback((L,V,ee)=>{let de=V.classList;if(!de.contains(Dr)){const q=V.closest("."+Dr);q&&(V=q)}const F=V.querySelector(`.${Zs}`);F&&(de=F.classList),de.contains(Js)?z(L,"add",ee):de.contains(Qs)&&z(L,"",ee)},[z]),b=t.useCallback(L=>{if(L){const V=L.originalEvent.target,ee=10,de=()=>{N(ee,V,!0)};R.current=window.setInterval(()=>{de()},50)}},[N]),M=t.useCallback(L=>{if(L.key==="Enter"){const V=()=>{j.current=!0,N(10,L.target,!0)};y.current=window.setTimeout(()=>{V()},100)}},[N]),T=t.useCallback(L=>{L.key==="Enter"&&(j.current?j.current=!1:L.target.click(),y.current&&clearTimeout(y.current))},[]),H=t.useCallback(()=>{clearInterval(R==null?void 0:R.current)},[]),w=t.useCallback(L=>{N(c.current,L.target,!1)},[N,c]),I=t.useCallback(L=>{L.preventDefault(),z(c.current,L.deltaY>0?"add":"",!1)},[z,c]),Y=t.useCallback(L=>{if(L&&C.current){const V=C.current;let ee=0;typeof L.velocity=="number"&&typeof L.distanceY=="number"&&(L.velocity<=1?ee=L.distanceY/(L.velocity*10):ee=L.distanceY/L.velocity);let de=.5;const F=()=>{const q=Math.sin(de);q<=0?cancelAnimationFrame(q):(L.swipeDirection==="Up"?V.scrollTop+=ee*q:L.swipeDirection==="Down"&&(V.scrollTop-=ee*q),de-=.02,requestAnimationFrame(F))};F()}},[]),Z=t.useCallback(L=>{if(L){const V=C.current;if(V&&typeof L.distanceY=="number"){const ee=L.distanceY;L.scrollDirection==="Up"?V.scrollTop=V.scrollTop+ee:L.scrollDirection==="Down"&&(V.scrollTop=V.scrollTop-ee)}}},[]),ue=t.useCallback(L=>{const V=L.target,ee=V.offsetHeight;let de=V.scrollTop;de<=0&&(de=-de),de===0?(h(!0),m(!1),H()):Math.ceil(ee+de+.1)>=V.scrollHeight?(h(!1),m(!0),H()):(h(!1),m(!1))},[H]);t.useImperativeHandle(n,()=>({...S,element:a.current})),t.useEffect(()=>()=>{R.current&&clearInterval(R.current),y.current&&clearTimeout(y.current)},[]);const K=t.useMemo(()=>({scroll:Z,swipe:Y}),[Y,Z]);v.current=Bt(a,K);const O=t.useMemo(()=>["sf-control","sf-lib",Qi,E==="rtl"&&Ji,D.isDevice&&sl,s&&Gs,r].filter(Boolean).join(" "),[r,E,D.isDevice,s]);return u.jsxs("div",{ref:a,id:l.id||f.current,className:O,...l,onWheel:I,children:[u.jsx(vr,{direction:"up",id:f.current,isDisabled:s||d,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b}),u.jsx("div",{ref:C,className:el,tabIndex:-1,style:{overflow:"hidden"},onScroll:ue,children:u.jsx("div",{className:tl,children:i})}),u.jsx(vr,{direction:"down",id:f.current,isDisabled:s||g,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b})]})}));eo.displayName="VScrollComponent";const vr=t.memo(({direction:o,id:n,isDisabled:r,onKeyPress:e,onKeyUp:s,onMouseUp:i,onClick:l,onTapHold:c})=>{const f=o==="down",d=`sf-${n}_nav ${Dr} ${f?rl:nl}`,h=`${f?Js:Qs} ${Zs} sf-icons`,g=t.useRef(null),m=t.useMemo(()=>({tapHold:c,tapHoldThreshold:500}),[c]);return Bt(g,m),u.jsx("div",{ref:g,className:`${d} ${r?Gs:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":r?"true":"false",tabIndex:r?-1:0,onKeyDown:e,onKeyUp:s,onMouseUp:i,onTouchEnd:i,onContextMenu:E=>E.preventDefault(),onClick:l,children:u.jsx("div",{className:h,children:f?u.jsx(Xn,{}):u.jsx($s,{})})})});vr.displayName="NavIcon";const ol="sf-toolbar-items",il="sf-toolbar-multirow-items",to=t.memo(o=>{const{children:n,onOverflowChange:r}=o,e=t.useRef(null);return t.useEffect(()=>{const s=t.Children.count(n);(Be(e.current)||e.current!==s)&&(e.current=t.Children.count(n),r())},[r,n]),u.jsx("div",{className:`${ol} ${il}`,children:n})});to.displayName="ToolbarMultiRow";const Es="sf-toolbar-items",ll="sf-hscroll-bar",al="sf-vscroll-bar",cl="sf-hscroll-content",ul="sf-vscroll-content",no=t.memo(t.forwardRef((o,n)=>{const{toolbarRef:r,orientation:e,scrollStep:s,children:i,className:l,onOverflowChange:c}=o,f=t.useRef(null),d=t.useRef(null),h=t.useRef(null),[g,m]=t.useState(!1),[E,a]=t.useState(s),C=t.useCallback(S=>S.querySelector("."+(e===tt.Vertical?ul:cl)),[e]),v=t.useCallback(()=>{let S=!1;if(r.current&&wr(r.current)){let k=r.current.querySelector(`.${Es}`);k=g?C(k):k;const z=e===tt.Vertical,N=z?r.current.offsetHeight:r.current.offsetWidth;(z?k.scrollHeight:k.scrollWidth)>N?S=!0:S=!1}return S},[g,e,C]),R=t.useCallback((S=!0)=>{if(r.current){h.current&&clearTimeout(h.current);const k=v();k!==g&&m(k),k&&S&&(h.current=window.setTimeout(()=>{if(r.current){const z=e===tt.Vertical?`.${al}`:`.${ll}`,N=r.current.querySelector(z);N&&a(e===tt.Vertical?N.offsetHeight:N.offsetWidth)}},500))}},[v,e,g]),j=t.useRef(R);t.useEffect(()=>{j.current=R},[R]);const y=t.useCallback(()=>{j.current()},[]);t.useEffect(()=>{if(r.current){let S=!0;f.current=new ResizeObserver(()=>{if(S){S=!1;return}j.current()}),f.current.observe(r.current)}return()=>{var S;(S=f.current)==null||S.disconnect(),f.current=null}},[]),t.useEffect(()=>{const S=t.Children.count(i);(Be(d.current)||d.current!==S)&&(d.current=t.Children.count(i),c(),j.current(!1))},[i,c]),t.useEffect(()=>{c()},[g,c]),t.useImperativeHandle(n,()=>({refreshOverflow:y}),[y]);const D=t.useMemo(()=>{const S=[Es];return l&&S.push(l),S.join(" ")},[l]);return g?e===tt.Horizontal?u.jsx(qs,{scrollStep:E,className:D,children:i}):u.jsx(eo,{scrollStep:E,className:D,children:i}):u.jsx("div",{className:D,children:i})}));no.displayName="ToolbarScrollable";const dl="sf-toolbar-item",$t=t.memo(t.forwardRef((o,n)=>{const{className:r="",children:e,...s}=o,i=t.useRef(null),l=t.useMemo(()=>{const c=[dl];return r&&c.push(r),c.join(" ")},[r]);return t.useImperativeHandle(n,()=>({element:i.current})),u.jsx("div",{ref:i,className:l,...s,children:e})}));$t.displayName="ToolbarItem";const fl="sf-toolbar-item",ml="sf-toolbar-separator",ro=t.memo(t.forwardRef((o,n)=>{const{className:r="",...e}=o,s=t.useRef(null),i=t.useMemo(()=>{const l=[fl,ml];return r&&l.push(r),l.join(" ")},[r]);return t.useImperativeHandle(n,()=>({element:s.current})),u.jsx("div",{ref:s,className:i,...e})}));ro.displayName="ToolbarSeparator";const pl="sf-toolbar-item",hl="sf-toolbar-spacer",_r=t.memo(t.forwardRef((o,n)=>{const{className:r="",...e}=o,s=t.useRef(null),i=t.useMemo(()=>{const l=[pl,hl];return r&&l.push(r),l.join(" ")},[r]);return t.useImperativeHandle(n,()=>({element:s.current})),u.jsx("div",{ref:s,className:i,...e})}));_r.displayName="ToolbarSpacer";const Hn="sf-toolbar-items",El="sf-popup-up-icon",gl="sf-popup-down-icon",Tl="sf-popup-open",Cl="sf-toolbar-hor-nav",Dl="sf-nav-active",vl="sf-toolbar-popup-items",yl="sf-hidden-popup",bl="sf-toolbar-extended-items",Rl="sf-extended-nav",wl="sf-toolbar-popup-overflow",jn="sf-toolbar-separator",mn="sf-toolbar-spacer",ur="sf-toolbar-item",Nl="sf-toolbar-popup-icon sf-icon",so=t.memo(t.forwardRef((o,n)=>{const{toolbarRef:r,orientation:e,overflowMode:s,isToolbarRefReady:i,children:l,className:c,collision:f,isPopupVisible:d,onPopupOpenChange:h,onOverflowChange:g}=o,m=t.useCallback(Q=>t.Children.toArray(Q).filter(ae=>t.isValidElement(ae)&&(ae.type===$t||ae.type===ro||ae.type===_r)).map((ae,fe)=>t.cloneElement(ae,{key:ae.key||fe})),[]),E=t.useMemo(()=>m(l),[l,m]),a=t.useRef(null),C=t.useRef(t.Children.count(l)),v=t.useRef([...m(l)]),R=t.useRef([]),j=t.useRef(null),y=t.useRef(null),{dir:D}=$e(),[S,k]=t.useState([...v.current]),[z,N]=t.useState([]),[b,M]=t.useState(!1),[T,H]=t.useState(d),[w,I]=t.useState(!1),[Y,Z]=t.useState({maxHeight:""}),ue=t.useCallback(Q=>{let ae=0;return Q&&(ae=e===tt.Vertical?Q.offsetHeight:Q.offsetWidth),ae},[e]),K=t.useCallback(Q=>{let ae=0;return Q&&(ae=e===tt.Vertical?Q.offsetTop:Q.offsetLeft),ae},[e]),O=t.useCallback(()=>j.current?ue(j.current):e===tt.Horizontal?40:48,[ue,e]),L=t.useCallback(()=>r.current?r.current.offsetHeight:0,[s]),V=t.useCallback(()=>{let Q=0;if(r.current){const ae=window.getComputedStyle(r.current),fe=parseFloat(ae.width),A=parseFloat(ae.borderRightWidth);Q=fe+A*2}return Q},[]),ee=t.useCallback(()=>{var Q;if(r.current&&((Q=y.current)!=null&&Q.element)){const ae=y.current.element,fe=r.current,A=ae.offsetTop+ae.offsetHeight+(fe.getBoundingClientRect().top||0),re=window.scrollY||0;if(e===tt.Horizontal&&window.innerHeight+re<A&&fe.offsetTop<ae.offsetHeight&&s===ze.Popup){let U=ae.offsetHeight-(A-window.innerHeight-re+5);for(let G=0;G<ae.childElementCount;G++){const ge=ae.children[parseInt(G.toString(),10)];if(ge.offsetTop+ge.offsetHeight>U){U=ge.offsetTop;break}}Z(G=>({...G,maxHeight:`${U}px`}))}else if(e===tt.Vertical){const U=fe.getBoundingClientRect();Z(G=>({...G,maxHeight:`${U.top+fe.offsetHeight}px`,bottom:"0"}))}}},[s,e]),de=t.useCallback(()=>{H(!1),Z({maxHeight:""})},[]),F=t.useCallback(Q=>{if(r.current&&Q&&wr(r.current)){const ae=[...S],fe=[...z],A=Array.from(Q.children),re=ue(r.current),U=window.getComputedStyle(Q),G=parseInt(e===tt.Vertical?U.paddingTop:U.paddingLeft,10);if(D==="rtl"&&e===tt.Horizontal){const ge=parseInt(U.gap,10)||0,ce=A.length;let ye=0;A.forEach(_=>{ye+=ue(_)}),ye+=G*2+ge*(ce-1);const Ie=ye>re,pe=fe.length>0||Ie?O():0,Re=re-pe;if(ye>Re){let _=ye;for(let X=ce-1;X>=0;X--){const J=A[parseInt(X.toString(),10)];if(_>Re||J.classList.contains(jn)){const he=ue(J);_-=he+(X===0?0:ge),fe.unshift(ae[parseInt(X.toString(),10)]),ae.pop()}else break}}}else{let ge=ue(A[A.length-1]),ce=K(A[A.length-1]);const ye=ce+ge+G>re,Ie=fe.length>0||ye?O():0,pe=re-Ie;for(let Re=A.length-1;Re>=0;Re--){const _=A[parseInt(Re.toString(),10)];if(ge=ue(_),ce=K(_),ce+ge+G>pe||_.classList.contains(jn))fe.unshift(ae[parseInt(Re.toString(),10)]),ae.pop();else break}}v.current=ae,R.current=fe}},[e,ue,K,O,S,z,D]),q=t.useCallback(()=>{S!==v.current&&(k(Q=>Q.length!==v.current.length?[...v.current]:Q),N(Q=>Q.length!==R.current.length?[...R.current]:Q))},[S]),te=t.useCallback(()=>{if(r.current&&!w){const Q=r.current.querySelector(`.${Hn}`);s===ze.Popup&&H(ae=>ae&&!1),F(Q),q(),I(R.current.length>0)}},[F,w,q,s]),ne=t.useRef(te);t.useLayoutEffect(()=>{ne.current=te},[te]);const oe=t.useCallback(Q=>{let ae=0;if(Q){const fe=Array.from(Q.children),A=window.getComputedStyle(Q),re=parseInt(A.gap,10)||0,U=parseInt(e===tt.Vertical?A.paddingTop:A.paddingLeft,10);fe.forEach(G=>{ae+=(G.classList.contains(mn)?0:ue(G))+re}),fe.length>0&&(ae-=re),ae+=U*2}return ae},[ue,e]),Ce=t.useCallback((Q,ae)=>{var ge;const fe=[].slice.call(ae.querySelectorAll(`.${ur}`)),A=[...S],re=[...z],U=(ge=r.current)==null?void 0:ge.querySelector(`.${Hn}`),G=parseInt(window.getComputedStyle(U).gap,10)||0;for(let ce=0;ce<fe.length;ce++){const ye=fe[parseInt(ce.toString(),10)],Ie=ye.classList.contains(mn),pe=A.length>0,Re=(Ie?0:ue(ye))+(pe?G:0);let _=Q>Re;if(Ie||ye.classList.contains(jn)){let X=Re,J=ce+1;for(;J<fe.length;){const he=fe[parseInt(J.toString(),10)],xe=he.classList.contains(mn);if(X+=(xe?0:ue(he))+(pe?G:0),!he.classList.contains(mn)&&!he.classList.contains(jn))break;J++}_=Q>X}if(_)A.push(re[0]),re.shift(),Q-=Re;else break}v.current=A,R.current=re},[ue,S,z]),ve=t.useCallback(()=>{var Q;if(r.current&&((Q=y.current)!=null&&Q.element)){const ae=r.current.querySelector(`.${Hn}`),fe=ue(ae),A=oe(ae),re=fe-A,U=parseInt(window.getComputedStyle(ae).gap,10)||0,G=ue(y.current.element.querySelector(`.${ur}`))+U,ge=re>G,ce=[].slice.call(y.current.element.querySelectorAll(`.${ur}`));let ye=0;ce.forEach(pe=>{ye+=pe.classList.contains(mn)?0:ue(pe)}),ye+=ce.length*U,re+O()>ye?(v.current=[...E],R.current=[]):ge&&Ce(re,y.current.element)}},[ue,oe,Ce]),me=t.useCallback(()=>{s===ze.Popup&&T&&H(!1)},[s,T]),x=()=>{H(Q=>!Q)},B=t.useCallback(()=>{te()},[te]);t.useEffect(()=>{if(s===ze.Popup||s===ze.Extended){const Q=ae=>{if(s===ze.Popup&&y.current&&y.current.element){const fe=!Et(ae.target,".sf-popup"),A=y.current.element.classList.contains(Tl);fe&&A&&H(!1)}};return document.addEventListener("click",Q),document.addEventListener("scroll",Q,!0),()=>{document.removeEventListener("click",Q),document.removeEventListener("scroll",Q,!0)}}},[s]),t.useEffect(()=>{h(T)},[T,h]),t.useEffect(()=>{H(Q=>Q!==d?d:Q)},[d]),t.useEffect(()=>{g()},[S,g]),t.useLayoutEffect(()=>{r.current&&i&&!b&&(ne.current(),M(!0))},[i,b]),t.useEffect(()=>{if(r.current){let Q=!0;return a.current||(a.current=new ResizeObserver(()=>{if(Q){Q=!1;return}ne.current()}),a.current.observe(r.current)),()=>{var ae;(ae=a.current)==null||ae.disconnect(),a.current=null}}},[]),t.useLayoutEffect(()=>{w&&(ve(),q(),H(Q=>Q&&R.current.length<=0?!1:Q),I(!1))},[w,ve,q]),t.useLayoutEffect(()=>{if(!b)return;const Q=E.length;if(C.current!==Q){C.current=Q,v.current=[...E],R.current=[],k([...v.current]),N([]),H(!1),M(!1);return}const fe=new Map(E.map(re=>[re.key,re])),A=re=>re.map(U=>fe.get(U.key)||U);k(A),N(A)},[E,b]),t.useImperativeHandle(n,()=>({refreshOverflow:B}),[B]);const le=t.useMemo(()=>{const Q=[Hn];return z.length>0&&Q.push(wl),Q.join(" ")},[z]),se=t.useMemo(()=>{const Q=[Cl];return s===ze.Extended&&Q.push(Rl),T&&Q.push(Dl),Q.join(" ")},[s,T]),Se=t.useMemo(()=>{const Q=[vl];return s===ze.Extended&&Q.push(bl),c&&Q.push(c),w&&Q.push(yl),Q.join(" ")},[s,c,w]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:le,children:S}),z.length>0&&u.jsx("div",{ref:j,className:se,tabIndex:0,role:"button","aria-haspopup":"true","aria-label":"overflow","aria-expanded":T?"true":"false",onClick:x,children:u.jsx("div",{className:`${T?El:gl} ${Nl}`,children:T?u.jsx($s,{}):u.jsx(Xn,{})})}),z.length>0&&u.jsx(Ot,{ref:y,className:Se,relateTo:r.current,offsetY:e===tt.Vertical?0:L(),open:T,onOpen:ee,onClose:de,targetType:"container",collision:{Y:f?st.None:st.None,X:st.None},position:D==="rtl"?{X:"left",Y:"top"}:{X:"right",Y:"top"},width:s===ze.Extended&&e===tt.Horizontal?V():void 0,offsetX:s===ze.Extended&&e===tt.Horizontal?0:void 0,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},style:Y,onClick:me,children:z})]})}));so.displayName="ToolbarPopup";var ze;(function(o){o.Scrollable="Scrollable",o.Popup="Popup",o.MultiRow="MultiRow",o.Extended="Extended"})(ze||(ze={}));const Sl="sf-toolbar",xl="sf-toolbar-vertical",Al="sf-toolbar-items",Ol="sf-rtl",gs="sf-hscroll-nav",pn="sf-toolbar-hor-nav",dr="sf-toolbar-popup-items",Ll="sf-toolbar-extended",Il="sf-toolbar-multirow",kl="sf-tbar-extended",_l="sf-toolbar-popup",oo=t.memo(t.forwardRef((o,n)=>{const{keyboardNavigation:r=!0,children:e,className:s="",collision:i=!0,orientation:l=tt.Horizontal,overflowMode:c=ze.Scrollable,scrollStep:f=void 0,...d}=o,h=t.useRef(null),g=t.useRef({toolbar:[],popup:[]}),m=t.useRef(null),E=t.useRef(null),a=t.useRef(null),{dir:C}=$e(),[v,R]=t.useState(!1),[j,y]=t.useState(!1),D=t.useCallback(F=>F.hasAttribute("disabled")||F.getAttribute("aria-disabled")==="true"||F.classList.contains("sf-disabled"),[]),S=t.useCallback((F,q,te)=>{if(!F.length)return-1;const ne=F.length;let oe=q,Ce=0;for(;Ce<ne;){if(oe=(oe+te+ne)%ne,!D(F[oe]))return oe;Ce++}return-1},[D]),k=t.useCallback(()=>{if(r&&h.current){const F=ne=>h.current?Array.from(h.current.querySelectorAll(`.${ne} .sf-btn`)):[];g.current.toolbar=F(Al),(c===ze.Extended||c===ze.Popup)&&(g.current.popup=F(dr));let q=0;m.current&&(q=g.current.toolbar.indexOf(m.current),q=q===-1?0:q);const te=[...g.current.toolbar,...g.current.popup];q>=0&&q<te.length&&D(te[q])&&(q=S(te,-1,1)),te.forEach((ne,oe)=>{ne.tabIndex=oe===q?0:-1,oe===q&&(m.current=ne)})}},[r,c,D,S]),z=t.useCallback(F=>{const q=!!Et(F,"."+dr);return{isToolbar:!q,items:q?g.current.popup:g.current.toolbar,currentIndex:q?g.current.popup.indexOf(F):g.current.toolbar.indexOf(F)}},[]),N=t.useCallback(F=>!Be(Et(F,"."+dr)),[]),b=t.useCallback(F=>!Be(Et(F,"."+pn)),[]),M=t.useCallback((F,q)=>{const te=q?g.current.toolbar:g.current.popup;if(F>-1&&F<te.length){te.forEach(oe=>{oe.tabIndex=-1});const ne=te[parseInt(F.toString(),10)];ne.tabIndex=0,ne.focus(),q&&(m.current=ne)}},[]),T=t.useCallback((F,q)=>{const{isToolbar:te,items:ne,currentIndex:oe}=z(F);if(!ne.length)return;let Ce;switch(q){case"next":Ce=S(ne,oe,1);break;case"previous":Ce=S(ne,oe,-1);break;case"first":Ce=S(ne,-1,1);break;case"last":Ce=S(ne,ne.length,-1);break}Ce!==-1&&M(Ce,te)},[z,M,S]),H=t.useCallback((F,q)=>{if(l===tt.Horizontal){const te=F.classList.contains(pn),ne=F.classList.contains(gs);if(q==="ArrowRight"&&h.current===F){M(0,!0);return}(q==="ArrowRight"||q==="ArrowLeft")&&!te&&!ne&&T(F,q==="ArrowRight"?"next":"previous")}},[M,T,l]),w=t.useCallback((F,q)=>{const te=l===tt.Vertical,ne=N(F),oe=b(F);q==="ArrowUp"&&!oe&&(te||ne)?T(F,"previous"):q==="ArrowDown"&&(oe&&j&&g.current.popup.length>0?M(0,!1):(te||ne)&&T(F,"next"))},[N,b,j,M,T,l]),I=t.useCallback((F,q)=>{T(F,q==="Home"?"first":"last")},[T]),Y=t.useCallback(F=>{const q=F.classList.contains(pn),te=F.classList.contains(gs),ne=h.current;if(!te&&!q&&ne===F&&g.current.toolbar)if(m.current&&!D(m.current))m.current.focus();else{const oe=S(g.current.toolbar,-1,1);oe!==-1&&M(oe,!0)}},[M,D,S]),Z=t.useCallback(F=>{F.classList.contains(pn)&&y(te=>!te)},[]),ue=t.useCallback(()=>{c===ze.Popup&&j&&y(!1)},[j,c]),K=t.useCallback(F=>{if(!h.current||!r||["INPUT","TEXTAREA","SELECT"].includes(F.target.tagName))return;const q=F.target;F.preventDefault();const ne={ArrowRight:()=>H(q,F.key),ArrowLeft:()=>H(q,F.key),ArrowUp:()=>w(q,F.key),ArrowDown:()=>w(q,F.key),Home:()=>I(q,F.key),End:()=>I(q,F.key),Tab:()=>Y(q),Enter:()=>Z(q),Escape:()=>ue()}[F.key];ne&&ne()},[r,H,w,I,Y,Z,ue]),O=t.useCallback(F=>{if(!r||["INPUT","TEXTAREA","SELECT"].includes(F.target.tagName))return;const q=c===ze.Popup&&j;F.key==="Tab"&&F.target.classList.contains(pn)&&q&&y(!1),(F.key==="ArrowDown"||F.key==="ArrowUp"||F.key==="End"||F.key==="Home")&&F.preventDefault()},[r,c,j]),L=t.useCallback(F=>{y(F)},[]),V=t.useCallback(()=>{c===ze.Scrollable&&E.current?E.current.refreshOverflow():(c===ze.Popup||c===ze.Extended)&&a.current&&a.current.refreshOverflow()},[c]);t.useLayoutEffect(()=>{Lt("toolbar"),R(!0)},[]);const ee=t.useMemo(()=>{const F=["sf-control",Sl,"sf-lib"];switch(C==="rtl"&&F.push(Ol),c){case ze.MultiRow:F.push(Il);break;case ze.Popup:F.push(_l);break;case ze.Extended:F.push(Ll),j&&F.push(kl);break}return l===tt.Vertical&&F.push(xl),s&&F.push(s),F.join(" ")},[s,C,l,j,c]),de={keyboardNavigation:r,collision:i,orientation:l,overflowMode:c,scrollStep:f};return t.useImperativeHandle(n,()=>({...de,refreshOverflow:V,element:h.current})),u.jsx("div",{ref:h,className:ee,role:"toolbar","aria-orientation":l.toLowerCase(),onKeyDown:O,onKeyUp:K,...d,children:(()=>{switch(c){case ze.Scrollable:return u.jsx(no,{ref:E,toolbarRef:h,orientation:l,scrollStep:f,onOverflowChange:k,className:s,children:e},`scrollable-${l}-toolbar`);case ze.MultiRow:return u.jsx(to,{onOverflowChange:k,children:e});case ze.Popup:case ze.Extended:return u.jsx(so,{ref:a,toolbarRef:h,isToolbarRefReady:v,orientation:l,overflowMode:c,collision:i,isPopupVisible:j,onPopupOpenChange:L,onOverflowChange:k,className:s,children:e},`${c===ze.Popup?"popup":"extended"}-${l}-toolbar`)}})()})}));oo.displayName="Toolbar";const io=t.forwardRef((o,n)=>{var x,B,le;const{children:r,className:e="",icon:s,iconPosition:i=Xe.Left,items:l=[],popupWidth:c="auto",animation:f={show:{name:"SlideDown",duration:100,timingFunction:"ease"},hide:{name:"SlideUp",duration:100,timingFunction:"ease"}},disabled:d=!1,lazyOpen:h=!1,itemTemplate:g,target:m,relateTo:E,color:a,variant:C,size:v=Vt.Medium,onClose:R,onOpen:j,onSelect:y,...D}=o,S=t.useRef(null),k=t.useRef(null),z=t.useRef(null),N=t.useRef([]),[b,M]=t.useState(null),[T,H]=t.useState(!1),[w,I]=t.useState(l),{dir:Y}=$e(),[Z,ue]=t.useState(!1);t.useEffect(()=>{ue(!0)},[]);const K=t.useRef(!0),O=t.useCallback((se,Se)=>{se.disabled||(H(!1),y&&y({event:Se,item:se}))},[y]),L=(se,Se)=>{K&&Se(Q=>se.length!==Q.length||se.some((fe,A)=>{const re=Q[A];return fe.id!==(re==null?void 0:re.id)||fe.text!==(re==null?void 0:re.text)||fe.url!==(re==null?void 0:re.url)||fe.disabled!==(re==null?void 0:re.disabled)||typeof fe.icon=="string"?fe.icon!==(re==null?void 0:re.icon):!t.isValidElement(fe.icon)})?se:Q)};t.useEffect(()=>(L(l,I),()=>{K.current=!1}),[l]),t.useEffect(()=>{Lt("dropDownButton")},[]);const V=t.useMemo(()=>w.map((se,Se)=>!se.disabled&&!se.hasSeparator?Se:-1).filter(se=>se>=0),[w]),ee=t.useCallback((se,Se)=>{const Q=V.length;if(!Q)return-1;const ae=V.indexOf(se);if(ae<0)return V[Se?0:Q-1];const fe=(ae+(Se?1:-1)+Q)%Q;return V[fe]},[V]),de=t.useCallback(se=>se!=null&&V.includes(se)?se:null,[V]),F=t.useCallback(se=>{var Q;const Se=de(se);M(Se),Se!=null&&((Q=N.current[Se])==null||Q.focus())},[de]);t.useEffect(()=>{M(se=>de(se))},[w,de]),t.useEffect(()=>{const se=Q=>{var re,U;const ae=(re=S.current)==null?void 0:re.element,fe=(U=k.current)==null?void 0:U.element,A=Q.target;ae&&fe&&!ae.contains(A)&&!fe.contains(A)&&(H(!1),R&&T&&R(Q))},Se=Q=>{var ae,fe;((Q.altKey||Q.metaKey)&&Q.key==="ArrowUp"||Q.key==="Escape"||Q.key==="Esc")&&(Q.preventDefault(),Q.stopPropagation(),H(!1),R==null||R(Q),(fe=(ae=S.current)==null?void 0:ae.element)==null||fe.focus())};return T&&(document.addEventListener("mousedown",se),document.addEventListener("keydown",Se)),()=>{document.removeEventListener("mousedown",se),document.removeEventListener("keydown",Se)}},[T,R]);const q={iconPosition:i,icon:s,target:m,popupWidth:c,items:l,lazyOpen:h,relateTo:E,itemTemplate:g,color:a,variant:C,size:v},te=((x=f.show)==null?void 0:x.name)!==void 0?{name:(B=f.show)==null?void 0:B.name,duration:f.show.duration,timingFunction:f.show.timingFunction}:null,ne=se=>{var Se,Q;if(T)H(!1),R&&R(se);else{if(te){const fe=Xt(te);if(fe.animate){const A=(Q=(Se=k.current)==null?void 0:Se.element)==null?void 0:Q.children[0];A&&fe.animate(A,{begin:re=>{const U=re==null?void 0:re.element;if(U&&U.parentElement){const G=U.parentElement,ge=G.style.display;G.style.display="block",G.style.maxHeight=G.offsetHeight+"px",G.style.display=ge}}})}}H(!0),j&&j(se);const ae=de(b);F(ae)}};t.useImperativeHandle(n,()=>{var se;return{...q,toggle:ne,element:(se=S.current)==null?void 0:se.element}},[q]);const oe=t.useCallback(se=>{var Se,Q,ae,fe;switch(se.key){case"ArrowDown":{if(se.preventDefault(),se.stopPropagation(),se.altKey||se.metaKey)ne(se);else{const A=ee(b??-1,!0);F(A)}break}case"ArrowUp":{if(se.preventDefault(),se.stopPropagation(),se.altKey||se.metaKey)H(!1),R==null||R(se),(Q=(Se=S.current)==null?void 0:Se.element)==null||Q.focus();else{const A=ee(b??-1,!1);F(A)}break}case"Home":{T&&(se.preventDefault(),F(V[0]??null));break}case"End":{T&&(se.preventDefault(),F(V[V.length-1]??null));break}case"Enter":case" ":{if(se.preventDefault(),T){const A=de(b);A!=null&&O(w[A],se)}else ne(se);break}case"Escape":case"Esc":{se.preventDefault(),T&&(H(!1),R==null||R(se),(fe=(ae=S.current)==null?void 0:ae.element)==null||fe.focus());break}}},[T,b,V,ee,de,ne,H,R,S,F,O,w]),Ce=t.useCallback(se=>{if(g)return g(se);const Se=u.jsxs(u.Fragment,{children:[se.icon&&u.jsx("span",{className:"sf-menu-icon",children:typeof se.icon=="string"?u.jsx("span",{className:se.icon}):se.icon}),u.jsx("span",{children:se.text})]});return se.url?u.jsx("a",{href:se.url,className:"sf-menu-link",children:Se}):Se},[g]),ve=t.useCallback((se,Se)=>{Se.stopPropagation();const Q=Se.currentTarget,ae=N.current.findIndex(fe=>fe===Q);F(ae),O(se,Se)},[O,F]),me=t.useCallback(()=>u.jsx("ul",{role:"menu",tabIndex:0,"aria-label":"dropdown menu",ref:z,onKeyDown:oe,onMouseDown:se=>se.preventDefault(),children:w.map((se,Se)=>{const Q=b===Se,ae=`sf-item sf-ellipsis ${se.hasSeparator?"sf-separator":""} ${se.disabled?"sf-disabled":""} ${Q?"sf-focused":""}`;return u.jsx("li",{ref:fe=>{N.current[Se]=fe},className:ae,role:se.hasSeparator?"separator":"menuitem","aria-label":se.text,"aria-disabled":se.disabled?"true":"false",onClick:se.disabled||se.hasSeparator?void 0:fe=>ve(se,fe),children:!se.hasSeparator&&Ce(se)},se.id||`item-${Se}`)})}),[w,Ce,ve,b,F,oe]);return u.jsxs(u.Fragment,{children:[u.jsx(Qe,{ref:S,className:`${e} sf-dropdown-btn sf-drp-btn-${v.toLowerCase().substring(0,2)} ${T?"sf-active":""}`,icon:s,color:a,dropIcon:!0,variant:C,size:v,iconPosition:i,disabled:d,onKeyDown:oe,onClick:se=>{se.preventDefault(),ne(se)},"aria-haspopup":"true","aria-expanded":T?"true":"false",...D,children:r}),Z&&(T||!h)&&typeof document<"u"&&Ft.createPortal(u.jsx(Ot,{open:T,ref:k,targetRef:m||S.current,relateTo:E||((le=S.current)==null?void 0:le.element),position:{X:"left",Y:"bottom"},animation:f,collision:Y==="rtl"?{X:st.Fit,Y:st.Flip}:{X:st.Flip,Y:st.Flip},width:c,className:`sf-dropdown-popup sf-drp-btn-${v.toLowerCase().substring(0,2)} ${c!=="auto"?"sf-dropdown-popup-width":""}`,onClose:()=>{var se;H(!1),(se=S.current)!=null&&se.element&&S.current.element.focus()},onOpen:()=>{var se;(se=z.current)==null||se.focus()},children:me()}),document.body)]})});t.memo(io);const lo=o=>{const{onClick:n,ariaLabel:r,title:e,disabled:s=!1,icon:i=u.jsx(Vo,{}),text:l,color:c,variant:f,className:d}=o,{locale:h}=$e(),{getString:g}=nt(h||"en-US");return Ae.isDevice?u.jsx(Qe,{icon:i,color:c||gt.Secondary,variant:f||Ge.Standard,className:d||p.TODAY_BUTTON,onClick:n,"aria-label":r||g("today"),title:e||g("today"),disabled:s}):u.jsx(Qe,{icon:i,variant:f||Ge.Outlined,color:c||gt.Secondary,className:d||p.TODAY_BUTTON,onClick:n,"aria-label":r||g("today"),title:e,disabled:s,children:l||g("today")})},ao=o=>{const{onClick:n,ariaLabel:r,title:e,disabled:s=!1,icon:i=u.jsx(ks,{}),color:l,variant:c,className:f}=o,{locale:d}=$e(),{getString:h}=nt(d||"en-US");return u.jsx(Qe,{className:f||p.PREVIOUS_ICON,icon:i,color:l||gt.Secondary,variant:c||Ge.Standard,onClick:n,"aria-label":r||h("previous"),title:e,disabled:s})},co=o=>{const{onClick:n,ariaLabel:r,title:e,disabled:s=!1,icon:i=u.jsx(Is,{}),color:l,variant:c,className:f}=o,{locale:d}=$e(),{getString:h}=nt(d||"en-US");return u.jsx(Qe,{className:f||p.NEXT_ICON,icon:i,color:l||gt.Secondary,variant:c||Ge.Standard,onClick:n,"aria-label":r||h("next"),title:e,disabled:s})},Pl=(o,n)=>{const{onClick:r,ariaLabel:e,title:s,disabled:i=!1,dateRangeContent:l,showCalendar:c=!1,ariaExpanded:f,color:d,variant:h,icon:g=u.jsx(Xn,{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true"}),onKeyDown:m,className:E}=o;return u.jsx(Qe,{ref:n,onClick:a=>{a.stopPropagation(),r==null||r(a)},"aria-haspopup":"dialog","aria-label":e,"aria-expanded":f!==void 0?f:c,className:E||p.DATEPICKER_BUTTON,color:d||gt.Secondary,variant:h||Ge.Standard,iconPosition:Xe.Right,title:s,disabled:i,onKeyDown:m,icon:g,children:l})},Pr=t.forwardRef(Pl);Pr.displayName="DateRangeButton";const uo=o=>{var g;const{items:n,currentView:r,onSelect:e,ariaLabel:s,title:i,disabled:l=!1,className:c,variant:f=Ge.Outlined,color:d=gt.Secondary}=o,h=((g=n.find(m=>m.id===r))==null?void 0:g.text)||r;return u.jsx("div",{onClick:m=>m.stopPropagation(),children:u.jsx(io,{items:n,variant:f,className:c||p.VIEW_BUTTON,color:d,onSelect:e,"aria-label":s,title:i,disabled:l,children:h})})};lo.displayName="TodayButton";ao.displayName="PreviousButton";co.displayName="NextButton";uo.displayName="ViewButton";const Ml=({view:o,availableViews:n,onViewButtonClick:r,onPreviousClick:e,onNextClick:s,onTodayClick:i,onDateDropdownClick:l,dateRangeText:c,showCalendar:f=!1,selectedDate:d=new Date,firstDayOfWeek:h=0,calendarView:g=Wn.Month,handleCalendarChange:m,renderDates:E,customizeHeader:a})=>{var H,w;const C=t.useRef(null),v=t.useRef(null);kr(v,!!f,()=>{f&&l&&l()});const R=(n||[]).map(I=>({id:I.name,text:I.displayName})),j=t.useCallback(I=>{var Z;const Y=(Z=I.item)==null?void 0:Z.id;Y&&r(Y)},[r]),y=R.map(I=>`${I.id}:${I.text}`).join("|"),S=E&&E.length>=2?`${(H=E[0])==null?void 0:H.toDateString()} - ${(w=E[E.length-1])==null?void 0:w.toDateString()}`:c;let k=c;const z=I=>[I.today,I.previous,I.next,I.dateRange,u.jsx(_r,{},"spacer"),I.viewSwitcher].filter(Boolean),N=I=>{var Y;return{today:(I==null?void 0:I.todayProps)!==null&&u.jsx($t,{children:u.jsx(lo,{onClick:i,...(I==null?void 0:I.todayProps)||{}})},"today"),previous:(I==null?void 0:I.previousProps)!==null&&u.jsx($t,{children:u.jsx(ao,{onClick:e,...(I==null?void 0:I.previousProps)||{}})},"previous"),next:(I==null?void 0:I.nextProps)!==null&&u.jsx($t,{children:u.jsx(co,{onClick:s,...(I==null?void 0:I.nextProps)||{}})},"next"),dateRange:(I==null?void 0:I.dateRangeProps)!==null&&u.jsx($t,{children:u.jsx(Pr,{ref:C,onClick:l,ariaLabel:S,dateRangeContent:k,showCalendar:f,onKeyDown:Z=>{Z.key==="Escape"&&f&&(l==null||l())},...(I==null?void 0:I.dateRangeProps)||{}})},"dateRange"),viewSwitcher:(I==null?void 0:I.viewSwitcherProps)!==null&&((n==null?void 0:n.length)??0)>1&&u.jsx($t,{children:u.jsx(uo,{items:R,currentView:o,onSelect:j,ariaLabel:((Y=n==null?void 0:n.find(Z=>Z.name===o))==null?void 0:Y.displayName)??o,...(I==null?void 0:I.viewSwitcherProps)||{}})},"viewSwitcher")}};let b,M=ze.Popup;const T=N();if(a){const I=a({}),Y=t.isValidElement(I)?I.props:{},Z=N(Y),ue={overflowMode:(Y==null?void 0:Y.overflowMode)??ze.Popup,today:Z.today,previous:Z.previous,next:Z.next,dateRange:Z.dateRange,viewSwitcher:Z.viewSwitcher,children:z(Z)},K=a(ue);if(K&&t.isValidElement(K)){const O=K.props;if(M=(O==null?void 0:O.overflowMode)??ze.Popup,O!=null&&O.dateRangeTemplate&&E&&E.length>=2&&(k=O.dateRangeTemplate({startDate:E[0],endDate:E[E.length-1],view:o})),O!=null&&O.children)O.children===ue.children?b=z(N(O)):b=O.children;else{const L=N(O);b=z(L)}}else b=z(T)}else b=z(T);return u.jsxs("div",{ref:v,className:p.SCHEDULER_TOOLBAR_CONTAINER,children:[u.jsx(oo,{overflowMode:M,style:{width:"auto"},children:b},`tb-${y}-${c}`),f&&C.current&&u.jsx(Ot,{open:!0,relateTo:C.current.element,position:{X:"left",Y:"bottom"},collision:{X:st.Fit,Y:st.None},actionOnScroll:_s.Hide,onClose:l,className:p.CALENDAR_POPUP_CONTAINER,viewPortElementRef:v,onKeyDown:I=>{I.key==="Escape"&&(l==null||l())},children:u.jsx($o,{className:p.SCHEDULER_CALENDAR,value:d,onChange:m,showTodayButton:!0,firstDayOfWeek:h,start:g,depth:g})})]})};Pr.__docgenInfo={description:"DateRange button component",methods:[],displayName:"DateRangeButton"};const fo=(o,n,r)=>{const[e,s]=t.useState(!1),[i,l]=t.useState(null),c=Hl(e),f=t.useRef(null),d=t.useRef(null),h=t.useRef(null),g=t.useRef(null),m=t.useCallback(()=>{s(!1)},[r]);mo(m),t.useEffect(()=>{i&&(d.current=i.closest(".sf-scheduler"))},[i]);const E=t.useCallback(D=>{c&&typeof c=="object"&&"current"in c&&(c.current=D),f.current=D},[c]),a=t.useCallback(()=>{var D,S;(D=h.current)==null||D.hide(),(S=g.current)==null||S.hide()},[]),C=t.useCallback((D,S)=>{var k;(k=h.current)==null||k.handleCellClick(D,S)},[]),v=t.useCallback((D,S)=>{var k;(k=h.current)==null||k.handleEventClick(D,S)},[]),R=t.useCallback(()=>{a()},[]),j=t.useCallback(D=>{o&&o(D),!D.cancel&&D&&D.element&&(D.nativeEvent&&D.nativeEvent.stopPropagation(),C(D,D.element))},[o,C]),y=t.useCallback(D=>{n&&n(D),!D.cancel&&D&&D.data&&D.event.currentTarget&&v(D.data,D.event.currentTarget)},[n,v]);return{visible:e,setVisible:s,target:i,setTarget:l,containerRef:c,popupElement:f,schedulerElement:d,handleClose:m,handleRef:E,cellEditRef:h,eventEditRef:g,handleCellClick:C,handleEventClick:v,handleEditEvent:R,closeAllPopups:a,onCellClickHandler:j,onEventClickHandler:y}},mo=o=>{t.useEffect(()=>{const n=r=>{r.key==="Escape"&&o()};return document==null||document.addEventListener("keydown",n),()=>{document==null||document.removeEventListener("keydown",n)}},[o])},Hl=o=>{const n=t.useRef(null),r=t.useRef(null);return t.useEffect(()=>{if(o&&n.current){r.current=document==null?void 0:document.activeElement;const e=n.current.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'),s=e[0],i=e[e.length-1],l=c=>{i&&(document==null?void 0:document.activeElement)===i&&!c.shiftKey&&(c.preventDefault(),s.focus()),s&&(document==null?void 0:document.activeElement)===s&&c.shiftKey&&(c.preventDefault(),i.focus())};return document==null||document.addEventListener("keydown",l),()=>{var c;document==null||document.removeEventListener("keydown",l),(c=r.current)!=null&&c.focus&&r.current.focus()}}return()=>{}},[o]),n};class ct{static calculateEventPosition(n,r,e,s){const i=n.event.isAllDay&&n.event.isBlock?"0px":this.calculateTopPosition(n.startDate,r,e),l=this.calculateHeight(n,r,e,s);let c=96,f=n.event.isBlock?"1px":"0%";n.totalOverlapping>1&&(c=(c-n.totalOverlapping)/n.totalOverlapping,f=`${n.positionIndex*c+n.positionIndex}%`);const d=n.event.isBlock?"calc(100% - 2px)":`${c}%`;return{top:i,height:l,width:d,left:f}}static getOverflowDirection(n,r,e,s){var E,a;if(!n.totalSegments&&!e&&!s||!((E=n.event)!=null&&E.startTime)||!((a=n.event)!=null&&a.endTime)||!(r!=null&&r.length))return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:!1,isOverflowBottom:!1};const i=$.normalizeDate(n.event.startTime),l=$.normalizeDate(n.event.endTime),c=$.normalizeDate(r[0]),f=$.normalizeDate(r[r.length-1]);let d=n.isFirstDay===!1,h=n.isLastDay===!1;if(!i||!l||!c||!f)return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:d,isOverflowBottom:h};const g=i.getTime()<c.getTime(),m=l.getTime()>f.getTime();return e&&s&&(i.setHours(e[0],e[1],0,0),l.setHours(s[0],s[1],0,0),!d&&i>n.event.startTime&&(d=!0),!h&&l<n.event.endTime&&(h=!0)),{isOverflowLeft:g,isOverflowRight:m,isOverflowTop:d,isOverflowBottom:h}}static calculatePositionStyles(n,r,e,s,i){return n.totalSegments?{top:`${n.positionIndex*(zn+En)}px`,width:this.calculateEventWidth(n,r)}:!n.event.isBlock&&n.positionIndex!==void 0&&(n.event.isAllDay||n.isMonthEvent)?{top:`${n.positionIndex*(zn+En)}px`}:e&&s&&i?this.calculateEventPosition(n,e,s,i):{}}static calculateTopPosition(n,r,e){const s=$.getStartEndHours(e),i=s.getHours()*qe+s.getMinutes(),c=n.getHours()*qe+n.getMinutes()-i,d=Cs/(r.interval/r.slotCount),h=c*d;return`${Math.max(0,h)}px`}static calculateHeight(n,r,e,s){const i=new Date(n.startDate),l=new Date(n.endDate);n.event.isBlock&&n.event.isAllDay&&(i.setHours(0,0,0,0),l.setDate(l.getDate()+1),l.setHours(0,0,0,0));const c=r.interval/r.slotCount,{schedulerStartMinutes:f,schedulerEndMinutes:d}=$.getSchedulerStartAndEndMinutes(e,s),h=i.getHours()*qe+i.getMinutes(),g=Math.max(h,f),m=d-g;let E;if($.isSameDay(i,l)){const C=i.getDate()!==l.getDate()?Wo:l.getHours()*qe+l.getMinutes();E=(Math.min(C,d)-g)/c;const R=Math.ceil(m/c);E=Math.min(E,R)}else E=Math.min(m/c);let a=Math.round(E*Cs-2);return a=a>0?a:1,`${a}px`}static calculateEventWidth(n,r){const e=$.normalizeDate(n.event.startTime),s=$.normalizeDate(n.event.endTime),i=$.normalizeDate(r[0]),l=$.normalizeDate(r[r.length-1]),{isOverflowLeft:c,isOverflowRight:f}=this.getOverflowDirection(n,r);if(r.length<=7){const{visibleDayCount:d,startDayIndex:h}=$.getVisibleAndStartDays(r,e,s,n.event);if(d>0&&h!==-1)return`calc(${d*100}% - 4px)`}if(c&&f)return`${r.length*100}%`;if(c){const d=s.getTime()<=l.getTime()?s:l;return`${(Math.floor((d.getTime()-i.getTime())/pr)+1)*100}%`}else return f?`${(Math.floor((l.getTime()-e.getTime())/pr)+1)*100}%`:`${n.totalSegments?n.totalSegments*100:100}%`}static setIndexPosition(n,r,e){const s=$.generateDateKey(r),i=n.get(s)||[];for(;i.length<=e;)i.push(!1);return i.splice(e,1,!0),n.set(s,i),n}}const Un=o=>{const n=o.closest(".sf-scheduler");if(n){const r=n.querySelector("."+p.SELECTED_CELL);r&&(r.classList.remove(p.SELECTED_CELL),r.removeAttribute("tabindex"))}o.classList.add(p.SELECTED_CELL),o.tabIndex=0,o.focus()},yr=(o,n,r)=>{if(!o||n<0||r<0)return null;const s=o.querySelectorAll(`.${p.WORK_CELLS_ROW}`).item(n);return s?s.querySelectorAll(`.${p.WORK_CELLS}`).item(r)??null:null},qn=o=>{const n=o.closest("."+p.SCHEDULER);n&&(n.querySelectorAll("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE).forEach(e=>{e.classList.remove(p.APPOINTMENT_ACTIVE)}),Un(n)),o.classList.add(p.APPOINTMENT_ACTIVE)},Ts=(o,n)=>{const r=n.querySelector("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE),e=r==null?void 0:r.getAttribute("data-guid");return{data:Me.getEventByGuid(o,e),element:r}},jl=o=>{var e,s;let n;const r=((e=o==null?void 0:o.getAttribute)==null?void 0:e.call(o,"data-date"))??((s=o.dataset)==null?void 0:s.date)??void 0;if(r){const i=parseInt(r,10);n=new Date(i)}return n},$l=(o,n)=>{const r=Array.isArray(o)?o==null?void 0:o[0]:o,s=r.classList.contains(p.ALL_DAY_CELL)||r.classList.contains(p.WORK_DAYS)||!((n==null?void 0:n.enable)??!0),i=jl(r);let l;if(s)i&&(l=$.addDays(i,1));else if(i&&n){const c=n.interval/n.slotCount,f=new Date(i);f.setMinutes(f.getMinutes()+c),l=f}return{startTime:i,endTime:l??i,isAllDay:s,element:r}},zn=24,En=4,Cs=40;class Me{static filterEventsByDateRange(n,r){if(!(n!=null&&n.length)||!(r!=null&&r.length))return[];const e=$.normalizeDate(r[0]),s=$.normalizeDate(r[r.length-1]);return n.filter(i=>{if(!i.startTime||!i.endTime)return!1;const l=$.normalizeDate(i.startTime);return!($.normalizeDate(i.endTime)<e||l>s)})}static findNonConflictingPosition(n,r,e,s,i){let l=0,c=!1;for(;!c;){c=!0;for(const f of n){const d=$.normalizeDate(f);if(d>=r&&(d<e||d.getTime()===e.getTime()&&s)){const g=$.generateDateKey(f);if((i.get(g)||[]).findIndex((a,C)=>C===l&&a)!==-1){c=!1,l++;break}}}}return l}static mapEventData(n,r){if(!n||n.length===0)return[];const e=r||{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException"};return n.map(s=>{const i={};if(e.id&&Object.prototype.hasOwnProperty.call(s,e.id)&&(i.id=s[e.id]),e.subject&&Object.prototype.hasOwnProperty.call(s,e.subject)&&(i.subject=s[e.subject]),e.startTime&&Object.prototype.hasOwnProperty.call(s,e.startTime)){const f=s[e.startTime];f instanceof Date?i.startTime=f:(typeof f=="string"||typeof f=="number")&&(i.startTime=new Date(f))}if(e.endTime&&Object.prototype.hasOwnProperty.call(s,e.endTime)){const f=s[e.endTime];f instanceof Date?i.endTime=f:(typeof f=="string"||typeof f=="number")&&(i.endTime=new Date(f))}e.isAllDay&&Object.prototype.hasOwnProperty.call(s,e.isAllDay)&&(i.isAllDay=s[e.isAllDay]),e.location&&Object.prototype.hasOwnProperty.call(s,e.location)&&(i.location=s[e.location]),e.description&&Object.prototype.hasOwnProperty.call(s,e.description)&&(i.description=s[e.description]),e.isReadonly&&Object.prototype.hasOwnProperty.call(s,e.isReadonly)&&(i.isReadonly=s[e.isReadonly]),e.isBlock&&Object.prototype.hasOwnProperty.call(s,e.isBlock)&&(i.isBlock=s[e.isBlock]),e.recurrenceRule&&Object.prototype.hasOwnProperty.call(s,e.recurrenceRule)&&(i.recurrenceRule=s[e.recurrenceRule]),e.recurrenceID&&Object.prototype.hasOwnProperty.call(s,e.recurrenceID)&&(i.recurrenceID=s[e.recurrenceID]),e.recurrenceException&&Object.prototype.hasOwnProperty.call(s,e.recurrenceException)&&(i.recurrenceException=s[e.recurrenceException]);const l=new Set(Object.values(e)),c=Object.fromEntries(Object.entries(s).filter(([f])=>!l.has(f)));return Object.assign(i,c),i.guid=Me.generateEventGuid(),i})}static sortEventsByStartTimeAndDuration(n){return[...n].sort((r,e)=>{if(!r.event.startTime||!e.event.startTime)return 0;const s=r.event.startTime.getTime()-e.event.startTime.getTime();if(s!==0)return s;const i=r.event.endTime?r.event.endTime.getTime()-r.event.startTime.getTime():0;return(e.event.endTime?e.event.endTime.getTime()-e.event.startTime.getTime():0)-i})}static calculateOverlappingEvents(n,r=!0){if(!n||n.length===0)return[];if(!r)return this.resolveOverlappingEvents(n);const e=this.sortEventsByStartTimeAndDuration(n);return this.identifyOverlapGroups(e)}static identifyOverlapGroups(n){const r=[];for(const e of n){let s=!1;for(const i of r)if(i.some(c=>this.eventsOverlap(e,c))){i.push(e),s=!0;break}s||r.push([e])}return this.convertOverlapGroupsToEventGroups(r)}static convertOverlapGroupsToEventGroups(n){return n.filter(e=>e.length>0).map(e=>{if(e.length===1)return[{...e[0],positionIndex:0,totalOverlapping:1}];const s=[...e].sort((c,f)=>!c.event.startTime||!f.event.startTime?0:c.event.startTime.getTime()-f.event.startTime.getTime()),i=[],l=[];return s.forEach(c=>{let f=i.findIndex(d=>d<=c.event.startTime);f===-1?(f=i.length,i.push(c.event.endTime)):i[parseInt(f.toString(),10)]=c.event.endTime,l.push(f)}),s.map((c,f)=>({...c,positionIndex:l[parseInt(f.toString(),10)],totalOverlapping:i.length}))})}static prioritizeEvents(n){return[...n].sort((r,e)=>{if(r.event.isAllDay&&!e.event.isAllDay)return-1;if(!r.event.isAllDay&&e.event.isAllDay)return 1;if(!r.event.startTime||!e.event.startTime||!r.event.endTime||!e.event.endTime)return 0;const s=r.event.endTime.getTime()-r.event.startTime.getTime(),i=e.event.endTime.getTime()-e.event.startTime.getTime();return s!==i?i-s:r.event.startTime.getTime()-e.event.startTime.getTime()})}static resolveOverlappingEvents(n){if(!n||n.length===0)return[];const r=this.prioritizeEvents(n),e=[],s=new Set;return r.forEach(i=>{if(s.has(i))return;const l=r.filter(f=>i!==f&&!s.has(f)&&this.eventsOverlap(i,f)),c=[{...i,positionIndex:0,totalOverlapping:1}];e.push(c),s.add(i),l.forEach(f=>{s.add(f)})}),e}static eventsOverlap(n,r){return!(n!=null&&n.event.startTime)||!(n!=null&&n.event.endTime)||!(r!=null&&r.event.startTime)||!(r!=null&&r.event.endTime)?!1:n.event.startTime<r.event.endTime&&n.event.endTime>r.event.startTime||r.event.startTime<n.event.endTime&&r.event.endTime>n.event.startTime}static checkEventOverlap(n,r,e=!0,s){const i=e?n.startTime:n[s.startTime],l=e?n.endTime:n[s.endTime];if(!i||!l)return!1;const c=$.normalizeDate(i),f=$.normalizeDate(l);return(r||[]).filter(h=>{if(h.isBlock||!h.startTime||!h.endTime)return!1;const g=$.normalizeDate(h.startTime);return!($.normalizeDate(h.endTime)<c||g>f)}).some(h=>{const g=h.startTime,m=h.endTime,E=h.isAllDay;return h.id===n.id||h.id===n.Id||h.guid===n.guid||!g||!m?!1:E?i<=m&&l>=g:i<m&&l>g})}static isBlockRange(n,r,e=!0,s){const i=Array.isArray(n)?n:[n];if(i&&i.length===0)return!1;const l=(r==null?void 0:r.filter(c=>c.isBlock))||[];if(l&&l.length===0)return!1;for(const c of l){const f=c.startTime,d=c.endTime;if(!f||!d)continue;const h=c.isAllDay||Me.isMultiDayEvent(c);for(const g of i){const m=e?g.startTime:g[s.startTime],E=e?g.endTime:g[s.endTime];if(!m||!E)continue;let a;if(h){const C=$.normalizeDate(m),v=$.normalizeDate(E),R=$.normalizeDate(f),j=$.normalizeDate(d);a=C<=j&&R<=v}else a=m<d&&E>f;if(a)return!0}}return!1}static splitEventByDay(n,r){const e=[],s=$.normalizeDate(n.startTime),i=$.normalizeDate(n.endTime),l=r.filter(f=>{const d=$.normalizeDate(f);return d>=s&&d<=i}).length;let c=0;return r.forEach((f,d)=>{const h=$.normalizeDate(f);if(h>=s&&h<=i){const g=h.getTime()===s.getTime(),m=h.getTime()===i.getTime(),E=g?new Date(n.startTime):new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0),a=m?new Date(n.endTime):new Date(h.getFullYear(),h.getMonth(),h.getDate()+1,0,0,0),C={event:n,startDate:E,endDate:a,isFirstDay:g,isLastDay:m,segmentIndex:c,totalSegments:l,columnIndex:d};e.push(C),c++}}),e}static isAlldayHasMoreEvents(n,r,e=2){let s=!1;return n.forEach(i=>{const l=$.generateDateKey(i);(r.get(l)||[]).length>e&&(s=!0)}),s}static isMultiDayEvent(n){if(!(n!=null&&n.startTime)||!(n!=null&&n.endTime))return!1;const r=new Date(n.startTime),e=new Date(n.endTime);if($.isSameDay(r,e))return!1;if(n.isAllDay)return!0;const s=$.normalizeDate(r),i=$.normalizeDate(e),l=Math.round((i.getTime()-s.getTime())/pr);return l<=0?!1:l>=2?!0:!$.isMidnight(e)}static getAriaLabel(n){const{subject:r,startTime:e,endTime:s}=n,i=e?e.toString():"",l=s?s.toString():"";return`${r} Begin From ${i} Ends At ${l}`}static generateEventGuid(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}static getEventClassNames(n){const r=[];return n.isBlock?r.push("sf-block-appointment"):(r.push("sf-appointment"),n.isReadonly&&r.push("sf-read-only")),r}static getEventsMap(n,r){const e=new Map;return n.forEach(s=>{const i=$.generateDateKey(s);e.set(i,[])}),r.forEach(s=>{if(!s.startDate)return;const i=$.generateDateKey(s.startDate),l=e.get(i)||[];l&&(l.push(s),e.set(i,l))}),e}static getMaxEventsInCell(n,r){let e=0;return r.forEach(s=>{var c;const i=$.generateDateKey(s),l=(c=n.get(i))==null?void 0:c.filter(f=>!f.event.isBlock);e=Math.max(e,l==null?void 0:l.length)}),e}static processDayEvents(n,r){if(!(n!=null&&n.length)||!(r!=null&&r.length))return[];const e=Me.filterEventsByDateRange(r,n),s=[];let i=new Map;return n.forEach(c=>{const f=$.generateDateKey(c);i.set(f,[])}),$.sortByTimeAndSpan(e).forEach(c=>{if(!c.startTime||!c.endTime)return;const f=Me.getEventClassNames(c),d=$.normalizeDate(c.startTime),h=$.normalizeDate(c.endTime),g=Me.isMultiDayEvent(c),m=g?$.getDaysCount(c.startTime,c.endTime,c.isAllDay):1,E=c.isAllDay?!0:!$.isMidnight(c.endTime),a=c.isBlock?null:Me.findNonConflictingPosition(n,d,h,E,i);if(g)for(const C of n){const v=$.normalizeDate(C);if(!(v>=d&&(v<h||v.getTime()===h.getTime()&&E)))continue;c.isBlock||(i=ct.setIndexPosition(i,C,a));const j=v.getTime()===d.getTime(),y=v.getTime()===h.getTime()&&E,D=Math.floor((v.getTime()-d.getTime())/(1e3*60*60*24)),S=n.findIndex(b=>{const M=$.normalizeDate(b);return M>=d&&(M<h||M.getTime()===h.getTime()&&E)})===n.findIndex(b=>$.normalizeDate(b).getTime()===v.getTime()),k=j?new Date(c.startTime.getTime()):new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0),z=y?new Date(c.endTime.getTime()):new Date(v.getFullYear(),v.getMonth(),v.getDate()+1,0,0,0),N=`${C.toISOString()}-${c.id}`;s.push({event:c,startDate:k,endDate:z,isFirstDay:j,isLastDay:y,isFirstSegmentInRenderRange:S,segmentIndex:D,totalSegments:m,positionIndex:a,eventClasses:f,eventKey:N,isMonthEvent:!0})}else{c.isBlock||(i=ct.setIndexPosition(i,d,a));const C=`${d.toISOString()}-${c.id}`;s.push({event:c,startDate:c.startTime,endDate:c.endTime,positionIndex:a,eventClasses:f,eventKey:C,isMonthEvent:!0})}}),s.sort((c,f)=>{const d=c.positionIndex??0,h=f.positionIndex??0;return d-h})}static cloneEventPosition(n,r,e,s,i=!1,l,c){const f=$.normalizeDate(r.startDate),d=$.normalizeDate(r.endDate),{visibleDayCount:h}=$.getVisibleAndStartDays(r.week,f,d,r.event),g=Math.max(0,e*h-En);let m,E,a;if(s){const v=n==null?void 0:n.querySelector(`.${p.ALL_DAY_ROW}`);m=v.querySelectorAll(`.${p.ALL_DAY_CELL}`).item(r.columnIndex),E=v.offsetTop}else m=yr(n,r.rowIndex,r.columnIndex),l?E=m.querySelector(`.${p.APPOINTMENT_WRAPPER}`).offsetTop:(E=m==null?void 0:m.offsetTop,a=Math.max(0,c.offsetHeight));const C={top:`${E}px`,width:`${g}px`,height:`${a}px`};if(i){const v=m.parentElement?Math.max(0,m.parentElement.clientWidth-(m.offsetLeft+m.offsetWidth)):0;C.insetInlineStart=`${v}px`}else C.insetInlineStart=`${m.offsetLeft}px`;return C}static splitEventByWeek(n,r){const e=new Date(r.startTime),s=new Date(r.endTime),i=$.normalizeDate(e),l=$.normalizeDate(s),c=[];return n.forEach((f,d)=>{const h=$.normalizeDate(f[0]),g=$.normalizeDate(f[f.length-1]),m=$.addDays(g,1);if(!(e<=m&&s>=h))return;const a=i>=h&&i<=g,C=l>=h&&l<=g,v=a?e:h,R=C?s:m,j=f.map(N=>$.normalizeDate(N).getTime()),y=$.normalizeDate(v).getTime();let D=j.indexOf(y);D===-1&&(D=0);const S=i.getTime()<h.getTime(),k=l.getTime()>g.getTime(),z={event:r,startDate:v,endDate:R,week:f,rowIndex:d,columnIndex:D,isOverflowLeft:S,isOverflowRight:k};c.push(z)}),c}static processCloneEvent(n,r,e,s,i,l,c,f=!1,d,h){const g=c?[r]:$.getRenderWeeks(r,s,i),m=this.splitEventByWeek(g,e),E=Me.isMultiDayEvent(e);return m.forEach(a=>{var C;a.eventStyle=this.cloneEventPosition(n,a,l,c,f,d,h),a.totalSegments=E?$.getDaysCount(a.startDate,a.endDate,(C=a.event)==null?void 0:C.isAllDay):1}),m}static processTimeSlotCloneEvent(n,r,e,s,i,l,c,f=!1){const d=this.splitEventByDay(e,r);return d.forEach(h=>{const g=ct.calculateTopPosition(h.startDate,s,i),m=ct.calculateHeight(h,s,i,l),E=yr(n,0,h.columnIndex);if(h.eventStyle={top:g,height:m,width:`${c}px`},f){const a=E.parentElement?Math.max(0,E.parentElement.clientWidth-(E.offsetLeft+E.offsetWidth)):0;h.eventStyle.right=`${a}px`}else h.eventStyle.left=`${E.offsetLeft}px`}),d}static getEventByGuid(n,r){if(!(!(n!=null&&n.length)||!r))return n.find(e=>(e==null?void 0:e.guid)===r)}}var Nt;(function(o){o.Left="left",o.Right="right",o.Up="up",o.Down="down"})(Nt||(Nt={}));var At;(function(o){o.OccurrenceAlert="occurenceAlert",o.SameDayAlert="sameDayAlert"})(At||(At={}));function Vl(o,n){if(!o||o.length===0||!n||n.length===0)return o;const r=[];for(const e of o)if(e.recurrenceRule&&!e.recurrenceID){const s=Wl(e);r.push(...s)}else r.push(e);return r}function Wl(o){const n=Fo(o.startTime,o.recurrenceRule,o.recurrenceException,0),r=o.endTime.getTime()-o.startTime.getTime(),e=[];for(let s=0;s<n.length;s++){const i=n[s],l=Pt({},o,null,!0);l.startTime=new Date(i),l.endTime=new Date(new Date(i).getTime()+r),l.recurrenceID=l.id,l.guid=Fl(),delete l.recurrenceException,e.push(l)}return e}function Fl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{const n=Math.random()*16|0;return(o==="x"?n:n&3|8).toString(16)})}function br(o,n,r,e,s){var g,m,E,a,C;if(!o.recurrenceID||!o.recurrenceRule)return{isValid:!0,shouldAlert:!1,messageKey:At.SameDayAlert};const i=e.find(v=>v.id===o.recurrenceID);let l=s.filter(v=>v.recurrenceID===i.id&&v.recurrenceRule);l=l.sort((v,R)=>v.startTime.getTime()-R.startTime.getTime());const c=l.findIndex(v=>v.guid===o.guid);if(c===-1)return{isValid:!0,shouldAlert:!1};const f=(m=$.normalizeDate((g=l[c-1])==null?void 0:g.startTime))==null?void 0:m.getTime(),d=(a=$.normalizeDate((E=l[c+1])==null?void 0:E.startTime))==null?void 0:a.getTime(),h=$.normalizeDate(n).getTime();return c===0&&h<d?{isValid:!0,shouldAlert:!1}:c===l.length-1&&h>f?{isValid:!0,shouldAlert:!1}:h>f&&h<d?((C=l[c+1])==null?void 0:C.startTime.getTime())<r.getTime()?{isValid:!1,shouldAlert:!0,messageKey:At.SameDayAlert}:{isValid:!0,shouldAlert:!1}:h<f&&h<d||h>f&&h>d||!f&&h>d||!d&&h<f?{isValid:!1,shouldAlert:!0,messageKey:At.OccurrenceAlert}:{isValid:!1,shouldAlert:!0,messageKey:At.SameDayAlert}}function Ds(o,n){return n==null?void 0:n.find(r=>r.id===o.recurrenceID)}function po(o,n){return(o==null?void 0:o.reduce((r,e)=>{const s=Number(e[n.id]||e.id);return Math.max(r,s)},0))??0}function Mr(o,n,r,e,s,i,l){var f,d;const c={};if(Array.isArray(i)||o||s)if(o.recurrenceRule&&o.recurrenceID===o.id){const h=po(i,s);c[s.id]=h+1,vs(c,o,n,r,s),(f=e==null?void 0:e.current)!=null&&f.addEvent&&e.current.addEvent(c),ho(o,e,s,l)}else c[s.id]=o.id,vs(c,o,n,r,s),(d=e==null?void 0:e.current)!=null&&d.saveEvent&&e.current.saveEvent(c);return c}function ho(o,n,r,e){var s;if(o.recurrenceException){const i=e==null?void 0:e.find(l=>Number(l[r.id]||l.id)===Number(o.recurrenceID));if((s=n==null?void 0:n.current)!=null&&s.saveEvent){const l=i[r.recurrenceException]||i.recurrenceException?String(i[r.recurrenceException]??i.recurrenceException):"",c=l?`${l},${o.recurrenceException}`:o.recurrenceException||l,f={[r.id]:i[r.id]||i.id,[r.recurrenceException]:c};n.current.saveEvent(f)}}}function vs(o,n,r,e,s){o[s.subject]=n.subject,o[s.startTime]=r,o[s.endTime]=e,o[s.isAllDay]=n.isAllDay,o[s.recurrenceID]=n.recurrenceID,o[s.recurrenceException]=n.recurrenceException,o[s.recurrenceRule]=n.recurrenceRule}function hn(o,n,r,e,s,i){var l,c,f,d;if(n==="occurrence")o.recurrenceID!==o.id?(c=(l=r==null?void 0:r.current)==null?void 0:l.deleteEvent)==null||c.call(l,o):(o.recurrenceException=Kn(o.startTime),ho(o,r,e,s));else if(n==="series"){const h=i??(s==null?void 0:s.filter(g=>(g.recurrenceID||g.id)===o.recurrenceID));for(const g of h)(d=(f=r==null?void 0:r.current)==null?void 0:f.deleteEvent)==null||d.call(f,g)}}function ys(o,n,r,e){e==null||e.show({title:o,message:n,confirmText:r,showCancel:!1,onConfirm:()=>e.hide()})}const Bl=o=>{const{activeViewProps:n,renderDates:r}=o,{eventSettings:e,readOnly:s,onDataChangeStart:i,onDataChangeComplete:l,onError:c,onDataRequest:f}=n,[d,h]=t.useState(),[g,m]=t.useState(),E=t.useMemo(()=>(e==null?void 0:e.dataSource)instanceof nr?e.dataSource:Array.isArray(e==null?void 0:e.dataSource)?new nr(e.dataSource):new nr([]),[e==null?void 0:e.dataSource]),a=t.useMemo(()=>(e==null?void 0:e.query)instanceof Jr?e==null?void 0:e.query:new Jr,[e==null?void 0:e.query]),C=(w,I)=>{const Y=a.clone();return w&&I&&(Y.addParams("StartDate",w.toISOString()),Y.addParams("EndDate",I.toISOString())),Y},v=w=>E.executeQuery(w),R=()=>e.query?e.query.clone().fromTable:null,j=w=>{const I={result:w.result,count:w.count};f&&f(I);const Y=I.result,Z=Me.mapEventData(Y,e.fields),ue=Vl(Z,r);m(Z),h(ue)},y=w=>{c&&c(w)},D=t.useCallback(()=>{if(!r||r.length===0)return;const w=C(r[0],r[r.length-1]);v(w).then(Y=>j(Y)).catch(Y=>y(Y))},[r,v,C]),S=w=>(typeof w[e.fields.startTime]=="string"&&(w[e.fields.startTime]=$.getDateFromString(w[e.fields.startTime])),typeof w[e.fields.endTime]=="string"&&(w[e.fields.endTime]=$.getDateFromString(w[e.fields.endTime])),w),k=t.useCallback(w=>{var Y;const I={cancel:!1,addedRecords:w.editParams.addedRecords,changedRecords:w.editParams.changedRecords,deletedRecords:w.editParams.deletedRecords};(Y=E.dataSource)!=null&&Y.offline?(l&&l(I),D()):w.promise.then(()=>{l&&l(I),D()}).catch(Z=>{c&&c(Z)})},[l,c,D,E]),z=t.useCallback(w=>{const I={addedRecords:[],changedRecords:[],deletedRecords:[]};let Y;if(w.addedRecords instanceof Array){for(let ue of w.addedRecords){ue=S(ue);const K=Pt({},ue,null,!0);I.addedRecords.push(K)}Y=E.saveChanges(I,e.fields.id,R(),C())}else{const ue=w.addedRecords;I.addedRecords.push(ue),Y=E.insert(ue,R(),C())}k({cancel:!1,promise:Y,editParams:I})},[E,e,R,C,k]),N=t.useCallback(w=>{let I;const Y={addedRecords:[],changedRecords:[],deletedRecords:[]};w.deletedRecords.length>1?(Y.deletedRecords=Y.deletedRecords.concat(w.deletedRecords),I=E.saveChanges(Y,e.fields.id,R(),C())):(Y.deletedRecords.push(w.deletedRecords[0]),I=E.remove(e.fields.id,w.deletedRecords[0],R(),C())),k({cancel:!1,promise:I,editParams:Y})},[E,e,R,C,k]),b=t.useCallback(w=>{let I;const Y={addedRecords:[],changedRecords:[],deletedRecords:[]};if(w.changedRecords instanceof Array){for(let ue of w.changedRecords){ue=S(ue);const K=Pt({},ue,null,!0);Y.changedRecords.push(K)}I=E.saveChanges(Y,e.fields.id,R(),C())}else{const ue=w.changedRecords;Y.changedRecords.push(ue),I=E.update(e.fields.id,ue,R(),C())}k({cancel:!1,promise:I,editParams:Y})},[E,e,R,C,k,S]),M=t.useCallback(async w=>{if(e.allowAdding&&!s){const I=w instanceof Array?w:[w];if(I.length===0)return;const Y={cancel:!1,addedRecords:I,changedRecords:[],deletedRecords:[]};i&&i(Y),Y.promise?Y.promise.then(Z=>{Z&&z(Y)}).catch(Z=>{c&&c(Z)}):z(Y)}},[e,s,i,c,z]),T=t.useCallback(async w=>{if(e.allowDeleting&&!s){const I=w instanceof Array?w:[w];if(I.length===0)return;const Y={cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:I};i&&i(Y),Y.promise?Y.promise.then(Z=>{Z&&N(Y)}).catch(Z=>{c&&c(Z)}):N(Y)}},[e,s,i,c,N]),H=t.useCallback(async w=>{if(e.allowEditing&&!s){const I=w instanceof Array?w:[w];if(I.length===0)return;const Y={cancel:!1,addedRecords:[],changedRecords:I,deletedRecords:[]};i&&i(Y),Y.promise?Y.promise.then(Z=>{Z&&b(Y)}).catch(Z=>{c&&c(Z)}):b(Y)}},[e,s,i,c,b]);return t.useEffect(()=>{D()},[E,a,r]),{eventsData:d,eventsProcessed:g,addEvent:M,deleteEvent:T,saveEvent:H}},Rr=(o,n="Close")=>u.jsx(Qe,{className:`${p.POPUP_CLOSE} ${p.ROUND}`,onClick:o,"aria-label":n,icon:u.jsx(Bn,{}),color:gt.Secondary,variant:Ge.Standard},"close-btn"),Ul=({visible:o,target:n,schedulerElement:r,popupPosition:e,onClose:s,onOpen:i,children:l,adaptive:c})=>{if(!o||!n)return null;const{dir:f}=$e();return Ae.isDevice&&c?Ft.createPortal(u.jsx("div",{className:`${p.CONTROL} ${p.POPUP_WRAPPER} ${p.MOBILE_POPUP}
                ${f==="rtl"?p.RTL:""}`,children:l}),document==null?void 0:document.body):u.jsx(Ot,{open:o,relateTo:n,position:e,collision:{X:st.Flip,Y:st.Fit},actionOnScroll:_s.None,autoReposition:!0,onOpen:i,onClose:s,className:`${p.POPUP_WRAPPER}`,viewPortElementRef:r,zIndex:1003,children:l})},zl=(o,n)=>({show:()=>o(!0),hide:()=>o(!1),element:n.current}),Hr=t.forwardRef((o,n)=>{var U;const{onClose:r,onEditEvent:e,onMoreDetails:s}=o,{schedulerRef:i,eventSettings:l,showQuickInfoPopup:c,showDeleteAlert:f,showRecurrenceDeleteAlert:d,view:h,readOnly:g,timeFormat:m,quickInfo:E}=Fe(),{eventsProcessed:a}=Mt(),[C,v]=t.useState({}),[R,j]=t.useState({}),[y,D]=t.useState({}),[S,k]=t.useState(null),[z,N]=t.useState({X:"right",Y:"top"}),[b,M]=t.useState(!1),T=t.useRef(null),H=t.useRef(null),{visible:w,setVisible:I,target:Y,setTarget:Z,popupElement:ue,schedulerElement:K,handleClose:O,closeAllPopups:L,handleRef:V}=fo(r),{locale:ee}=$e();kr(ue,w,O);const{getString:de}=nt(ee||"en-US");t.useEffect(()=>{b&&(requestAnimationFrame(()=>{te()}),M(!1))},[b]),t.useImperativeHandle(n,()=>({...zl(I,ue),handleCellClick:(G,ge)=>{c&&(v(G),Z(ge),k("cell"),D({[l.fields.startTime]:G.startTime,[l.fields.endTime]:G.isAllDay?$.addDays(G.endTime,-1):G.endTime,[l.fields.isAllDay]:G.isAllDay}),q(),I(!0))},handleEventClick:(G,ge)=>{c&&(j(G),Z(ge),k("event"),q(),I(!0),qn(ge))},handleDelete:me}));const F=()=>{N((h==null?void 0:h.toLowerCase())==="day"?{X:"center",Y:"center"}:{X:"right",Y:"top"}),M(!0)},q=()=>{(T||H)&&O(),requestAnimationFrame(()=>{te()})},te=()=>{S==="cell"?T.current&&T.current.element&&T.current.element.focus():S==="event"&&H.current&&H.current.element&&H.current.element.focus()},ne=t.useCallback(G=>{const ge=G.value,ce={...y,[l.fields.subject]:ge};D(ce)},[y]),oe=t.useCallback(()=>{var ge,ce;const G={...y,[l.fields.id]:Me.generateEventGuid(),[l.fields.subject]:y[l.fields.subject]||de("newEvent")};(ce=(ge=i==null?void 0:i.current)==null?void 0:ge.addEvent)==null||ce.call(ge,G),O(),L()},[y,O]),Ce=t.useCallback(()=>{e(R),O()},[R,O,e]),ve=t.useCallback(()=>{var ge;const G={...C,[l.fields.subject]:(ge=T==null?void 0:T.current)==null?void 0:ge.value};s(G),O()},[C,O,s]),me=t.useCallback(()=>{const G=ce=>{S==="event"&&R&&hn(R,ce,i,l.fields,a),O(),L()},ge=()=>{var ce,ye;S==="event"&&R&&((ye=(ce=i==null?void 0:i.current)==null?void 0:ce.deleteEvent)==null||ye.call(ce,R)),O(),L()};S==="event"&&R&&R.recurrenceID?d==null||d(G):f==null||f(ge),I(!1)},[S,R,O,L,i,f,d,l]),x=G=>ge=>{(ge.key==="Enter"||ge.key===" "&&ge.target.type==="button")&&(ge.preventDefault(),G())},B={startTime:C.startTime,endTime:C.endTime,isAllDay:C.isAllDay,element:C.element},le=u.jsx(u.Fragment,{children:E!=null&&E.addHeader?E==null?void 0:E.addHeader({cellData:B}):u.jsx("div",{className:p.POPUP_HEADER,children:u.jsx("div",{className:`${p.POPUP_HEADER_WRAP} ${p.CONTENT_RIGHT}`,children:Rr(O,de("close"))})})}),se=u.jsx(u.Fragment,{children:E!=null&&E.addContent?E==null?void 0:E.addContent({cellData:B}):u.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[u.jsx("div",{className:p.POPUP_INPUT_WRAP,children:u.jsx(hr,{ref:T,className:p.POPUP_CELL_SUBJECT,placeholder:de("addTitle"),onKeyDown:x(oe),onChange:ne,value:y[(U=l==null?void 0:l.fields)==null?void 0:U.subject]||"",size:Vt.Large})}),C.startTime&&C.endTime&&u.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[u.jsx(cs,{}),u.jsx("span",{className:p.POPUP_TIME_TEXT,children:$.formatCellDateRange(new Date(C.startTime),new Date(C.endTime),ee,m)})]})]})}),Se=u.jsx(u.Fragment,{children:E!=null&&E.addFooter?E==null?void 0:E.addFooter({cellData:B}):u.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[u.jsx(Qe,{className:p.POPUP_MORE_DETAILS,onClick:ve,color:gt.Primary,variant:Ge.Standard,children:de("moreDetails")}),u.jsx(Qe,{className:p.SAVE_EVENT,onClick:oe,onKeyDown:x(oe),color:gt.Primary,variant:Ge.Standard,children:de("save")})]})}),Q=u.jsx(u.Fragment,{children:E!=null&&E.editHeader?E==null?void 0:E.editHeader({eventData:R}):u.jsxs("div",{className:`${p.POPUP_HEADER} ${p.POPUP_CELL_HEADER} ${p.DISPLAY_FLEX}`,children:[u.jsx("div",{className:p.POPUP_EVENT_SUBJECT,children:R.subject||de("addTitle")}),u.jsx("div",{className:`${p.POPUP_HEADER_WRAP}`,children:Rr(O,de("close"))})]})}),ae=u.jsx(u.Fragment,{children:E!=null&&E.editContent?E==null?void 0:E.editContent({eventData:R}):u.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[R.startTime&&R.endTime&&u.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[u.jsx(cs,{}),u.jsx("span",{className:p.POPUP_TIME_TEXT,children:$.formatPopupDateRange(R,ee,m)})]}),R.location&&u.jsxs("div",{className:`${p.LOCATION} ${p.DISPLAY_FLEX}`,children:[u.jsx(hi,{}),u.jsx("span",{className:p.POPUP_LOCATION_TEXT,children:R.location})]}),R.description&&u.jsxs("div",{className:`${p.DESCRIPTION} ${p.DISPLAY_FLEX}`,children:[u.jsx(gi,{}),u.jsx("span",{className:p.POPUP_DESCRIPTION_TEXT,children:R.description})]})]})}),fe=u.jsx(u.Fragment,{children:E!=null&&E.editFooter?E==null?void 0:E.editFooter({eventData:R}):u.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[u.jsx(Qe,{ref:H,className:p.EDIT_EVENT,disabled:!!(R!=null&&R.isReadonly)||g,onClick:Ce,onKeyDown:x(Ce),color:gt.Primary,variant:Ge.Standard,children:de("edit")}),u.jsx(Qe,{className:p.DELETE_EVENT,disabled:!!(R!=null&&R.isReadonly)||g,onClick:me,onKeyDown:x(me),color:gt.Primary,variant:Ge.Standard,children:de("delete")})]})}),A=()=>u.jsxs("div",{ref:V,className:`${p.QUICK_INFO_WRAPPER} ${p.CELL_POPUP}`,children:[le,se,Se]}),re=()=>u.jsxs("div",{ref:V,className:`${p.QUICK_INFO_WRAPPER} ${p.EVENT_POPUP}`,children:[Q,ae,fe]});return u.jsx(Ul,{visible:w,target:Y,popupPosition:z,schedulerElement:K,onClose:O,onOpen:F,adaptive:(E==null?void 0:E.adaptive)??!0,children:S==="cell"?A():re()})});Hr.displayName="QuickInfoPopup";Hr.__docgenInfo={description:"Combined QuickInfoPopup component that handles both cell and event popups",methods:[],displayName:"QuickInfoPopup"};function Yl(){const{renderDates:o}=pt(),{showWeekNumber:n,workDays:r,weekRule:e,firstDayOfWeek:s}=Fe(),{locale:i}=$e(),[l,c]=t.useState(!0),[f,d]=t.useState(!1),h=o.length>0&&n?$.getWeekNumber(o[0],e,s):null,g=t.useCallback(a=>{d(a)},[]),m=t.useCallback(()=>{c(a=>!a)},[]);return{headerCells:o.map((a,C)=>{const v=$.isSameDay(a,new Date),R=$.isWeekend(a,r),j=ut(a,{type:"date",skeleton:"E",locale:i}),y=ut(a,{type:"date",skeleton:"d",locale:i}),D=["sf-header-cells",v?"sf-current-day":"",R?"sf-weekend":""].filter(Boolean).join(" ");return{date:a,dayName:j,dateNumber:y,isToday:v,isWeekend:R,className:D,key:`sf-header-cells-${C}`}}),isAllDayCollapsed:l,showAllDayToggle:f,weekNumber:h,toggleAllDayCollapse:m,handleMoreEventsChange:g}}function jr(){const{onViewChange:o,onSelectedDateChange:n,getAvailableViews:r}=Fe();return{handleDateClick:t.useCallback((s,i)=>{s.preventDefault(),s.stopPropagation(),ft.isDayViewAvailable(r)&&(n({value:i}),o({value:"Day"}))},[n,o])}}const Kl=()=>{const[o,n]=t.useState({date:null,events:[],visible:!1,target:null}),r=t.useRef(null),e=t.useRef(null),{locale:s}=$e(),{handleDateClick:i}=jr(),{quickPopupRef:l}=Fe();t.useEffect(()=>{o.target&&(e.current=o.target.closest(".sf-scheduler"))},[o.target]);const c=()=>{n({date:null,events:[],target:null,visible:!1})};mo(c);const f=(g,m)=>{var E;(E=l.current)==null||E.handleEventClick(g,m)},d=(g,m)=>{m&&(i(g,o.date),c())},h=(g,m,E)=>{n({date:g,events:m,target:E,visible:!0})};return{date:o.date,events:o.events,visible:o.visible,target:o.target,popupElement:r,schedulerElement:e,locale:s,handleClose:c,handleEventClick:f,handleNavigation:d,open:h}},$r=t.forwardRef((o,n)=>{const{date:r,events:e,visible:s,target:i,popupElement:l,schedulerElement:c,locale:f,handleClose:d,handleEventClick:h,handleNavigation:g,open:m}=Kl(),{eventTemplate:E,getAvailableViews:a}=Fe(),C=ft.isDayViewAvailable(a),{getString:v}=nt(f||"en-US");t.useImperativeHandle(n,()=>({element:l.current,open:m})),kr(l,s,d);const R=t.useCallback(y=>E?E(y):u.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:y.subject||v("addTitle")}),[E]),j=()=>u.jsxs("div",{ref:l,className:p.MORE_EVENT_POPUP,children:[u.jsxs("div",{className:p.MORE_EVENT_HEADER,children:[u.jsxs("div",{className:`${p.MORE_EVENT_DATE_HEADER} ${C?p.LINK:""}`,onClick:y=>g(y,C),tabIndex:0,children:[ut(r,{format:"E",calendar:"gregorian",locale:f})," ",ut(r,{format:"d",calendar:"gregorian",locale:f})]}),u.jsx("div",{className:"sf-more-event-close",children:Rr(d,v("close"))})]}),u.jsx("div",{className:p.MORE_EVENT_CONTENT,children:e.map(y=>u.jsx("div",{className:p.APPOINTMENT,onClick:D=>h(y,D.currentTarget),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),h(y,D.currentTarget))},"data-id":`Appointment_${y.id}`,"data-guid":y.guid,role:"button",tabIndex:0,children:R(y)},`eventId-${y.id}`))})]});return!s||!i?null:Ae.isDevice?Ft.createPortal(u.jsx("div",{className:`${p.CONTROL} ${p.MORE_POPUP_WRAPPER} ${p.MOBILE_POPUP}`,children:j()}),document==null?void 0:document.body):u.jsx(Ot,{open:s,relateTo:i,position:{X:"right",Y:"top"},collision:{X:st.Flip,Y:st.Flip},autoReposition:!0,onClose:d,className:p.MORE_POPUP_WRAPPER,viewPortElementRef:c||null,zIndex:1e3,children:j()})});$r.displayName="MorePopup";$r.__docgenInfo={description:"MorePopup component for displaying additional events in month view",methods:[],displayName:"MorePopup"};const Xl=(o,n,r)=>{const{schedulerRef:e,keyboardNavigation:s,handleTodayClick:i,eventSettings:l,readOnly:c,showDeleteAlert:f,showQuickInfoPopup:d,getAvailableViews:h,handleCurrentViewChange:g,handlePreviousClick:m,handleNextClick:E}=o,a=(N,b)=>{N.getAttribute("tabindex")!=="0"&&N.setAttribute("tabindex","0"),N.focus(),b.preventDefault()},C=N=>{var T;const b=(T=e.current)==null?void 0:T.element,M=b==null?void 0:b.querySelector(`.${p.CONTENT_TABLE} .${p.WORK_CELLS}`);M&&(a(M,N),M.classList.add(p.SELECTED_CELL))},v=N=>{i&&(i(),N.preventDefault())},R=N=>{m&&(m(),N.preventDefault(),N.stopPropagation())},j=N=>{E&&(E(),N.preventDefault(),N.stopPropagation())},y=N=>{const b=N.code.replace("Digit",""),M=parseInt(b,10)-1;if(isNaN(M)||M<0)return;const T=h==null?void 0:h();if(!(!T||T.length===0)&&M<T.length){const H=T[parseInt(M.toString(),10)];g&&(g(H.name),N.preventDefault(),N.stopPropagation())}},D=N=>{var T,H,w,I,Y,Z;let b=document==null?void 0:document.activeElement;const M=(T=e.current)==null?void 0:T.element;if((!b||!((H=b.classList)!=null&&H.contains(p.APPOINTMENT))||Et(b,"."+p.POPUP_WRAPPER))&&(b=Ts(n||[],M).element),b&&b.classList.contains(p.APPOINTMENT)){if(qn(b),c||l&&!l.allowDeleting)return;if(d&&((I=(w=o.quickPopupRef)==null?void 0:w.current)!=null&&I.element))(Y=o.quickPopupRef)==null||Y.current.handleDelete();else if(f){const ue=Ts(n||[],M).data,K=Array.isArray(ue)?ue:[ue],O=K[0];if(O&&O.recurrenceID&&o.showRecurrenceDeleteAlert){const L=V=>{O&&hn(O,V,e,l.fields,r)};(Z=o.showRecurrenceDeleteAlert)==null||Z.call(o,L)}else f(()=>{K.forEach(V=>{var ee,de;(de=(ee=e==null?void 0:e.current)==null?void 0:ee.deleteEvent)==null||de.call(ee,V)})})}N.preventDefault()}},S=(N,b,M,T,H,w)=>{let I=b,Y=M;switch(N){case Nt.Left:{if(M>0)Y=M-1;else if(b>0){I=b-1;const Z=H(I);Y=Math.max(0,((Z==null?void 0:Z.length)??1)-1)}break}case Nt.Right:{M<((w==null?void 0:w.length)??0)-1?Y=M+1:b<T.length-1&&(I=b+1,Y=0);break}case Nt.Up:{if(b===0)return null;I=b-1;const Z=H(I);Y=Math.min(M,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}case Nt.Down:{if(b>=T.length-1)return null;I=b+1;const Z=H(I);Y=Math.min(M,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}}return{nextRow:I,nextCol:Y}},k=(N,b)=>{var V,ee,de;const M=(V=e.current)==null?void 0:V.element,T=(de=(ee=b.target).closest)==null?void 0:de.call(ee,"."+p.WORK_CELLS_ROW),H=M.querySelectorAll(`.${p.WORK_CELLS_ROW}`),w=Array.prototype.indexOf.call(H,T),I=F=>{var q;return(q=H.item(F))==null?void 0:q.querySelectorAll(`.${p.WORK_CELLS}`)},Y=I(w),Z=Array.prototype.indexOf.call(Y,b.target);let ue=w,K=Z;const O=S(N,w,Z,H,I,Y);if(!O)return;ue=O.nextRow,K=O.nextCol;const L=yr(M,ue,K);L&&(Un(L),b.preventDefault(),b.stopPropagation())};return N=>{var M,T,H,w;if(!s)return;const b=N.target;if(!(b&&["INPUT","TEXTAREA","SELECT"].indexOf(b.tagName)>-1&&b.closest(`.${p.POPUP_WRAPPER}`))){if(N.shiftKey&&N.altKey&&N.code==="KeyY"){v(N);return}if(N.altKey&&N.code>="Digit1"&&N.code<="Digit6"){y(N);return}switch(N.key){case"Home":{C(N);break}case"ArrowUp":{!N.ctrlKey&&!N.metaKey&&(M=b==null?void 0:b.closest)!=null&&M.call(b,"."+p.WORK_CELLS)&&k(Nt.Up,N);break}case"ArrowDown":{!N.ctrlKey&&!N.metaKey&&(T=b==null?void 0:b.closest)!=null&&T.call(b,"."+p.WORK_CELLS)&&k(Nt.Down,N);break}case"Delete":{D(N);break}case"ArrowLeft":{N.ctrlKey||N.metaKey?R(N):(H=b==null?void 0:b.closest)!=null&&H.call(b,"."+p.WORK_CELLS)&&k(Nt.Left,N);break}case"ArrowRight":{N.ctrlKey||N.metaKey?j(N):(w=b==null?void 0:b.closest)!=null&&w.call(b,"."+p.WORK_CELLS)&&k(Nt.Right,N);break}}}}},Eo=t.createContext(void 0),ql=({children:o})=>{const[n,r]=t.useState({visible:!1,guid:null,segments:[],isDayEvent:!1}),e=t.useCallback(l=>{r({visible:!0,guid:l==null?void 0:l.guid,segments:(l==null?void 0:l.segments)??[],isDayEvent:!!(l!=null&&l.isDayEvent)})},[]),s=t.useCallback(()=>{r({visible:!1,guid:null,segments:[],isDayEvent:!1})},[]),i=t.useMemo(()=>({...n,show:e,hide:s}),[n,e,s]);return u.jsx(Eo.Provider,{value:i,children:o})},Vr=()=>{const o=t.useContext(Eo);if(!o)throw new Error("useCloneEventContext must be used within CloneEventProvider");return o},Wt=({event:o})=>{if(!(o.recurrenceRule||o.recurrenceID)||Ae.isDevice)return null;const r=o.id!==o.recurrenceID,e=r?Ci:vi,s=r?p.EVENT_RECURRENCE_EDIT_ICON_CLASS:p.EVENT_RECURRENCE_ICON_CLASS;return u.jsx("div",{className:`${p.ICONS} ${s}`,children:u.jsx(e,{})})};Wt.displayName="RecurrenceIcon";const Gl=o=>{const{event:n,eventStyle:r,totalSegments:e,isOverflowLeft:s=!1,isOverflowRight:i=!1}=o,{timeFormat:l}=Fe(),{locale:c}=$e(),f=a=>ut(a??new Date,{type:"time",skeleton:"short",format:l,locale:c}),d=a=>u.jsx("div",{className:`sf-indicator sf-icons sf-${a}-icon`,children:a==="left"?u.jsx(Lr,{}):u.jsx(Ir,{})}),h=a=>u.jsx("div",{className:p.TIME,children:a}),E=e?(()=>{const{subject:a,isAllDay:C,startTime:v,endTime:R}=n,j=s?d("left"):!C&&h(f(v)),y=i?d("right"):!C&&h(f(R));return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[j,u.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:a||"Add title"}),y,u.jsx(Wt,{event:n})]})})():(()=>{const{subject:a,startTime:C,isAllDay:v}=n;return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!v&&h(f(C)),u.jsx("div",{className:`${p.SUBJECT}`,children:a||"Add title"}),u.jsx(Wt,{event:n})]})})();return u.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:r,children:E})},Zl=o=>{const{timeFormat:n,startHourTuple:r,endHourTuple:e}=Fe(),{renderDates:s}=pt(),{locale:i}=$e(),l=(h,g)=>{let m=n;m||(m=Bo({type:"time",skeleton:"short",format:n},!1));const E=ut(h,{type:"time",format:m,locale:i}),a=ut(g,{type:"time",format:m,locale:i});return`${E} - ${a}`},c=h=>{const{event:g}=h,m=g.startTime&&g.endTime?l(g.startTime,g.endTime):"";return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[u.jsx("div",{className:`${p.SUBJECT}`,children:g.subject||"Add title"}),g.location&&u.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:g.location}),u.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:m}),u.jsx(Wt,{event:g})]})},f=h=>{const{isOverflowTop:g,isOverflowBottom:m}=ct.getOverflowDirection(h,s,r,e);return u.jsxs(t.Fragment,{children:[g&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:u.jsx(js,{})}),c(h),m&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:u.jsx(Hs,{})})]})},d=o.totalSegments&&o.totalSegments>1||r||e?f(o):c(o);return u.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:o.eventStyle,children:d})},Ql=()=>{var s,i,l,c;const o=Vr(),{schedulerRef:n}=Fe();t.useEffect(()=>{const f=h=>{var E,a,C,v;const g=(h==null?void 0:h.detail)||{},m=(E=n.current)==null?void 0:E.element;m&&(g!=null&&g.container)&&(g.container===m||m.contains(g.container))&&o.show({guid:(a=g.payload)==null?void 0:a.guid,segments:(C=g.payload)==null?void 0:C.segments,isDayEvent:(v=g.payload)==null?void 0:v.isDayEvent})},d=h=>{var E;const g=(h==null?void 0:h.detail)||{},m=(E=n.current)==null?void 0:E.element;m&&(g!=null&&g.container)&&(g.container===m||m.contains(g.container))&&o.hide()};return window==null||window.addEventListener("showCloneEvent",f),window==null||window.addEventListener("hideCloneEvent",d),()=>{window==null||window.removeEventListener("showCloneEvent",f),window==null||window.removeEventListener("hideCloneEvent",d)}},[n,o]);const r=o.isDayEvent?(i=(s=n.current)==null?void 0:s.element)==null?void 0:i.querySelector(`.${p.DAY_CLONE_CONTAINER}`):(c=(l=n.current)==null?void 0:l.element)==null?void 0:c.querySelector(`.${p.TIME_SLOT_CLONE_CONTAINER}`),e=u.jsx(u.Fragment,{children:o.visible&&o.segments.map((f,d)=>o.isDayEvent?u.jsx(Gl,{...f},`${f==null?void 0:f.guid}-${d}`):u.jsx(Zl,{...f},`${f==null?void 0:f.guid}-${d}`))});return r?Ft.createPortal(e,r):null},Jl=o=>{const{visible:n,onConfirm:r,onCancel:e,title:s,message:i,confirmText:l,showCancel:c=!0,action:f="delete"}=o,{locale:d}=$e(),{getString:h}=nt(d||"en-US"),g=f==="recurrenceEdit"||f==="recurrenceDelete",m=f==="recurrenceDelete";return u.jsx(Tn,{header:s||h("deleteEvent"),open:n,style:{maxWidth:"400px"},animation:{effect:"Zoom",duration:400,delay:1},footer:u.jsxs(u.Fragment,{children:[g?u.jsxs(u.Fragment,{children:[u.jsx(Qe,{onClick:()=>r("occurrence"),variant:Ge.Standard,children:h(m?"deleteEvent":"editThisEvent")}),u.jsx(Qe,{onClick:()=>r("series"),variant:Ge.Standard,children:h("editEntireSeries")})]}):u.jsx(Qe,{onClick:()=>r(),variant:Ge.Standard,children:l||h("delete")}),c&&u.jsx(Qe,{onClick:e,variant:Ge.Standard,children:h("cancel")})]}),onClose:e,children:u.jsx("div",{children:i||h("confirmDeleteMessage")})})},go=t.createContext(null),Gn=()=>{const o=t.useContext(go);if(!o)throw new Error("useEditorContext must be used within EditorProvider");return o},ea=({editorState:o,children:n})=>u.jsx(go.Provider,{value:o,children:n}),ta=o=>{const{locale:n}=$e(),{getString:r}=nt(n||"en-US"),{schedulerRef:e,showDeleteAlert:s,eventSettings:i,eventOverlap:l,confirmationDialog:c,onEditorSubmit:f,enableRecurrenceValidation:d}=Fe(),{eventsData:h,eventsProcessed:g}=Mt(),{data:m,action:E,originalData:a,startDateOnly:C,startTimeOnly:v,endDateOnly:R,endTimeOnly:j,slotDuration:y,formRef:D,validateRequiredFields:S}=Gn(),k=t.useCallback(()=>{var I,Y,Z,ue,K,O,L;let T,H;if(m!=null&&m.isAllDay){const V=C?$.normalizeDate(C):void 0,ee=R?$.normalizeDate(R):V;T=V,H=ee}else{const V=(ee,de)=>$.combineDateAndTime(ee,de);if(T=V(C,v)??(m==null?void 0:m.startTime),H=V(R,j)??(m==null?void 0:m.endTime),T&&H&&H<=T){const ee=new Date(T);ee.setMinutes(ee.getMinutes()+y),H=ee}}const w={[((I=i==null?void 0:i.fields)==null?void 0:I.subject)||"subject"]:(m==null?void 0:m.subject)||r("newEvent"),[((Y=i==null?void 0:i.fields)==null?void 0:Y.startTime)||"startTime"]:T,[((Z=i==null?void 0:i.fields)==null?void 0:Z.endTime)||"endTime"]:H,[((ue=i==null?void 0:i.fields)==null?void 0:ue.isAllDay)||"isAllDay"]:!!(m!=null&&m.isAllDay),[((K=i==null?void 0:i.fields)==null?void 0:K.location)||"location"]:(m==null?void 0:m.location)||"",[((O=i==null?void 0:i.fields)==null?void 0:O.description)||"description"]:(m==null?void 0:m.description)||"",[((L=i==null?void 0:i.fields)==null?void 0:L.recurrenceRule)||"recurrenceRule"]:(m==null?void 0:m.recurrenceRule)||""};if(E==="Edit"&&a){const V=new Set(["id","subject","startTime","endTime","isAllDay","location","description","isReadonly","isBlock"]),ee=new Set(Object.values(i==null?void 0:i.fields).filter(F=>{var q;return F!==((q=i==null?void 0:i.fields)==null?void 0:q.id)}));return{...Object.fromEntries(Object.entries(a).filter(([F])=>!V.has(F)&&!ee.has(F))),...w,[i.fields.id]:a.id}}else return{...w,[i.fields.id]:Me.generateEventGuid()}},[m==null?void 0:m.isAllDay,C,v,R,j,y,m==null?void 0:m.startTime,m==null?void 0:m.endTime,i,m==null?void 0:m.subject,m==null?void 0:m.location,m==null?void 0:m.description,E,a]),z=t.useCallback(T=>!l&&Me.checkEventOverlap(T,h,!1,i.fields)?(c==null||c.show({title:r("eventOverlap"),message:r("overlapAlert"),confirmText:r("ok"),showCancel:!1,onConfirm:()=>c.hide()}),!1):Me.isBlockRange(T,h,!1,i.fields)?(c==null||c.show({title:r("alert"),message:r("blockAlert"),confirmText:r("ok"),showCancel:!1,onConfirm:()=>c.hide()}),!1):!0,[l,h,i,c]),N=t.useCallback(()=>{var Y,Z,ue,K,O,L,V,ee,de,F,q;const T=S(r);if(T){c==null||c.show({title:r("alert"),message:T,confirmText:r("ok"),showCancel:!1,onConfirm:()=>c.hide()});return}if(D!=null&&D.current&&!((Y=D.current)!=null&&Y.validate()))return;let H=k();if(f){const te={data:H,cancel:!1,requestType:E,originalData:E==="Add"?void 0:a};if(f(te),te.cancel)return;H=te.data}if(!z(H))return;const w=H[i.fields.startTime],I=H[i.fields.endTime];if(E==="Edit"&&a)(ue=(Z=e==null?void 0:e.current)==null?void 0:Z.saveEvent)==null||ue.call(Z,H);else if(E==="EditOccurrence"&&a)if(a.subject=(m==null?void 0:m.subject)||a.subject,a.location=(m==null?void 0:m.location)||a.location,a.description=(m==null?void 0:m.description)||a.description,a.isAllDay=(m==null?void 0:m.isAllDay)??a.isAllDay,a.id!==a.recurrenceID)if(H[i.fields.id]=a.id,!a.recurrenceRule)(O=(K=e==null?void 0:e.current)==null?void 0:K.saveEvent)==null||O.call(K,H);else{const te=d?br(a,w,I,g,h):{isValid:!0,messageKey:At.SameDayAlert};if(!te.isValid){ys(r("alert"),r(te.messageKey),r("ok"),c);return}(V=(L=e==null?void 0:e.current)==null?void 0:L.saveEvent)==null||V.call(L,H)}else{const te=d?br(a,w,I,g,h):{isValid:!0,messageKey:At.SameDayAlert};if(te.isValid)a.recurrenceException=a.recurrenceException??Kn(a.startTime);else{ys(r("alert"),r(te.messageKey),r("ok"),c);return}Mr(a,w,I,e,i.fields,h,g)}else if(E==="EditSeries"&&a){let te=!1,ne={};const oe=g==null?void 0:g.filter(Ce=>((Ce.recurrenceID&&Ce.recurrenceID===a.recurrenceID&&Ce.id!==a.recurrenceID||!Ce.recurrenceID&&Ce.recurrenceRule&&Ce.id===a.recurrenceID&&Ce.recurrenceException)&&(te=!0),Ce.id===a.recurrenceID&&(ne=Ce),(Ce.recurrenceID||Ce.id)===a.recurrenceID));if(H[i.fields.id]=ne.id,H[i.fields.recurrenceRule]=ne.recurrenceRule,delete H[i.fields.recurrenceID],delete H[i.fields.recurrenceException],te){c==null||c.show({title:r("alert"),message:r("seriesChangeAlert"),confirmText:r("yes"),showCancel:!0,onConfirm:()=>{var Ce,ve;hn(a,"series",e,i.fields,g,oe),(ve=(Ce=e==null?void 0:e.current)==null?void 0:Ce.addEvent)==null||ve.call(Ce,H),o(),c.hide()}});return}else(de=(ee=e==null?void 0:e.current)==null?void 0:ee.saveEvent)==null||de.call(ee,H)}else H[i.fields.recurrenceRule]&&(H[i.fields.id]=po(h,i.fields)+1),(q=(F=e==null?void 0:e.current)==null?void 0:F.addEvent)==null||q.call(F,H);o()},[S,k,z,E,a,e,o,c]),b=t.useCallback(()=>{if(!a)return;const T=()=>{var H,w;E==="EditOccurrence"&&a.recurrenceID?hn(a,"occurrence",e,i.fields,g):E==="EditSeries"&&a.recurrenceID?hn(a,"series",e,i.fields,g):(w=(H=e==null?void 0:e.current)==null?void 0:H.deleteEvent)==null||w.call(H,a)};o(),s==null||s(T)},[a,e,o,s]),M=t.useCallback(()=>o(),[o]);return{handleSave:N,handleDelete:b,handleCancel:M,buildEventData:k,validateEventConflicts:z}},bs=[{name:"subject",visible:!0,className:p.SUBJECT_CONTAINER},{name:"location",visible:!0,className:p.LOCATION_CONTAINER},{name:"startDate",visible:!0,className:p.START_DATE_CONTAINER},{name:"startTime",visible:!0,className:p.START_TIME_CONTAINER},{name:"endDate",visible:!0,className:p.END_DATE_CONTAINER},{name:"endTime",visible:!0,className:p.END_TIME_CONTAINER},{name:"isAllDay",visible:!0,className:p.ALL_DAY_CONTAINER},{name:"description",visible:!0,className:p.DESCRIPTION_CONTAINER},{name:"repeatMode",visible:!0,className:p.REPEAT_MODE}],na=[["subject","location"],["startDate","startTime"],["endDate","endTime"],["isAllDay"],["repeatMode"],["description"]],ra=({fields:o})=>{const{locale:n}=$e(),{getString:r}=nt(n||"en-US"),{dateFormat:e,timeFormat:s,timeScale:i}=Fe(),{data:l,startDateOnly:c,startTimeOnly:f,endDateOnly:d,endTimeOnly:h,slotDuration:g,repeatData:m,repeatModeValue:E,formState:a,formRef:C,setFormState:v,handleSubjectChange:R,handleLocationChange:j,handleDescriptionChange:y,handleStartDateChange:D,handleStartTimeChange:S,handleEndDateChange:k,handleEndTimeChange:z,handleIsAllDayChange:N,handleRepeatModeChange:b,setSlotDuration:M,action:T}=Gn(),H=t.useMemo(()=>o?o.reduce((ve,me)=>(me.validationRule&&(ve[me.name]=me.validationRule),ve),{}):{},[o]),w=t.useMemo(()=>{const ve={};return l!=null&&l.subject&&(ve.subject=l.subject),l!=null&&l.location&&(ve.location=l.location),l!=null&&l.description&&(ve.description=l.description),c&&(ve.startDate=c),f&&(ve.startTime=f),d&&(ve.endDate=d),h&&(ve.endTime=h),(l==null?void 0:l.isAllDay)!==void 0&&(ve.isAllDay=l.isAllDay),ve},[l,c,f,d,h]),I=t.useMemo(()=>(i==null?void 0:i.interval)/(i==null?void 0:i.slotCount)||30,[i]);t.useEffect(()=>{M==null||M(I)},[I]);const Y=(ve={})=>{var x;const me=ve.props??{};return u.jsxs(wt,{name:"subject",children:[u.jsx(hr,{placeholder:me.placeholder??r("title"),value:me.value??((a==null?void 0:a.values.subject)||(l==null?void 0:l.subject)),onChange:B=>{var le;a==null||a.onChange("subject",{value:B.value||""}),(le=me.onChange??R)==null||le(B)},onBlur:()=>a==null?void 0:a.onBlur("subject"),className:`${me.className??p.EVENT_SUBJECT} ${a!=null&&a.errors.subject?"sf-error":""}`,labelMode:me.labelMode??"Always",...me}),((x=a==null?void 0:a.errors)==null?void 0:x.subject)&&u.jsx("div",{className:"sf-form-error",children:a.errors.subject})]})},Z=(ve={})=>{var x;const me=ve.props??{};return u.jsxs(wt,{name:"location",children:[u.jsx(hr,{placeholder:me.placeholder??r("location"),value:me.value??((a==null?void 0:a.values.location)||(l==null?void 0:l.location)),onChange:B=>{var le;a==null||a.onChange("location",{value:B.value||""}),(le=me.onChange??j)==null||le(B)},onBlur:()=>a==null?void 0:a.onBlur("location"),className:`${me.className??p.EVENT_LOCATION} ${a!=null&&a.errors.location?"sf-error":""}`,labelMode:me.labelMode??"Always",...me}),((x=a==null?void 0:a.errors)==null?void 0:x.location)&&u.jsx("div",{className:"sf-form-error",children:a.errors.location})]})},ue=(ve={})=>{var x;const me=ve.props??{};return u.jsxs(wt,{name:"startDate",children:[u.jsx(es,{placeholder:me.placeholder??r("startDate"),className:`${me.className??p.EVENT_START_DATE} ${a!=null&&a.errors.startDate?"sf-error":""}`,labelMode:me.labelMode??"Always",value:me.value||(a==null?void 0:a.values.startDate)||c,format:me.format??e,onChange:B=>{var le;a==null||a.onChange("startDate",{value:B.value}),(le=me.onChange??D)==null||le(B)},onBlur:()=>a==null?void 0:a.onBlur("startDate"),strictMode:me.strictMode??!0,...me}),((x=a==null?void 0:a.errors)==null?void 0:x.startDate)&&u.jsx("div",{className:"sf-form-error",children:a.errors.startDate})]})},K=(ve={})=>{var x;const me=ve.props??{};return u.jsxs(wt,{name:"startTime",children:[u.jsx(gr,{placeholder:me.placeholder??r("startTime"),className:`${me.className??p.EVENT_START_TIME} ${a!=null&&a.errors.startTime?"sf-error":""}`,labelMode:me.labelMode??"Always",step:me.step??g,value:me.value??((a==null?void 0:a.values.startTime)||f),format:me.format??s,onChange:B=>{var le;a==null||a.onChange("startTime",{value:B.value}),(le=me.onChange??S)==null||le(B)},onBlur:()=>a==null?void 0:a.onBlur("startTime"),strictMode:me.strictMode??!0,...me}),((x=a==null?void 0:a.errors)==null?void 0:x.startTime)&&u.jsx("div",{className:"sf-form-error",children:a.errors.startTime})]})},O=(ve={})=>{var x;const me=ve.props??{};return u.jsxs(wt,{name:"endDate",children:[u.jsx(es,{placeholder:me.placeholder??r("endDate"),className:`${me.className??p.EVENT_END_DATE} ${a!=null&&a.errors.endDate?"sf-error":""}`,labelMode:me.labelMode??"Always",value:me.value??((a==null?void 0:a.values.endDate)||d),format:me.format??e,onChange:B=>{var le;a==null||a.onChange("endDate",{value:B.value}),(le=me.onChange??k)==null||le(B)},onBlur:()=>a==null?void 0:a.onBlur("endDate"),strictMode:me.strictMode??!0,...me}),((x=a==null?void 0:a.errors)==null?void 0:x.endDate)&&u.jsx("div",{className:"sf-form-error",children:a.errors.endDate})]})},L=(ve={})=>{var x;const me=ve.props??{};return u.jsxs(wt,{name:"endTime",children:[u.jsx(gr,{placeholder:me.placeholder??r("endTime"),className:`${me.className??p.EVENT_END_TIME} ${a!=null&&a.errors.endTime?"sf-error":""}`,labelMode:me.labelMode??"Always",step:me.step??g,value:me.value??((a==null?void 0:a.values.endTime)||h),format:me.format??s,onChange:B=>{var le;a==null||a.onChange("endTime",{value:B.value}),(le=me.onChange??z)==null||le(B)},onBlur:()=>a==null?void 0:a.onBlur("endTime"),strictMode:me.strictMode??!0,...me}),((x=a==null?void 0:a.errors)==null?void 0:x.endTime)&&u.jsx("div",{className:"sf-form-error",children:a.errors.endTime})]})},V=(ve={})=>{var x,B;const me=ve.props??{};return u.jsxs(wt,{name:"isAllDay",children:[u.jsx(zo,{label:me.label??r("allDay"),className:`${me.className??p.EVENT_ALLDAY} ${a!=null&&a.errors.isAllDay?"sf-error":""}`,checked:me.checked??(a==null?void 0:a.values.isAllDay)??(l==null?void 0:l.isAllDay),onChange:le=>{var se;a==null||a.onChange("isAllDay",{value:le.value}),(se=me.onChange??N)==null||se(le)},...me}),((x=a==null?void 0:a.modified)==null?void 0:x.isAllDay)&&((B=a==null?void 0:a.errors)==null?void 0:B.isAllDay)&&u.jsx("div",{className:"sf-form-error",children:a.errors.isAllDay})]})},ee=(ve={})=>{const me=ve.props??{};return u.jsx(wt,{name:"repeatMode",children:u.jsx(Uo,{dataSource:m,fields:{text:"text",value:"value"},value:me.value??E,placeholder:me.placeholder??r("repeat"),labelMode:"Always",onChange:me.onChange??b,...me})})},de=(ve={})=>{var x;const me=ve.props??{};return u.jsx("div",{className:p.DESCRIPTION_ROW,children:u.jsxs(wt,{name:"description",children:[u.jsx(Ni,{placeholder:me.placeholder??r("description"),className:`${me.className??p.EVENT_DESCRIPTION} ${a!=null&&a.errors.description?"sf-error":""}`,labelMode:me.labelMode??"Always",value:me.description??((a==null?void 0:a.values.description)||(l==null?void 0:l.description)),width:me.width??"100%",resizeMode:me.resizeMode??kt.Vertical,onChange:B=>{var le;a==null||a.onChange("description",{value:B.value||""}),(le=me.onChange??y)==null||le(B)},onBlur:()=>a==null?void 0:a.onBlur("description"),...me}),((x=a==null?void 0:a.errors)==null?void 0:x.description)&&u.jsx("div",{className:"sf-form-error",children:a.errors.description})]})})},F={subject:Y,location:Z,startDate:ue,startTime:K,endDate:O,endTime:L,isAllDay:V,repeatMode:ee,description:de},q=t.useMemo(()=>!o||o.length===0?bs:o.filter(ve=>ve.visible!==!1),[o]),te=t.useMemo(()=>{const ve=[],me=new Map(q.map(x=>[x.name,x]));return na.forEach(x=>{const B=x.map(le=>me.get(le)).filter(le=>!!le);B.length>0&&ve.push(B)}),ve},[q]),ne=ve=>{var me;return(me=bs.find(x=>x.name===ve))==null?void 0:me.className},oe=t.useCallback(ve=>{const me=[p.EDITOR_FIELD_CONTAINER,ne(ve.name),ve.className].filter(Boolean).join(" ");if(ve.component)return u.jsx("div",{className:me,children:ve.component},ve.name);const x=F[ve.name];return x?(ve.name==="startTime"||ve.name==="endTime")&&(l!=null&&l.isAllDay)||ve.name==="repeatMode"&&T==="EditOccurrence"?null:u.jsx("div",{className:me,children:x(ve)},ve.name):null},[l==null?void 0:l.isAllDay,r,F,T]);return!o||o.length===0?u.jsx(Er,{ref:C,rules:H,initialValues:w,onFormStateChange:v,validateOnChange:!0,autoComplete:"off",children:u.jsxs("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:[u.jsxs("div",{className:`${p.TITLE_LOCATION_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[u.jsx("div",{className:`${p.SUBJECT_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:Y()}),u.jsx("div",{className:`${p.LOCATION_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:Z()})]}),u.jsxs("div",{className:`${p.START_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[u.jsx("div",{className:`${p.START_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:ue()}),!(l!=null&&l.isAllDay)&&u.jsx("div",{className:`${p.START_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:K()})]}),u.jsxs("div",{className:`${p.END_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[u.jsx("div",{className:`${p.END_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:O()}),!(l!=null&&l.isAllDay)&&u.jsx("div",{className:`${p.END_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:L()})]}),u.jsx("div",{className:`${p.ALL_DAY_TIMEZONE_ROW} ${p.DISPLAY_FLEX}`,children:u.jsx("div",{className:`${p.ALL_DAY_CONTAINER}`,children:V()})}),T!=="EditOccurrence"&&u.jsx("div",{className:`${p.REPEAT_MODE_ROW} ${p.DISPLAY_FLEX}`,children:u.jsx("div",{className:`${p.REPEAT_MODE}`,children:ee()})}),u.jsx("div",{className:p.DESCRIPTION_ROW,children:u.jsx("div",{className:p.DESCRIPTION_CONTAINER,children:de()})})]})}):u.jsx(Er,{ref:C,rules:H,initialValues:w,onFormStateChange:v,validateOnChange:!0,autoComplete:"off",children:u.jsx("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:te.map((ve,me)=>{const x=ve.map(oe).filter(Boolean);return x.length?u.jsx("div",{className:`${p.EDITOR_FIELDS_ROW} ${p.DISPLAY_FLEX}`,children:x},`row-${me}`):null})})})},sa=()=>{const{locale:o}=$e(),{getString:n}=nt(o||"en-US"),{recurrenceOpen:r,closeRecurrenceEditor:e,recurrenceStart:s,recurrenceRule:i,handleRecurrenceRuleChange:l}=Gn(),[c,f]=t.useState(i),d=t.useCallback(E=>{f(E.value)},[]),h=t.useCallback(()=>{l(c),e()},[c,e,l]),g=t.useCallback(()=>{e()},[e]),m=t.useMemo(()=>u.jsxs("div",{className:p.DIALOG_FOOTER,children:[u.jsx(Qe,{className:p.SAVE_EVENT,variant:Ge.Standard,onClick:h,children:n("save")}),u.jsx(Qe,{className:p.CANCEL_EVENT,variant:Ge.Standard,onClick:g,children:n("cancel")})]}),[h,g]);return r?u.jsx(Tn,{header:n("customRecurrence"),footer:m,open:r,onClose:e,modal:!0,style:{width:"500px",minHeight:"388px"},className:`${p.DIALOG}`,children:u.jsx(Yo,{value:c,onChange:d,startDate:s})}):null},oa=({open:o,onClose:n,fields:r,action:e,children:s,dialogProps:i,className:l,style:c})=>{const{locale:f}=$e(),{getString:d}=nt(f||"en-US"),{handleCancel:h,handleDelete:g,handleSave:m}=ta(n),{formState:E}=Gn(),a=t.useMemo(()=>i!=null&&i.header?i.header:d(e==="Add"?"newEvent":"editEvent"),[i==null?void 0:i.header,e,d]),C=t.useMemo(()=>i!=null&&i.footer?i==null?void 0:i.footer:u.jsxs("div",{className:p.DIALOG_FOOTER,children:[e!=="Add"&&u.jsx(Qe,{className:p.DELETE_EVENT,variant:Ge.Standard,onClick:g,children:d("delete")}),u.jsx(Qe,{className:p.SAVE_EVENT,variant:Ge.Standard,onClick:m,children:d("save")}),u.jsx(Qe,{className:p.CANCEL_EVENT,variant:Ge.Standard,onClick:h,children:d("cancel")})]}),[i==null?void 0:i.footer,e,g,m,h,E==null?void 0:E.allowSubmit]);return u.jsxs(u.Fragment,{children:[u.jsx(Tn,{header:a,open:o,onClose:n,modal:(i==null?void 0:i.modal)??!0,style:{width:"500px",minHeight:"300px",...c},className:`${p.DIALOG} ${l||""}`,footer:C,...i,children:u.jsx("div",{className:p.FORM_CONTAINER,children:s||u.jsx(ra,{fields:r})})}),u.jsx(sa,{})]})};function ia(o,n){switch(n.type){case"setField":return{...o,[n.key]:n.value};case"setMany":return{...o,...n.payload};default:return o}}const la=(o,n,r,e,s)=>{const[i,l]=t.useState(!1),[c,f]=t.useState(),d=t.useRef(null),h=t.useRef(s);t.useEffect(()=>{h.current=s},[s]);const m={subject:"",location:"",description:"",startTime:void 0,endTime:void 0,isAllDay:!1,action:"Add",originalData:void 0,repeatData:[{value:"Never",text:"Never"},{value:"FREQ:DAILY",text:"Daily"},{value:"FREQ:WEEKLY",text:"Weekly"},{value:"FREQ:MONTHLY",text:"Monthly"},{value:"Custom",text:"Custom"}],recurrenceRule:void 0},[E,a]=t.useReducer(ia,m),C=t.useCallback(W=>a({type:"setField",key:"subject",value:W}),[a]),v=t.useCallback(W=>a({type:"setField",key:"location",value:W}),[a]),R=t.useCallback(W=>a({type:"setField",key:"description",value:W}),[a]),j=t.useCallback(W=>a({type:"setField",key:"startTime",value:W}),[a]),y=t.useCallback(W=>a({type:"setField",key:"endTime",value:W}),[a]),D=t.useCallback(W=>a({type:"setField",key:"isAllDay",value:W}),[a]),S=t.useCallback(W=>a({type:"setField",key:"recurrenceRule",value:W}),[a]),k=t.useCallback(W=>a({type:"setField",key:"action",value:W}),[a]),z=t.useCallback(W=>a({type:"setField",key:"originalData",value:W}),[a]),{eventSettings:N}=Fe(),b=t.useCallback((W,De)=>{const Ee=[{value:"Never",text:"Never"},{value:Ln("DAILY",W),text:"Daily"},{value:Ln("WEEKLY",W),text:"Weekly"},{value:Ln("MONTHLY",W),text:"Monthly"},{value:Ln("YEARLY",W),text:"Yearly"},{value:"Custom",text:"Custom"}];if(De){const Oe=Ee.find(Pe=>Pe.value===De);if(Oe){a({type:"setField",key:"repeatData",value:Ee}),S(De),Se(Oe.value);return}if(typeof De=="string"){const Pe={value:De,text:De},Ye=Math.max(0,Ee.length-1),He=[...Ee.slice(0,Ye),Pe,...Ee.slice(Ye)];a({type:"setField",key:"repeatData",value:He}),S(De),Se(De);return}a({type:"setField",key:"repeatData",value:Ee}),S(""),Se("Never")}else a({type:"setField",key:"repeatData",value:Ee}),S(""),Se("Never")},[a]),M=t.useCallback(W=>{if(o==null||o(W),W.cancel)return;r==null||r();const De=W.isAllDay?$.normalizeDate(W.startTime):W.startTime,Ee={startTime:De,endTime:W.isAllDay?De:W.endTime};b(De),a({type:"setMany",payload:{subject:"",location:"",description:"",isAllDay:W.isAllDay,action:"Add",startTime:Ee.startTime,endTime:Ee.endTime}}),l(!0)},[o,r]),T=t.useCallback(W=>{if(n==null||n(W),W.cancel)return;r==null||r(),W!=null&&W.data||(W.data={});const De=!!W.data.isAllDay,Ee=De?$.normalizeDate(W.data.startTime):W.data.startTime,Oe=De?$.normalizeDate(W.data.endTime):W.data.endTime;b(Ee,W.data.recurrenceRule);const Pe={originalData:W.data,subject:W.data.subject??"",location:W.data.location??"",description:W.data.description??"",isAllDay:De,startTime:Ee,endTime:Oe};if(W.data.recurrenceID||W.data[N.fields.recurrenceID]){e==null||e(Ye=>{let He={};Ye==="series"&&(He=Ds(W.data,h.current),b(Ee,W.data.recurrenceRule??(He==null?void 0:He.recurrenceRule))),a({type:"setMany",payload:{action:Ye==="series"?"EditSeries":"EditOccurrence",...Pe,startTime:Ye==="series"?He.startTime:Ee,endTime:Ye==="series"?He.endTime:Oe}}),l(!0)});return}a({type:"setMany",payload:{action:"Edit",...Pe}}),l(!0)},[n,r,N,e]),H=t.useCallback(()=>l(!1),[]),{subject:w,location:I,description:Y,startTime:Z,endTime:ue,isAllDay:K,action:O,originalData:L,recurrenceRule:V,repeatData:ee}=E,[de,F]=t.useState(30),[q,te]=t.useState(void 0),[ne,oe]=t.useState(void 0),[Ce,ve]=t.useState(void 0),[me,x]=t.useState(void 0),[B,le]=t.useState(!1),[se,Se]=t.useState("Never"),[Q,ae]=t.useState(!1);t.useEffect(()=>{if(!i)return;const W=Z?new Date(Z):void 0,De=ue?new Date(ue):void 0;te(W?$.normalizeDate(W):void 0),ve(De?$.normalizeDate(De):void 0),le(!1),oe(Z?new Date(Z):ne),x(ue?new Date(ue):me)},[i,Z,ue]);const fe=t.useCallback((W,De)=>$.combineDateAndTime(W,De),[]),A=t.useCallback(W=>{te(W==null?void 0:W.value)},[]),re=t.useCallback(W=>{const De=W==null?void 0:W.value;if(oe(De),!De)return;const Ee=fe(q,De),Oe=fe(Ce??q,me);if(!B&&$.isMidnight(me)){const Pe=new Date(De);Pe.setMinutes(Pe.getMinutes()+de),x(Pe)}else if(Ee&&Oe&&Oe<=Ee){const Pe=new Date(De);Pe.setMinutes(Pe.getMinutes()+de),x(Pe)}},[q,Ce,me,B,de,fe]),U=t.useCallback(W=>{ve(W==null?void 0:W.value)},[]),G=t.useCallback(W=>{const De=W==null?void 0:W.value;x(De),le(!!De)},[]),ge=t.useCallback(W=>{if(D(W==null?void 0:W.value),O==="Add"&&(W==null?void 0:W.value)===!1)if(!B&&$.isMidnight(me)){const De=ne?new Date(ne):new Date(0);ne||De.setHours(0,0,0,0),De.setMinutes(De.getMinutes()+de),x(De)}else{const De=fe(q,ne),Ee=fe(Ce??q,me);if(De&&Ee&&Ee<=De){const Oe=ne?new Date(ne):new Date(Ee);Oe.setMinutes(Oe.getMinutes()+de),x(Oe)}}},[O,B,me,ne,de,fe,q,Ce]),ce=t.useCallback(W=>{C(W.value)},[]),ye=t.useCallback(W=>{v(W.value)},[]),Ie=t.useCallback(()=>{ae(!0)},[]),pe=t.useCallback(()=>{ae(!1)},[]),Re=t.useCallback(W=>{const De=W==null?void 0:W.value;Se(De),De!=="Never"&&De!=="Custom"&&S(De),De==="Never"&&S(""),De==="Custom"&&Ie()},[Se,Ie]),_=t.useCallback(W=>{S(W)},[]),X=t.useCallback(W=>{R(W==null?void 0:W.value)},[]),J=t.useCallback(W=>{if(!W)return;const De=(Ee,Oe,Pe)=>{C(W.subject),v(W.location),R(W.description),j(Pe==="series"?Oe.startTime:W.startTime),y(Pe==="series"?Oe.endTime:W.endTime),D(!!W.isAllDay),z(W),b(W.startTime,W.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule)),Ee&&S(Ee),l(!0)};W.recurrenceID||W[N.fields.recurrenceID]?e==null||e(Ee=>{let Oe={};Ee==="series"&&(Oe=Ds(W,h.current)),k(Ee==="series"?"EditSeries":"EditOccurrence");const Pe=Ee==="series"?W.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule):void 0;De(Pe,Oe,Ee)}):(k("Edit"),De())},[N,N.fields,e]),he=t.useCallback(W=>{k("Add");const De={subject:W[N.fields.subject]??"",location:W[N.fields.location]??"",description:W[N.fields.description]??"",startTime:W[N.fields.startTime]??W.startTime,endTime:W[N.fields.endTime]??W.endTime,isAllDay:W[N.fields.isAllDay]??(W==null?void 0:W.isAllDay)??!1};if(C(De.subject),v(De.location),R(De.description),z(void 0),De.isAllDay){const Ee=$.normalizeDate(De.startTime);j(Ee),y(Ee)}else j(De.startTime),y(De.endTime);D(De.isAllDay),b(De.startTime),l(!0)},[]),xe=t.useCallback(W=>{if(!q||!Ce)return W("invalidDateValue");if(!K&&(!ne||!me))return W("invalidTimeValue");let De,Ee;return K?(De=q?$.normalizeDate(q):void 0,Ee=Ce?$.normalizeDate(Ce):void 0):(De=$.combineDateAndTime(q,ne),Ee=$.combineDateAndTime(Ce,me)),De&&Ee&&Ee<De?W("invalidDateRange"):null},[q,ne,Ce,me,K]),we=t.useMemo(()=>K?q?$.normalizeDate(q):Z:$.combineDateAndTime(q,ne)??Z,[K,q,ne,Z]);return{open:i,data:{subject:w,location:I,startTime:Z,endTime:ue,isAllDay:K,description:Y,recurrenceRule:V},action:O,originalData:L,setOpen:l,onCellDoubleClickHandler:M,onEventDoubleClickHandler:T,onClose:H,startDateOnly:q,startTimeOnly:ne,endDateOnly:Ce,endTimeOnly:me,slotDuration:de,recurrenceStart:we,repeatModeValue:se,repeatData:ee,recurrenceOpen:Q,recurrenceRule:V,setRepeatModeValue:Se,setSlotDuration:F,handleSubjectChange:ce,handleLocationChange:ye,handleDescriptionChange:X,handleStartDateChange:A,handleStartTimeChange:re,handleEndDateChange:U,handleEndTimeChange:G,handleIsAllDayChange:ge,handleRecurrenceRuleChange:_,handleRepeatModeChange:Re,closeRecurrenceEditor:pe,onEditEvent:J,onMoreDetails:he,formState:c,setFormState:f,formRef:d,validateRequiredFields:xe}},aa=()=>{const o=t.useRef({visible:!1}),n=t.useRef(null),r=t.useCallback(s=>{var i;o.current={...s,visible:!0},(i=n.current)==null||i.call(n,o.current)},[]),e=t.useCallback(()=>{var s;o.current.visible=!1,(s=n.current)==null||s.call(n,{...o.current})},[]);return{show:r,hide:e,setStateUpdater:s=>{n.current=s}}},ca=({children:o,onTooltipOpen:n,content:r,arrow:e,...s})=>{const[i,l]=t.useState(null),{locale:c}=$e(),{getString:f}=nt(c),{timeFormat:d}=Fe(),{eventsData:h}=Mt(),g=t.useRef(h);t.useEffect(()=>{g.current=h},[h]);const m=a=>{const C=a.closest("."+p.APPOINTMENT);if(!C)return!1;const v=C==null?void 0:C.getAttribute("data-guid"),R=Me.getEventByGuid(g.current,v),j={cancel:!1,data:R};if(n==null||n(j),j.cancel)return!1;if(typeof r=="function"){const y=r({data:R});l(y)}else if(r!=null)l(r);else{const y=E(R);l(y)}return!0},E=t.useCallback(a=>{const C=a.subject??a.description??f("addTitle"),v=$.formatStartAndEndDateRange(a.startTime,a.endTime,c),R=$.formatTimeDisplay(a,c,d);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:p.SCHEDULER_TOOLTIP_SUBJECT,children:C}),u.jsxs("div",{className:p.SCHEDULER_TOOLTIP_TEXT,children:[v?u.jsx("div",{children:v}):null,!a.isAllDay&&R?u.jsx("div",{children:R}):null]})]})},[f,d,c]);return u.jsx(Ws,{className:p.SCHEDULER_TOOLTIP,onFilterTarget:m,arrow:e??!1,content:u.jsx(u.Fragment,{children:i}),...s,children:o})},To=t.forwardRef((o,n)=>{const{height:r,width:e,selectedDate:s,defaultSelectedDate:i,view:l,defaultView:c,eventSettings:f,timeScale:d,workHours:h,startHour:g,endHour:m,showWeekend:E,firstDayOfWeek:a,workDays:C,showTimeIndicator:v,showWeekNumber:R,dateFormat:j,timeFormat:y,dateHeader:D,cell:S,headerIndent:k,eventOverlap:z,rowAutoHeight:N,readOnly:b,showQuickInfoPopup:M,header:T,quickInfo:H,keyboardNavigation:w,onDataRequest:I,onSelectedDateChange:Y,onViewChange:Z,onCellClick:ue,onCellDoubleClick:K,onEventClick:O,onEventDoubleClick:L,onDataChangeStart:V,onDataChangeComplete:ee,eventDrag:de,eventResize:F,onResizeStart:q,onResizing:te,onResizeStop:ne,onDragStart:oe,onDrag:Ce,onDragStop:ve,onError:me,onMoreEventsClick:x,eventTooltip:B,onTooltipOpen:le,onEditorSubmit:se,editor:Se,children:Q,className:ae,weekRule:fe,enableRecurrenceValidation:A,...re}=Ms(Sr,o),U=t.useRef(null),G=t.useRef(null),ge=t.useRef(null),ce=aa(),[ye,Ie]=t.useState({visible:!1});t.useEffect(()=>{ce.setStateUpdater(Ie)},[]);const{locale:pe}=$e(),{getString:Re}=nt(pe||"en-US"),_=t.useCallback(Ve=>{ce==null||ce.show({action:"recurrenceEdit",title:Re("editEvent"),message:Re("editEventContent"),showCancel:!1,onConfirm:Ze=>{Ve(Ze),ce.hide()}})},[ce,Re]),X=t.useCallback(Ve=>{ce==null||ce.show({action:"recurrenceDelete",title:Re("deleteEvent"),message:Re("editEventContent"),showCancel:!1,onConfirm:Ze=>{Ve(Ze),ce.hide()}})},[ce,Re]),{cellEditRef:J,handleClose:he,onCellClickHandler:xe,onEventClickHandler:we}=fo(ue,O),Le=t.useRef(null),W=la(K,L,he,_,Le.current),{open:De,data:Ee,originalData:Oe,action:Pe,onClose:Ye,onCellDoubleClickHandler:He,onEventDoubleClickHandler:Tt,onMoreDetails:ot,onEditEvent:vt}=W,yt=t.useMemo(()=>ft.getViewsInfo(Q,Re),[Q]),{classNames:ht,selectedDate:Jt,view:Cn,renderDates:en,activeViewProps:Ht,dateRangeText:er,showCalendar:Dn,calendarView:vn,handleViewButtonClick:yn,handlePreviousClick:tn,handleNextClick:nn,handleTodayClick:Ct,handleDateDropdownClick:bn,handleCalendarChange:rn,renderCurrentView:sn}=zi({className:ae,height:r,width:e,selectedDate:s,defaultSelectedDate:i,view:l,defaultView:c,eventSettings:f,timeScale:d,workHours:h,startHour:g,endHour:m,showWeekend:E,firstDayOfWeek:a,workDays:C,showTimeIndicator:v,showWeekNumber:R,dateFormat:j,timeFormat:y,dateHeader:D,cell:S,headerIndent:k,editor:Se,quickInfo:H,eventOverlap:z,showQuickInfoPopup:M,header:T,keyboardNavigation:w,rowAutoHeight:N,readOnly:b,onEditorSubmit:se,onDataRequest:I,onSelectedDateChange:Y,onViewChange:Z,onCellClick:xe,onCellDoubleClick:He,onEventClick:we,onEventDoubleClick:Tt,onMoreEventsClick:x,onDataChangeStart:V,onDataChangeComplete:ee,eventDrag:de,eventResize:F,onResizeStart:q,onResizing:te,onResizeStop:ne,onDragStart:oe,onDrag:Ce,onDragStop:ve,enableRecurrenceValidation:A,viewComponents:yt,weekRule:fe}),{eventsData:St,eventsProcessed:It,addEvent:on,deleteEvent:ln,saveEvent:xt}=Bl({activeViewProps:Ht,renderDates:en});Le.current=It;const Rn=(Ve,Ze)=>{var P,ie;if((be=>!!be&&"guid"in be)(Ve)){Ze&&((P=J.current)==null||P.handleEventClick(Ve,Ze));return}Ve&&(Ve!=null&&Ve.element)&&((ie=J.current)==null||ie.handleCellClick(Ve,Ve==null?void 0:Ve.element))},it=(Ve,Ze,Yt)=>{Ve==="Add"?ot(Ze):Ve==="Edit"&&vt(Ze)},wn=Ve=>{var ie;const Ze=Ve&&"current"in Ve?Ve==null?void 0:Ve.current:Ve,Yt=(ie=Ze==null?void 0:Ze.getAttribute)==null?void 0:ie.call(Ze,"data-guid");return Me.getEventByGuid(St,Yt)??null},Nn=Ve=>{const Ze=$l(Ve,d);return{startTime:Ze.startTime,endTime:Ze.endTime,isAllDay:Ze.isAllDay,element:Ze.element}},Ut=Ht.editor??Se??oa,jt=t.useMemo(()=>({element:U.current,addEvent:on,deleteEvent:ln,saveEvent:xt,openEditor:it,closeEditor:()=>{Ye()},getEventDetails:wn,getCellDetails:Nn,closeQuickInfoPopup:()=>{var Ve;(Ve=J.current)==null||Ve.hide()},openQuickInfoPopup:Rn}),[on,ln,xt,U.current,St,Ye]);t.useEffect(()=>{G.current=jt},[jt]),t.useEffect(()=>{Lt("scheduler")},[]),t.useImperativeHandle(n,()=>jt,[jt]);const zt={...Ht,handleCalendarChange:rn,handleViewButtonClick:yn,handlePreviousClick:tn,handleNextClick:nn,handleTodayClick:Ct,schedulerRef:G,morePopupRef:ge,quickPopupRef:J,keyboardNavigation:w,confirmationDialog:ce,showDeleteAlert:Ve=>{ce==null||ce.show({title:Re("deleteEvent"),message:Re("confirmDeleteMessage"),confirmText:Re("delete"),showCancel:!0,onConfirm:()=>{Ve(),ce.hide()}})},showRecurrenceAlert:_,showRecurrenceDeleteAlert:X},tr=B===!0||typeof B=="object",Sn=typeof B=="object"?B:void 0,xn=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:p.TABLE_CONTAINER,children:u.jsx("div",{className:p.TABLE_WRAP,children:u.jsxs(ql,{children:[u.jsx(Ql,{}),sn()]})})}),u.jsx($r,{ref:ge})]});return u.jsx("div",{ref:U,className:ht,style:{height:r,width:e},tabIndex:0,role:"application","aria-label":"Scheduler",onKeyDown:Xl(zt,St,It),...re,children:u.jsx(xr.Provider,{value:zt,children:u.jsx(Ar.Provider,{value:{renderDates:en},children:u.jsxs(Or.Provider,{value:{eventsData:St,eventsProcessed:It},children:[T!==!1&&u.jsx(Ml,{view:Cn,availableViews:yt,onViewButtonClick:yn,onPreviousClick:tn,onNextClick:nn,onTodayClick:Ct,onDateDropdownClick:bn,dateRangeText:er,showCalendar:Dn,calendarView:vn,selectedDate:Jt,firstDayOfWeek:Ht.firstDayOfWeek,handleCalendarChange:rn,renderDates:en,customizeHeader:typeof T=="function"?T:void 0}),tr?u.jsx(ca,{...Sn||{},onTooltipOpen:le,children:xn}):xn,u.jsx(Hr,{ref:J,onClose:he,onEditEvent:vt,onMoreDetails:ot}),u.jsx(ea,{editorState:W,children:u.jsx(Ut,{open:De,onClose:Ye,data:Ee,action:Pe,originalData:Oe})}),u.jsx(Jl,{visible:ye.visible,title:ye.title,message:ye.message,confirmText:ye.confirmText,showCancel:ye.showCancel,action:ye.action,onConfirm:ye.onConfirm||(()=>ce.hide()),onCancel:ce.hide})]})})})})});To.displayName="Scheduler";To.__docgenInfo={description:`The React Scheduler component that displays a list of events scheduled at specific dates and times, helping users plan and manage their schedule effectively.

\`\`\`typescript
import { Scheduler, DayView, WeekView, WorkWeekView, MonthView } from '@syncfusion/react-scheduler';

<Scheduler>
  <DayView />
  <WeekView />
  <WorkWeekView />
  <MonthView />
</Scheduler>
\`\`\``,methods:[],displayName:"Scheduler"};const ua=o=>u.jsx(u.Fragment,{children:o.children});ua.displayName="SchedulerHeader";const da=({showTimeIndicator:o,startHour:n,endHour:r,renderDates:e,onPositionUpdate:s})=>{const[i,l]=t.useState(0),[c,f]=t.useState(new Date),[d,h]=t.useState(!1),[g,m]=t.useState(!1),E=t.useRef(null),a=e.length>1,C=!!(e&&e.length>0),v=t.useCallback(()=>{const D=new Date,S=$.getStartEndHours(n),k=$.getStartEndHours(r),z=D.getHours()*qe+D.getMinutes(),N=S.getHours()*qe+S.getMinutes(),b=k.getHours()===0&&k.getMinutes()===0?ts*qe:k.getHours()*qe+k.getMinutes();return z>=N&&z<=b},[n,r]),R=t.useCallback(()=>{const D=new Date,S=$.getStartEndHours(n),k=$.getStartEndHours(r),z=(D.getHours()-S.getHours())*qe+(D.getMinutes()-S.getMinutes()),N=S.getHours()*qe+S.getMinutes(),M=(k.getHours()===0&&k.getMinutes()===0?ts*qe:k.getHours()*qe+k.getMinutes())-N,T=z/M*100;return Math.max(0,Math.min(100,T))},[n,r]),j=t.useCallback(()=>{const D=new Date,S=v();if(Math.abs(D.getTime()-c.getTime())>=Qt&&f(D),g!==S&&m(S),d!==(S&&o)&&h(S&&o),!S)return;const k=R();Math.abs(k-i)>.1&&l(k)},[R,c,d,g,i,o,v]);t.useEffect(()=>{if(o)return j(),E.current=setInterval(()=>{j()},Qt),()=>{E.current&&(clearInterval(E.current),E.current=null)}},[o,j]);const y=t.useCallback(()=>{const D=new Date,S=(e==null?void 0:e.length)>0&&e.some(z=>$.isSameDay(z,D));if(!C||!S)return{isMultiDayView:a,hasValidRenderDates:C,columns:[],isCurrentDayRendered:!1};if(!a){const z=e.length===1&&$.isSameDay(e[0],D);return{isMultiDayView:a,hasValidRenderDates:C,columns:[],isCurrentDayRendered:z}}const k=e.map((z,N)=>{const b=$.isSameDay(z,D),M=z<D&&!$.isSameDay(z,D);if(z>D&&!$.isSameDay(z,D)||!b&&!M)return null;const H=100/e.length,w=N*H;return{key:z.getTime(),isCurrentDay:b,leftPosition:w,columnWidth:H}}).filter(Boolean);return{isMultiDayView:a,hasValidRenderDates:C,columns:k,isCurrentDayRendered:S}},[a,C,e]);return t.useEffect(()=>{s&&s(i,d&&g&&y().isCurrentDayRendered)},[i,d,g,s,y]),{position:i,currentTime:c,isVisible:d,isWithinBounds:g,multiDayViewInfo:y(),updatePosition:j}},fa=o=>{const{onPositionUpdate:n}=o,{renderDates:r}=pt(),{showTimeIndicator:e,startHour:s,endHour:i}=Fe(),{position:l,isVisible:c,isWithinBounds:f,multiDayViewInfo:d}=da({showTimeIndicator:e,startHour:s,endHour:i,renderDates:r,onPositionUpdate:n});return!c||!f||!d.isCurrentDayRendered?null:!d.isMultiDayView||!d.hasValidRenderDates?u.jsx("div",{className:p.CURRENT_TIMELINE,style:{top:`${l}%`}}):u.jsx(u.Fragment,{children:d.columns.map(h=>u.jsx("div",{className:h.isCurrentDay?p.CURRENT_TIMELINE:p.PREVIOUS_TIMELINE,style:{top:`${l}%`,width:`${h.columnWidth}%`,insetInlineStart:`${h.leftPosition}%`}},h.key))})},ma=(o,n,r,e)=>{let s=0,i=!1;for(;!i;){i=!0;for(const l of o){const c=$.normalizeDate(l);if(c>=n&&c<=r){const f=$.generateDateKey(l);if((e.get(f)||[]).findIndex((g,m)=>m===s&&g)!==-1){i=!1,s++;break}}}}return s},pa=(o,n=2)=>{const{eventSettings:r}=Fe(),{renderDates:e}=pt(),{eventsData:s}=Mt(),i=t.useMemo(()=>{if(!(e!=null&&e.length)||!(s!=null&&s.length))return[];const E=s.filter(y=>!y.startTime||!y.endTime||y.isBlock?!1:y.isAllDay&&!Me.isMultiDayEvent(y)),a=s.filter(y=>!y.startTime||!y.endTime?!1:r.spannedEventPlacement==="AllDayRow"?!y.isAllDay&&$.isLessthan24Hours(y.startTime,y.endTime)?!1:Me.isMultiDayEvent(y):y.isAllDay&&Me.isMultiDayEvent(y));let C=new Map;e.forEach(y=>{const D=$.generateDateKey(y);C.set(D,[])});const v=[],R=[...E,...a];return $.sortByTimeAndSpan(R).forEach(y=>{if(!y.startTime||!y.endTime)return;const D=$.normalizeDate(y.startTime),S=$.normalizeDate(y.endTime),k=Me.isMultiDayEvent(y),z=k?$.getDaysCount(D,S)+1:1,N=ma(e,D,S,C),b=["sf-appointment"];if((y.isAllDay||z>1)&&b.push("sf-all-day-appointment"),y.isReadonly&&b.push("sf-read-only"),k)for(const M of e){const T=$.normalizeDate(M);if(T>=D&&T<=S){C=ct.setIndexPosition(C,M,N);const H=T.getTime()===D.getTime(),w=T.getTime()===S.getTime(),I=Math.floor((T.getTime()-D.getTime())/(1e3*60*60*24)),Y=e.findIndex(O=>{const L=$.normalizeDate(O);return L>=D&&L<=S})===e.findIndex(O=>$.normalizeDate(O).getTime()===T.getTime()),Z=H?new Date(y.startTime.getTime()):new Date(T.getFullYear(),T.getMonth(),T.getDate(),0,0,0),ue=w?new Date(y.endTime.getTime()):new Date(T.getFullYear(),T.getMonth(),T.getDate(),0,0,0),K=`${M.toISOString()}-${y.id}`;v.push({event:y,startDate:Z,endDate:ue,isFirstDay:H,isLastDay:w,isFirstSegmentInRenderRange:Y,segmentIndex:I,totalSegments:z,positionIndex:N,eventClasses:b,eventKey:K})}}else{C=ct.setIndexPosition(C,D,N);const M=`${D.toISOString()}-${y.id}`;v.push({event:y,startDate:y.startTime,endDate:y.endTime,positionIndex:N,eventClasses:b,eventKey:M})}}),v.sort((y,D)=>{const S=y.positionIndex??0,k=D.positionIndex??0;return S-k})},[s,e,r.spannedEventPlacement,r.fields]),l=t.useMemo(()=>Me.getEventsMap(e,i),[e,i]),c=t.useMemo(()=>Me.isAlldayHasMoreEvents(e,l,n),[l,n,e]),f=t.useMemo(()=>Me.getMaxEventsInCell(l,e),[l,e]),d=t.useMemo(()=>o?f>n?n-1:n:1/0,[o,f,n]),h=t.useCallback(()=>{const E=Me.getMaxEventsInCell(l,e);return E>3&&!o?E*(zn+En):Math.min(3,E)*(zn+En)},[o,l,e]),g=t.useCallback(E=>[...l.get(E)||[]].sort((v,R)=>(v.positionIndex??0)-(R.positionIndex??0)).slice(0,d),[l,d]),m=t.useCallback(E=>{const a=l.get(E)||[];return Math.max(0,a.length-d)},[l,d]);return{allDayRowEvents:i,eventsByDate:l,hasEventsExceedingMaxCount:c,maxEventsInAnyColumn:f,visibleEventLimit:d,calculateHeight:h,getVisibleEvents:g,getHiddenEventCount:m}},ha=o=>{const{eventInfo:n,renderDates:r}=o,e=t.useMemo(()=>({...n.event}),[n]),s=t.useMemo(()=>ct.getOverflowDirection(n,r),[n.event.startTime,n.event.endTime,r,n]),i=t.useMemo(()=>ct.calculatePositionStyles(n,r),[n,r]);return{processedEvent:e,overflowDirection:s,positionStyle:i}};class _t{constructor(){Object.defineProperty(this,"isActionPerformed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"removeDocListenersRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cellWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scrollInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slotInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isMonthView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isAllDaySource",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"cloneRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"minScrollSpeed",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"minScrollThreshold",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"enableScroll",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"currentCell",{enumerable:!0,configurable:!0,writable:!0,value:null})}performAutoScrolling(n,r){var D,S;const{clientX:e,clientY:s}=this.getPointerCoordinates(n);if(e==null||s==null)return;const i=r==null?void 0:r.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}`),l=(D=r==null?void 0:r.closest(`.${p.SCHEDULER}`))==null?void 0:D.querySelector(`.${p.MAIN_SCROLL_CONTAINER}`),c=[i,l].filter(Boolean);if(c.length===0)return;const f=c.find(k=>k.scrollHeight>k.clientHeight)||null,d=c.find(k=>k.scrollWidth>k.clientWidth)||null;if(!f&&!d)return;const h=((S=f||d)==null?void 0:S.closest(`.${p.SCHEDULER}`))||(r==null?void 0:r.closest(`.${p.SCHEDULER}`)),g=h==null?void 0:h.querySelector(`.${p.STICKY_HEADER}, .${p.HEADER_SECTION}, .${p.HEADER_ROW}`),m=f?f.getBoundingClientRect():null,E=d?d.getBoundingClientRect():null,a=(g==null?void 0:g.getBoundingClientRect().bottom)??(m?m.top:E?E.top:0);this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);const C=(k,z=this.minScrollThreshold)=>{if(k>z||k<0)return 0;const N=Math.floor((1-k/z)*this.minScrollSpeed);return isFinite(N)?N:0},v=()=>{let k=0;if(f&&m){const z=Math.max(0,f.scrollHeight-f.clientHeight),N=Math.max(0,s-a),b=Math.max(0,d?d.offsetHeight-d.clientHeight:0,f?f.offsetHeight-f.clientHeight:0),M=m.bottom-b,T=Math.max(0,M-s),H=this.minScrollThreshold+b,w=f.scrollTop<=0,I=Math.ceil(f.scrollTop)>=z;N<this.minScrollThreshold&&!w?k=-C(N):T<H&&!I&&(k=C(T,H))}return k},R=()=>{let k=0;if(d&&E){const z=Math.max(0,d.scrollWidth-d.clientWidth),N=Math.max(0,e-E.left),b=Math.max(0,E.right-e),M=d.scrollLeft<=0,T=d.scrollLeft>=z;N<this.minScrollThreshold&&!M?k=-C(N):b<this.minScrollThreshold&&!T&&(k=C(b))}return k},j=v(),y=R();if(j!==0||y!==0){const k=()=>{let z=!1;if(!(!this.currentCell&&_t.currentActionName!=="resize")&&!this.isAllDaySource){if(f&&j!==0){const N=Math.max(0,f.scrollHeight-f.clientHeight),b=Math.max(0,Math.min(N,f.scrollTop+j));b!==f.scrollTop&&(f.scrollTop=b,z=!0)}if(d&&y!==0){const N=Math.max(0,d.scrollWidth-d.clientWidth),b=Math.max(0,Math.min(N,d.scrollLeft+y));b!==d.scrollLeft&&(d.scrollLeft=b,z=!0)}if(!z){this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);return}this.scrollInterval=requestAnimationFrame(k)}};this.scrollInterval=requestAnimationFrame(k)}}getPointerCoordinates(n){if(!n)return{clientX:null,clientY:null};let r=null,e=null;return n.touches&&n.touches.length>0?(r=n.touches[0].clientX,e=n.touches[0].clientY):n.changedTouches&&n.changedTouches.length>0?(r=n.changedTouches[0].clientX,e=n.changedTouches[0].clientY):n.clientX!=null&&n.clientY!=null&&(r=n.clientX,e=n.clientY),{clientX:r,clientY:e}}getContentWrap(n){return n?n.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}, .${p.DATE_HEADER_CONTAINER}`):null}getCurrentTargetDate(n,r){var l,c;if(!n&&!r)return null;let e=null;const s=(l=n||r)==null?void 0:l.closest(`.${p.SCHEDULER}`),i=r==null?void 0:r.closest(`.${p.ALL_DAY_ROW}`);if(s&&i&&r){const d=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`)).indexOf(r),h=s.querySelector(`.${p.CONTENT_TABLE}, .${p.WORK_CELLS_ROW}`),m=(c=(h?Array.from(h.querySelectorAll(`.${p.WORK_CELLS}`)):[])[d])==null?void 0:c.getAttribute("data-date");m&&(e=Number(m))}return e}getCell(n,r,e){const s=document==null?void 0:document.elementsFromPoint(n,r);for(const i of s){const l=i.classList.contains(`${p.WORK_CELLS}`)||i.classList.contains(`${p.ALL_DAY_CELL}`)?i:null;if(l&&(e||!(this!=null&&this.isAllDaySource)||i.classList.contains(p.ALL_DAY_CELL)))return l}return null}getCellUnderPointer(n){const{clientX:r,clientY:e}=this.getPointerCoordinates(n);return r==null||e==null?null:this.getCell(r,e,!0)}getCellUnderClone(n){if(!this.cloneRef||!n)return null;const r=this.getContentWrap(n),e=r==null?void 0:r.getBoundingClientRect();if(!r||!e)return null;const s=(C,v=0)=>isFinite(C)?C:v,i=r.scrollLeft||0;let l=0,c=0;const f=r.querySelector(`.${p.ALL_DAY_ROW}`);if(!f)return null;const d=Array.from(f.querySelectorAll(`.${p.ALL_DAY_CELL}`));if(d.length===0)return null;const h=d[0],g=Math.max(1,h.offsetWidth||this.cellWidth||1),m=s(parseFloat(this.direction==="rtl"?this.cloneRef.style.right:this.cloneRef.style.left||"0"),0),E=Math.max(1,Math.ceil(this.cloneRef.offsetWidth/g));l=this.direction==="rtl"?e.right-m-this.cloneRef.offsetWidth/E+i:e.left+m+this.cloneRef.offsetWidth/E-i;const a=Math.max(0,h.offsetHeight);return c=e.top+f.offsetTop+a/2,this.getCell(l,c,!1)}cloneFromSource(n,r){const e=n.cloneNode(!0);return e.classList.add(p.DRAG_CLONE,p.NO_POINTER,p.POSITION_ABSOLUTE),r!=null&&r.externalDragAndDrop&&(e.classList.add(p.EXTERNAL_DRAG_CLONE,p.CONTROL),e.style.zIndex=Ls(e).toString()),e}suppressEvent(n){var r,e;(this.isActionPerformed||_t.currentActionName==="resize")&&(_t.currentActionName="",(r=n==null?void 0:n.preventDefault)==null||r.call(n),(e=n==null?void 0:n.stopPropagation)==null||e.call(n))}addDocSuppressors(){const n=["click"],r=e=>this.suppressEvent(e);n.forEach(e=>document==null?void 0:document.addEventListener(e,r,!0)),this.removeDocListenersRef=()=>{this.removeDocListenersRef&&(n.forEach(e=>document==null?void 0:document.removeEventListener(e,r,!0)),this.removeDocListenersRef=void 0)}}setCursorClass(n){document!=null&&document.body&&(document.body.classList.remove(p.SCHEDULER_CURSOR_MOVE,p.SCHEDULER_CURSOR_NOT_ALLOWED,p.SCHEDULER_CURSOR_DEFAULT),n==="move"?document.body.classList.add(p.SCHEDULER_CURSOR_MOVE):n==="notAllowed"?document.body.classList.add(p.SCHEDULER_CURSOR_NOT_ALLOWED):document.body.classList.add(p.SCHEDULER_CURSOR_DEFAULT))}getCurrentTargetCell(n){if(!n)return null;const r=n.closest(`.${p.DATE_HEADER_CONTAINER}`);if(r){const e=n.closest(`.${p.HEADER_CELLS}`),s=r.querySelector(`.${p.HEADER_ROW}`),i=r.querySelector(`.${p.ALL_DAY_ROW}`);if(s&&i){const l=Array.from(s.querySelectorAll(`.${p.HEADER_CELLS}`)),c=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`));let f=-1;if(e)f=l.indexOf(e);else for(let d=0;d<l.length;d++)if(l[d].contains(n)){f=d;break}if(f>=0&&c[f])return c[f];if(c.length)return c[0]}}return n.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}getSteppedCellDate(n,r,e,s,i,l){const c=r,f=c?this.getPointerCoordinates(c):{clientY:null},d=l==null?void 0:l.getBoundingClientRect();let h=i;if(d&&f.clientY!=null&&s>0){let g=Math.max(0,Math.round((f.clientY-d.top+l.scrollTop)*s));const m=Math.max(0,this.slotInterval||0);m>0&&(g=Math.floor(g/m)*m);const E=new Date(i);E.setHours(0,0,0,0),h=E.getTime()+(n+g)*Qt,h=h-e}else h=i-e;return new Date(h)}}Object.defineProperty(_t,"currentActionName",{enumerable:!0,configurable:!0,writable:!0,value:""});function Ea({ref:o,data:n,containerProps:r}){const e=Fe(),{timeScale:s,startHour:i,endHour:l,schedulerRef:c,eventSettings:f,showWeekend:d,workDays:h,onDragStart:g,onDrag:m,onDragStop:E,eventOverlap:a,confirmationDialog:C,eventDrag:v,enableRecurrenceValidation:R}=e,j=t.useMemo(()=>({...n,startTime:new Date(n==null?void 0:n.startTime),endTime:new Date(n==null?void 0:n.endTime)}),[n]),{getString:y}=nt(),{dir:D}=$e(),{eventsData:S,eventsProcessed:k}=Mt(),{renderDates:z}=pt(),N=Vr(),b=t.useRef(null),M=b,T=t.useRef(null),H=t.useRef({}),w=t.useRef({minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}),I=t.useRef(null),Y=t.useRef(0),Z=t.useRef(0),ue=t.useRef(!0),K=t.useRef(null),O=t.useRef(!1),L=t.useRef(null),V=t.useRef(null),ee=t.useRef(!1);Bt(b,{tapHold:()=>{ue.current=!1}}),t.useEffect(()=>{s&&T.current&&(T.current.slotInterval=s.interval/s.slotCount)},[s]);const de=t.useCallback(_=>{b.current=_,typeof o=="function"?o(_):o&&(o.current=_)},[o,N]),F=t.useCallback(_=>{if(!_||!T.current)return{};const X=T.current.getContentWrap(_),J=X?X.getBoundingClientRect():null,he=_.getBoundingClientRect(),xe=J?Math.round(he.left-J.left+((X==null?void 0:X.scrollLeft)||0)):_.offsetLeft,we=J?Math.round(he.top-J.top+((X==null?void 0:X.scrollTop)||0)):_.offsetTop;return{left:xe,top:we}},[N]),q=t.useCallback(()=>{var _,X;Y.current=0,Z.current=0,H.current={},K.current=null,O.current=!1,T.current&&(T.current.setCursorClass("default"),T.current.isActionPerformed=!1,T.current.enableScroll=!0,T.current.scrollInterval!=null&&(cancelAnimationFrame(T.current.scrollInterval),T.current.scrollInterval=null),(X=(_=T.current)==null?void 0:_.removeDocListenersRef)==null||X.call(_)),I.current!=null&&(cancelAnimationFrame(I.current),I.current=null),w.current={minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}},[]);t.useEffect(()=>()=>{q()},[q]);const te=()=>{if(I.current=null,!T.current||T.current.scrollInterval==null)return;const _=H.current.lastDragEvent;if(_){let X=T.current.getCellUnderPointer(_);if(!X){const J=_.target||null;X=T.current.getCurrentTargetCell(J)}if(X&&T.current.currentCell){let J=new Date(Number(X.getAttribute("data-date")));T.current.isAllDaySource&&(J=$.normalizeDate(J)),!T.current.isMonthView&&!T.current.isAllDaySource&&(fe(X),w.current.finalDragStartTime&&(J=w.current.finalDragStartTime)),le(J)}}T.current&&T.current.scrollInterval!=null&&(I.current=requestAnimationFrame(te))},ne=t.useCallback(_=>{if(!T.current)return;const X=v.externalDragAndDrop&&T.current.getCellUnderPointer(_)||b.current;T.current.performAutoScrolling(_,X),T.current.scrollInterval!==null&&I.current===null&&!T.current.isMonthView&&(I.current=requestAnimationFrame(te))},[F]),oe=_=>{const X=T.current.getContentWrap(_);if(T.current.isAllDaySource=ee.current=_.classList.contains(`${p.ALL_DAY_APPOINTMENT}`),T.current.isAllDaySource){const J=Me.getEventByGuid(S,n.guid);J.endTime=new Date($.normalizeDate(J.endTime).getTime()+T.current.slotInterval*Qt)}if(X){const J=X.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`);J&&(Y.current=J.offsetHeight??0,T.current.cellWidth=J.offsetWidth??0)}return w.current.minutesPerPixel=Y.current>0?T.current.slotInterval/Y.current:0,T.current.isMonthView=!!(_!=null&&_.closest(`.${p.MONTH_VIEW}`)),_.draggable=!1,X},Ce=(_,X)=>{var J;if(T.current.cloneRef=_,v!=null&&v.externalDragAndDrop){T.current.isMonthView&&_.classList.add(`${p.MONTH_EVENT}`);const he=T.current.isMonthView||T.current.isAllDaySource;he||(_.style.height=b.current.style.height),_.style.width=`${he?b.current.clientWidth:T.current.cellWidth}px`}else _.style.width="1px",_.style.height="1px";(J=v.externalDragAndDrop&&(document==null?void 0:document.querySelector(v.eventDragArea))||X||(document==null?void 0:document.body))==null||J.appendChild(_)},ve=()=>{var J,he,xe,we;const _=(he=T.current)==null?void 0:he.getContentWrap((J=T.current)==null?void 0:J.currentCell);return((xe=_==null?void 0:_.closest)==null?void 0:xe.call(_,`.${p.TABLE_WRAP}`))||L.current||((we=c.current)==null?void 0:we.element)||null},me=(_,X)=>{const J=ve();if(!J)return;const he={container:J,payload:{guid:n.guid,segments:_,isDayEvent:X}};window==null||window.dispatchEvent(new CustomEvent("showCloneEvent",{detail:he}))},x=()=>{T.current.currentCell=L.current=null;const _=document==null?void 0:document.querySelectorAll(`.${p.SCHEDULER}`);_.length&&_.forEach(X=>window==null?void 0:window.dispatchEvent(new CustomEvent("hideCloneEvent",{detail:{container:X}})))},B=_=>{if(!_)return 0;let X=Math.max(0,_.endTime.getTime()-_.startTime.getTime());return X===0&&_.startTime.getTime()===_.endTime.getTime()&&(X=T.current.slotInterval*Qt),X},le=(_,X,J)=>{var De,Ee;const he=v.externalDragAndDrop,xe=Me.getEventByGuid(S,n.guid);if(!xe||!T.current)return;let we=z;if(_){const Oe=B(xe);xe.startTime=new Date(_),xe.endTime=new Date(xe.startTime.getTime()+Oe)}if(he&&_){const Oe=$.normalizeDate(X??_).getTime();(!we.some(Ye=>$.normalizeDate(Ye).getTime()===Oe)||e.view!==V.current)&&(e.selectedDate=X??_,we=$.getRenderDates(V.current,e.selectedDate,e,X,J))}const Le=T.current.isMonthView||T.current.isAllDaySource;if(Le||!s.enable){const Oe=Me.processCloneEvent(he?L.current:(De=c.current)==null?void 0:De.element,we,xe,d,h,T.current.cellWidth,T.current.isAllDaySource,D==="rtl",T.current.isMonthView,b.current);he?me(Oe,Le):N==null||N.show({guid:n.guid,segments:Oe,isDayEvent:Le});return}const W=Me.processTimeSlotCloneEvent(he?L.current:(Ee=c.current)==null?void 0:Ee.element,we,xe,s,i,l,T.current.cellWidth,D==="rtl");he?me(W,!1):N==null||N.show({guid:n.guid,segments:W,isDayEvent:!1})},se=_=>{var xe,we,Le;if(!b.current||((xe=_.sender)==null?void 0:xe.type)==="touchmove"&&ue.current)return null;(Le=(we=T.current)==null?void 0:we.cloneRef)!=null&&Le.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef),T.current=new _t,T.current.direction=D,T.current.slotInterval=(s==null?void 0:s.interval)/(s==null?void 0:s.slotCount),V.current=e.view;const X=b.current,J=oe(X),he=T.current.cloneFromSource(X,v);return Ce(he,J),he},Se=_=>{var he,xe,we,Le;if(!T.current)return;H.current={};const X=T.current;X.isActionPerformed=!0,A(_),X.addDocSuppressors(),(he=b.current)==null||he.classList.add(p.DRAGGING),T.current.setCursorClass("move"),H.current.lastDragEvent=_.event,Q(_);const J={..._,data:n};if(g==null||g(J),J.cancel){_.cancel=!0,U(),q(),T.current=null;return}v&&(v.interval&&(O.current=X.slotInterval!==v.interval,X.slotInterval=v.interval),X.enableScroll=((xe=v.scroll)==null?void 0:xe.enable)??!0,X.minScrollSpeed=((we=v.scroll)==null?void 0:we.scrollBy)??X.minScrollSpeed,X.minScrollThreshold=((Le=v.scroll)==null?void 0:Le.timeDelay)??X.minScrollThreshold,K.current=v.excludeSelectors??null)},Q=_=>{try{const X=b.current;if(!X)return;const J=T.current.getContentWrap(X),he=J==null?void 0:J.getBoundingClientRect(),{clientY:xe,clientX:we}=T.current.getPointerCoordinates(_.event);if(!J||!he||xe==null&&we==null)return;const Le=X.getBoundingClientRect(),W={top:J.scrollTop||0,left:J.scrollLeft||0};w.current.dragAnchorOffsetPx=xe!=null?xe-he.top+W.top-(Le.top-he.top+W.top):null,w.current.dragAnchorOffsetX=we!=null?we-he.left+W.left-(Le.left-he.left+W.left):null}catch{w.current.dragAnchorOffsetPx=w.current.dragAnchorOffsetX=null}},ae=_=>{var X;!((X=T.current)!=null&&X.isAllDaySource)&&T.current.enableScroll&&ne(_.event)},fe=_=>{var xe;if(!((xe=T.current)!=null&&xe.cloneRef&&_&&T.current))return;const X=T.current,J=X.getContentWrap(_);if((J==null?void 0:J.getBoundingClientRect())&&n){let we=Number(_.getAttribute("data-date"));if(!we||isNaN(we))return;X.isAllDaySource&&(we=Number($.normalizeDate(new Date(we))));let Le=new Date;if(e.view===V.current)if(ee.current&&!X.isAllDaySource)Le=new Date(we);else if(O.current&&!X.isAllDaySource&&!X.isMonthView){const{schedulerStartMinutes:Ee}=$.getSchedulerStartAndEndMinutes(i,l);Le=T.current.getSteppedCellDate(Ee,H.current.lastDragEvent,Z.current,w.current.minutesPerPixel,we,J)}else X.isAllDaySource===ee.current&&(we=we-Z.current),Le=new Date(we);else Le=new Date(we),v.externalDragAndDrop&&V.current==="Month"&&$.setHours(Le,j.startTime);if(isNaN(Le.getTime()))return;w.current.finalDragStartTime=new Date(Le);const W=Me.getEventByGuid(S,n.guid),De=B(W);w.current.finalDragEndTime=new Date(w.current.finalDragStartTime.getTime()+De)}},A=_=>{const X=T.current.getCellUnderPointer(_.event);if(X&&T.current&&X&&n){const J=X.getAttribute("data-date");if(!J||isNaN(Number(J)))return;const he=Me.getEventByGuid(S,n.guid);if(!he)return;const xe=new Date(he.startTime).getTime();Z.current=Number(J)-xe}},re=_=>{var J,he,xe,we,Le,W,De,Ee,Oe,Pe,Ye,He,Tt;if(!T.current)return;let X=T.current.getCellUnderPointer(_.event);if(X||(X=T.current.getCurrentTargetCell(_.target)),v.externalDragAndDrop&&(x(),e.view!==V.current&&(T.current.cellWidth=((he=(J=_.target.closest(`.${p.SCHEDULER}`))==null?void 0:J.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`))==null?void 0:he.clientWidth)??b.current.clientWidth),T.current.isMonthView=!!((xe=X||_.target)!=null&&xe.closest(`.${p.MONTH_VIEW}`)),(we=X||_.target)!=null&&we.closest(`.${p.DAY_VIEW}`)?V.current="Day":(Le=X||_.target)!=null&&Le.closest(`.${p.WEEK_VIEW}`)?V.current="Week":(W=X||_.target)!=null&&W.closest(`.${p.WORK_WEEK_VIEW}`)?V.current="WorkWeek":T.current.isMonthView&&(V.current="Month")),T.current.currentCell=X,T.current.isMonthView||(T.current.isAllDaySource=n.isAllDay=((De=X||_.target)==null?void 0:De.classList.contains(p.ALL_DAY_CELL))||!!((Ee=_.target)!=null&&Ee.closest(`.${p.DATE_HEADER_CONTAINER}`))),X){T.current.setCursorClass("move"),ae(_),v.externalDragAndDrop&&(L.current=X.closest(`.${p.SCHEDULER}`),T.current.cloneRef.classList.add(p.DRAG_CLONE));let ot=new Date(Number(X.getAttribute("data-date"))),vt=ot,yt=ot;if(T.current.isMonthView){const ht=(Oe=X.closest(`.${p.CONTENT_TABLE}`))==null?void 0:Oe.querySelectorAll(`.${p.WORK_CELLS}`);ot=new Date(Number((Pe=ht[0])==null?void 0:Pe.getAttribute("data-date"))),yt=new Date(Number((Ye=ht[(ht==null?void 0:ht.length)-1])==null?void 0:Ye.getAttribute("data-date")))}H.current.lastDragEvent=_.event,fe(X),w.current.finalDragStartTime&&(vt=w.current.finalDragStartTime),le(vt,ot,yt)}else v.externalDragAndDrop&&((Tt=(He=_.target)==null?void 0:He.closest)!=null&&Tt.call(He,`.${p.SCHEDULER_TOOLBAR_CONTAINER}, .${p.STICKY_HEADER}, .${p.HEADER_SECTION},
                .${p.HEADER_ROW}, .${p.LEFT_INDENT}`)&&(document!=null&&document.body)?T.current.setCursorClass("notAllowed"):document!=null&&document.body&&T.current.setCursorClass("default"),T.current.cloneRef.classList.remove(p.DRAG_CLONE));m==null||m({..._,data:n})},U=()=>{var _,X,J,he;(_=b.current)==null||_.removeAttribute("aria-grabbed"),(X=b.current)==null||X.classList.remove(p.DRAGGING),T.current.setCursorClass("default"),(he=(J=T.current)==null?void 0:J.cloneRef)!=null&&he.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef)},G=()=>{T.current&&(T.current.cloneRef=null)},ge=_=>{var he,xe,we,Le,W,De,Ee;let X=null,J=null;if((he=T.current)!=null&&he.isAllDaySource?X=((we=T.current)==null?void 0:we.getCellUnderClone((xe=T.current)==null?void 0:xe.cloneRef))||((Le=T.current)==null?void 0:Le.getCellUnderPointer(_.event)):X=(W=T.current)==null?void 0:W.getCellUnderPointer(_.event),X||(X=(De=T.current)==null?void 0:De.getCurrentTargetCell(_.target)),X){const Oe=X.getAttribute("data-date");J=Oe?Number(Oe):(Ee=T.current)==null?void 0:Ee.getCurrentTargetDate(_.target,X)}return{cell:X,finalDropTimestamp:J}},ce=(_,X)=>{var W,De,Ee;const J=new Date(_.startTime),he=new Date(_.endTime),xe=Math.max(0,he.getTime()-J.getTime());let we=new Date(X);(W=T.current)!=null&&W.isAllDaySource?$.setHours(we,J):(De=T.current)!=null&&De.isMonthView?(we=$.normalizeDate(we),$.setHours(we,J)):(X=X-Z.current,we=new Date(X));const Le=new Date(we.getTime()+xe);return(Ee=T.current)!=null&&Ee.isAllDaySource&&$.setHours(Le,he),{originalStart:J,originalEnd:he,durationMs:xe,newStartTime:we,newEndTime:Le}},ye=(_,X,J,he)=>{if(!T.current)return;const xe=Mr(_,X,J,c,f.fields,S,k);q(),he.cancel=!0,E==null||E({...he,data:xe})},Ie=t.useCallback(_=>{if(!K.current)return!0;const X=K.current.split(",");for(const J of X)if(_!=null&&_.classList.contains(J.trim()))return!1;return!0},[]),pe=_=>{if(!T.current)return;if(U(),_.element){const we=_.element.closest(`.${p.TABLE_WRAP}`);we&&(T.current.cloneRef=we.querySelector(`.${p.APPOINTMENT}.${p.EVENT_CLONE}`))}const{cell:X,finalDropTimestamp:J}=ge(_);G(),v.externalDragAndDrop?x():N==null||N.hide();const he=Array.isArray(n)?n[0]:n,xe=(we,Le)=>{const W=Me.getEventByGuid(S,n.guid);W&&(W.startTime=j.startTime,W.endTime=j.endTime,W.isAllDay=j.isAllDay),q(),_.cancel=!0,we!==null&&Le!==null&&(C==null||C.show({title:y(we),message:y(Le),confirmText:y("ok"),showCancel:!1,onConfirm:()=>C.hide()})),E==null||E({..._,data:he}),T.current=null};if(!X){xe(null,null);return}if(Ie(X)){let we,Le;if(w.current.finalDragStartTime&&w.current.finalDragEndTime)we=w.current.finalDragStartTime,Le=w.current.finalDragEndTime;else if(X&&J){const{newStartTime:W,newEndTime:De}=ce(he,J);we=W,Le=De}if(we&&Le){const W={...he,startTime:we,endTime:Le};if(!a&&Me.checkEventOverlap(W,S,!0)){xe("eventOverlap","overlapAlert");return}if(Me.isBlockRange(W,S,!0)){xe("alert","blockAlert");return}if(ee.current&&T.current.isMonthView&&(n.isAllDay=!0),he.recurrenceID&&he.recurrenceRule){he.startTime=j.startTime,he.endTime=j.endTime;const De=R?br(he,we,Le,k,S):{isValid:!0};if(De.isValid)he.recurrenceException=he.recurrenceException??Kn(j.startTime);else{const Ee=De.messageKey||At.SameDayAlert;xe("alert",Ee);return}}ye(he,we,Le,_);return}}else{const we=Me.getEventByGuid(S,n.guid);we.startTime=he.startTime,we.endTime=he.endTime}q(),E==null||E({..._,data:n}),T.current=null};Gt(M,{clone:!0,cursorAt:v!=null&&v.externalDragAndDrop?{left:-20,top:-20}:{left:-5,top:-5},dragArea:(v==null?void 0:v.eventDragArea)??`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}`,abort:`.${p.EVENT_RESIZE_CLASS}, .${p.LEFT_RESIZE_HANDLER}, .${p.RIGHT_RESIZE_HANDLER}, .${p.TOP_RESIZE_HANDLER}, .${p.BOTTOM_RESIZE_HANDLER}, .${p.BLOCK_APPOINTMENT}`,distance:5,helper:_=>se(_),onDragStart:_=>Se(_),onDrag:_=>re(_),onDragStop:_=>pe(_),enableTailMode:v==null?void 0:v.externalDragAndDrop});const Re={...r||{},onClick:_=>{var X,J,he;(X=T.current)==null||X.suppressEvent(_),!((J=T.current)!=null&&J.isActionPerformed)&&((he=r==null?void 0:r.onClick)==null||he.call(r,_))}};return{mergedRef:de,composedProps:Re}}const Zn=t.memo(t.forwardRef((o,n)=>{const{children:r,data:e,className:s,containerProps:i}=o,{mergedRef:l,composedProps:c}=Ea({ref:n,data:e,containerProps:i});return u.jsx("div",{ref:l,className:s,...c,children:r})}));Zn.displayName="DraggableEvent";Zn.__docgenInfo={description:"",methods:[],displayName:"DraggableEvent"};function ga(o){var ae,fe,A,re;const{onResizeStart:n,onResizing:r,onResizeStop:e,timeScale:s,startHour:i,endHour:l,schedulerRef:c,showWeekend:f,workDays:d,eventOverlap:h,confirmationDialog:g,eventResize:m,eventSettings:E}=Fe(),{eventsData:a,eventsProcessed:C}=Mt(),{renderDates:v}=pt(),R=Vr(),{dir:j}=$e(),y=t.useRef(null),D=t.useRef(null),S=10,k=t.useRef(new Date),z=t.useRef(0),N=t.useRef(0),b=t.useRef(0),M=t.useRef(0),T=t.useRef(Xe.Right),H=t.useRef(void 0),w=t.useRef(void 0),I=t.useRef(null),Y=t.useRef(void 0),Z=t.useRef(!1),ue=t.useRef(0),K=t.useRef(0),{getString:O}=nt(),L=t.useRef(null);t.useEffect(()=>()=>{de(),D.current=null,y.current=null},[]);const V=()=>{We.add(document,"mousemove",B,!0),We.add(document,"touchmove",B,{capture:!0,passive:!1}),We.add(document,"mouseup",le,!0),We.add(document,"touchend",le,{capture:!0})},ee=()=>{We.remove(document,"mousemove",B),We.remove(document,"touchmove",B),We.remove(document,"mouseup",le),We.remove(document,"touchend",le)},de=()=>{x(),ee(),Z.current=!1,ue.current=0,K.current=0},F=()=>{document.body.style.userSelect="none",document.body.style.cursor=T.current===Xe.Left||T.current===Xe.Right?"ew-resize":"ns-resize"},q=()=>{document.body.style.userSelect="",document.body.style.cursor=""},te=(U,G)=>{const ge=(G==null?void 0:G.offsetWidth)||0,ce=U.classList.contains(p.ALL_DAY_APPOINTMENT),ye=!!U.closest(`.${p.MONTH_VIEW}`),Ie=D.current.slotInterval;ue.current=(G==null?void 0:G.offsetHeight)||0,K.current=ue.current>0?Ie/ue.current:0,H.current=o!=null&&o.startTime?new Date(o.startTime):void 0,w.current=o!=null&&o.endTime?new Date(o.endTime):void 0,Pt(D.current,{cellWidth:ge,isAllDaySource:ce,isMonthView:ye,slotInterval:Ie,interval:Ie},null,!0)},ne=()=>{if(!y.current||!(y.current.offsetParent||y.current.parentElement))return;const G=D.current.cloneFromSource(y.current);D.current.cloneRef=G},oe=t.useCallback((U,G)=>{var Re,_,X,J;const ge=G.nativeEvent,ce=(Re=G.target)==null?void 0:Re.closest(`.${p.APPOINTMENT}`);if(!ce)return;D.current=new _t,D.current.slotInterval=s!=null&&s.interval&&(s!=null&&s.slotCount)?s.interval/s.slotCount:30,D.current.isActionPerformed=!1,T.current=U,D.current.direction=j,y.current=ce,b.current=ce.offsetTop,M.current=ce.offsetHeight;const ye=D.current.getCellUnderPointer(G.nativeEvent);te(ce,ye),T.current===Xe.Top?k.current=H.current:T.current===Xe.Bottom&&(k.current=w.current);const Ie=Ce(ge),pe=D.current.getPointerCoordinates(ge);pe.clientX!=null&&(z.current=pe.clientX),pe.clientY!=null&&(N.current=pe.clientY),Y.current=ge,n==null||n(Ie),!Ie.cancel&&(L.current={startTime:new Date(o.startTime),endTime:new Date(o.endTime)},m&&(m.interval>0&&!D.current.isAllDaySource&&!D.current.isMonthView&&(Z.current=D.current.slotInterval!==m.interval,Z.current&&(D.current.slotInterval=m.interval)),D.current.enableScroll=((_=m.scroll)==null?void 0:_.enable)??!0,D.current.minScrollSpeed=((X=m.scroll)==null?void 0:X.scrollBy)??D.current.minScrollSpeed,D.current.minScrollThreshold=((J=m.scroll)==null?void 0:J.timeDelay)??D.current.minScrollThreshold),V())},[n,v,o]),Ce=U=>({event:U,cancel:!1,startTime:H.current,endTime:w.current,data:y.current?o:void 0}),ve=U=>(D.current.performAutoScrolling(U,y.current),D.current.scrollInterval!==null&&I.current===null&&(I.current=requestAnimationFrame(Q)),!1),me=(U,G)=>{if(!D.current.isActionPerformed){if(Math.hypot(U,G)<S)return;const ce=y.current;if(!ce)return;D.current.isActionPerformed=!0,D.current.addDocSuppressors(),ce.classList.add(p.RESIZING),ne(),document!=null&&document.body&&F()}},x=()=>{I.current!=null&&(cancelAnimationFrame(I.current),I.current=null)},B=t.useCallback(U=>{var Re,_;if(!D.current)return;const G=D.current.getPointerCoordinates(U),ge=G.clientX-z.current,ce=G.clientY-N.current;if(me(ge,ce),!D.current.isActionPerformed)return;Y.current=U;const ye=Ce(U);if(r==null||r(ye),ye.cancel)return;_t.currentActionName="resize",ye.startTime&&(H.current=ye.startTime),ye.endTime&&(w.current=ye.endTime);const Ie=y.current;!D.current.isAllDaySource&&D.current.enableScroll&&ve(U);const pe=D.current.getCellUnderPointer(U);D.current.cloneRef&&Ie&&s.enable&&!(D.current.isAllDaySource||D.current.isMonthView)&&se(pe),Se(pe),(Re=U.preventDefault)==null||Re.call(U),(_=U==null?void 0:U.stopPropagation)==null||_.call(U)},[(ae=D.current)==null?void 0:ae.isActionPerformed,y.current,v,o,z.current,N.current,T.current,(fe=D.current)==null?void 0:fe.cloneRef,r]),le=t.useCallback(U=>{var pe,Re;if((pe=y.current)==null||pe.classList.remove(p.RESIZING),D.current.scrollInterval&&cancelAnimationFrame(D.current.scrollInterval),D.current.scrollInterval=null,de(),document!=null&&document.body&&q(),D.current.cloneRef=null,(Re=R==null?void 0:R.hide)==null||Re.call(R),!D.current.isActionPerformed){D.current.isActionPerformed=!1;return}D.current.isActionPerformed=!1;const G=Ce(U);if(e==null||e(G),G.cancel){const _=G.data;_&&(H.current=_.startTime,w.current=_.endTime);return}const ge=Array.isArray(o)?o[0]:o,ce={...ge,startTime:new Date(ge.startTime),endTime:new Date(ge.endTime)};if(T.current===Xe.Top)$.setHours(ce.startTime,k.current);else if(T.current===Xe.Bottom){const _=$.isMidnight(ce.endTime),X=$.isMidnight(k.current);$.setHours(ce.endTime,k.current);const J=_&&!X?-1:!_&&X?1:0;ce.endTime=$.addDays(ce.endTime,J)}if(D.current.isAllDaySource||D.current.isMonthView||!s.enable){const _=D.current.getCellUnderPointer(U),X=(_==null?void 0:_.getAttribute("data-date"))??D.current.getCurrentTargetDate(U.target,_);if(!X)return;let he=new Date(Number(X));if(T.current===Xe.Right){const xe=$.normalizeDate(ce.startTime);he.getTime()<xe.getTime()&&(he=xe),$.setYear(ce.endTime,he)}else if(T.current===Xe.Left){const xe=$.normalizeDate(ce.endTime);he.getTime()>xe.getTime()&&(he=xe),$.setYear(ce.startTime,he)}}const ye={...ce,startTime:ce.startTime,endTime:ce.endTime},Ie=(_,X)=>{const J=Me.getEventByGuid(a,o.guid);J&&L.current&&(J.startTime=new Date(L.current.startTime),J.endTime=new Date(L.current.endTime)),g==null||g.show({title:O(_),message:O(X),confirmText:O("ok"),showCancel:!1,onConfirm:()=>g.hide()})};if(!h&&Me.checkEventOverlap(ye,a,!0)){Ie("eventOverlap","overlapAlert");return}if(Me.isBlockRange(ye,a,!0)){Ie("alert","blockAlert");return}ce.recurrenceRule&&ce.recurrenceID&&(ce.recurrenceException=ce.recurrenceException??Kn(L.current.startTime)),Mr(ce,ce.startTime,ce.endTime,c,E.fields,a,C),D.current=null},[(A=D.current)==null?void 0:A.isActionPerformed,y.current,D,(re=D.current)==null?void 0:re.cloneRef,B,e]),se=U=>{var X;const G=U==null?void 0:U.getAttribute("data-date");if(!G)return;const ge=new Date(Number(G));let ce=ge.getHours()*qe+ge.getMinutes();const ye=H.current?new Date(H.current):void 0,Ie=w.current?new Date(w.current):void 0;let pe=!1,Re=!1,_=ge;if(y.current.querySelector(`.${p.INDICATOR}`)&&(pe=y.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.UP_ARROW_ICON}`),Re=y.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.DOWN_ARROW_ICON}`)),Z.current){const J=Y.current,he=(X=D.current)==null?void 0:X.getContentWrap(U);if(he&&J){const{schedulerStartMinutes:xe}=$.getSchedulerStartAndEndMinutes(i,l);_=D.current.getSteppedCellDate(xe,J,0,K.current,Number(G),he)}}if(T.current===Xe.Top){const J=Ie.getHours()*qe+Ie.getMinutes();Re||J>ce||J===0?(ye.setTime(_.getTime()),k.current=ye):m.resizeToZero&&(k.current=Ie)}else if(T.current===Xe.Bottom){ce=ce+D.current.slotInterval;const J=ye.getHours()*qe+ye.getMinutes();if(Z.current){const he=_.getHours()*qe+_.getMinutes();pe||J<he?(Ie.setTime(_.getTime()),k.current=Ie):m.resizeToZero&&(k.current=ye)}else pe||J<ce?(Ie.setHours(ge.getHours(),ge.getMinutes()+D.current.slotInterval),k.current=Ie):m.resizeToZero&&(k.current=ye)}},Se=U=>{var pe,Re,_,X;if(!o.guid)return;const G=Me.getEventByGuid(a,o.guid);if(!G)return;const ge={...G,startTime:new Date(G.startTime),endTime:new Date(G.endTime)},ce=((pe=D.current)==null?void 0:pe.isMonthView)||((Re=D.current)==null?void 0:Re.isAllDaySource);if(!ce&&s.enable){const J={...ge};if(T.current===Xe.Top)$.setHours(J.startTime,k.current);else if(T.current===Xe.Bottom){const xe=$.isMidnight(J.endTime),we=$.isMidnight(k.current);$.setHours(J.endTime,k.current);const Le=xe&&!we?-1:!xe&&we?1:0;J.endTime=$.addDays(J.endTime,Le)}const he=Me.processTimeSlotCloneEvent((_=c.current)==null?void 0:_.element,v,J,s,i,l,D.current.cellWidth,j==="rtl");R==null||R.show({guid:o.guid,segments:he,isDayEvent:!1});return}let ye=null;if(U){const J=U.getAttribute("data-date");ye=J?new Date(Number(J)):null}if(!ye&&U){const J=D.current.getCurrentTargetDate(U,U);ye=J!=null?new Date(J):null}if(ye){const J=$.normalizeDate(ge.startTime),he=$.normalizeDate(ge.endTime);T.current===Xe.Right?(ye.getTime()<J.getTime()&&(ye=J),$.setYear(ge.endTime,ye)):T.current===Xe.Left&&(ye.getTime()>he.getTime()&&(ye=new Date(he)),$.setYear(ge.startTime,ye))}const Ie=Me.processCloneEvent((X=c.current)==null?void 0:X.element,v,ge,f,d,D.current.cellWidth,D.current.isAllDaySource,j==="rtl",D.current.isMonthView,y.current);R==null||R.show({guid:o.guid,segments:Ie,isDayEvent:ce})},Q=()=>{if(I.current=null,!D.current||D.current.scrollInterval==null)return;const U=Y.current;if(U){let G=D.current.getCellUnderPointer(U);if(!G){const ge=U.target||null;G=ge==null?void 0:ge.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}G&&(D.current.cloneRef&&!(D.current.isAllDaySource||D.current.isMonthView)&&se(G),Se(G))}D.current&&D.current.scrollInterval!=null&&(I.current=requestAnimationFrame(Q))};return{resizeStart:oe,onClick:U=>{var G;(G=D.current)!=null&&G.suppressEvent&&D.current.suppressEvent(U)}}}const $n=typeof document<"u"&&typeof window<"u",Vn=o=>{var n,r;o==null||o.stopPropagation(),o!=null&&o.nativeEvent&&((r=(n=o.nativeEvent).stopImmediatePropagation)==null||r.call(n))},Ta=o=>{switch(o){case Xe.Top:return p.TOP_RESIZE_HANDLER;case Xe.Bottom:return p.BOTTOM_RESIZE_HANDLER;case Xe.Left:return p.LEFT_RESIZE_HANDLER;default:return p.RIGHT_RESIZE_HANDLER}},Rs=({dir:o,resizeStart:n,showResizeHandle:r})=>Ae.isDevice&&!r?null:u.jsxs("div",{className:`${p.EVENT_RESIZE_CLASS} ${Ta(o)}`,onMouseDown:e=>{Vn(e),n==null||n(o,e)},onTouchStart:e=>{Vn(e),n==null||n(o,e)},children:[o===Xe.Top||o===Xe.Bottom?u.jsx("div",{className:p.VERTICAL_RESIZE_INNER}):u.jsx("div",{className:p.HORIZONTAL_RESIZE_INNER}),Ae.isDevice&&r&&u.jsx("div",{className:p.MOB_RESIZE_DOT,onMouseDown:e=>{Vn(e),n==null||n(o,e)},onTouchStart:e=>{Vn(e),n==null||n(o,e)}})]}),gn=t.memo(({isVertical:o=!1,data:n,children:r,hasPrevious:e,hasNext:s})=>{const{eventResize:i}=Fe();if(!i)return u.jsx(u.Fragment,{children:r});const{resizeStart:l}=ga(n),c=t.useRef(null),f=t.useRef(null),[d,h]=t.useState(!1);Bt(f,{tapHold:()=>{Ae.isDevice&&h(!0)}}),t.useEffect(()=>{const a=f.current;if(!a)return;const C=v=>{v.preventDefault()};return a.addEventListener("contextmenu",C,!0),()=>{a.removeEventListener("contextmenu",C,!0)}},[]);const g=t.useCallback((a,C)=>{if(l(a,C),!Ae.isDevice)return;const v=()=>{h(!1),$n&&(document.removeEventListener("mouseup",v,!0),document.removeEventListener("touchend",v,!0))};$n&&(document.addEventListener("mouseup",v,{capture:!0,once:!0}),document.addEventListener("touchend",v,{capture:!0,once:!0}))},[l]);t.useEffect(()=>{if(!Ae.isDevice||!d)return;const a=C=>{const v=C.target;c.current&&v&&!c.current.contains(v)&&h(!1)};return $n&&(document.addEventListener("mousedown",a,!0),document.addEventListener("touchstart",a,!0)),()=>{$n&&(document.removeEventListener("mousedown",a,!0),document.removeEventListener("touchstart",a,!0))}},[d]);const m=o?Xe.Top:Xe.Left,E=o?Xe.Bottom:Xe.Right;return u.jsxs("div",{className:`${p.RESIZE_CONTAINER}`,ref:a=>{c.current=a,f.current=a?a.closest(`.${p.APPOINTMENT}`):null},children:[!e&&i.startResizable&&u.jsx(Rs,{dir:m,resizeStart:g,showResizeHandle:d}),r,!s&&i.endResizable&&u.jsx(Rs,{dir:E,resizeStart:g,showResizeHandle:d})]})});gn.displayName="ResizeHandlers";const Yn=o=>{const{weekRenderDates:n,isBlockedEvent:r,...e}=o,{renderDates:s}=pt(),{timeFormat:i,eventTemplate:l,onEventClick:c,onEventDoubleClick:f,eventDrag:d,eventResize:h,quickPopupRef:g,readOnly:m}=Fe(),{locale:E}=$e(),{getString:a}=nt(E||"en-US"),C=t.useRef(null),{processedEvent:v,overflowDirection:R,positionStyle:j}=ha({eventInfo:e,renderDates:n||s}),{isOverflowLeft:y,isOverflowRight:D}=R,S=t.useCallback(O=>{if(r){O==null||O.preventDefault(),O==null||O.stopPropagation();return}if(qn(O.currentTarget),O.stopPropagation(),c){const L={event:O,data:e.event,element:O.currentTarget};c(L)}},[c,v]),k=t.useCallback(O=>{var L;if(e.event.isReadonly||m||r){O==null||O.preventDefault(),O==null||O.stopPropagation();return}if(O.stopPropagation(),f){(L=g==null?void 0:g.current)==null||L.hide();const V={event:O,data:e.event,element:O.currentTarget};f(V)}},[f,v]),z=O=>ut(O??new Date,{type:"time",skeleton:"short",format:i,locale:E}),N=O=>u.jsx("div",{className:`sf-indicator sf-icons sf-${O}-icon`,children:O==="left"?u.jsx(Lr,{}):u.jsx(Ir,{})}),b=O=>u.jsx("div",{className:p.TIME,children:O}),M=t.useCallback(()=>{const{subject:O,isAllDay:L,startTime:V,endTime:ee}=v;if(!e.totalSegments)return null;const de=()=>y?N("left"):!L&&b(z(V)),F=()=>D?N("right"):!L&&b(z(ee));return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[de(),u.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:O||a("addTitle")}),F(),u.jsx(Wt,{event:e.event})]})},[v,e,E,i,y,D]),T=t.useCallback(()=>{const{subject:O,startTime:L,isAllDay:V}=v;return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!V&&b(z(L)),u.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:O||a("addTitle")}),u.jsx(Wt,{event:e.event})]})},[v,e]),H=t.useCallback(()=>{const{subject:O}=v;return u.jsx("div",{className:p.APPOINTMENT_DETAILS,children:u.jsx("div",{className:`${p.SUBJECT}`,children:O||a("addTitle")})})},[v,e]),w=t.useCallback(()=>l?l(v):r?H():e.totalSegments?M():T(),[l,v,M,T,H,e,y,D]),I={...e.eventStyle||{},...j},Y=e.eventClasses.join(" "),Z={"data-id":v.id,"aria-label":Me.getAriaLabel(v),"data-guid":e.event.guid,role:"button",tabIndex:0,onClick:S,onDoubleClick:k,onKeyDown:O=>{(O.key==="Enter"||O.key===" ")&&(O.stopPropagation(),S(O))},style:I},ue=w(),K=!r&&!e.event.isReadonly&&!m;return d!=null&&d.enable&&K?u.jsx(Zn,{data:v,className:Y,containerProps:Z,ref:C,children:h!=null&&h.enable&&K?u.jsx(gn,{data:v,hasPrevious:y,hasNext:D,children:ue}):u.jsx(u.Fragment,{children:ue})}):u.jsx("div",{ref:C,className:Y,...Z,children:h!=null&&h.enable&&K?u.jsx(gn,{data:v,hasPrevious:y,hasNext:D,children:ue}):u.jsx(u.Fragment,{children:ue})})};Yn.displayName="DayEvent";const Qn=()=>{const{timeScale:o,onCellClick:n,onCellDoubleClick:r,readOnly:e,quickPopupRef:s}=Fe(),i=t.useCallback((d,h,g)=>{const m=new Date(h);return!o.enable||g?(h.setHours(0,0,0,0),m.setDate(m.getDate()+1),m.setHours(0,0,0,0),g=!0):m.setTime(h.getTime()+o.interval/o.slotCount*Qt),{cancel:!1,nativeEvent:d.nativeEvent,startTime:h,endTime:m,isAllDay:!!g,element:d.currentTarget}},[o]),l=t.useCallback((d,h,g)=>{var m,E;if(!((m=d.target)!=null&&m.classList.contains(p.DATE_HEADER)||(E=d.target)!=null&&E.classList.contains(p.HEADER_DATE)||e)&&(Un(d.currentTarget),n)){const a=i(d,h,g);if(n(a),a.cancel)return}},[n,i]),c=t.useCallback((d,h,g)=>{var m;if(!e&&(Un(d.currentTarget),r)){(m=s==null?void 0:s.current)==null||m.hide();const E=i(d,h,g);if(r(E),E.cancel)return}},[r,i]);return{handleCellClick:l,handleCellDoubleClick:c,handleKeyDown:(d,h)=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),l(d,h))}}},Co=o=>{const{date:n,visibleEvents:r,hiddenEventCount:e,onMoreIndicatorClick:s}=o,{timeScale:i}=Fe(),{locale:l}=$e(),{getString:c}=nt(l||"en-US"),{handleCellClick:f,handleCellDoubleClick:d}=Qn(),h=()=>e<=0?null:u.jsx("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,onClick:m=>{m==null||m.stopPropagation(),m==null||m.preventDefault(),s()},role:"button",tabIndex:0,"aria-label":`${e} more events`,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m==null||m.stopPropagation(),m==null||m.preventDefault(),s())},children:Ae.isDevice?`+${e}`:`+${e} ${c("more")}`}),g=()=>r.map(m=>{const{totalSegments:E,isFirstSegmentInRenderRange:a,event:C,eventKey:v}=m;return E&&E>1&&a||(!E||E<=1)&&C.isAllDay&&!C.isBlock?u.jsx(Yn,{...m},v):null});return u.jsx("div",{className:p.ALL_DAY_CELL,"data-date":n.getTime(),onClick:m=>f(m,n,!0),onDoubleClick:m=>d(m,n,!0),onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),f(m,n,!0))},children:i.enable&&u.jsxs(u.Fragment,{children:[g(),h()]})},$.generateDateKey(n))};Co.displayName="AllDayRowCell";const Wr=t.forwardRef((o,n)=>{const{isCollapsed:r,onCollapseChange:e,onMoreEventsChange:s}=o,{renderDates:i}=pt(),{timeScale:l}=Fe(),c=t.useRef(null),f=3,[d,h]=t.useState("auto"),{eventsByDate:g,hasEventsExceedingMaxCount:m,calculateHeight:E,getVisibleEvents:a,getHiddenEventCount:C}=pa(r,f),v=t.useCallback(()=>{e&&e()},[e]);t.useImperativeHandle(n,()=>({hasMoreEvents:m})),t.useEffect(()=>{s&&s(m)},[m,s]),t.useEffect(()=>{if(c.current)if(!l.enable)h("auto");else{const y=E();h(`${y}px`)}},[r,g,E]);const R=["sf-all-day-row",r?"sf-all-day-collapsed":"",m?"sf-has-more-events":""].filter(Boolean).join(" "),j=y=>{const D=$.generateDateKey(y),S=a(D),k=C(D);return u.jsx(Co,{date:y,visibleEvents:S,hiddenEventCount:k,onMoreIndicatorClick:v},D)};return u.jsx("div",{ref:c,className:R,style:{height:d},children:i.map(j)})});Wr.displayName="AllDayRow";Wr.__docgenInfo={description:"",methods:[],displayName:"AllDayRow"};const Do=()=>{const{timeScale:o,dateHeader:n,headerIndent:r}=Fe(),{handleDateClick:e}=jr(),{locale:s}=$e(),{getString:i}=nt(s||"en-US"),{headerCells:l,isAllDayCollapsed:c,showAllDayToggle:f,weekNumber:d,toggleAllDayCollapse:h,handleMoreEventsChange:g}=Yl(),{handleCellClick:m,handleCellDoubleClick:E}=Qn(),a=v=>u.jsx("div",{className:v.className,onClick:R=>m(R,v.date,!0),onDoubleClick:R=>E(R,v.date,!0),children:n?n({date:v.date}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:p.HEADER_DAY,children:v.dayName}),u.jsx("div",{className:`${p.HEADER_DATE} ${v.isToday?p.TODAY:""}`,onClick:R=>e(R,v.date),children:v.dateNumber})]})},v.key),C=()=>u.jsx("div",{className:p.ALL_DAY_APPOINTMENT_SECTION,onClick:h,role:"button",tabIndex:0,"aria-label":i(c?"expandAllDaySection":"collapseAllDaySection"),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&h()},children:u.jsx(Xn,{className:c?p.APPOINTMENT_EXPAND:p.APPOINTMENT_COLLAPSE})});return u.jsxs("div",{className:p.HEADER_SECTION,children:[o.enable&&u.jsxs("div",{className:p.LEFT_INDENT,children:[r?r({weekNumber:d}):u.jsx(u.Fragment,{children:d&&u.jsx("div",{className:p.WEEK_NUMBER,children:u.jsx("div",{title:`Week ${d}`,children:d})})}),f&&C()]}),u.jsx("div",{className:p.RIGHT_SECTION,children:u.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:u.jsxs("div",{className:p.DATE_HEADER,children:[u.jsx("div",{className:p.HEADER_ROW,children:l.map(v=>a(v))}),u.jsx("div",{className:p.DAY_CLONE_CONTAINER}),u.jsx(Wr,{isCollapsed:c,onCollapseChange:h,onMoreEventsChange:g})]})})})]})};Do.displayName="DateHeader";const Ca=o=>{const{currentTime:n=new Date,currentTimePosition:r=0,isTimeWithinBounds:e=!1}=o,{startHour:s,endHour:i,timeFormat:l,timeScale:c}=Fe(),{locale:f}=$e(),{hours:d,minutes:h}=$.parseTimeString(s),{hours:g,minutes:m}=$.parseTimeString(i),[E,a]=t.useState(null),[C,v]=t.useState(0),R=t.useMemo(()=>{const y=[],D=d*qe+h,S=g*qe+m;let k=D;for(;k<S;){for(let z=0;z<c.slotCount;z++){const N=k+z*(c.interval/c.slotCount);if(N>=S)break;const b=Math.floor(N/qe),M=Math.floor(N%qe),T=new Date;T.setHours(b,M,0,0);const H=z===0,w=z===c.slotCount-1,Y=N+c.interval/c.slotCount>=S,Z={date:T,type:H?"majorSlot":"minorSlot"};y.push({key:`${b}-${M}`,date:T,isMajorSlot:H,isLastSlotOfInterval:w,isLastSlotBeforeEnd:Y,label:ut(T,{type:"time",skeleton:"h",format:l,locale:f}),templateProps:Z,index:y.length})}k+=c.interval}return v(y.length),y},[d,h,g,m,l,c,f]);t.useEffect(()=>{if(!e){E!==null&&a(null);return}const y=100/C,D=Math.floor(r/y);D!==E&&a(D)},[r,E,C,e]);const j=ut(n,{type:"time",skeleton:"short",format:l,locale:f});return{timeSlots:R,totalSlots:C,hiddenSlotIndex:E,currentTimeString:j}},vo=o=>{const{currentTime:n,currentTimePosition:r=0,isTimeWithinBounds:e=!1}=o,{showTimeIndicator:s,timeScale:i}=Fe(),{timeSlots:l,hiddenSlotIndex:c,currentTimeString:f}=Ca({currentTime:n,currentTimePosition:r,isTimeWithinBounds:e}),d=()=>l.map(h=>u.jsx("div",{className:`${p.TIME_SLOTS} ${h.isLastSlotOfInterval||h.isLastSlotBeforeEnd?"sf-time-cells":""} ${c===h.index?"sf-hide-children":""}`,children:h.isMajorSlot?i.majorSlot?i.majorSlot(h.templateProps):u.jsx("span",{children:h.label}):i.minorSlot?i.minorSlot(h.templateProps):null},h.key));return u.jsx("div",{className:p.LEFT_INDENT,children:u.jsxs("div",{className:p.TIME_CELLS_WRAP,children:[u.jsx("div",{className:p.SCHEDULER_TABLE,children:d()}),s&&e&&u.jsx("div",{className:p.CURRENT_TIME,style:{top:`${r}%`},children:f})]})})};vo.displayName="TimeCells";const Da=o=>{const{renderDates:n,workDays:r,workHours:e,cell:s,timeScale:i,startHour:l,endHour:c}=o,{hours:f,minutes:d}=$.parseTimeString(l||"00:00"),{hours:h,minutes:g}=c==="24:00"?{hours:24,minutes:0}:$.parseTimeString(c||"24:00"),m=a=>s?s({date:a,type:"workCell"}):null;return{workCellRows:t.useMemo(()=>{const a=[];if(i.enable){const C=f*qe+d,v=h*qe+g;let R=C;for(;R<v;){for(let j=0;j<i.slotCount;j++){const y=R+j*(i.interval/i.slotCount);if(y>=v)break;const D=Math.floor(y/qe),S=Math.floor(y%qe),z=!(j===i.slotCount-1),N=`${D}-${S}`,b=`${D}:${S.toString().padStart(2,"0")}`,M=n.map(T=>{const H=new Date(T);H.setHours(D,S,0,0);const w=$.isWorkHour(H,e,r),I=$.isSameDay(T,new Date),Y=$.isWeekend(T,r),Z=["sf-work-cells",z?"sf-alternate-cells":"",I?"sf-today":"",Y?"sf-weekend":"",w?"sf-work-hours":""].filter(Boolean).join(" ");return{date:H,className:Z,key:`${T.getTime()}-${D}-${S}`,dataAttributes:{date:H.getTime()},isWorkHour:w,isToday:I,isWeekend:Y,isAlternate:z}});a.push({key:N,dataAttribute:b,cells:M})}R+=i.interval}}else{const C=n.map(v=>{const R=new Date(v);R.setHours(0,0,0,0);const j=$.isSameDay(v,new Date),y=$.isWeekend(v,r),D=["sf-work-cells","sf-timescale-disabled-cell",j?"sf-today":"",y?"sf-weekend":""].filter(Boolean).join(" ");return{date:R,className:D,key:`${v.getTime()}-timescale-disabled`,dataAttributes:{date:R.getTime(),dateKey:$.generateDateKey(v)},isToday:j,isWeekend:y}});a.push({key:"disabled-timescale-row",cells:C})}return a},[n,i,f,d,h,g,r,e]),renderCellTemplate:m}},yo=()=>{const{renderDates:o}=pt(),{workDays:n,workHours:r,cell:e,timeScale:s,startHour:i,endHour:l}=Fe(),{workCellRows:c,renderCellTemplate:f}=Da({renderDates:o,workDays:n,workHours:r,cell:e,timeScale:s,startHour:i,endHour:l}),{handleCellClick:d,handleCellDoubleClick:h,handleKeyDown:g}=Qn();return u.jsx("div",{className:p.CONTENT_TABLE,children:c.map(m=>u.jsx("div",{className:p.WORK_CELLS_ROW,"data-date":m.dataAttribute,children:m.cells.map(E=>u.jsx("div",{className:E.className,"data-date":E.dataAttributes.date,"data-date-key":E.dataAttributes.dateKey,onClick:a=>d(a,E.date),onDoubleClick:a=>h(a,E.date),onKeyDown:a=>{g(a,E.date)},children:f(E.date)},E.key))},m.key))})};yo.displayName="WorkCells";const fr=118,ws=2,va=()=>{const{eventSettings:o,eventOverlap:n,timeFormat:r,timeScale:e,startHour:s,endHour:i,maxEventsPerRow:l=3,startHourTuple:c,endHourTuple:f}=Fe(),{renderDates:d}=pt(),{eventsData:h}=Mt(),{locale:g,dir:m}=$e(),E=t.useCallback((C,v)=>{const R=(D,S)=>{if(c&&f){const k=$.normalizeDate(D),z=$.normalizeDate($.isMidnight(S)?$.addDays(S,-1):S);return k==null||k.setHours(c[0],c[1],0,0),z==null||z.setHours(f[0],f[1],0,0),S>k&&D<z}else return!0};if(e!=null&&e.enable){const D=o.spannedEventPlacement||"AllDayRow",S=[];let k=v.filter(w=>!w.isAllDay&&!w.isBlock&&Me.isMultiDayEvent(w));D==="AllDayRow"&&(k=k.filter(w=>$.isLessthan24Hours(w.startTime,w.endTime))),k.forEach(w=>{const I=Me.splitEventByDay(w,[C]);S.push(...I.filter(Y=>R(Y.startDate,Y.endDate)))});const N=v.filter(w=>!w.isAllDay&&!w.isBlock&&!Me.isMultiDayEvent(w)&&$.isSameDay(new Date(w.startTime),C)&&R(w.startTime,w.endTime)).map(w=>({event:w,startDate:w.startTime,endDate:w.endTime}));S.push(...N);const b=Me.calculateOverlappingEvents(S,n),M=v.filter(w=>w.isBlock&&$.isSameDay(new Date(w.startTime),C)),T=[],H=(w,I={})=>{const{event:Y}=w;if(!Y.startTime||!Y.endTime)return;const Z=ct.calculateEventPosition(w,e,s,i),ue=`${C.toISOString()}-${Y.id}`,K=$.formatTimeDisplay(Y,g,r),O=Me.getEventClassNames(Y),L={width:Z.width||"96%",height:`${Z.height}`,top:Z.top||"0px"};m==="rtl"?L.right=Z.left||"0%":L.left=Z.left||"0%",T.push({event:Y,timeDisplay:K,eventKey:ue,eventClasses:O,eventStyle:L,...I})};return b.forEach(w=>{w.forEach(I=>{H(I,{totalOverlapping:I.totalOverlapping,totalSegments:I.totalSegments,isFirstDay:I.isFirstDay,isLastDay:I.isLastDay,positionIndex:I.positionIndex,segmentIndex:I.segmentIndex})})}),M.forEach(w=>{const I={event:w,startDate:w.startTime,endDate:w.endTime};H(I)}),T}const j=Me.processDayEvents(d,v),y=[];return j.forEach(D=>{if(!$.isSameDay(D.startDate,C)||!R(D.startDate,D.endDate))return;const S=`${D.startDate.toISOString()}-${D.event.id}`,k=$.formatTimeDisplay(D.event,g,r),z=ct.calculatePositionStyles(D,d).width,N=D.positionIndex??0,b={height:`${fr}px`,top:`${N*(fr+ws)}px`,width:z||"96%"};m==="rtl"?b.right="0%":b.left="0%",y.push({...D,timeDisplay:k,eventKey:S,eventStyle:b})}),y},[o,n,e,s,i,d,m,g,r]);return{dayWrappers:t.useMemo(()=>!d||d.length===0||!h||h.length===0?null:d.map(C=>{const v=$.generateDateKey(C),R=E(C,h);let j;return e.enable||(j=l*(fr+ws)),{key:v,dateTimestamp:C.getTime(),events:R,moreIndicatorTopPx:j}}),[d,o,n,e,r,s,i,g,h])}},Ns=24,ya=124,mr=4,Fr=(o,n)=>{const{height:r,rowAutoHeight:e,numberOfWeeks:s,eventSettings:i,schedulerRef:l}=Fe(),{eventsData:c}=Mt(),f=t.useMemo(()=>Me.processDayEvents(o,c),[c,o]),d=t.useMemo(()=>Me.getEventsMap(o,f),[o,f]),h=t.useMemo(()=>{var b,M,T,H,w,I,Y,Z,ue;const y=Me.getMaxEventsInCell(d,o),D=((T=(M=(b=l==null?void 0:l.current)==null?void 0:b.element)==null?void 0:M.querySelector("."+p.MONTH_VIEW+" ."+p.APPOINTMENT))==null?void 0:T.offsetHeight)??Ns,S=((I=(w=(H=l==null?void 0:l.current)==null?void 0:H.element)==null?void 0:w.querySelector("."+p.MONTH_VIEW+" ."+p.DATE_HEADER))==null?void 0:I.offsetHeight)??0;let k=((ue=(Z=(Y=l==null?void 0:l.current)==null?void 0:Y.element)==null?void 0:Z.querySelector("."+p.MONTH_VIEW+" ."+p.WORK_CELLS_ROW))==null?void 0:ue.offsetHeight)??ya;const z=K=>K*D+(K>0?K-1:0)*mr,N=()=>{var ee,de,F,q,te,ne,oe,Ce;const K=((F=(de=(ee=l==null?void 0:l.current)==null?void 0:ee.element)==null?void 0:de.querySelector("."+p.SCHEDULER_TOOLBAR_CONTAINER))==null?void 0:F.offsetHeight)??0,O=((ne=(te=(q=l==null?void 0:l.current)==null?void 0:q.element)==null?void 0:te.querySelector("."+p.MONTH_VIEW+" ."+p.HEADER_ROW))==null?void 0:ne.offsetHeight)??0,V=(((Ce=(oe=l==null?void 0:l.current)==null?void 0:oe.element)==null?void 0:Ce.offsetHeight)??parseInt(r,10))-K-O;return parseInt(Math.abs(V/s).toFixed(2),10)};if(e){const K=z(y)+S+(e&&(i!=null&&i.ignoreWhitespace)?0:Ns);return r!=="auto"&&s&&(k=N()),`${Math.max(K,k)}px`}if(s&&r!=="auto"&&n>=3){const K=N(),O=z(n)+S+D+mr;return`${Math.max(O,K)}px`}if(y>=3){const K=Math.min(y,n),O=z(K)+S+(y>n?D:0)+mr;return`${Math.max(O,k)}px`}return`${k}px`},[o,d,e,s,r,i==null?void 0:i.ignoreWhitespace,n,l]),g=t.useCallback(y=>{const D=E(y);return e?D:D.slice(0,n)},[d,n,e]),m=t.useCallback(y=>d.get(y).find(k=>k.event.isBlock&&(k.event.isAllDay||$.isFullDayEvent(k.startDate,k.endDate))),[d,n]),E=t.useCallback(y=>{var k;return[...(k=d.get(y))==null?void 0:k.filter(z=>!z.event.isBlock)].sort((z,N)=>(z.positionIndex||0)-(N.positionIndex||0))},[d]),a=t.useCallback(y=>{var S;if(m(y))return 0;const D=(S=d.get(y))==null?void 0:S.filter(k=>!k.event.isBlock);return Math.max(0,D.length-n)},[d,n]),C=t.useCallback(y=>a(y)>0,[a]),v=t.useCallback(y=>d.get(y).some(S=>S.event.isBlock&&!S.event.isAllDay&&!$.isFullDayEvent(S.startDate,S.endDate)),[d]),R=t.useCallback(y=>d.get(y).some(S=>S.event.isBlock&&(S.event.isAllDay||$.isFullDayEvent(S.startDate,S.endDate))),[d]);return{getVisibleEvents:g,getAlldayBlockEvent:m,getHiddenEventCount:a,getAllEventsForDate:E,hasMoreIndicator:C,hasBlockIndicator:v,hasAllDayBlock:R,calculatedRowHeight:h,sortEventsByTime:y=>y.sort((D,S)=>new Date(D.startTime).getTime()-new Date(S.startTime).getTime())}};function bo(o){const{onMoreEventsClick:n,morePopupRef:r}=Fe();return{handleMoreClick:t.useCallback((s,i)=>{var l;if(s&&typeof s.stopPropagation=="function"&&s.stopPropagation(),i&&s.target){const c=$.generateDateKey(i),d=o(c).map(g=>g.event),h={cancel:!1,data:d};if(n&&n(h),h.cancel)return;(l=r==null?void 0:r.current)==null||l.open(i,d,s.target)}},[o,n,r])}}const Ro=o=>{const{date:n,count:r,onMoreClick:e,topPx:s}=o,{locale:i}=$e(),{getString:l}=nt(i||"en-US"),c=s!==void 0?{top:`${s}px`}:void 0,f=d=>{if(d.key==="Enter"||d.key===" "){const h={...d,currentTarget:d.currentTarget,type:"click"};e(h,n)}};return u.jsxs("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,style:c,onClick:d=>e(d,n),onKeyDown:f,tabIndex:0,role:"button",children:["+",r," ",!Ae.isDevice&&`${l("more")}`]})},wo=t.memo(()=>{const{eventTemplate:o,onEventClick:n,onEventDoubleClick:r,eventDrag:e,eventResize:s,maxEventsPerRow:i=3,timeScale:l,readOnly:c,quickPopupRef:f,startHourTuple:d,endHourTuple:h}=Fe(),{dayWrappers:g}=va(),{locale:m}=$e(),{getString:E}=nt(m||"en-US"),{renderDates:a}=pt(),{getAllEventsForDate:C,getHiddenEventCount:v}=Fr(a,i),{handleMoreClick:R}=bo(C),j=b=>{if(l.enable){const{isOverflowTop:M,isOverflowBottom:T}=ct.getOverflowDirection(b,a,d,h);return u.jsxs(t.Fragment,{children:[M&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:u.jsx(js,{})}),y(b),T&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:u.jsx(Hs,{})})]})}else{const{isOverflowLeft:M,isOverflowRight:T}=ct.getOverflowDirection(b,a);return u.jsxs(t.Fragment,{children:[M&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.LEFT_ARROW_ICON}`,children:u.jsx(Lr,{})}),y(b),T&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.RIGHT_ARROW_ICON}`,children:u.jsx(Ir,{})})]})}},y=b=>{const{event:M,timeDisplay:T}=b;return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[u.jsx("div",{className:`${p.SUBJECT}`,children:M.subject||E("addTitle")}),!M.isBlock&&M.location&&u.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:M.location}),!M.isBlock&&u.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:T}),u.jsx(Wt,{event:M})]})},D=b=>o?o(b.event):b.totalSegments||d||h?j(b):y(b),S=(b,M)=>{if(M.event.isBlock){b==null||b.preventDefault(),b==null||b.stopPropagation();return}if(qn(b.currentTarget),n){const T={event:b,data:M.event,element:b.currentTarget};n(T)}},k=(b,M)=>{var T;if(M.event.isReadonly||c||M.event.isBlock){b==null||b.preventDefault(),b==null||b.stopPropagation();return}if(r){(T=f==null?void 0:f.current)==null||T.hide();const H={event:b,data:M.event,element:b.currentTarget};r(H)}},z=(b,M)=>{(b.key==="Enter"||b.key===" ")&&S(b,M)};if(!g)return u.jsx("div",{className:p.EVENT_CONTAINER});const N=!(l&&l.enable);return u.jsx("div",{className:p.EVENT_CONTAINER,children:g.map(b=>{const M=b.events.filter(K=>!K.event.isBlock),T=b.events.filter(K=>K.event.isBlock),H=N?M.slice(0,i):M,w=new Date(b.dateTimestamp),I=$.generateDateKey(w),Y=N?v(I):0,Z=H.filter(K=>K.totalSegments&&K.totalSegments>1&&K.isFirstSegmentInRenderRange||!K.totalSegments||K.totalSegments<=1),ue=N?Z:[...T,...Z];return u.jsxs("div",{className:p.DAY_WRAPPER,"data-date":b.dateTimestamp,children:[ue.map(K=>{const{isOverflowTop:O,isOverflowBottom:L}=ct.getOverflowDirection(K,a,d,h),V=K.eventClasses.join(" "),ee={style:K.eventStyle,"data-id":String(K.event.id),"data-guid":K.event.guid,"aria-label":Me.getAriaLabel(K.event),tabIndex:0,onClick:q=>S(q,K),onDoubleClick:q=>k(q,K),onKeyDown:q=>z(q,K)},de=D(K),F=!K.event.isBlock&&!K.event.isReadonly&&!c;return e.enable&&F?u.jsx(Zn,{data:K.event,className:V,containerProps:ee,children:s.enable&&F?u.jsx(gn,{isVertical:l.enable,data:K.event,hasPrevious:O,hasNext:L,children:de}):u.jsx(u.Fragment,{children:de})},K.eventKey):u.jsx("div",{className:V,...ee,children:s.enable&&F?u.jsx(gn,{isVertical:l.enable,data:K.event,hasPrevious:O,hasNext:L,children:de}):u.jsx(u.Fragment,{children:de})},K.eventKey)}),N&&Y>0&&u.jsx(Ro,{date:new Date(b.dateTimestamp),count:Y,onMoreClick:R,topPx:b.moreIndicatorTopPx})]},b.key)})})});wo.displayName="TimeSlotEvent";const ba=o=>{const{timeScale:n}=Fe(),[r,e]=t.useState(0),[s,i]=t.useState(new Date),[l,c]=t.useState(!1),f=t.useCallback((g,m)=>{e(g),i(new Date),c(m)},[]),d=t.useMemo(()=>{let g="";switch(o){case"Day":g=p.DAY_VIEW;break;case"Week":g=p.WEEK_VIEW;break;case"WorkWeek":g=p.WORK_WEEK_VIEW;break}return g},[o]),h=t.useMemo(()=>`${n.enable?"":"sf-timescale-disabled"}`,[n.enable]);return{currentTime:s,currentTimePosition:r,isTimeWithinBounds:l,viewClassName:d,contentSectionClassName:h,handleTimePositionUpdate:f}},Jn=o=>{const{viewType:n}=o,{timeScale:r,showTimeIndicator:e}=Fe(),{currentTime:s,currentTimePosition:i,isTimeWithinBounds:l,viewClassName:c,contentSectionClassName:f,handleTimePositionUpdate:d}=ba(n);return u.jsx("div",{className:`${p.VERTICAL_VIEW} ${c}`,children:u.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[u.jsx("div",{className:p.STICKY_HEADER,children:u.jsx(Do,{})}),u.jsxs("div",{className:`${p.CONTENT_SECTION} ${f}`,children:[r.enable&&u.jsx(vo,{currentTime:s,currentTimePosition:i,isTimeWithinBounds:l}),u.jsxs("div",{className:p.WORK_CELLS_CONTAINER,children:[u.jsx("div",{className:p.TIME_SLOT_CLONE_CONTAINER}),u.jsxs("div",{className:p.CONTENT_WRAP,children:[u.jsx(wo,{}),u.jsx(yo,{})]}),e&&r.enable&&u.jsx(fa,{onPositionUpdate:d})]})]})]})})};Jn.displayName="VerticalView";const Ra=()=>u.jsx(Jn,{viewType:"Day"});Ra.displayName="DayView";const wa=()=>u.jsx(Jn,{viewType:"Week"});wa.displayName="WeekView";const Na=()=>u.jsx(Jn,{viewType:"WorkWeek"});Na.displayName="WorkWeekView";function Sa(){const{locale:o}=$e(),{firstDayOfWeek:n,showWeekend:r,workDays:e}=Fe(),s=t.useCallback(()=>{const l=[],c="gregorian",f=Ae.isDevice?"abbreviated":"wide",d=`days.stand-alone.${f}`;let h;if(!o||o==="en"||o==="en-US")h=qt(d,Ko(c));else{const g=`main.${o}.dates.calendars.${c}.days.format.${f}`;h=qt(g,Xo)}for(const g of Object.keys(h))l.push(qt(g,h));return Array.from({length:7},(g,m)=>{const E=(m+n)%7;return l[E>=0&&E<l.length?E:0]})},[n,o]);return{weekdayHeaderCells:t.useCallback(()=>{const l=s(),c=new Date().getDay();if(r)return l.map((f,d)=>{const g=(d+n)%7===c;return{day:f,isCurrentDay:g,className:`sf-header-cells ${g?"sf-current-day":""}`,key:`header-${d}`}});{const f=[];for(let d=0;d<7;d++){const h=(d+n)%7;if(e.includes(h)){const g=h===c;f.push({day:l[d>=0&&d<l.length?d:0],isCurrentDay:g,className:`sf-header-cells ${g?"sf-current-day":""}`,key:`header-${d}`})}}return f}},[n,r,e,s])()}}const No=()=>{const{showWeekNumber:o,weekDay:n}=Fe(),{weekdayHeaderCells:r}=Sa(),e=s=>u.jsx("div",{className:s.className,children:n?n({day:s.day}):u.jsx("div",{className:p.HEADER_DAY,children:s.day})},s.key);return u.jsxs("div",{className:p.HEADER_SECTION,children:[o&&u.jsx("div",{className:p.LEFT_INDENT}),u.jsx("div",{className:p.RIGHT_SECTION,children:u.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:u.jsx("div",{className:p.DATE_HEADER,children:u.jsx("div",{className:p.HEADER_ROW,children:r.map(s=>e(s))})})})})]})};No.displayName="WeekDayHeader";function xa(){const{numberOfWeeks:o,interval:n,showTrailingAndLeadingDates:r=!0,showWeekend:e,workDays:s,weekRule:i,firstDayOfWeek:l}=Fe(),{renderDates:c}=pt(),{weeksToRender:f,weekNumbers:d}=t.useMemo(()=>{if(!c||c.length===0)return{weeksToRender:[],weekNumbers:[]};const E=[],a=[],C=e?qo:s==null?void 0:s.length;for(let v=0;v<c.length;v+=C){const R=c.slice(v,v+C);if(R.length>0){E.push(R);const j=$.getWeekNumber(R[0],i,l);a.push(j)}}return{weeksToRender:E,weekNumbers:a}},[c,e,s,i,l]),h=t.useMemo(()=>!r&&!(o||n>1),[r,o,n]),g=t.useMemo(()=>o?{"--week-count":o}:void 0,[o]),m=t.useMemo(()=>[o&&"sf-custom-weeks",h&&"sf-hide-dates"].filter(Boolean).join(" "),[o,h]);return{weekNumbers:d,weeksToRender:f,contentTableStyle:g,additionalClass:m,hideOtherMonths:h}}function Aa(o){const{weekRenderDates:n,rowIndex:r}=o,{selectedDate:e,workDays:s,showWeekend:i,maxEventsPerRow:l=3}=Fe(),{locale:c}=$e(),{renderDates:f}=pt(),{getAllEventsForDate:d}=Fr(f,l),{handleMoreClick:h}=bo(d),g=t.useCallback(a=>{let C="sf-work-cells";return $.isWorkDay(a,s)&&(C+=" sf-work-days"),$.isToday(a)&&(C+=" sf-current-date"),$.isSameMonth(a,e)||(C+=" sf-other-month"),C},[s,e]),m=t.useCallback(a=>a.getDate()===1&&!Ae.isDevice?ut(a,{type:"dateTime",format:"MMM d",locale:c}):ut(a,{type:"dateTime",format:"d",locale:c}),[c]);return{workCells:t.useCallback(()=>(i?n:n.filter(C=>$.isWorkDay(C,s))).map((C,v)=>({date:C,className:g(C),dateTimestamp:C.getTime(),displayText:m(C),key:`date-${r}-${v}`})),[n,g,m,i,s,r])(),handleMoreClick:h}}const Oa=o=>{const{weekRenderDates:n,hideOtherMonths:r,rowIndex:e,onHeightCalculated:s}=o,{maxEventsPerRow:i=2,cellHeader:l,cell:c,rowAutoHeight:f,getAvailableViews:d}=Fe(),{workCells:h,handleMoreClick:g}=Aa(o),{handleCellClick:m,handleCellDoubleClick:E,handleKeyDown:a}=Qn(),{handleDateClick:C}=jr(),{getVisibleEvents:v,getAlldayBlockEvent:R,getHiddenEventCount:j,hasMoreIndicator:y,hasBlockIndicator:D,hasAllDayBlock:S,calculatedRowHeight:k}=Fr(n,i),z=M=>u.jsx(Ro,{date:M,count:j($.generateDateKey(M)),onMoreClick:g}),N=M=>{const T=$.generateDateKey(M),H=v(T);if(S(T)){const w=R(T);if(w&&(w.totalSegments&&w.totalSegments>1&&w.isFirstSegmentInRenderRange||!w.totalSegments||w.totalSegments<=1))return u.jsx(Yn,{...w,weekRenderDates:n,isBlockedEvent:!0},w.eventKey||w.event.guid)}return H.map(w=>{const{totalSegments:I,isFirstSegmentInRenderRange:Y,event:Z,eventKey:ue}=w;return!Z.isBlock&&(I&&I>1&&Y||!I||I<=1)?u.jsx(Yn,{...w,weekRenderDates:n},ue||w.event.guid):null})},b=()=>u.jsx("div",{className:`${p.ICONS} ${p.BLOCK_INDICATOR}`,children:u.jsx(mi,{})});return t.useLayoutEffect(()=>{s(e,k)},[k]),u.jsx("div",{className:p.WORK_CELLS_ROW,style:{height:f||i>=3?k:""},children:h.map(M=>{if(r&&M.className.includes("sf-other-month"))return u.jsx("div",{className:M.className},M.key);const T=$.generateDateKey(M.date),H=ft.isDayViewAvailable(d);return u.jsxs("div",{className:M.className,"data-date":M.dateTimestamp,onClick:w=>m(w,M.date,!0),onDoubleClick:w=>E(w,M.date,!0),onKeyDown:w=>{a(w,M.date)},children:[u.jsxs("div",{className:p.DATE_HEADER_CONTAINER,children:[u.jsx("div",{className:p.DATE_HEADER,children:l?l({date:M.date}):u.jsx("span",{className:H?p.LINK:"",onClick:w=>C(w,M.date),children:M.displayText})}),D(T)&&b()]}),u.jsxs("div",{className:p.APPOINTMENT_WRAPPER,children:[N(M.date),!f&&y(T)&&z(M.date)]}),c&&c({date:M.date,type:"monthCell"})]},M.key)})})},La=()=>{const{showWeekNumber:o,numberOfWeeks:n,rowAutoHeight:r}=Fe(),{weekNumbers:e,weeksToRender:s,contentTableStyle:i,additionalClass:l,hideOtherMonths:c}=xa(),f=t.useRef([]),[d,h]=t.useState([]),g=t.useCallback((E,a)=>{f.current[Number(E)]!==a&&(f.current[Number(E)]=a,h([...f.current]))},[]);t.useEffect(()=>{const E=s.length,a=f.current.length;if(E!==a){const C=f.current[0],v=new Array(E).fill(C).map((R,j)=>f.current[parseInt(j.toString(),10)]||R);f.current=v,h([...v])}},[s.length]);const m=t.useCallback(()=>e==null?void 0:e.map((E,a)=>u.jsx("div",{className:p.WEEK_NUMBER,title:`Week ${E}`,style:{height:r?d[Number(a)]:""},children:E},`week-${a}`)),[d,e]);return u.jsxs(u.Fragment,{children:[o&&u.jsx("div",{className:`sf-left-indent ${n?"sf-custom-weeks":""}`,style:n?{"--week-count":n}:void 0,children:u.jsx("div",{className:p.WEEK_NUMBER_WRAPPER,children:m()})}),u.jsxs("div",{className:`sf-content-table ${l}`,style:i,children:[u.jsx("div",{className:p.DAY_CLONE_CONTAINER}),s.map((E,a)=>u.jsx(Oa,{weekRenderDates:E,hideOtherMonths:c,rowIndex:a,onHeightCalculated:g},`week-${a}`))]})]})},Ia=()=>u.jsx("div",{className:`${p.VERTICAL_VIEW} ${p.MONTH_VIEW}`,children:u.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[u.jsx("div",{className:p.STICKY_HEADER,children:u.jsx(No,{})}),u.jsx("div",{className:p.CONTENT_SECTION,children:u.jsx("div",{className:p.WORK_CELLS_CONTAINER,children:u.jsx(La,{})})})]})});Ia.displayName="MonthView";export{Ra as D,Er as F,hi as L,Ia as M,ze as O,To as S,gr as T,wa as W,Na as a,ua as b,$t as c,hr as d,_r as e,Bt as f,oa as g,wt as h,Ni as i};
