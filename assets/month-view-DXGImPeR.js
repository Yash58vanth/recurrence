import{j as u,r as Xt}from"./index-DlC1yEB1.js";import{r as t}from"./index-D5jfS-9e.js";import{n as _t,a as Ae,o as xo,q as Qt,r as Be,s as xs,t as Xr,v as qr,w as Ao,x as An,y as gt,z as Gr,E as Oo,G as Lo,H as Nr,I as $,c as mt,S as Yt,u as $e,p as Ot,J as As,K as Sr,M as Os,N as at,L as Ls,Q as Bn,A as Zt,T as Zr,X as On,h as Qr,Y as Io,i as ko,Z as At,e as Jr,g as _o,_ as Po,B as Ze,V as qe,C as Tt,$ as Un,a0 as Is,a1 as Mo,f as ut,a2 as Ho,a3 as dn,a4 as jo,a5 as $o,a6 as st,a7 as Wn,a8 as ks,a9 as _s,aa as et,ab as Xe,ac as Ps,m as Vo,ad as tt,ae as Wo,af as Ge,ag as Fo,ah as hr,ai as Xn,aj as Bo,b as rr,ak as es,al as Uo,D as zo,k as Yo,j as ts,R as Ko,am as Ln,an as ns,ao as tn,ap as Xo,aq as qo,ar as Go}from"./recurrence-editor-DkfzDKSK.js";const xr={height:"auto",width:"auto",defaultSelectedDate:new Date,defaultView:"Week",eventSettings:{dataSource:[],fields:{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException"},spannedEventPlacement:"AllDayRow",enableIndicator:!1,allowAdding:!0,allowDeleting:!0,allowEditing:!0,ignoreWhitespace:!1},timeScale:{enable:!0,interval:60,slotCount:2},workHours:{highlight:!0,start:"09:00",end:"18:00"},startHour:"00:00",endHour:"24:00",showWeekend:!0,firstDayOfWeek:0,workDays:[1,2,3,4,5],showTimeIndicator:!0,showWeekNumber:!1,eventOverlap:!0,keyboardNavigation:!0,showQuickInfoPopup:!0,header:!0,rowAutoHeight:!1,readOnly:!1,eventDrag:!0,eventResize:!0,enableRecurrenceValidation:!0,weekRule:"FirstDay"},Ar=t.createContext(xr),We=()=>{const o=t.useContext(Ar);if(o===void 0)throw new Error("useSchedulerPropsContext must be used within a Scheduler");return o};Ar.displayName="SchedulerPropsContext";const Or=t.createContext(void 0),pt=()=>{const o=t.useContext(Or);if(o===void 0)throw new Error("useSchedulerRenderDatesContext must be used within a Scheduler");return o};Or.displayName="SchedulerRenderDatesContext";const Lr=t.createContext(void 0),Pt=()=>{const o=t.useContext(Lr);if(o===void 0)throw new Error("useSchedulerEventsContext must be used within a Scheduler");return o};Lr.displayName="SchedulerEventsContext";function rs(o){return o!=null&&typeof o=="object"&&!Array.isArray(o)&&o.constructor===Object}function Ms(o,n){const r={...o};for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const s=n[e],i=r[e];if(typeof s>"u")continue;rs(s)&&rs(i)?r[e]=Ms(i,s):r[e]=s}return r}function Hs(o,n){return Ms(o,n)}class ft{static getViewsInfo(n,r){const e=[],s=new Set;return t.Children.forEach(n,i=>{if(t.isValidElement(i)){const l=i.type,c=i.props||{};let f=null;switch(l.displayName){case"DayView":f="Day";break;case"WeekView":f="Week";break;case"WorkWeekView":f="WorkWeek";break;case"MonthView":f="Month";break}if(f){const d=c.name||c.displayName||f;s.has(d)||(s.add(d),e.push({viewType:f,name:d,displayName:c.displayName||r(f.toLowerCase()),interval:c.interval||1,component:i}))}}}),e}static findViewByNameOrType(n,r){const e=n.find(i=>i.name===r);if(e)return e;const s=r;return n.find(i=>i.viewType===s)||null}static getDefaultView(n){return n.length>0?n[0]:void 0}static isViewAvailable(n,r){const e=n==null?void 0:n();return Array.isArray(e)&&e.some(s=>s.viewType===r)}static isDayViewAvailable(n){return ft.isViewAvailable(n,"Day")}}const Ve=(()=>{function o(i){return i?"__eventList"in i?i.__eventList.events||[]:(i.__eventList={},i.__eventList.events=[]):null}function n(i,l,c,f,d){if(!i)return null;const h=o(i);let g=d?xo(c,d):c;f&&(g=g.bind(f));const m=l.split(" ");for(let E=0;E<m.length;E++){h.push({name:m[parseInt(E.toString(),10)],listener:c,debounce:g});const a=Ae.isIE?null:{passive:!1};i.addEventListener(m[parseInt(E.toString(),10)],g,a)}return g}function r(i,l,c){if(!i)return null;const f=o(i),d=l.split(" ");for(let h=0;h<d.length;h++){let g=-1,m=null;f&&f.length!==0&&f.some((E,a)=>E.name===d[parseInt(h.toString(),10)]&&E.listener===c?(g=a,m=E.debounce||null,!0):!1),g!==-1&&f.splice(g,1),m&&i.removeEventListener(d[parseInt(h.toString(),10)],m)}}function e(i){if(!i)return null;const l=o(i),c=_t([],void 0,l);for(let f=0;f<c.length;f++){const d=c[parseInt(f.toString(),10)];i.removeEventListener(d.name,d.debounce),l.shift()}}function s(i,l,c){if(!i)return null;const f=o(i);for(const d of f)d.name===l&&d.debounce(c)}return{add:n,clearEvents:e,remove:r,trigger:s}})(),Zo=()=>{let o=[];const n={};function r(d,h,g,m){if(Be(h))return;const E=g||{};f(d)?n[`${d}`]=[{handler:h,context:E,id:m}]:m&&!o.includes(m)?(o.push(m),n[`${d}`].push({handler:h,context:E,id:m})):n[`${d}`].some(a=>a.handler===h)||n[`${d}`].push({handler:h,context:E})}function e(d,h,g){if(f(d))return;const m=Qt(d,n);if(h)for(let E=0;E<m.length;E++){const a=m[parseInt(E.toString(),10)];if(g&&a.id===g){m.splice(E,1),o=o.filter(C=>C!==g);break}else if(h===a.handler){m.splice(E,1);break}}else delete n[`${d}`]}function s(d,h,g,m){if(f(d)){g&&g(h);return}h&&(h={...h,name:d});const E=Qt(d,n).slice(0);for(const a of E)try{a.handler(h)}catch(C){m&&m(C)}g&&g(h)}function i(d){try{JSON.parse(d)}catch{return!1}return!0}function l(){Object.keys(n).forEach(d=>{delete n[`${d}`]}),o=[]}function c(){const d=n.notifyExternalChange;if(d){for(let h=0;h<d.length;h++){const g=d[parseInt(h.toString(),10)],m=g.context;m&&m.detectFunction&&m.randomId&&m.isReactMock&&(e("notifyExternalChange",g.handler,m.randomId),h--)}n.notifyExternalChange.length||delete n.notifyExternalChange}}function f(d){return!n[`${d}`]||n[`${d}`].length===0}return{isJson:i,on:r,off:e,notify:s,destroy:l,ranArray:o,boundedEvents:n,offIntlEvents:c}},Qo=new RegExp("]");function Jo(o,n){const e={isDestroyed:!1,isProtectedOnChange:!0,modelObserver:Zo(),...o};return e.element=t.useRef(null),e.addEventListener=(s,i)=>{e.modelObserver.on(s,i)},e.removeEventListener=(s,i)=>{e.modelObserver.off(s,i)},e.trigger=(s,i,l,c)=>{if(e.isDestroyed!==!0){const f=e.isProtectedOnChange;e.isProtectedOnChange=!1;const d=e.modelObserver.notify(s,i,l,c);if(Qo.test(s)){const h=Qt(s,e);h&&h.call(e,i),l&&l.call(e,i)}return e.isProtectedOnChange=f,d}},e.destroy=()=>{e.modelObserver.destroy(),e.isDestroyed=!0},t.useLayoutEffect(()=>{e.isDestroyed=!1},[]),e}let In,kn,ss,os;function is(o,n,r,e,s){let i,l,c=0,f=0,d;if(typeof o==="string"?d=xs(o):d=o,d){const g=d.getBoundingClientRect();i=d.scrollWidth?d.scrollWidth:g.right-g.left,l=d.scrollHeight?o&&!Be(n)&&n.classList.contains("sf-treeview")?d.clientHeight:d.scrollHeight:g.bottom-g.top;const m=["Top","Left","Bottom","Right"],E=getComputedStyle(d);for(let a=0;a<m.length;a++){const C=m[parseInt(a.toString(),10)],v=E["border"+C+"Width"],R=E["padding"+C],j=C.toLowerCase();r[`${j}`]=isNaN(parseFloat(v))?0:parseFloat(v),e[`${j}`]=isNaN(parseFloat(R))?0:parseFloat(R)}o&&!Be(n)&&n.classList.contains("sf-treeview")?c=g.top+document.scrollingElement.scrollTop:c=g.top,f=g.left,s.left=f+r.left+e.left,s.top=d.offsetTop+r.top+e.top,s.right=f+i-(r.right+e.right),s.bottom=c+l-(r.bottom+e.bottom)}}function ls(o){const n=document.body,r=document.documentElement;return Math.max(n["scroll"+o],r["scroll"+o],n["offset"+o],r["offset"+o],r["client"+o])}function sr(o){for(kn=o.offsetTop,In=o.offsetLeft,ss=o.offsetWidth,os=o.offsetHeight;o.offsetParent;)o=o.offsetParent,kn+=o.offsetTop,In+=o.offsetLeft;return kn>=window.pageYOffset&&In>=window.pageXOffset&&kn+os<=window.pageYOffset+window.innerHeight&&In+ss<=window.pageXOffset+window.innerWidth}function fn(o){return o.type.indexOf("touch")>-1?o.changedTouches[0]:o}function or(o){if(Be(o))return{left:0,top:0};const n=o.getBoundingClientRect(),r=getComputedStyle(o);return{left:n.left+window.pageXOffset-parseInt(r.marginLeft,10),top:n.top+window.pageYOffset-parseInt(r.marginTop,10)}}function as(o){const n=o.clientX>0?o.clientX:0,r=o.clientY>0?o.clientY:0;return document.elementsFromPoint(n,r)}function cs(o,n){const r=n?[...o].reverse():o;for(const i of r){const c=window.getComputedStyle(i).overflowY;if((c==="auto"||c==="scroll")&&i.scrollHeight>i.clientHeight)return i}const e=document.scrollingElement;return window.getComputedStyle(e).overflowY==="visible"?(e.style.overflow="auto",e):null}const ei=t.createContext(void 0),ti=()=>{const o=t.useContext(ei);if(o)return o},ni={left:0,top:0,bottom:0,right:0},ir={isDragged:!1};function ri(o){return{left:0,top:0,...o}}function Jt(o,n){const r=ti(),e={cursorAt:ri({}),clone:!1,dragArea:null,isDragScroll:!1,isReplaceDragEle:!1,isPreventSelect:!0,distance:1,handle:"",abort:"",helper:null,scope:"default",dragTarget:"",dragDirection:null,queryPositionInfo:null,enableTailMode:!1,skipDistanceCheck:!1,preventDefault:!0,enableAutoScroll:!1,enableTapHold:!1,tapHoldThreshold:750,enableScrollHandler:!1,element:o,...n},s=t.useRef(e);let i,l,c,f,d,h,g,m=Jt.getDefaultPosition(),E=Jt.getDefaultPosition();const a=Jt.getDefaultPosition();let C,v=0,R=0,j=0,y=!1,D=null,x,k,z=!1,S=0,b,M,T,H,w=0,I=0,Y=0,Z=0;const ce={};function K(A){let ne;!Be(s.current.handle)&&s.current.handle!==""&&(ne=xs(s.current.handle,o.current));const U=s.current.enableTapHold&&Ae.isDevice&&Ae.isTouch?O:ue;A?Ve.remove(ne||o.current,Ae.isSafari()?"touchstart":Ae.touchStartEvent,U):Ve.add(ne||o.current,Ae.isSafari()?"touchstart":Ae.touchStartEvent,U)}function O(A){const ne=A.currentTarget;D=setTimeout(()=>{z=!0,V(),ue(A,ne)},s.current.tapHoldThreshold),Ve.add(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,V,this),Ve.add(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,V,this)}function L(A){Nr(A)?(Ve.add(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,q,this),Ve.add(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,ee,this),N(!1,o.current,A)):(K(),document.body.classList.remove("sf-prevent-select"))}function V(){clearTimeout(D),Ve.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,V),Ve.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,V)}function J(){w=0,I=0}function ue(A,ne){var G;if(o.current=Xr(o),k=A.target,se())return;if(se(!0),z=!1,i=A.currentTarget||ne,y=!1,s.current.abort){let ge=s.current.abort;typeof ge=="string"&&(ge=[ge]);for(let pe=0;pe<ge.length;pe++)if(!Be(gt(A.target,ge[`${pe}`]))){se()&&se(!0);return}}s.current.preventDefault&&!An(A.changedTouches)&&A.type!=="touchstart"&&A.preventDefault(),(G=o==null?void 0:o.current)==null||G.setAttribute("aria-grabbed","true");const U=fn(A);if(l={x:U.pageX,y:U.pageY},!s.current.clone){const ge=o.current.getBoundingClientRect();J(),c=U.pageX-(ge.left+w),f=U.pageY-(ge.top+I)}z?F(A):(Ve.add(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,F,this),Ve.add(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,e.intDestroy,this)),K(!0),A.type!=="touchstart"&&s.current.isPreventSelect&&document.body.classList.add("sf-prevent-select"),z=!1,Ve.trigger(document.documentElement,Ae.isSafari()?"touchstart":Ae.touchStartEvent,A)}function F(A){V(),document.scrollingElement&&(Y=document.scrollingElement.scrollLeft,Z=document.scrollingElement.scrollTop);const ne=!An(A.changedTouches);if(ne&&A.changedTouches.length!==1)return;const U=fn(A);let G;const ge=getComputedStyle(o.current);d={left:parseInt(ge.marginLeft,10),top:parseInt(ge.marginTop,10),right:parseInt(ge.marginRight,10),bottom:parseInt(ge.marginBottom,10)};let pe=o.current;if(s.current.clone&&s.current.dragTarget){const we=gt(A.target,s.current.dragTarget);Be(we)||(pe=we)}s.current.isReplaceDragEle&&(pe=fe(A.target,pe)),h=or(pe),g=ve(A,s.current.isDragScroll);const ye=l.x-U.pageX,Ie=l.y-U.pageY;if(Math.sqrt(ye*ye+Ie*Ie)>=s.current.distance||z){const we=de(A);if(!we)return;ne&&A.preventDefault();const _=M=we;if(H=or(_.offsetParent),s.current&&s.current.onDragStart){const Se=De(A),Re={event:A,element:pe,target:Se,bindEvents:null,dragElement:_};if(s.current.onDragStart(Re),Re.cancel){e.intDestroy();return}}s.current.dragArea?is(s.current.dragArea,M,E,a,m):(m={left:0,right:0,bottom:0,top:0},E={top:0,left:0}),G={left:g.left-H.left,top:g.top-H.top},s.current.clone&&!s.current.enableTailMode&&(v=g.left-h.left,S=g.top-h.top),J();const X=getComputedStyle(pe),re=parseFloat(X.marginTop);s.current.clone&&re!==0&&(G.top+=re),s.current.enableScrollHandler&&!s.current.clone&&(G.top-=I,G.left-=w);const he=xe({top:`${G.top-S}px`,left:`${G.left-v}px`});s.current.dragArea&&typeof s.current.dragArea!="string"&&s.current.dragArea.classList.contains("sf-kanban-content")&&s.current.dragArea.style.position==="relative"&&(G.top+=s.current.dragArea.scrollTop),x={top:G.top,left:G.left},Gr(_,Q({position:"absolute",left:he.left,top:he.top})),Ve.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,F),Ve.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,e.intDestroy),L(_)}}function q(A){var Ye;if(!An(A.changedTouches)&&A.changedTouches.length!==1)return;s.current.clone&&A.changedTouches&&Ae.isDevice&&Ae.isTouch&&A.preventDefault();let ne,U;g=ve(A,s.current.isDragScroll);const G=ls("Height");G<g.top&&(g.top=G);const ge=ls("Width");if(ge<g.left&&(g.left=ge),s.current&&s.current.onDrag){const He=De(A);s.current.onDrag({event:A,element:o.current,target:He})}const pe=B(A);if(pe.target&&pe.instance){let He=!0;T&&(T.instance!==pe.instance?oe(A,pe):He=!1),He&&(pe.instance.dragData[s.current.scope]=ce[s.current.scope],pe.instance.intOver(A,pe.target),T=pe)}else T&&oe(A,pe);const ye=(Ye=ce==null?void 0:ce[s.current.scope])==null?void 0:Ye.helper;if(!ye)return;H=or(ye.offsetParent);const Ie=H.left,me=H.top,we=fn(A),_=we.pageX,X=we.pageY,re=g.left-v,he=g.top-S,Se=getComputedStyle(ye);if(s.current.dragArea){if(s.current.enableAutoScroll&&is(s.current.dragArea,ye,E,a,m),C!==_||s.current.skipDistanceCheck){const He=ye.offsetWidth+(parseFloat(Se.marginLeft)+parseFloat(Se.marginRight));m.left>re&&re>0?ne=m.left:m.right+window.pageXOffset<re+He&&re>0?ne=re-(re-m.right)+window.pageXOffset-He:ne=re<0?m.left:re}if(b!==X||s.current.skipDistanceCheck){const He=ye.offsetHeight+(parseFloat(Se.marginTop)+parseFloat(Se.marginBottom));m.top>he&&he>0?U=m.top:m.bottom+window.pageYOffset<he+He&&he>0?U=he-(he-m.bottom)+window.pageYOffset-He:U=he<0?m.top:he}}else ne=re,U=he;const Re=me+E.top,Le=Ie+E.left;y&&(Be(U)&&(U=j),Be(ne)&&(ne=R));let W,Ce;if(ye.classList.contains("sf-treeview"))s.current.dragArea?(m.top=s.current.clone?m.top:0,W=U-Re<0?m.top:U-E.top,Ce=ne-Le<0?m.left:ne-E.left):(W=U-E.top,Ce=ne-E.left);else if(s.current.dragArea){const He=ye.classList.contains("sf-dialog");m.top=s.current.clone?m.top:0,W=U-Re<0?m.top:U-Re,Ce=ne-Le<0?He?ne-(Le-E.left):x.left:ne-Le}else W=U-Re,Ce=ne-Le;const Ee=o.current?parseFloat(getComputedStyle(o.current).marginTop):0;if(Ee>0&&(s.current.clone&&(W+=Ee,he<0&&(Ee+he>=0?W=Ee+he:W-=Ee),s.current.dragArea&&(W=m.bottom<W?m.bottom:W)),U-Re<0))if(he+Ee+(ye.offsetHeight-Re)>=0){const He=m.top+he-Re;He+Ee+Re<0?W-=Ee+Re:W=He}else W-=Ee+Re;if(s.current.dragArea&&ye.classList.contains("sf-treeview")){const He=ye.offsetHeight+(parseFloat(Se.marginTop)+parseFloat(Se.marginBottom));W=W+He>m.bottom?m.bottom-He:W}s.current.enableScrollHandler&&!s.current.clone&&(W-=I,Ce-=w),s.current.dragArea&&typeof s.current.dragArea!="string"&&s.current.dragArea.classList.contains("sf-kanban-content")&&s.current.dragArea.style.position==="relative"&&(W+=s.current.dragArea.scrollTop);const Oe=xe({top:W+"px",left:Ce+"px"});Gr(ye,Q(Oe)),!sr(ye)&&s.current.enableAutoScroll&&!ye.classList.contains("sf-treeview")&&ye.scrollIntoView();let Pe=document.querySelectorAll(":hover");if(s.current.enableAutoScroll&&ye.classList.contains("sf-treeview")){Pe.length===0&&(Pe=as(A));let He=cs(Pe,!1);sr(ye)?le(He,W):sr(ye)||(Pe=[].slice.call(document.querySelectorAll(":hover")),Pe.length===0&&(Pe=as(A)),He=cs(Pe,!0),le(He,W))}y=!0,R=ne,j=U,g.left=ne,g.top=U,C=_,b=X}function ee(A){var G;if(y=!1,Y=0,Z=0,!An(A.changedTouches)&&A.changedTouches.length!==1)return;if(["touchend","pointerup","mouseup"].indexOf(A.type)!==-1){if(s.current&&s.current.onDragStop){const ge=De(A);s.current.onDragStop({event:A,element:o.current,target:ge,helper:M})}e.intDestroy()}else(G=o==null?void 0:o.current)==null||G.setAttribute("aria-grabbed","false");const U=B(A);U.target&&U.instance&&(U.instance.dragStopCalled=!0,U.instance.dragData[s.current.scope]=ce[s.current.scope],U.instance.intDrop(A,U.target)),N(!0),document.body.classList.remove("sf-prevent-select")}function te(){K(),Ae.isIE&&qr([e.element.current],"sf-block-touch"),ce[s.current.scope]={}}e.intDestroy=()=>{var A;y=!1,K(),document.body.classList.remove("sf-prevent-select"),(A=o==null?void 0:o.current)==null||A.setAttribute("aria-grabbed","false"),Ve.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,F),Ve.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,ee),Ve.remove(document,Ae.isSafari()?"touchend":Ae.touchEndEvent,e.intDestroy),Ve.remove(document,Ae.isSafari()?"touchmove":Ae.touchMoveEvent,q),se()&&se(!0)},e.destroy=()=>{K(!0)};function oe(A,ne){T.instance.intOut(A,ne.target),T.instance.dragData[s.current.scope]=null,T=null}function De(A){const ne=fn(A);let U;const G=M.style.pointerEvents||"",ge=A.type.indexOf("pointer")!==-1&&Ae.info.name==="safari"&&parseInt(Ae.info.version,10)>12;return Lo(A.target,M)||A.type.indexOf("touch")!==-1||ge?(M.style.pointerEvents="none",U=document.elementFromPoint(ne.clientX,ne.clientY),M.style.pointerEvents=G):U=A.target,U}function ve(A,ne){const U=A.srcElement!==void 0?A.srcElement:A.target,G=fn(A);let ge,pe;const ye=Be(U.offsetParent);if(ne){if(ge=s.current.clone?G.pageX:G.pageX+(ye?0:U.offsetParent.scrollLeft)-c,pe=s.current.clone?G.pageY:G.pageY+(ye?0:U.offsetParent.scrollTop)-f,!s.current.clone){const Ie=U.offsetParent;if(!ye&&Ie){const me=Ie.scrollLeft,we=Ie.scrollTop,_=me-Y,X=we-Z;ge=ge-_,pe=pe-X}}}else if(ge=s.current.clone?G.pageX:G.pageX+window.pageXOffset-c,pe=s.current.clone?G.pageY:G.pageY+window.pageYOffset-f,document.scrollingElement&&!s.current.clone){const Ie=document.scrollingElement,me=Ie.scrollLeft,we=Ie.scrollTop,_=me-Y,X=we-Z;ge=ge-_,pe=pe-X}return{left:ge-(d.left+s.current.cursorAt.left),top:pe-(d.top+s.current.cursorAt.top)}}function de(A){let ne;return s.current.clone?s.current&&s.current.helper?ne=s.current.helper({sender:A,element:i}):(ne=Oo("div",{className:"sf-drag-helper sf-block-touch",innerHTML:"Draggable"}),document.body.appendChild(ne)):ne=e.element.current,ne}function N(A,ne,U){ce[s.current.scope]=A?null:{draggable:ne,helper:U,draggedElement:e.element.current}}function B(A){const ne=De(A);let U=ie(ne);if(!U&&ne&&!Be(ne.parentNode)){const G=gt(ne.parentNode,".sf-droppable")||ne.parentElement;G&&(U=ie(G))}return{target:ne,instance:U}}function ie(A){let ne,U;if(r){const{getAllDroppables:G}=r;ne=G();for(const ge in ne)if(Object.prototype.hasOwnProperty.call(ne,ge)){const pe=ne[`${ge}`];if(pe.element&&pe.element.current===A){U=pe;break}}}else return;return U}function se(A){return A&&(ir.isDragged=!ir.isDragged),ir.isDragged}function xe(A){return s.current&&s.current.queryPositionInfo?s.current.queryPositionInfo(A):A}function Q(A){const ne={...A};return s.current.dragDirection&&(s.current.dragDirection==="x"?delete ne.top:s.current.dragDirection==="y"&&delete ne.left),ne}function le(A,ne){if(A===document.scrollingElement)A.clientHeight+A.scrollTop-M.clientHeight<ne&&A.getBoundingClientRect().height+H.top>ne?A.scrollTop+=M.clientHeight:A.scrollTop>ne-M.clientHeight&&(A.scrollTop-=M.clientHeight);else if(A){const U=document.scrollingElement.scrollTop,G=M.clientHeight;A.clientHeight+A.getBoundingClientRect().top-G+U<ne?A.scrollTop+=M.clientHeight:A.getBoundingClientRect().top>ne-G-U&&(A.scrollTop-=M.clientHeight)}}function fe(A,ne){let U;return!Be(k)&&k!==A?U=k:U=Be(ne)?A:ne,U}return t.useLayoutEffect(()=>{if(e.element.current=Xr(e.element),!!e.element.current)return s.current={...e,...n},qr([e.element.current],["sf-lib","sf-draggable"]),te(),()=>{e.element.current&&Ao([e.element.current],["sf-lib","sf-draggable"]),e.destroy()}}),e}Jt.getDefaultPosition=()=>_t({},ni);const si=/(Up|Down)/;function qt(o,n){const r=Jo(),e={...n};let s=!1,i={clientX:0,clientY:0},l=null,c={clientX:0,clientY:0},f="",d=!1,h=!1,g={originalEvent:null},m=0,E=0,a="",C=0,v=!0,R=null,j=null,y=0;t.useLayoutEffect(()=>(D(),()=>{k(),r.destroy()}),[]);function D(){o.current&&(x(),Ae.isIE&&o.current.classList.add("sf-block-touch"))}function x(){Ve.add(o.current,Ae.touchStartEvent,S,void 0)}function k(){Ve.remove(o.current,Ae.touchStartEvent,S)}function z(L){const V=getComputedStyle(L),J=V.overflow+V.overflowX+V.overflowY;return/(auto|scroll)/.test(J)}function S(L){if(v===!0){const V=O(L);L.changedTouches!==void 0&&(v=!1),s=!1,a="",i=c={clientX:V.clientX,clientY:V.clientY},l=V,d=h=!1,C=Date.now(),j=setTimeout(()=>{T(L)},e.tapHoldThreshold?e.tapHoldThreshold:750),Ve.add(o.current,Ae.touchMoveEvent,b,void 0),Ve.add(o.current,Ae.touchEndEvent,H,void 0),Ve.add(o.current,Ae.touchCancelEvent,M,void 0)}}function b(L){const V=O(L);s=!(V.clientX===i.clientX&&V.clientY===i.clientY);let J={};if(s){clearTimeout(j),Z(L);const ue={startEvents:l,originalEvent:L,startX:i.clientX,startY:i.clientY,distanceX:m,distanceY:E,scrollDirection:f,velocity:ce(V)};J=_t(J,{},ue),r.trigger("scroll",J,e.scroll),c={clientX:V.clientX,clientY:V.clientY}}}function M(L){clearTimeout(j),clearTimeout(R),y=0,w(L),Ve.remove(o.current,Ae.touchCancelEvent,M)}function T(L){y=0,v=!0,Ve.remove(o.current,Ae.touchMoveEvent,b),Ve.remove(o.current,Ae.touchEndEvent,H);const V={originalEvent:L};r.trigger("tapHold",V,e.tapHold),Ve.remove(o.current,Ae.touchCancelEvent,M)}function H(L){w(L),s||typeof e.tap=="function"&&(r.trigger("tap",{originalEvent:L,tapCount:++y},e.tap),R=setTimeout(()=>{y=0},e.tapThreshold?e.tapThreshold:350)),I()}function w(L){clearTimeout(j),clearTimeout(R);const V=O(L);let J=V.clientX-i.clientX,ue=V.clientY-i.clientY;J=Math.floor(J<0?-1*J:J),ue=Math.floor(ue<0?-1*ue:ue),s=J>1||ue>1,/Firefox/.test(Ae.userAgent)&&V.clientX===0&&V.clientY===0&&L.type==="mouseup"&&(s=!1),Y(L);const q={originalEvent:L,startEvents:l,startX:i.clientX,startY:i.clientY,distanceX:m,distanceY:E,swipeDirection:a,velocity:ce(V)};if(s){const ee=e.swipeSettings?e.swipeSettings.swipeThresholdDistance:50,te=_t(void 0,g,q);let oe=!1;const De=z(o.current),ve=si.test(a);ee&&(ee<m&&!ve||ee<E&&ve)&&(De?oe=K(o.current,ve):oe=!0),oe&&r.trigger("swipe",te,e.swipe)}I()}function I(){setTimeout(()=>{v=!0},typeof e.tap!="function"?0:20),Ve.remove(o.current,Ae.touchMoveEvent,b),Ve.remove(o.current,Ae.touchEndEvent,H),Ve.remove(o.current,Ae.touchCancelEvent,M)}function Y(L){const V=O(L);g={originalEvent:L},m=Math.abs(Math.abs(V.clientX)-Math.abs(i.clientX)),E=Math.abs(Math.abs(V.clientY)-Math.abs(i.clientY)),a=m>E?V.clientX>i.clientX?"Right":"Left":V.clientY<i.clientY?"Up":"Down"}function Z(L){const V=O(L);g={originalEvent:L},m=Math.abs(Math.abs(V.clientX)-Math.abs(c.clientX)),E=Math.abs(Math.abs(V.clientY)-Math.abs(c.clientY)),(m>E||d)&&!h?(f=V.clientX>c.clientX?"Right":"Left",d=!0):(f=V.clientY<c.clientY?"Up":"Down",h=!0)}function ce(L){const V=L.clientX,J=L.clientY,ue=Date.now(),F=V-i.clientX,q=J-i.clientY,ee=ue-C;return Math.sqrt(F*F+q*q)/ee}function K(L,V){const J=["scroll","offset"],ue=V?["Height","Top"]:["Width","Left"];return L[J[0]+ue[0]]<=L[J[1]+ue[0]]?!0:L[J[0]+ue[1]]===0||L[J[1]+ue[0]]+L[J[0]+ue[1]]>=L[J[0]+ue[0]]}function O(L){return L.changedTouches&&L.changedTouches.length!==0?L.changedTouches[0]:L}return e}class lr{static addWorkDays(n,r,e,s){if(r<=0)return new Date(n);let i=new Date(n),l=0;for(;l<r;){const c=$.addDays(i,e);$.isWorkDay(c,s)&&(l+=1),i=c}return i}static navigate(n,r){const{currentDate:e,viewType:s,interval:i,showWeekend:l,workDays:c}=r;switch(s){case"Day":return l===!1?this.addWorkDays(e,i,n,c):$.addDays(e,n*i);case"Week":case"WorkWeek":return $.addDays(e,n*7*i);case"Month":return $.addMonths(e,n*i);default:return $.addDays(e,n)}}static navigateToPrevious(n){return this.navigate(-1,n)}static navigateToNext(n){return this.navigate(1,n)}static navigateToToday(){return new Date}}const oi=u.jsx("path",{d:"M11.5 10.0858L5.50003 4.08582L4.08582 5.50003L11.5 12.9142L18.9142 5.50003L17.5 4.08582L11.5 10.0858ZM11.5 17.0858L5.50003 11.0858L4.08582 12.5L11.5 19.9142L18.9142 12.5L17.5 11.0858L11.5 17.0858Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),js=mt(oi),ii=u.jsx("path",{d:"M5 7.08578L12 14.0858L19 7.08578L20.4142 8.5L12 16.9142L3.58578 8.5L5 7.08578Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),qn=mt(ii),li=u.jsx("path",{d:"M6.41418 12L12.4142 6L11 4.58578L3.58575 12L11 19.4142L12.4142 18L6.41418 12ZM13.4142 12L19.4142 6L18 4.58578L10.5858 12L18 19.4142L19.4142 18L13.4142 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ir=mt(li),ai=u.jsx("path",{d:"M10.5858 12L4.58582 18L6.00003 19.4142L13.4142 12L6.00003 4.58575L4.58582 5.99997L10.5858 12ZM17.5858 12L11.5858 18L13 19.4142L20.4142 12L13 4.58575L11.5858 5.99997L17.5858 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),kr=mt(ai),ci=u.jsx("path",{d:"M11.5 6.91418L17.5 12.9142L18.9142 11.5L11.5 4.08575L4.08575 11.5L5.49997 12.9142L11.5 6.91418ZM11.5 13.9142L17.5 19.9142L18.9142 18.5L11.5 11.0858L4.08575 18.5L5.49997 19.9142L11.5 13.9142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),$s=mt(ci),ui=u.jsx("path",{d:"M6.00003 16.4142L12 10.4142L18 16.4142L19.4142 15L12 7.58578L4.58582 15L6.00003 16.4142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Vs=mt(ui),di=u.jsx("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13 11.382V5H11V12.618L16.4472 15.3416L17.3416 13.5528L13 11.382Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),fi=mt(di),mi=u.jsx("path",{d:"M6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM4.9681 6.38231C3.73647 7.92199 3 9.87499 3 12C3 16.9706 7.02944 21 12 21C14.125 21 16.078 20.2635 17.6177 19.0319L4.9681 6.38231ZM12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),pi=mt(mi),hi=u.jsx("path",{d:"M17 9C17 9.59519 16.7516 10.6096 16.1971 11.9583C15.6652 13.2521 14.932 14.6644 14.1531 15.9825C13.4 17.257 12.6299 18.4 12 19.2216C11.3701 18.4 10.5999 17.257 9.84685 15.9825C9.06796 14.6644 8.33481 13.2521 7.80291 11.9583C7.24843 10.6096 7 9.59519 7 9C7 6.23858 9.23858 4 12 4C14.7614 4 17 6.23858 17 9ZM19 9C19 13 13 22 12 22C11 22 5 13 5 9C5 5.13401 8.13401 2 12 2C15.866 2 19 5.13401 19 9ZM12 11.5C13.3807 11.5 14.5 10.3807 14.5 9C14.5 7.61929 13.3807 6.5 12 6.5C10.6193 6.5 9.5 7.61929 9.5 9C9.5 10.3807 10.6193 11.5 12 11.5Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ei=mt(hi),gi=u.jsx("path",{d:"M3 3C3 1.89543 3.89543 1 5 1H13.5858C14.1162 1 14.6249 1.21071 15 1.58579L20.4142 7C20.7893 7.37507 21 7.88378 21 8.41421V21C21 22.1046 20.1046 23 19 23H5C3.89543 23 3 22.1046 3 21V3ZM5 3L13 3V9H19V21H5V3ZM11 6H7V8H11V6ZM7 11H11V13H7V11ZM17 13V11H13V13H17ZM7 16H11V18H7V16ZM17 18V16H13V18H17Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ti=mt(gi),Ci=u.jsx("path",{d:"M20 13V17.6862L18 15.1528V13V12H20V13ZM17.0417 20L18.7151 22.1196L20.2849 20.8803L5.28485 1.88034L3.71509 3.11963L4.75394 4.43551C4.29445 4.80196 4 5.36659 4 6V11V12H6V11V6.01385L15.4627 18H6V15L1 19L6 23V20H17.0417ZM18 6H10.7741L9.19513 4H18V1L23 5L18 9V6Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Di=mt(Ci),vi=u.jsx("path",{d:"M18 9L23 5L18 1V4H6C4.89543 4 4 4.89543 4 6V12H6V6H18V9ZM18 18H6V15L1 19L6 23V20H18C19.1046 20 20 19.1046 20 18V12H18V18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),yi=mt(vi),bi=u.jsx("path",{d:"M8 1V3H16V1H18V3H20C21.1046 3 22 3.89543 22 5V8V9V10V11.7546C21.3984 11.2724 20.7257 10.8753 20 10.5815V10H4V21H9.58152C9.87526 21.7257 10.2724 22.3984 10.7546 23H4C2.89543 23 2 22.1046 2 21V10V9V8V5C2 3.89543 2.89543 3 4 3H6V1H8ZM4 8H20V5H18H16H8H6H4V8ZM13 18C13 15.7909 14.7909 14 17 14C19.2091 14 21 15.7909 21 18C21 20.2091 19.2091 22 17 22C14.7909 22 13 20.2091 13 18ZM17 12C13.6863 12 11 14.6863 11 18C11 21.3137 13.6863 24 17 24C20.3137 24 23 21.3137 23 18C23 14.6863 20.3137 12 17 12ZM18 15V17H20V19H16V15H18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),us=mt(bi);var ds;(function(o){o.Success="Success",o.Warning="Warning",o.Error="Error"})(ds||(ds={}));const Er=t.forwardRef((o,n)=>{const{disabled:r=!1,onChange:e,onBlur:s,onFocus:i,clearButton:l=!1,labelMode:c="Never",className:f="",id:d,readOnly:h=!1,value:g,defaultValue:m,width:E,placeholder:a="",variant:C,size:v=Yt.Medium,color:R,prefix:j,suffix:y,...D}=o,k=t.useRef(d||`default_${t.useId()}`).current,z=g!==void 0,[S,b]=t.useState(z?g:m||""),[M,T]=t.useState(!1),H=t.useRef(null),{locale:w,dir:I}=$e(),Y={clearButton:l,labelMode:c,disabled:r,readOnly:h,variant:C,size:v,color:R,value:g},Z=()=>ce(at.INPUTGROUP,at.WRAPPER,c!=="Never"?at.FLOATINPUT:"",f,I==="rtl"?at.RTL:"",r?at.DISABLE:"",M?at.TEXTBOX_FOCUS:"",S!==""?at.VALIDINPUT:"",C&&C.toLowerCase()!=="standard"?C.toLowerCase()==="outlined"?"sf-outline":`sf-${C.toLowerCase()}`:"",v&&v.toLowerCase()!=="small"?`sf-${v.toLowerCase()}`:"",R?`sf-${R.toLowerCase()}`:"",j?"sf-has-prefix":"","sf-control"),ce=(...q)=>q.filter(Boolean).join(" "),K=Z();t.useEffect(()=>{Ot("textbox")},[]),t.useEffect(()=>{z&&b(g||"")},[g,z]),t.useImperativeHandle(n,()=>({...Y,element:H.current}));const O=t.useCallback((q,ee)=>{z||b(q),e&&e({event:ee,value:q})},[e,z]),L=t.useCallback(q=>{const ee=q.target.value;O(ee,q)},[O]),V=t.useCallback(q=>{T(!0),i&&i(q)},[i]),J=t.useCallback(()=>{z||(b(""),H.current&&(H.current.value="")),e&&e({value:"",event:void 0})},[z,e]),ue=t.useCallback(q=>{T(!1),s&&s(q)},[s]),F=z?g:S;return u.jsxs("div",{className:K,style:{width:E||"100%"},children:[j&&u.jsx("span",{className:"sf-input-icon sf-no-hover",children:j}),u.jsx(As,{id:k,floatLabelType:c,ref:H,...D,readOnly:h,value:z?F:void 0,defaultValue:z?void 0:S||"",disabled:r,placeholder:c==="Never"?a:void 0,className:"sf-textbox sf-lib sf-ellipsis",onChange:L,"aria-label":c==="Never"?"textbox":void 0,onFocus:V,onBlur:ue}),Sr(c||"Never",M||F!=="",F,a,k),l&&Os(M?F:"",J,l,"textbox",w),y&&u.jsx("span",{className:"sf-input-icon sf-no-hover",children:y})]})}),Ri="sf-multi-line-input",wi="sf-auto-width";var It;(function(o){o.None="None",o.Both="Both",o.Horizontal="Horizontal",o.Vertical="Vertical"})(It||(It={}));const Ni={[It.None]:"sf-resize-none",[It.Both]:"sf-resize-xy",[It.Horizontal]:"sf-resize-x",[It.Vertical]:"sf-resize-y"},Si=t.forwardRef((o,n)=>{const{readOnly:r=!1,value:e,defaultValue:s,labelMode:i="Never",placeholder:l="",disabled:c=!1,width:f,resizeMode:d=It.Both,maxLength:h,cols:g=null,rows:m=null,clearButton:E=!1,autoResize:a=!1,className:C="",size:v=Yt.Medium,variant:R,onChange:j,onBlur:y,onFocus:D,...x}=o,k=e!==void 0,[z,S]=t.useState(s||""),b=k?e:z,M=`textArea_${t.useId()}`,[T,H]=t.useState(!1),w=t.useMemo(()=>x.id||M,[x.id]),I=t.useRef(null),Y=t.useRef(null),Z=t.useRef(null),ce=t.useRef(null),{locale:K,dir:O}=$e(),L={clearButton:E,labelMode:i,disabled:c,readOnly:r,resizeMode:d};t.useEffect(()=>{Ot("textarea")},[]),t.useEffect(()=>{k&&S(e||"")},[k,e]);const V=()=>J(at.INPUTGROUP,at.WRAPPER,i!=="Never"?at.FLOATINPUT:"",Ri,C,O==="rtl"?at.RTL:"",c?at.DISABLE:"",T?at.TEXTBOX_FOCUS:"",b!==""?at.VALIDINPUT:"",R&&R.toLowerCase()!=="standard"?R.toLowerCase()==="outlined"?"sf-outline":`sf-${R.toLowerCase()}`:"",wi,v&&v.toLowerCase()!=="small"?`sf-${v.toLowerCase()}`:"","sf-control"),J=(...N)=>N.filter(Boolean).join(" "),ue=V();t.useImperativeHandle(n,()=>({...L,element:I.current}));const F=t.useCallback(N=>{N&&(N.style.height="auto",N.style.height=`${N.scrollHeight}px`)},[]),q=t.useCallback(()=>{!a||!I.current||(Y.current!==null&&(cancelAnimationFrame(Y.current),Y.current=null),Y.current=requestAnimationFrame(()=>{F(I.current)}))},[a,F]),ee=N=>{const B=Array.isArray(N.contentBoxSize)?N.contentBoxSize[0]:N.contentBoxSize;if(B&&typeof B.inlineSize=="number")return B.inlineSize;const ie=N.contentRect.width;return typeof ie=="number"?ie:null};t.useEffect(()=>()=>{Y.current!==null&&(cancelAnimationFrame(Y.current),Y.current=null)},[]),t.useEffect(()=>{if(!a||!I.current)return;let N=!1;const B=()=>{N||(N=!0,requestAnimationFrame(()=>{N=!1,I.current&&q()}))};if("ResizeObserver"in window){const xe=le=>{const fe=le[0];if(!fe)return;const A=ee(fe);A!==null&&ce.current===A||(ce.current=A,B())},Q=new ResizeObserver(xe);return Q.observe(I.current),Z.current=Q,()=>{Q.disconnect(),Z.current=null,ce.current=null}}const ie=I.current.ownerDocument?I.current.ownerDocument.defaultView:null;if(!ie)return;const se=()=>{B()};return ie.addEventListener("resize",se),()=>{ie.removeEventListener("resize",se)}},[a,q]),t.useLayoutEffect(()=>{!a||!I.current||q()},[a,b,f,m,g]);const te=t.useCallback(N=>{const B=N.target.value;k||S(B),j&&j({event:N,value:B}),a&&q()},[k,j,z,e,a,q]),oe=t.useCallback(N=>{H(!0),D&&D(N)},[D]),De=t.useCallback(N=>{H(!1),y&&y(N)},[y]),ve=t.useCallback(()=>{k||(S(""),I.current&&(I.current.value="")),j&&j({value:"",event:void 0}),a&&q()},[j,k,q]),de=N=>Ni[`${N}`];return u.jsxs("div",{className:ue,children:[u.jsx("textarea",{ref:I,id:w,value:k?e:void 0,defaultValue:k?void 0:s,onChange:te,onFocus:oe,onBlur:De,readOnly:r,placeholder:i==="Never"?l:void 0,disabled:c,maxLength:h,cols:g??void 0,rows:m??void 0,...x,style:{width:f?typeof f=="number"?`${f}px`:f:void 0,resize:d==="None"||a?"none":void 0,overflowY:a?"hidden":void 0},className:`sf-textarea sf-lib sf-input ${de(d)}`,"aria-labelledby":`label_${w}`}),Sr(i,T||b!=="",b,l,w),E&&Os(b&&T?b.toString():"",ve,E,"textarea",K)]})}),Gt={EMAIL:/^(?!.*\.\.)[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,URL:/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/,DATE_ISO:/^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,DIGITS:/^[0-9]*$/,PHONE:/^[+]?[0-9]{9,13}$/,CREDIT_CARD:/^\d{13,16}$/},Ws=t.createContext(null),xi=Ws.Provider,gr=t.forwardRef((o,n)=>{const{rules:r,onSubmit:e,onReset:s,children:i,onFormStateChange:l,initialValues:c={},validateOnChange:f=!1,className:d="",...h}=o,g=t.useRef(null),{locale:m,dir:E}=$e(),a=t.useRef({values:{...c},errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C=t.useCallback(()=>{l&&(M.current=ee(),l(M.current))},[l]),v=t.useCallback((N,B)=>{a.current={...a.current,values:{...a.current.values,[N]:B},modified:{...a.current.modified,[N]:!0}}},[]),R=t.useCallback(N=>{a.current={...a.current,touched:{...a.current.touched,[N]:!0}}},[]),j=t.useCallback(N=>{a.current={...a.current,visited:{...a.current.visited,[N]:!0}}},[]),y=t.useCallback((N,B)=>{const ie={...a.current.errors};B?ie[N]=B:delete ie[N],a.current={...a.current,errors:ie}},[]),D=t.useCallback(N=>{a.current={...a.current,submitted:N}},[]),x=t.useCallback(N=>{a.current={values:N,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}},C()},[C]),k=t.useCallback(()=>{const N={};Object.keys(a.current.values).forEach(B=>{N[B]=!0}),a.current={...a.current,touched:N}},[]),z=t.useCallback(()=>{const N={};Object.keys(a.current.values).forEach(B=>{N[B]=!0}),a.current={...a.current,visited:N}},[]),S=t.useCallback(N=>{const B={...a.current.errors};Object.entries(N).forEach(([ie,se])=>{se?B[ie]=se:delete B[ie]}),a.current={...a.current,errors:B},C()},[C]),b=t.useRef(r),M=t.useRef(null),T=t.useRef(null),H={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date (ISO).",creditCard:"Please enter valid card number.",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",equalTo:"Please enter the same value again."},w=t.useRef({}),I=N=>{w.current[N]=!0};t.useEffect(()=>(T.current=Ls("formValidator",H,m),()=>{T.current=null}),[m]),t.useEffect(()=>(C(),Y(),Ot("formValidator"),()=>{T.current=null,b.current={},w.current={},g.current&&(g.current=null),M.current=null}),[]),t.useEffect(()=>{b.current=r},[r]);const Y=()=>{if(Object.keys(c).length>0){const N={};for(const B in c)if(Object.prototype.hasOwnProperty.call(c,B)&&Object.prototype.hasOwnProperty.call(b.current,B)){const ie=K(B,c[B]);ie?N[B]=ie:N[B]=null}Object.keys(N).length>0&&S(N)}},Z=(N,B)=>{var se;let ie=(se=T.current)==null?void 0:se.getConstant(N);return Array.isArray(B)?B.forEach((xe,Q)=>{const le=`{${Q}}`;ie.includes(le)&&(ie=ie.replace(le,String(xe)))}):ie=ie.replace("{0}",String(B)),ie},ce=N=>{if(!Gt.CREDIT_CARD.test(N))return!1;const B=N.replace(/[\s-]/g,"");let ie=0,se=!1;for(let xe=B.length-1;xe>=0;xe--){let Q=parseInt(B.charAt(xe),10);se&&(Q*=2,Q>9&&(Q-=9)),ie+=Q,se=!se}return ie%10===0},K=(N,B)=>{const ie=b.current[N];if(!ie||!w.current[N])return null;const se=B==null||B.toString().trim()==="",xe=ie.required!=null&&ie.required[0]!==!1;if(se&&!xe)return null;for(const Q in ie)if(Object.prototype.hasOwnProperty.call(ie,Q)){const le=ie[Q];if(!le)continue;let fe=!0,A=null,ne;if(Q==="customValidator"&&typeof le=="function"){const U=le(B);if(U)return U;continue}if(Array.isArray(le)&&(A=le[0],ne=le[1],Q==="required"&&A===!1)||Q!=="required"&&(B===""||B===null||B===void 0))continue;switch(Q){case"required":fe=!se;break;case"email":fe=Gt.EMAIL.test(B);break;case"url":fe=Gt.URL.test(B);break;case"date":fe=!isNaN(Date.parse(B));break;case"dateIso":fe=Gt.DATE_ISO.test(B);break;case"number":fe=!isNaN(Number(B))&&String(B).indexOf(" ")===-1;break;case"digits":fe=Gt.DIGITS.test(B);break;case"creditCard":fe=ce(B);break;case"minLength":fe=String(B).length>=Number(A);break;case"maxLength":fe=String(B).length<=Number(A);break;case"rangeLength":Array.isArray(A)&&(fe=String(B).length>=A[0]&&String(B).length<=A[1]);break;case"min":fe=Number(B)>=Number(A);break;case"max":fe=Number(B)<=Number(A);break;case"range":Array.isArray(A)&&(fe=Number(B)>=A[0]&&Number(B)<=A[1]);break;case"regex":A instanceof RegExp?fe=A.test(B):typeof A=="string"&&(fe=new RegExp(A).test(B));break;case"tel":fe=Gt.PHONE.test(B);break;case"equalTo":typeof A=="string"&&(fe=B===a.current.values[A]);break}if(!fe)return ne||Z(Q,A)}return null},O=()=>{const N={},B=Object.keys(b.current);for(const ie of B){const se=K(ie,a.current.values[ie]);a.current.values[ie]||v(ie,a.current.values[ie]),se&&(N[ie]=se)}return N},L=()=>{const N=O();for(const ie in N)Object.prototype.hasOwnProperty.call(N,ie)&&y(ie,N[ie]);const B=Object.keys(b.current);for(const ie of B)N[ie]||y(ie,null);return Object.keys(N).length===0&&(a.current={...a.current,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C(),Object.keys(N).length===0},V=N=>{N==null||N.preventDefault();const B=L();k(),z(),D(!0),C(),B&&(e==null||e(a.current.values))},J=(N,{value:B})=>{if(v(N,B),f){const ie=K(N,B);y(N,ie)}C()},ue=N=>{R(N);const B=K(N,a.current.values[N]);y(N,B),C()},F=N=>{x({...c}),s==null||s(N)},q=()=>{F()},ee=()=>{const N=a.current;return{values:N.values,errors:N.errors,submitted:N.submitted,touched:N.touched,visited:N.visited,modified:N.modified,valid:Object.keys(b.current).reduce((B,ie)=>(B[ie]=!N.errors[ie],B),{}),allowSubmit:Object.keys(N.errors).length===0,onChange:J,onBlur:ue,onFocus:ve,onFormReset:F,onSubmit:V,fieldNames:Object.keys(w.current).reduce((B,ie)=>(B[ie]=ie,B),{})}},te=N=>{const B=K(N,a.current.values[N]);return y(N,B),C(),!B},oe=t.useMemo(()=>({rules:r,initialValues:c,validateOnChange:f}),[r,c,f]);t.useImperativeHandle(n,()=>({...oe,validate:L,reset:q,validateField:te,element:g.current}),[oe]);const De=t.useMemo(()=>["sf-control sf-form-validator",E==="rtl"?"sf-rtl":"",d].filter(Boolean).join(" "),[E,d]),ve=N=>{j(N),C()},de={registerField:I};return u.jsx(xi,{value:de,children:u.jsx("form",{ref:g,className:De,onSubmit:V,onReset:F,noValidate:!0,...h,children:i})})});gr.displayName="Form";const Rt=o=>{const{name:n,children:r}=o;if(!n)return null;const e=t.useContext(Ws);return e?(e.registerField&&e.registerField(n),u.jsx(u.Fragment,{children:r})):null};Rt.displayName="FormField";const Ai=1500,Oi=500,fs=0,ms=8,Li=2,bt=2,Ii="sf-control sf-tooltip",ki="sf-bigger",_i="sf-tooltip-close",ar="sf-tooltip-wrap",Pi="sf-tooltip-content sf-content",ps="sf-tooltip-arrow",Mi="sf-tooltip-arrow-outer",Hi="sf-tooltip-arrow-inner",_n="bottom",cr="top",ur="left",Pn="right",hs="sf-popup",Es="sf-lib",ji="M10.5858 12.0001L2.58575 4.00003L3.99997 2.58582L12 10.5858L20 2.58582L21.4142 4.00003L13.4142 12.0001L21.4142 20L20 21.4142L12 13.4143L4.00003 21.4142L2.58581 20L10.5858 12.0001Z",$i="M20.7929 7H3.20712C2.76167 7 2.53858 7.53857 2.85356 7.85355L11.6465 16.6464C11.8417 16.8417 12.1583 16.8417 12.3536 16.6464L21.1465 7.85355C21.4614 7.53857 21.2384 7 20.7929 7Z",Vi="M20.7929 17H3.20712C2.76167 17 2.53858 16.4615 2.85356 16.1465L11.6465 7.3536C11.8417 7.15834 12.1583 7.15834 12.3536 7.3536L21.1465 16.1465C21.4614 16.4615 21.2384 17 20.7929 17Z",Wi="M7 20.7928L7 3.20706C7 2.76161 7.53857 2.53852 7.85355 2.8535L16.6464 11.6464C16.8417 11.8417 16.8417 12.1582 16.6464 12.3535L7.85355 21.1464C7.53857 21.4614 7 21.2383 7 20.7928Z",Fi="M17 3.20718L17 20.793C17 21.2384 16.4614 21.4615 16.1464 21.1465L7.35354 12.3536C7.15828 12.1584 7.15828 11.8418 7.35354 11.6465L16.1464 2.85363C16.4614 2.53864 17 2.76173 17 3.20718Z",Fs=t.forwardRef((o,n)=>{const{width:r="auto",height:e="auto",position:s="TopCenter",offsetX:i=0,offsetY:l=0,arrow:c=!0,windowCollision:f=!1,arrowPosition:d="Auto",opensOn:h="Auto",followCursor:g=!1,sticky:m=!1,animation:E={open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:a=0,closeDelay:C=0,children:v,target:R,content:j,container:y,className:D,open:x,onClose:k,onOpen:z,title:S,style:b,onFilterTarget:M,...T}=o,[H,w]=t.useState(!0),[I,Y]=t.useState(!1),[Z,ce]=t.useState(void 0),[K,O]=t.useState(null),[L,V]=t.useState(!1),[J,ue]=t.useState(_n),[F,q]=t.useState({top:0,left:0}),[ee,te]=t.useState({}),[oe,De]=t.useState({top:"",left:""}),[ve,de]=t.useState({style:b}),N=t.useRef(null),B=t.useRef({show:null,hide:null,autoClose:null}),ie=t.useRef({x:"Center",y:"Top"}),se=t.useRef(null),xe=t.useRef({event:null,target:null}),Q=t.useRef(!0),le=t.useRef(null),fe=t.useRef(null),A=t.useRef(null),ne=t.useRef(null),U=t.useRef({event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null}),G=t.useRef(typeof document<"u"?document.body:null),ge=t.useRef(x),pe=t.useRef(!1);Ae.isDevice&&(se.current=qt(fe));const ye={width:"auto",height:"auto",position:"TopCenter",offsetX:0,offsetY:0,arrow:!0,windowCollision:!1,arrowPosition:"Auto",opensOn:"Auto",followCursor:!1,sticky:!1,animation:{open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:0,closeDelay:0,target:R,content:j,container:y,open:x};t.useEffect(()=>{me(),we(s),N.current&&N.current.element&&le.current&&Se(le.current)},[s]),t.useEffect(()=>{N.current&&N.current.element&&le.current&&Se(le.current)},[d]),t.useEffect(()=>{var P,ae;N.current&&N.current.element&&le.current&&(tr(le.current),Dn(le.current,(P=U.current)==null?void 0:P.event,(ae=U.current)==null?void 0:ae.showAnimation))},[H,le.current]),t.useEffect(()=>(Ht(),Sn(h),()=>{Fe(h)}),[h,R]),t.useEffect(()=>{if(!(typeof document>"u"))return document.addEventListener("wheel",Bt),document.addEventListener("scroll",Bt),document.addEventListener("touchend",Ft),document.addEventListener("keydown",Nn),window.addEventListener("resize",he),()=>{typeof document>"u"||(document.removeEventListener("wheel",Bt),document.removeEventListener("scroll",Bt),document.removeEventListener("touchend",Ft),document.removeEventListener("keydown",Nn),window.removeEventListener("resize",he))}},[ye]),t.useEffect(()=>{var P,ae,be,Te,Ne,_e;!x&&ge.current===x||(ge.current=x,x?(P=U.current)!=null&&P.showTarget?(Mt((ae=U.current)==null?void 0:ae.showTarget,U.current.event,U.current.showAnimation),U.current={...U.current,showTarget:null}):Et(R!=null&&R.current?R==null?void 0:R.current:fe.current,E.open):(be=U.current)!=null&&be.hideAnimation?(St(),$t((Te=U.current)==null?void 0:Te.hideAnimation,(Ne=U.current)==null?void 0:Ne.hideTarget,(_e=U.current)==null?void 0:_e.hideEvent),U.current={...U.current,hideEvent:null,hideAnimation:null,hideTarget:null}):Ct(E.close))},[x]),t.useLayoutEffect(()=>(Ot("tooltip"),Ie(),()=>{clearTimeout(B.current.show),clearTimeout(B.current.hide),clearTimeout(B.current.autoClose),B.current={show:null,hide:null,autoClose:null},N.current=null,se.current=null,U.current={event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null},xe.current={event:null,target:null},g&&le.current&&(le.current.removeEventListener("mousemove",it),le.current.removeEventListener("touchstart",it),le.current.removeEventListener("mouseenter",it)),le.current=null,fe.current=null,ne.current=null,G.current=null,A.current=null}),[]),t.useImperativeHandle(n,()=>({...ye,animation:E,openTooltip:(P,ae)=>{if(Be(ae)&&(ae=E==null?void 0:E.open),Be(P)&&(P=fe.current),P){if(P.style.display==="none")return;Et(P,ae)}},closeTooltip:P=>{P||(P=E==null?void 0:E.close),Ct(P)},refresh:()=>{var P;N.current&&N.current.element&&Se(le.current?le.current:fe.current),!Be(o.target)&&!Be((P=o.target)==null?void 0:P.current)&&(Fe(h),Sn(h))},element:fe.current}));const Ie=t.useCallback(()=>{me()},[ye]),me=()=>{if(!s)return;let P=null,ae=null;s.indexOf("Top")===0||s.indexOf("Bottom")===0?[ae,P]=s.split(/(?=[A-Z])/):[P,ae]=s.split(/(?=[A-Z])/),ie.current.x=P,ie.current.y=ae},we=t.useCallback(P=>{let ae;if(!Be(P))return P.indexOf("Right")===0?ae=ur:P.indexOf("Bottom")===0?ae=cr:P.indexOf("Left")===0?ae=Pn:ae=_n,ue(ae),ae},[]),_=P=>{var be,Te;if(g&&((be=U.current)!=null&&be.event)){it((Te=U.current)==null?void 0:Te.event);return}const ae=re(P);q(ae)},X=P=>{var Te,Ne;if(!P)return{x:1,y:1};const ae={x:1,y:1},be=P.closest('[style*="transform: scale"]');if(be&&be!==((Te=N.current)==null?void 0:Te.element)&&be.contains((Ne=N.current)==null?void 0:Ne.element)){const je=window.getComputedStyle(be).getPropertyValue("transform");if(je!=="none"){const Ue=je.match(/scale\(([\d., ]+)\)/);if(Ue){const ke=Ue[1].split(",").map(parseFloat);ae.x=ke[0],ae.y=ke.length>1?ke[1]:ke[0]}else{const ke=je.match(/matrix\(([^)]+)\)/);if(ke){const Ke=ke[1].split(",").map(parseFloat);ae.x=Ke[0],ae.y=Ke[3]}}}}return ae},re=P=>{var Ke,Qe,rt,lt,Dt;N.current&&N.current.element&&(N.current.element.style.visibility="hidden",N.current.element.style.display="block");const ae=(Ke=fe.current)==null?void 0:Ke.closest('[style*="zoom"]');ae&&N.current&&N.current.element&&!ae.contains((Qe=N.current)==null?void 0:Qe.element)&&(N.current.element.style.zoom=getComputedStyle(ae).zoom);const be=Qr(P,(rt=ie.current.x)==null?void 0:rt.toLowerCase(),(lt=ie.current.y)==null?void 0:lt.toLowerCase(),Q.current||(Dt=G.current)==null?void 0:Dt.getBoundingClientRect()),Te=X(P),Ne=W(s,Te.x,Te.y),_e=rn(be,Ne),je=_e[0],Ue=_e[1],ke=vn(P,je,Ue);return ke.left=ke.left/Te.x,ke.top=ke.top/Te.y,!Q.current&&G.current&&(ke.left-=window.scrollX*2,ke.top-=window.scrollY*2),N.current&&N.current.element&&(N.current.element.style.display="",g&&(N.current.element.style.visibility="visible")),ke},he=()=>{Se(le.current)},Se=P=>{if(N.current&&N.current.element&&P){const ae=re(P);q(ae),N.current.element.style.visibility="visible"}},Re=()=>{g||Se(le.current)},Le=()=>{var ae;Wt();const P=t.createRef();P.current=(ae=N.current)==null?void 0:ae.element,Zt.stop(P.current),pe.current=!1,w(!0)},W=(P,ae,be)=>{var rt,lt,Dt,dt,Je,yt,cn,Ur,zr,Yr;const Te={top:0,left:0};let Ne,_e,je,Ue,ke,Ke,Qe;if(ae!==1||be!==1){const Kr=(lt=(rt=N.current)==null?void 0:rt.element)==null?void 0:lt.getBoundingClientRect();let un;je=Math.round(Kr.width),Ue=Math.round(Kr.height),A.current&&(un=A.current.getBoundingClientRect()),Ne=un?Math.round(un.width):0,_e=un?Math.round(un.height):0,ke=c?fs:ms,Ke=_e/2+bt+(Ue-((Dt=N.current)==null?void 0:Dt.element).clientHeight*be),Qe=Ne/2+bt+(je-((dt=N.current)==null?void 0:dt.element).clientWidth*ae)}else je=((Je=N.current)==null?void 0:Je.element).offsetWidth,Ue=((yt=N.current)==null?void 0:yt.element).offsetHeight,Ne=A.current?A.current.offsetWidth:0,_e=A.current?A.current.offsetHeight:0,ke=c?fs:ms,Ke=_e/2+bt+(((cn=N.current)==null?void 0:cn.element).offsetHeight-((Ur=N.current)==null?void 0:Ur.element).clientHeight),Qe=Ne/2+bt+(((zr=N.current)==null?void 0:zr.element).offsetWidth-((Yr=N.current)==null?void 0:Yr.element).clientWidth);switch(g&&(ke+=Li),P){case"RightTop":Te.left+=Ne+ke,Te.top-=Ue-Ke;break;case"RightCenter":Te.left+=Ne+ke,Te.top-=Ue/2;break;case"RightBottom":Te.left+=Ne+ke,Te.top-=Ke;break;case"BottomRight":Te.top+=_e+ke,Te.left-=Qe;break;case"BottomCenter":Te.top+=_e+ke,Te.left-=je/2;break;case"BottomLeft":Te.top+=_e+ke,Te.left-=je-Qe;break;case"LeftBottom":Te.left-=Ne+je+ke,Te.top-=Ke;break;case"LeftCenter":Te.left-=Ne+je+ke,Te.top-=Ue/2;break;case"LeftTop":Te.left-=Ne+je+ke,Te.top-=Ue-Ke;break;case"TopLeft":Te.top-=Ue+_e+ke,Te.left-=je-Qe;break;case"TopRight":Te.top-=Ue+_e+ke,Te.left-=Qe;break;default:Te.top-=Ue+_e+ke,Te.left-=je/2;break}return Te.left+=i,Te.top+=l,Te},Ce=(P,ae,be,Te)=>{var rt,lt,Dt,dt;if(c===!1||A.current===null)return;const Ne=we(ae);let _e,je;const Ue=((rt=N.current)==null?void 0:rt.element).clientWidth,ke=((lt=N.current)==null?void 0:lt.element).clientHeight,Ke=A.current.offsetWidth,Qe=A.current.offsetHeight;if(Ne===_n||Ne===cr){if(Ne===_n?(je="99.9%",De(Je=>({...Je,top:`-${Qe-2}px`}))):(je=-(Qe-1)+"px",De(Je=>({...Je,top:`-${Qe-6}px`}))),P){const Je=be!=="Center"||Ue>P.offsetWidth||g;Je&&be==="Left"||!Je&&d==="End"?_e=Ue-Ke-bt+"px":Je&&be==="Right"||!Je&&d==="Start"?_e=bt+"px":Je&&(d==="End"||d==="Start")?_e=d==="End"?P.offsetWidth+(((Dt=N.current)==null?void 0:Dt.element).offsetWidth-P.offsetWidth)/2-Ke/2-bt+"px":(((dt=N.current)==null?void 0:dt.element).offsetWidth-P.offsetWidth)/2-Ke/2+bt+"px":_e=Ue/2-Ke/2+"px"}}else{Ne===Pn?(_e="99.9%",De(yt=>({...yt,left:`-${Ke-2}px`}))):(_e=-(Ke-1)+"px",De(yt=>({...yt,left:`${-Ke+(Ke-2)}px`})));const Je=Te!=="Center"||ke>P.offsetHeight||g;Je&&Te==="Top"||!Je&&d==="End"?je=ke-Qe-bt+"px":Je&&Te==="Bottom"||!Je&&d==="Start"?je=bt+"px":je=ke/2-Qe/2+"px"}A.current.style.top=je,A.current.style.left=_e},Ee=()=>{var ae;if(le.current&&!Be(le.current.getAttribute("title"))&&(le.current.setAttribute("data-content",le.current.getAttribute("title")),le.current.removeAttribute("title")),t.isValidElement(j))return j;let P="";return typeof j=="function"?P=j():(ae=le==null?void 0:le.current)!=null&&ae.getAttribute("data-content")&&(P=le.current.getAttribute("data-content")),P},Oe=(P,ae)=>{const be=(P.getAttribute("aria-describedby")||"").split(/\s+/);be.indexOf(ae)<0&&be.push(ae),Io(P,{"aria-describedby":be.join(" ").trim(),"data-tooltip-id":ae})},Pe=P=>{const ae=P.getAttribute("data-tooltip-id"),be=(P.getAttribute("aria-describedby")||"").split(/\s+/),Te=be.indexOf(ae);Te!==-1&&be.splice(Te,1),P.removeAttribute("data-tooltip-id");const Ne=be.join(" ").trim();Ne?P.setAttribute("aria-describedby",Ne):P.removeAttribute("aria-describedby")},Ye=t.useCallback(P=>{P&&(clearTimeout(B.current.autoClose),ot(P.originalEvent))},[]),He=()=>{if(m)return;const P=()=>{vt()};B.current.autoClose=setTimeout(P,Ai)},ht=P=>{var Te;let ae;if((Te=o.target)!=null&&Te.current?ae=o.target.current.contains(P.target)?o.target.current:void 0:ae=M?P.target:fe.current,Be(ae))return;const be=P;!N.current||N.current&&ae!==le.current?be.type==="mousedown"&&be.button===2||ot(P):m||Ct(E.close,P,ae)},ot=P=>{var be,Te,Ne,_e;let ae;if(M){if(!(M==null?void 0:M(P.target)))return;ae=P.target}else(be=o.target)!=null&&be.current?ae=o.target.current.contains(P.target)?o.target.current:void 0:ae=fe.current;if(!(Be(ae)||N.current&&ae===le.current&&!g)){if(N.current&&((Te=N.current.element)!=null&&Te.getAttribute("sf-animation-id"))){const je=C+((Ne=E==null?void 0:E.close)!=null&&Ne.delay?E.close.delay:0)+((_e=E==null?void 0:E.close)!=null&&_e.duration?E.close.duration:0);setTimeout(()=>{Vt(ae),Et(ae,E.open,P)},je);return}Vt(ae),Et(ae,E.open,P)}},Nt=P=>{xe.current.event=P},St=()=>{xe.current.target&&(xe.current.target.removeEventListener("mousemove",Nt),xe.current.target.removeEventListener("touchstart",Nt))},Et=(P,ae,be)=>{clearTimeout(B.current.show),clearTimeout(B.current.hide),a&&g&&(St(),xe.current.target=P,xe.current.target.addEventListener("mousemove",Nt),xe.current.target.addEventListener("touchstart",Nt)),U.current={...U.current,event:be,showAnimation:ae,showTarget:P},z==null||z(be),(Be(x)||x)&&Mt(P,be,ae)},Mt=(P,ae,be)=>{var Te,Ne,_e;if(le.current=P,w(!1),Be(N.current)){const je=(Te=fe.current)!=null&&Te.getAttribute("id")?Bn((Ne=fe.current)==null?void 0:Ne.getAttribute("id")):Bn("tooltip");de(Ue=>({...Ue,id:je+"_content"}))}else if(P){Ce(P,s,ie.current.x,ie.current.y),Oe(P,ve==null?void 0:ve.id);const je=t.createRef();je.current=(_e=N.current)==null?void 0:_e.element,Zt.stop(je.current),Se(P),Dn(P,ae,be)}},Ht=()=>{(y==null?void 0:y.current)instanceof HTMLElement&&(Q.current=!1,G.current=y.current),G.current||(G.current=typeof document<"u"?document.body:null)},tr=P=>{var ae;if(P){Ht(),Oe(P,ve==null?void 0:ve.id),c&&we(s),_(P),Ce(P,s,ie.current.x,ie.current.y);const be=t.createRef();be.current=(ae=N.current)==null?void 0:ae.element,Zt.stop(be.current),Se(P)}},Dn=(P,ae,be)=>{P&&nr(P,be,ae)},nr=(P,ae,be)=>{const Te={name:ae.effect==="None"&&Zr==="Enable"?"FadeIn":E.open.effect,duration:ae.duration,delay:ae.delay,timingFunction:"ease-out"};if(a>0){const Ne=()=>{var _e;g&&(P.addEventListener("mousemove",it),P.addEventListener("touchstart",it),P.addEventListener("mouseenter",it)),(_e=N.current)!=null&&_e.element&&(O(P),ce(je=>({show:Te,hide:je==null?void 0:je.hide})),Y(!0),xe.current.event&&g&&it(xe.current.event))};B.current.show=setTimeout(Ne,a)}else N.current&&(O(P),ce(Ne=>({show:Te,hide:Ne==null?void 0:Ne.hide})),Y(!0));be&&xn(be,P)},nn=(P,ae)=>{var _e;const be={left:P,top:ae,position:s,horizontal:ie.current.x,vertical:ie.current.y},Te=yn(),Ne=ko((_e=N.current)==null?void 0:_e.element,Te?Te.current:null,m&&s.indexOf("Right")>=0?ne.current.offsetWidth+P:P,ae);return Ne.length>0&&(be.horizontal=Ne.indexOf("left")>=0?"Right":Ne.indexOf("right")>=0?"Left":ie.current.x,be.vertical=Ne.indexOf("top")>=0?"Bottom":Ne.indexOf("bottom")>=0?"Top":ie.current.y),be},rn=(P,ae)=>[Q.current?P.left+ae.left:P.left-G.current.getBoundingClientRect().left+ae.left+window.pageXOffset+G.current.scrollLeft,Q.current?P.top+ae.top:P.top-G.current.getBoundingClientRect().top+ae.top+window.pageYOffset+G.current.scrollTop],vn=(P,ae,be)=>{var Qe,rt,lt,Dt;const Te=nn(ae,be);let Ne=Te.position;ie.current.y!==Te.vertical&&(Ne=(s==null?void 0:s.indexOf("Bottom"))===0||(s==null?void 0:s.indexOf("Top"))===0?Te.vertical+ie.current.x:ie.current.x+Te.vertical),ie.current.x!==Te.horizontal&&(Ne.indexOf("Left")===0&&(Te.vertical=Ne==="LeftTop"||Ne==="LeftCenter"?"Top":"Bottom",Ne=Te.vertical+"Left"),Ne.indexOf("Right")===0&&(Te.vertical=Ne==="RightTop"||Ne==="RightCenter"?"Top":"Bottom",Ne=Te.vertical+"Right"),Te.horizontal=ie.current.x);const _e=Te.vertical,je=Te.horizontal;if(Te.position!==Ne){const dt=Qr(P,je.toLowerCase(),_e.toLowerCase(),Q.current||(Qe=G.current)==null?void 0:Qe.getBoundingClientRect());Ce(P,Ne,je,_e);const Je=X(P),yt=W(Ne,Je.x,Je.y);Q.current||(yt.top-=sn("TopBottom",Ne,l),yt.left-=sn("RightLeft",Ne,i)),Te.position=Ne;const cn=rn(dt,yt);Te.left=cn[0],Te.top=cn[1]}else Ce(P,Ne,je,_e);const Ue={left:Te.left,top:Te.top},ke=yn(),Ke=Q.current?_o((rt=N.current)==null?void 0:rt.element,ke?ke.current:null,{X:!0,Y:f},Ue):Ue;if(c&&A.current!=null&&(Ne.indexOf("Bottom")===0||Ne.indexOf("Top")===0)){let dt=parseInt(A.current.style.left,10)-(Ke.left-Te.left);dt<0?dt=0:dt+A.current.offsetWidth>((lt=N.current)==null?void 0:lt.element).clientWidth&&(dt=((Dt=N.current)==null?void 0:Dt.element).clientWidth-A.current.offsetWidth),A.current.style.left=dt.toString()+"px"}return Ue.left=Ke.left,Ue.top=Ke.top,Ue},sn=(P,ae,be)=>P.indexOf(s.split(/(?=[A-Z])/)[0])!==-1&&P.indexOf(ae.split(/(?=[A-Z])/)[0])!==-1?2*be:0,yn=()=>!f&&(R!=null&&R.current)?fe:null,Ct=(P,ae,be)=>{if(C>0){clearTimeout(B.current.hide),clearTimeout(B.current.show);const Te=()=>{C&&N.current&&N.current.element&&L||bn(P,ae,be)};B.current.hide=setTimeout(Te,C)}else bn(P,ae,be)},bn=(P,ae,be)=>{var Ne,_e,je;let Te;if(ae?Te=(Ne=o.target)!=null&&Ne.current||M?be||ae.target:fe.current:Te=le.current,U.current={...U.current,hideEvent:ae,hideAnimation:P,hideTarget:Te},N.current&&((_e=N.current.element)!=null&&_e.getAttribute("sf-animate"))){const Ue=t.createRef();Ue.current=(je=N.current)==null?void 0:je.element,Zt.stop(Ue.current,{end:()=>{jt(P,Te,ae)}})}else jt(P,Te,ae)},jt=(P,ae,be)=>{k==null||k(be),Be(x)?(St(),$t(P,ae,be)):x&&!k?w(!1):x||(St(),$t(P,ae,be))},$t=(P,ae,be)=>{ae&&be&&Vt(ae);const Te={name:P.effect==="None"&&Zr==="Enable"?"FadeOut":E.close.effect,duration:P.duration,delay:P.delay,timingFunction:"ease-in"};N.current&&(ce(Ne=>({hide:Te,show:Ne==null?void 0:Ne.show})),Y(!1))},Vt=P=>{nt(P),Be(P.getAttribute("data-content"))||(P.setAttribute("title",P.getAttribute("data-content")),P.removeAttribute("data-content")),Pe(P)},Wt=()=>{const P=le.current;P&&Vt(P),H&&(De({top:"",left:""}),N.current=null)},on=()=>{N.current&&N.current.element&&V(!0)},Rn=P=>{V(!1),Ct(E.close,P,le.current)},Lt=P=>{const ae=P.relatedTarget;if(ae){const be=gt(ae,`.${ar}.${Es}.${hs}`);be?(g&&it(P),be.addEventListener("mouseleave",wn)):(Ct(E.close,P,le.current),C===0&&E.close.effect==="None"&&Wt())}else Ct(E.close,P,le.current),Wt()},wn=P=>{var ae,be;(be=(ae=N.current)==null?void 0:ae.element)==null||be.removeEventListener("mouseleave",wn),(!P.relatedTarget||gt(P.relatedTarget,".sf-tooltip")!==fe.current)&&(Ct(E.close,P,le.current),Wt())},it=P=>{var Qe;let ae=0,be=0;if(P.type.indexOf("touch")>-1?(P.preventDefault(),ae=P.touches[0].pageX,be=P.touches[0].pageY):(ae=P.pageX,be=P.pageY),Be(N.current))return;N.current&&(N.current.element.style.display="block");const Te=t.createRef();Te.current=(Qe=N.current)==null?void 0:Qe.element,Zt.stop(Te.current),Ce(P.target,s,ie.current.x,ie.current.y);const Ne=X(P.target),_e=W(s,Ne.x,Ne.y),je=ae+_e.left+i,Ue=be+_e.top+l,ke=nn(je,Ue);if(ie.current.x!==ke.horizontal||ie.current.y!==ke.vertical){const rt=(s==null?void 0:s.indexOf("Bottom"))===0||(s==null?void 0:s.indexOf("Top"))===0?ke.vertical+ke.horizontal:ke.horizontal+ke.vertical;ke.position=rt,Ce(P.target,ke.position,ke.horizontal,ke.vertical);const lt=W(ke.position,Ne.x,Ne.y);ke.left=ae+lt.left-i,ke.top=be+lt.top-l}const Ke={position:"absolute",left:ke.left+"px",top:ke.top+"px",zIndex:1e3,width:On(r),height:On(e),display:"block"};q(ke),de(rt=>({...rt,style:{...(rt==null?void 0:rt.style)||{},...Ke}}))},Nn=P=>{N.current&&N.current.element&&P.key==="Escape"&&vt()},Ft=P=>{N.current&&N.current.element&&gt(P.target,".sf-tooltip")===null&&!m&&!h.includes("Focus")&&vt()},Bt=P=>{N.current&&N.current.element&&!m&&!g&&!pe.current&&(gt(P.target,`.${ar}.${Es}.${hs}`)||(Y(ae=>(ae||w(!0),ae)),pe.current=!0,vt()))},Sn=P=>{var Te,Ne;const ae=ln(P),be={};for(const _e of ae){if(_e==="Custom")return;_e==="Focus"&&(!Be(o.target)&&!Be((Te=o.target)==null?void 0:Te.current)?(Ne=o.target)==null||Ne.current.addEventListener("focus",ot):be.onFocus=ot),_e==="Click"&&(be.onMouseDown=ht),_e==="Hover"&&(Ae.isDevice?(se.current&&(se.current.tapHoldThreshold=Oi,se.current.tapHold=Ye),be.onTouchEnd=He):be.onMouseOver=ot)}te(be)},ln=P=>P?(P==="Auto"&&(P=Ae.isDevice?"Hover":"Hover Focus"),P.split(" ")):[],xn=(P,ae)=>{var be;N.current&&N.current.element&&(m||(P.type==="focus"&&(!Be(o.target)&&!Be((be=o.target)==null?void 0:be.current)||M?ae.addEventListener("blur",Lt):te(Te=>({...Te,onBlur:Lt}))),P.type==="mouseover"&&ae.addEventListener("mouseleave",Lt),C&&(N.current.element.addEventListener("mouseenter",on),N.current.element.addEventListener("mouseleave",Rn))),g&&a===0&&(ae.addEventListener("mousemove",it),ae.addEventListener("mouseenter",it)))},Fe=P=>{var be,Te;const ae=ln(P);for(const Ne of ae){if(Ne==="Custom")return;Ne==="Focus"&&!Be(o.target)&&!Be((be=o.target)==null?void 0:be.current)&&fe.current&&((Te=o.target)==null||Te.current.removeEventListener("focus",ot)),Ne==="Hover"&&se.current&&se.current.destroy&&se.current.destroy()}},nt=P=>{if(!m){const ae=ln(h);for(const be of ae)be==="Focus"&&(P.removeEventListener("blur",Lt),te(Te=>{const Ne={...Te};return delete Ne.onBlur,Ne})),be==="Hover"&&!Ae.isDevice&&P.removeEventListener("mouseleave",Lt);C&&(P.removeEventListener("mouseenter",on),P.removeEventListener("mouseleave",Rn))}g&&(P.removeEventListener("mousemove",it),P.removeEventListener("mouseenter",Lt))},vt=()=>{Ct(E.close)},an=t.useMemo(()=>{switch(J){case cr:return Vi;case Pn:return Wi;case ur:return Fi;default:return $i}},[J]),Ut=()=>u.jsxs(At,{ref:N,open:I,role:"tooltip","aria-hidden":!1,animation:Z,relativeElement:K,targetRef:le,position:{X:F.left,Y:F.top},viewPortElementRef:G.current?G:void 0,width:On(r),height:On(e),onOpen:Re,onClose:Le,className:[ar,D,Ae.isDevice?ki:""].filter(Boolean).join(" "),...ve,...T,children:[u.jsx("div",{className:Pi,children:Ee()}),c&&u.jsxs("div",{ref:A,className:`${ps} ${ps}-${J} sf-pos-absolute sf-overflow-hidden ${J===ur||J===Pn?"sf-tooltip-arrow-x":"sf-tooltip-arrow-y"}`,children:[u.jsx("div",{className:`${Mi}-${J} sf-pos-absolute`}),u.jsx("div",{className:`${Hi}-${J} sf-pos-absolute`,style:oe,children:u.jsx(Jr,{d:an})})]}),m&&u.jsx("div",{ref:ne,className:`${_i}`,role:"button","aria-label":"Close Tooltip",onClick:()=>{vt()},children:u.jsx(Jr,{d:ji})})]});return u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:fe,className:[Ii,D].filter(Boolean).join(" "),title:S,...ee,children:v}),!H&&G.current&&Xt.createPortal(Ut(),G.current)]})});t.memo(Fs);const mn=20,Cn=t.forwardRef((o,n)=>{const{open:r,header:e,footer:s,modal:i=!0,onClose:l,onDragStart:c,onDrag:f,onDragStop:d,onResizeStart:h,onResize:g,onResizeStop:m,closeIcon:E=!0,initialFocusRef:a,draggable:C=!1,resizable:v=!1,resizeHandles:R=["SouthEast"],position:j="Center",animation:y={effect:"Fade",duration:400,delay:0},target:D=typeof document<"u"?document.body:void 0,fullScreen:x=!1,className:k="",children:z,style:S,id:b=`dialog_${t.useId()}`,...M}=o,T=t.useRef(null),H=t.useRef(null),w=t.useRef(null),[I,Y]=t.useState({internalOpen:r,dynamicMaxHeight:""}),{internalOpen:Z,dynamicMaxHeight:ce}=I,{locale:K}=$e(),O=t.useMemo(()=>({handle:".sf-dlg-header-content",clone:!1,dragArea:D&&D instanceof HTMLElement?D:typeof document<"u"?document.body:void 0,abort:".sf-dlg-closeicon-btn",isDragScroll:!0,dragStart:me=>{if(!C){me.cancel=!0;return}c&&c(me)},drag:me=>{C&&f&&f(me.event)},dragStop:me=>{C&&d&&d(me.event)}}),[C,D,c,f,d]),L=t.useRef(null),V=t.useRef(Jt({current:C?L.current:null},O)),J=t.useMemo(()=>{const me=(X,re)=>X===void 0?re:X,we=x&&typeof window<"u"?window.innerWidth:typeof window<"u"?window.innerWidth-mn*2:800,_=x&&typeof window<"u"?window.innerHeight:typeof window<"u"?window.innerHeight-mn*2:600;return{minWidth:me(S==null?void 0:S.minWidth,100),minHeight:me(S==null?void 0:S.minHeight,100),maxWidth:me(S==null?void 0:S.maxWidth,we),maxHeight:me(S==null?void 0:S.maxHeight,_)}},[S==null?void 0:S.minWidth,S==null?void 0:S.minHeight,S==null?void 0:S.maxWidth,S==null?void 0:S.maxHeight,x]),ue=t.useMemo(()=>({enabled:v&&!x,handles:R,boundary:D&&D instanceof HTMLElement?D:void 0,minWidth:J.minWidth,minHeight:J.minHeight,maxWidth:J.maxWidth,maxHeight:J.maxHeight,onResizeStart:h,onResize:g,onResizeStop:m}),[v,R,D,J]),{renderResizeHandles:F}=Po(L,ue);t.useEffect(()=>(Ot("dialog"),()=>{var me,we,_;V.current&&((me=V.current.element)!=null&&me.current)&&((_=(we=V.current).destroy)==null||_.call(we)),L.current=null,V.current=null,T.current=null,H.current=null,w.current=null,typeof window<"u"&&window.removeEventListener("resize",te)}),[]);const q=t.useCallback(()=>{let me=[];if(L.current){const we=['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','[contenteditable]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","),_=L.current.querySelectorAll(we);me=Array.from(_).filter(X=>!X.hasAttribute("disabled"))}return me},[L,z,r]);t.useEffect(()=>{if(r){if(typeof document>"u"||typeof window>"u")return;if(w.current=document.activeElement,i){const me=D&&D instanceof HTMLElement?D:document.body,we={overflow:me.style.overflow,paddingRight:me.style.paddingRight},_=window.innerWidth-document.documentElement.clientWidth;return me.style.overflow="hidden",me.style.paddingRight=`${_}px`,()=>{me.style.overflow=we.overflow,me.style.paddingRight=we.paddingRight,w.current&&r&&w.current.focus()}}}else w.current&&(w.current.focus(),w.current=null);return()=>{w.current&&r&&w.current.focus()}},[Z,i]),t.useEffect(()=>{r&&Y(me=>({...me,internalOpen:!0}))},[r]);const ee=t.useCallback(()=>x?"100%":D&&D!==document.body&&typeof window<"u"?D.offsetHeight<window.innerHeight?D.offsetHeight-mn+"px":window.innerHeight-mn+"px":(typeof window<"u"?window.innerHeight-mn:600)+"px",[x,D]);t.useEffect(()=>{r&&Y(me=>({...me,dynamicMaxHeight:ee()}))},[r,ee]);const te=t.useCallback(()=>{Y(me=>({...me,dynamicMaxHeight:ee()}))},[ee]);t.useEffect(()=>{if(!(!r||!Z))return T.current&&Y(me=>({...me,dynamicMaxHeight:ee()})),typeof window<"u"&&window.addEventListener("resize",te),()=>{typeof window<"u"&&window.removeEventListener("resize",te)}},[r,Z,te,ee]);const oe=t.useMemo(()=>({open:r,modal:i,draggable:C,resizable:v,resizeHandles:R,position:j,animation:y,target:D,fullScreen:x,closeIcon:E}),[r,i,C,v,R,j,y,D,x]);t.useImperativeHandle(n,()=>({...oe,element:T.current}),[oe]);const De=t.useCallback(me=>{me.key==="Escape"&&l&&(me.preventDefault(),l(me),typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur())},[l]),ve=t.useCallback(me=>{var _,X,re,he;if(!i)return;const we=q();if(we.length!==0)switch(me.key){case"Tab":{const Se=typeof document<"u"?document.activeElement:null,Re=we.indexOf(Se);if(Re===-1){me.preventDefault(),(X=(_=we[we.length-1])==null?void 0:_.focus)==null||X.call(_);return}me.preventDefault();let Le;me.shiftKey?Le=Re<=0?we.length-1:Re-1:Le=Re>=we.length-1?0:Re+1,(he=(re=we[Le])==null?void 0:re.focus)==null||he.call(re);break}}},[i,q]),de=t.useCallback(()=>{var me;if(T.current&&Y(we=>({...we,dynamicMaxHeight:ee()})),a!=null&&a.current)"element"in a.current&&a.current.element?a.current.element.focus():a.current.focus();else{const _=q().filter(X=>!H.current||H.current&&X!==H.current.element);_.length>0?_[0].focus():(me=H.current)!=null&&me.element&&H.current.element.focus()}},[a,ee,q]),N=t.useCallback(()=>{T.current&&Y(me=>({...me,internalOpen:!1}))},[]),B=t.useCallback(me=>{l==null||l(me)},[l]),ie=t.useCallback(me=>{i&&me.target===me.currentTarget&&(l==null||l(me))},[i,l]),se=t.useMemo(()=>Ls("dialog",{close:"Close"},K).getConstant("close"),[K]),xe=t.useCallback(()=>u.jsx(Ze,{ref:H,icon:typeof E=="boolean"?u.jsx(Un,{"aria-label":se}):E,title:se,"aria-label":se,color:Tt.Secondary,onClick:B,className:"sf-dlg-closeicon-btn",variant:qe.Standard}),[E,B,i,se]),Q=(me,we)=>{const _={Fade:{show:"FadeIn",hide:"FadeOut"},FadeZoom:{show:"FadeZoomIn",hide:"FadeZoomOut"},FlipLeftDown:{show:"FlipLeftDownIn",hide:"FlipLeftDownOut"},FlipLeftUp:{show:"FlipLeftUpIn",hide:"FlipLeftUpOut"},FlipRightDown:{show:"FlipRightDownIn",hide:"FlipRightDownOut"},FlipRightUp:{show:"FlipRightUpIn",hide:"FlipRightUpOut"},FlipXDown:{show:"FlipXDownIn",hide:"FlipXDownOut"},FlipXUp:{show:"FlipXUpIn",hide:"FlipXUpOut"},FlipYLeft:{show:"FlipYLeftIn",hide:"FlipYLeftOut"},FlipYRight:{show:"FlipYRightIn",hide:"FlipYRightOut"},SlideBottom:{show:"SlideBottomIn",hide:"SlideBottomOut"},SlideLeft:{show:"SlideLeftIn",hide:"SlideLeftOut"},SlideRight:{show:"SlideRightIn",hide:"SlideRightOut"},SlideTop:{show:"SlideTopIn",hide:"SlideTopOut"},Zoom:{show:"ZoomIn",hide:"ZoomOut"},None:{show:"FadeIn",hide:"FadeOut"}},X={show:"FadeIn",hide:"FadeOut"},re=_[me]||X;return we?re.show:re.hide},le=t.useMemo(()=>["sf-control","sf-dialog",i?"sf-dlg-modal":"",x?"sf-dlg-fullscreen":"",v&&!x?"sf-dlg-resizable":"",k].filter(Boolean).join(" "),[i,x,k,v]),fe=t.useMemo(()=>{if(S!=null&&S.top&&(S!=null&&S.left)||j===null)return;const[me,we]=j==null?void 0:j.split(/(?=[A-Z])/);return me&&we?`sf-dlg-${me==null?void 0:me.toLowerCase()}-${we==null?void 0:we.toLowerCase()}`:"sf-dlg-center"},[j,S]),A=t.useMemo(()=>{const[me,we]=j?j==null?void 0:j.split(/(?=[A-Z])/):[];return me&&we?{X:me,Y:we}:{X:"Center",Y:"Center"}},[j]),ne=t.useMemo(()=>["sf-dlg-container",fe].filter(Boolean).join(" "),[fe]),U=t.useMemo(()=>{const me={...S};return delete me.zIndex,{maxHeight:x?"100%":ce,position:me.left&&me.top?"absolute":"relative",...!me.left&&!me.top?{top:"0px",left:"0px"}:{},...x?{width:"100vw",height:"100vh",maxWidth:"100%",maxHeight:"100%"}:{},...!x&&v?{minWidth:J.minWidth,minHeight:J.minHeight,maxWidth:J.maxWidth,maxHeight:J.maxHeight}:{},...me}},[j,x,S,ce,v,J]),{zIndexBase:G,zIndexPopup:ge,zIndexOverlay:pe}=t.useMemo(()=>{let me=typeof(S==null?void 0:S.zIndex)=="number"?S.zIndex:1e3;return me===1e3&&T.current&&(me=Is(T.current)),{zIndexBase:Math.max(2,me),zIndexPopup:Math.max(3,me+1),zIndexOverlay:Math.max(1,me-1)}},[S==null?void 0:S.zIndex,r,Z,T.current]);if(!Z)return null;const ye=u.jsxs("div",{className:ne,ref:T,style:{zIndex:G,position:typeof document<"u"&&D!==document.body?"absolute":"fixed"},onKeyDown:De,children:[u.jsxs(At,{ref:me=>{L.current=me==null?void 0:me.element},open:r,position:A,zIndex:ge,relateTo:D,onOpen:de,onClose:N,className:le,animation:{show:{name:Q(y.effect,!0),duration:y.effect==="None"?0:y.duration,delay:y.delay,timingFunction:"ease-out"},hide:{name:Q(y.effect,!1),duration:y.effect==="None"?0:y.duration,delay:y.delay,timingFunction:"ease-in"}},style:U,role:"dialog",id:b,...z&&{"aria-describedby":`${b}_dialog-content`},...e&&{"aria-labelledby":`${b}_dialog-header`},...!e&&{"aria-label":"Dialog"},"aria-modal":i?"true":"false",tabIndex:-1,onKeyDown:ve,...M,children:[(e||E)&&u.jsxs("div",{className:"sf-dlg-header-content",id:`${b}_dialog-header`,children:[E&&xe(),e&&u.jsx("div",{className:"sf-dlg-header sf-ellipsis",id:`${b}_title`,children:e})]}),u.jsx("div",{className:"sf-dlg-content",id:`${b}_dialog-content`,children:z}),s&&u.jsx("div",{className:"sf-dlg-footer-content sf-content-end",children:s}),v&&!x&&F(u.jsx(Mo,{fill:"currentColor"}))]}),i&&u.jsx("div",{className:"sf-dlg-overlay",style:{zIndex:pe},onClick:ie,role:"presentation"})]}),Ie=D&&D instanceof HTMLElement?D:typeof document<"u"?document.body:void 0;return Xt.createPortal(ye,Ie)});Cn.displayName="Dialog";t.memo(Cn);const en=o=>o?o.getHours()*3600+o.getMinutes()*60+o.getSeconds():-1,Bs=(o,n)=>o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDate()===n.getDate(),Us=(o,n,r)=>{if(!n&&!r)return!0;const e=en(o),s=!!n,i=!!r,l=s?en(n):-1,c=i?en(r):-1;return s&&i?Bs(n,r)?l===c?e===l:l>c?!1:e>=l&&e<=c:l===c?e===l:l>c?e>=l||e<=c:e>=l&&e<=c:s?e>=l:i?e<=c:!0},Bi=(o,n,r)=>!n&&!r?o:o.filter(e=>Us(e,n??null,r??null)),Ui=(o,n,r)=>{const e=!!n,s=!!r;if(!e&&!s)return o;const i=en(o),l=e?en(n):-1,c=s?en(r):Number.MAX_SAFE_INTEGER;if(e&&s&&Bs(n,r)&&l>c)return null;if(e&&i<l){const f=n,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(s&&i>c){const f=r,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(e&&s&&l>c&&i>c&&i<l){const f=l-i,d=i-c,h=f<=d?n:r,g=new Date(o);return g.setHours(h.getHours(),h.getMinutes(),h.getSeconds(),0),g}return o},zs=t.forwardRef((o,n)=>{const{times:r,selected:e,onSelect:s,formatter:i,itemTemplate:l,idBase:c,listLabel:f="Time options",ariaHidden:d=!1,className:h="sf-timepicker-list",sizeClass:g="",isOpen:m=!1,dir:E="ltr"}=o,a=t.useRef(null),C=t.useRef([]),v=t.useRef(!1),[R,j]=t.useState(null),y=r.length,D=t.useCallback(K=>i?i(K):K.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),[i]),x=t.useCallback(()=>e?r.findIndex(K=>K.getHours()===e.getHours()&&K.getMinutes()===e.getMinutes()):-1,[r,e]),k=t.useCallback(K=>{if(K==null||K<0)return;const O=C.current[K],L=a.current;if(!O||!L)return;const V=O.offsetTop,J=O.offsetHeight||32,ue=L.clientHeight||0,F=Math.max(0,V-Math.max(0,(ue-J)/2));L.scrollTop=F},[]),z=t.useCallback(()=>{const K=x(),O=K>=0?K:r.length?0:null;if(O==null||O<0)return;const L=C.current[O],V=a.current;if(!L||!V)return;const J=L.offsetTop,ue=L.offsetHeight||32,F=Math.max(0,J-Math.max(0,(V.clientHeight-ue)/2));V.scrollTop=F,j(O)},[x,r.length]);t.useEffect(()=>{m&&!v.current&&(v.current=!0,z()),m||(v.current=!1,j(null))},[m,z]);const S=t.useCallback(()=>{if(!y)return;const K=R!=null&&R>=0&&R<y?R:x(),O=K<0?0:(K+1)%y;j(O),k(O)},[y,R,x,k]),b=t.useCallback(()=>{if(!y)return;const K=R!=null&&R>=0&&R<y?R:x(),O=K<0?y-1:(K-1+y)%y;j(O),k(O)},[y,R,x,k]),M=t.useCallback(()=>{y&&(j(0),k(0))},[y,k]),T=t.useCallback(()=>{y&&(j(y-1),k(y-1))},[y,k]),H=t.useCallback(()=>{if(!y)return;const K=R!=null&&R>=0&&R<y?R:x();K==null||K<0||s(r[K])},[y,R,x,s,r]),w=t.useCallback(K=>{switch(K.key){case"ArrowDown":K.preventDefault(),S();break;case"ArrowUp":K.preventDefault(),b();break;case"Home":K.preventDefault(),M();break;case"End":K.preventDefault(),T();break;case"Enter":K.preventDefault(),H();break}},[S,b,M,T,H]);t.useImperativeHandle(n,()=>({ensureSelectedVisible:z,selectFocused:H,focusNext:S,focusPrev:b,focusFirst:M,focusLast:T,getFocusedIndex:()=>R,handleKeyDown:K=>w(K)}),[z,H,S,b,M,T,R,w]);const I=`${c}_options`,Y=t.useMemo(()=>R!=null&&R>=0&&R<y?`${c}_option_${R}`:void 0,[c,R,y]),Z=[h,g,"sf-ul",E==="rtl"?"sf-rtl":""].filter(Boolean).join(" "),ce=y===0;return u.jsx("ul",{ref:a,className:Z,role:"listbox","aria-label":f,"aria-activedescendant":Y,"aria-hidden":d,id:I,tabIndex:0,onMouseDown:K=>K.preventDefault(),onKeyDown:w,children:ce?u.jsx("li",{className:"sf-timepicker-item sf-timepicker-empty",role:"note",tabIndex:-1,children:"No available times"}):r.map((K,O)=>{const L=D(K),V=!!(e&&K.getHours()===e.getHours()&&K.getMinutes()===e.getMinutes()),J=R===O,ue=l?l(K,V,J,O):L;return u.jsx("li",{ref:F=>{C.current[O]=F},className:["sf-timepicker-item",V?"sf-active":"",J?"sf-focus":""].filter(Boolean).join(" "),role:"option","data-value":L,id:`${c}_option_${O}`,"aria-selected":V,onClick:F=>s(K,F),onFocus:()=>j(O),onBlur:()=>j(null),tabIndex:0,children:ue},O)})})});zs.displayName="TimeList";function zi(o){const{step:n,minTime:r,maxTime:e,locale:s,timeFormat:i}=o,[l,c]=t.useState([]),f=t.useRef(null);t.useEffect(()=>{const C=[],v=new Date;v.setHours(0,0,0,0);const R=new Date;R.setHours(23,59,59,999);const j=new Date(v);for(;j<=R;)C.push(new Date(j)),j.setMinutes(j.getMinutes()+n);c(C)},[n]);const d=t.useMemo(()=>Bi(l,r,e),[l,r,e]),h=t.useCallback(C=>!C||isNaN(C.getTime())?"":ut(C,{format:i||"h:mm a",type:"time",locale:s||"en-US"}),[s,i]),g=t.useCallback((C,v=!1)=>{if(!C||!C.trim())return null;const R=C.replace(/(am|pm|Am|aM|pM|Pm)/g,y=>y.toUpperCase()).trim(),j=[i,"h:mm a","h:mm:ss a","HH:mm","HH:mm:ss"].filter(Boolean);for(const y of j){const D=Ho(R,{format:y,type:"time",locale:s||"en-US"});if(D&&!isNaN(D.getTime())&&(!v||ut(D,{format:y,type:"time",locale:s||"en-US"}).trim()===R))return D}if(!v){const D=new Date().toLocaleDateString(s||"en-US"),x=new Date(`${D} ${R}`);if(!isNaN(x.getTime()))return x}return null},[s,i]),m=t.useCallback(C=>!C||isNaN(C.getTime())?!1:Us(C,r||null,e||null),[r,e]),E=t.useCallback(()=>{var C,v;(v=(C=f.current)==null?void 0:C.ensureSelectedVisible)==null||v.call(C)},[]),a=t.useCallback((C,v)=>{v&&f.current&&typeof f.current.handleKeyDown=="function"&&f.current.handleKeyDown(C)},[]);return{displayedTimes:d,formatTime:h,parseTime:g,isValidTime:m,timeListRef:f,ensureSelectedVisible:E,forwardListKeyDown:a}}const Tr=t.forwardRef((o,n)=>{const{value:r,id:e=`timepicker_${t.useId()}`,defaultValue:s,format:i="h:mm a",minTime:l,maxTime:c,step:f=30,placeholder:d="Choose a time",variant:h=qe.Standard,size:g=Yt.Medium,readOnly:m=!1,disabled:E=!1,itemTemplate:a,clearButton:C=!0,className:v="",zIndex:R=1e3,strictMode:j=!1,open:y,pickerIcon:D=!0,editable:x=!0,fullScreenMode:k=!1,pickerVariant:z=dn.Auto,openOnFocus:S=!1,required:b=!1,valid:M,validationMessage:T="",validityStyles:H=!0,labelMode:w="Never",onChange:I,onOpen:Y,onClose:Z,...ce}=o,[K,O]=t.useState(r??s??null),[L,V]=t.useState(!1),J=t.useRef(null),ue=t.useRef(null),F=t.useRef(null),q=t.useRef(null),{dir:ee,locale:te}=$e(),oe=r!==void 0,De=oe?r||null:K,ve=z===dn.Popup||z===dn.Auto&&Ae.isDevice,de=z===dn.Inline||z===dn.Auto&&!Ae.isDevice,{displayedTimes:N,formatTime:B,parseTime:ie,isValidTime:se,timeListRef:xe,ensureSelectedVisible:Q,forwardListKeyDown:le}=zi({step:f,minTime:l,maxTime:c,locale:te,timeFormat:i}),fe=t.useCallback((Ee,Oe)=>{oe||O(Ee),I&&I({value:Ee,event:Oe})},[oe,I,b,M]),A=jo({locale:te,inputRef:ue,placeholder:d,placeholderKey:"timepicker",disabled:E,readOnly:m,openOnFocus:S,strictMode:j,required:b,valid:M,validationMessage:T,value:De,formatValue:B,parseInput:Ee=>ie(Ee,!1),isValid:Ee=>se(Ee),commitValue:fe,onOpen:()=>{U()}}),{isOpen:ne,showPopup:U,hidePopup:G,togglePopup:ge,zIndexPopup:pe}=$o({open:y,defaultOpen:!1,disabled:E,readOnly:m,onOpen:Y,onClose:Z,containerRef:J,contentRefs:[F],extraInsideRefs:[q],inputRef:ue,baseZIndex:R}),ye=t.useCallback((Ee,Oe)=>{oe||A.setInputValue(B(Ee)),fe(Ee,Oe),G()},[B,fe,G,oe,A]),Ie=t.useCallback(()=>{De?(A.setInputValue(B(De)),A.setIsInputValid(!0)):(A.setInputValue(""),A.setIsInputValid(!b))},[j,De,B,b,fe,A]),me=t.useCallback((Ee,Oe)=>{const Pe=Ui(Ee,l??null,c??null);Pe?(A.setInputValue(B(Pe)),fe(Pe,Oe),A.setIsInputValid(!0)):(A.setInputValue(""),fe(null,Oe),A.setIsInputValid(!b))},[j,l,c,b,B,fe,A]),we=t.useCallback(Ee=>{const Oe=A.inputValue;if(Oe.trim()===""){A.inputValue!==""&&A.setInputValue(""),j&&b?De?(A.setInputValue(B(De)),A.setIsInputValid(!0)):A.setIsInputValid(!b):(fe(null,Ee),A.setIsInputValid(!b));return}if(j){const Ye=ie(Oe,!1);if(Ye===null){Ie();return}if(se(Ye)){const ht=B(Ye);A.setInputValue(ht),fe(Ye,Ee),A.setIsInputValid(!0)}else me(Ye,Ee);return}const Pe=ie(Oe,!0);Pe&&se(Pe)?(fe(Pe,Ee),A.setIsInputValid(!0)):A.setIsInputValid(!1)},[A,j,b,De,ie,se,B,fe,Ie,me]),_=t.useCallback(Ee=>{switch(Ee.key){case"ArrowDown":(Ee.altKey||Ee.metaKey)&&(Ee.preventDefault(),U());break;case"ArrowUp":(Ee.altKey||Ee.metaKey)&&(Ee.preventDefault(),G());break;case"Enter":ne||(Ee.preventDefault(),we(Ee));break}le(Ee,ne)},[ne,U,G,we,le]),X=t.useCallback(Ee=>{if(!Ee.trim())return!b;if(/^\d{1,2}$/.test(Ee)){const Pe=parseInt(Ee,10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:$/.test(Ee)){const Pe=parseInt(Ee.split(":")[0],10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:\d{1,2}$/.test(Ee)){const[Pe,Ye]=Ee.split(":"),He=parseInt(Pe,10),ht=parseInt(Ye,10);return He>=0&&He<=23&&ht>=0&&ht<=59}const Oe=ie(Ee);return Oe!==null&&se(Oe)},[ie,se,b]),re=t.useCallback(Ee=>{const Oe=Ee.target.value;A.setInputValue(Oe),M===void 0&&A.setIsInputValid(X(Oe))},[M,X]);t.useEffect(()=>{Ot("timepicker")},[]);const he={placeholder:d,format:i,labelMode:w,disabled:E,readOnly:m,editable:x,openOnFocus:S,open:y,clearButton:C,zIndex:R,strictMode:j,value:De,minTime:l,maxTime:c,step:f,required:b,valid:M,validationMessage:T,validityStyles:H};t.useImperativeHandle(n,()=>({...he,element:J.current}),[he]);const Se=t.useCallback(()=>{var Ee;ge(),V(!0),(Ee=ue.current)==null||Ee.focus()},[ge]),Re=t.useCallback(Ee=>{Ee.preventDefault(),A.handleClear(),G()},[A,G]),Le=["sf-input-group sf-control","sf-timepicker",E?"sf-disabled":"",m?"sf-readonly":"",ne||A.isFocused?"sf-input-focus":"",w!=="Never"?"sf-float-input":"",ee==="rtl"?"sf-rtl":"",g===Yt.Small?"sf-small":g===Yt.Large?"sf-large":"sf-medium",!A.isInputValid&&H?"sf-error":"",h&&h.toLowerCase()!=="standard"?h.toLowerCase()==="outlined"?"sf-outline":`sf-${h.toLowerCase()}`:"",v].filter(Boolean).join(" "),W=g.toLowerCase().substring(0,2),Ce=t.useMemo(()=>u.jsx(zs,{ref:xe,times:N,selected:De,onSelect:(Ee,Oe)=>{ye(Ee,Oe)},formatter:B,itemTemplate:a,idBase:`${e}`,className:"sf-timepicker-list",sizeClass:`sf-timepicker-list-${W}`,isOpen:ne,dir:ee}),[N,De,B,a,ne,ee,ye,W,e,xe]);return u.jsxs("span",{ref:J,className:Le,...ce,children:[u.jsx(As,{ref:ue,id:e,className:"sf-timepicker",placeholder:w==="Never"?A.getPlaceholder:"",disabled:E,readOnly:m||!x,onFocus:A.handleInputFocus,onBlur:Ee=>{A.setIsFocused(!1),we(Ee),G()},value:A.inputValue,onChange:x&&!m&&!E?re:void 0,role:"combobox","aria-haspopup":"listbox",autoComplete:"off","aria-expanded":ne,"aria-disabled":E,"aria-controls":ne?`${e}_options`:void 0,"aria-label":A.getPlaceholder||"Time picker input",onKeyDown:_,tabIndex:0,required:b}),w!=="Never"&&Sr(w,!1,A.inputValue,d,e),C&&A.inputValue&&(A.isFocused||ne)&&u.jsx("span",{className:"sf-clear-icon sf-input-icon","aria-label":"clear time value",role:"button",onMouseDown:Re,children:u.jsx(Un,{})}),u.jsx("span",{className:`sf-input-icon sf-time-icon sf-icons ${L?"sf-active":""}`,"aria-label":"select time",role:"button",onClick:Se,onMouseDown:Ee=>{Ee.preventDefault()},children:D===!0?u.jsx(fi,{}):D}),ne&&Xt.createPortal(k&&Ae.isDevice?u.jsxs("div",{ref:q,className:"sf-timepicker-mob sf-control",style:{zIndex:R},role:"dialog","aria-modal":"true","aria-label":"Time selection",children:[u.jsxs("div",{className:"sf-timepicker-header",children:[u.jsx(Ze,{variant:qe.Standard,onClick:G,children:u.jsx(Un,{})}),u.jsx("span",{className:"sf-timepicker-title",children:"Select Time"})]}),Ce]}):u.jsxs(u.Fragment,{children:[ve&&u.jsxs("div",{className:"sf-timepicker-popup-wrap sf-picker-popup",style:{zIndex:pe.toString()},children:[u.jsx("div",{className:"sf-overlay"}),u.jsx(At,{ref:F,className:"sf-timepicker sf-popup sf-content-center",open:ne,zIndex:pe,onOpen:()=>{Q()},relateTo:document.body,style:{top:"0px",left:"0px",position:"relative"},position:{X:"center",Y:"center"},collision:{X:st.Fit,Y:st.Fit},"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:Ce})]}),de&&u.jsx(At,{ref:F,className:"sf-timepicker sf-popup",open:ne,zIndex:pe,onOpen:()=>{Q()},relateTo:J.current,position:{X:"left",Y:"bottom"},collision:{X:st.Flip,Y:st.Flip},offsetY:4,"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:Ce})]}),document.body)]})});Tr.displayName="TimePicker";const p={ALL_DAY_APPOINTMENT_SECTION:"sf-all-day-appointment-section",ALL_DAY_APPOINTMENT:"sf-all-day-appointment",ALL_DAY_CONTAINER:"sf-all-day-container",ALL_DAY_CELL:"sf-all-day-cell",ALL_DAY_ROW:"sf-all-day-row",ALL_DAY_TIMEZONE_ROW:"sf-all-day-time-zone-row",APPOINTMENT:"sf-appointment",APPOINTMENT_ACTIVE:"sf-appointment-active",APPOINTMENT_COLLAPSE:"sf-appointment-collapse",APPOINTMENT_DETAILS:"sf-appointment-details",APPOINTMENT_EXPAND:"sf-appointment-expand",APPOINTMENT_WRAPPER:"sf-appointment-wrapper",BOTTOM_RESIZE_HANDLER:"sf-bottom-handler",BLOCK_INDICATOR:"sf-block-indicator",BLOCK_APPOINTMENT:"sf-block-appointment",CALENDAR_POPUP_CONTAINER:"sf-calendar-popup-container",CANCEL_EVENT:"sf-cancel-event",CELL_POPUP:"sf-cell-popup",CELL_TIME:"sf-cell-time",CONTENT_RIGHT:"sf-content-end sf-content-right",CONTENT_SECTION:"sf-content-section",CONTENT_TABLE:"sf-content-table",CONTENT_WRAP:"sf-content-wrap",CONTROL:"sf-control",CURRENT_TIME:"sf-current-time",CURRENT_TIMELINE:"sf-current-timeline",DATE_HEADER:"sf-date-header",DATE_HEADER_CONTAINER:"sf-date-header-container",DATEPICKER_BUTTON:"sf-datepicker-button",DAY_CLONE_CONTAINER:"sf-day-clone-container",DAY_VIEW:"sf-day-view",DAY_WRAPPER:"sf-day-wrapper",DIALOG:"sf-scheduler-dialog",DIALOG_CONTENT:"sf-dialog-content",DELETE_EVENT:"sf-delete-event",DESCRIPTION:"sf-description",DESCRIPTION_CONTAINER:"sf-description-container",DESCRIPTION_ROW:"sf-description-row",DISPLAY_FLEX:"sf-display-flex",DOWN_ARROW_ICON:"sf-down-icon",DRAGGING:"sf-dragging",DRAG_CLONE:"sf-drag-clone",SCHEDULER_CURSOR_MOVE:"sf-scheduler-cursor-move",SCHEDULER_CURSOR_NOT_ALLOWED:"sf-cursor-not-allowed",SCHEDULER_CURSOR_DEFAULT:"sf-cursor-default",EXTERNAL_DRAG_CLONE:"sf-external-drag-clone",EVENT_RESIZE_CLASS:"sf-event-resize",EVENT_CLONE:"sf-event-clone",EDIT_EVENT:"sf-edit-event",EDITOR_FIELDS_ROW:"sf-editor-fields-row",EDITOR_FIELD_CONTAINER:"sf-editor-field-container",ELLIPSIS:"sf-ellipsis",END_DATE_CONTAINER:"sf-end-date-container",END_TIME_CONTAINER:"sf-end-time-container",END_ROW:"sf-end-row",EVENT_ALLDAY:"sf-event-all-day",EVENT_CONTAINER:"sf-event-container",EVENT_DESCRIPTION:"sf-event-description",EVENT_END_DATE:"sf-event-end-date",EVENT_END_TIME:"sf-event-end-time",EVENT_LOCATION:"sf-event-location",EVENT_POPUP:"sf-event-popup",EVENT_START_DATE:"sf-event-start-date",EVENT_START_TIME:"sf-event-start-time",EVENT_SUBJECT:"sf-event-subject",EVENT_TIME:"sf-event-time",FORM_CONTAINER:"sf-form-container",HORIZONTAL_RESIZE_INNER:"sf-horizontal-resize",HEADER_CELLS:"sf-header-cells",HEADER_DATE:"sf-header-date",HEADER_DAY:"sf-header-day",HEADER_ROW:"sf-header-row",HEADER_SECTION:"sf-header-section",ICONS:"sf-icons",INDICATOR:"sf-indicator",LEFT_ARROW_ICON:"sf-left-icon",LEFT_INDENT:"sf-left-indent",LINK:"sf-link",LOCATION:"sf-location",LOCATION_CONTAINER:"sf-location-container",LEFT_RESIZE_HANDLER:"sf-left-handler",MAIN_SCROLL_CONTAINER:"sf-main-scroll-container",MONTH_VIEW:"sf-month-view",MONTH_EVENT:"sf-month-event",MORE_EVENT_CONTENT:"sf-more-event-content",MORE_EVENT_DATE_HEADER:"sf-more-event-date-header",MORE_EVENT_HEADER:"sf-more-event-header",MORE_EVENT_POPUP:"sf-more-event-popup",MORE_INDICATOR:"sf-more-indicator",MORE_POPUP_WRAPPER:"sf-more-popup-wrapper",MOB_RESIZE_DOT:"sf-mob-resize-dot",MOBILE_POPUP:"sf-mobile-popup",NEXT_ICON:"sf-next-icon",NO_POINTER:"sf-no-pointer",POPUP:"sf-popup",POPUP_CELL_HEADER:"sf-popup-cell-header",POPUP_CLOSE:"sf-popup-close",POPUP_CONTENT:"sf-quickinfo-popup-content",POPUP_CELL_SUBJECT:"sf-popup-cell-subject",POPUP_DESCRIPTION_TEXT:"sf-popup-description-text",POPUP_EVENT_SUBJECT:"sf-popup-event-subject",POPUP_FOOTER:"sf-quickinfo-popup-footer",POPUP_HEADER:"sf-quickinfo-popup-header",POPUP_HEADER_WRAP:"sf-header-icon-wrapper",POPUP_INPUT_WRAP:"sf-input-wrap",POPUP_LOCATION_TEXT:"sf-popup-location-text",POPUP_MORE_DETAILS:"sf-popup-more-details",POPUP_TIME_TEXT:"sf-popup-time-text",POPUP_WRAPPER:"sf-quickinfo-popup-wrapper",POSITION_ABSOLUTE:"sf-pos-absolute",PREVIOUS_ICON:"sf-previous-icon",PREVIOUS_TIMELINE:"sf-previous-timeline",QUICK_INFO_WRAPPER:"sf-quick-info-wrapper",RIGHT_ARROW_ICON:"sf-right-icon",RIGHT_SECTION:"sf-right-section",EVENT_RECURRENCE_ICON_CLASS:"sf-event-recurrence-icon",EVENT_RECURRENCE_EDIT_ICON_CLASS:"sf-event-recurrence-edit-icon",ROUND:"sf-round",RTL:"sf-rtl",RIGHT_RESIZE_HANDLER:"sf-right-handler",RESIZING:"sf-resizing",RESIZE_CONTAINER:"sf-resize-container",SAVE_EVENT:"sf-save-event",SCHEDULER:"sf-scheduler",SCHEDULER_CALENDAR:"sf-scheduler-calendar",SCHEDULER_TABLE:"sf-scheduler-table",SCHEDULER_TOOLBAR_CONTAINER:"sf-scheduler-toolbar-container",SCHEDULER_TOOLTIP:"sf-scheduler-tooltip",SCHEDULER_TOOLTIP_SUBJECT:"sf-scheduler-tooltip-subject",SCHEDULER_TOOLTIP_TEXT:"sf-scheduler-tooltip-text",SELECTED_CELL:"sf-selected-cell",START_DATE_CONTAINER:"sf-start-date-container",START_TIME_CONTAINER:"sf-start-time-container",START_ROW:"sf-start-row",STICKY_HEADER:"sf-sticky-header",SUBJECT:"sf-subject",SUBJECT_CONTAINER:"sf-subject-container",TABLE_CONTAINER:"sf-table-container",TABLE_WRAP:"sf-table-wrap",TEXT_CENTER:"sf-text-center",TIME:"sf-time",TIME_CELLS_WRAP:"sf-time-cells-wrap",TIME_SLOT_CLONE_CONTAINER:"sf-time-slot-clone-container",TIME_SLOTS:"sf-time-slots",TITLE_LOCATION_ROW:"sf-title-location-row",TODAY:"sf-today",TODAY_BUTTON:"sf-today-button",TOP_RESIZE_HANDLER:"sf-top-handler",UP_ARROW_ICON:"sf-up-icon",VERTICAL_RESIZE_INNER:"sf-vertical-resize",VERTICAL_VIEW:"sf-vertical-view",VIEW_BUTTON:"sf-view-button",WEEK_NUMBER:"sf-week-number",WEEK_NUMBER_WRAPPER:"sf-week-number-wrapper",WEEK_VIEW:"sf-week-view",WORK_CELLS_CONTAINER:"sf-work-cells-container",WORK_CELLS_ROW:"sf-work-cells-row",WORK_WEEK_VIEW:"sf-work-week-view",WORK_CELLS:"sf-work-cells",WORK_DAYS:"sf-work-days"},Yi=o=>{const{className:n,selectedDate:r,view:e,onSelectedDateChange:s,onViewChange:i,viewComponents:l,defaultSelectedDate:c,defaultView:f}=o,d=o.selectedDate!==void 0,h=o.view!==void 0,g=t.useMemo(()=>{const ee=d?r:c,te=ee?new Date(ee):new Date;return isNaN(te.getTime())?new Date:te},[r,c,d]),m=t.useMemo(()=>h?e:f,[h,e,f]),[E,a]=t.useState(g),[C,v]=t.useState(m),R=t.useRef(m),[j,y]=t.useState([]),[D,x]=t.useState(!1),[k,z]=t.useState(Wn.Month);t.useEffect(()=>{d&&a(g)},[g,d]),t.useEffect(()=>{h&&v(m)},[m,h]);const S=t.useCallback(ee=>{h||v(ee),i&&i({value:ee})},[i,h]);t.useEffect(()=>{R.current!==e&&e!==C&&e&&l.some(oe=>oe.name===e)&&v(e),R.current=e||m},[e,C,l,m]),t.useEffect(()=>{if(C==="Week"&&l.length>0&&!l.some(te=>te.viewType==="Week")){S(l[0].name);return}},[C,l,S]),t.useEffect(()=>{const ee=ft.findViewByNameOrType(l,C);if(ee){const te=ee.viewType==="Month"?Wn.Year:Wn.Month;z(te)}},[l,C]);const{locale:b,dir:M}=$e(),T=t.useMemo(()=>{if(!j||j.length===0)return"";const ee=ft.findViewByNameOrType(l,C);if(!ee)return"";const te=ee.component.props;return ee.viewType==="Month"?$.getMonthRangeText(E,ee.interval,te.displayDate,te.numberOfWeeks,te.dateFormat||o.dateFormat,j,b):$.formatDateRange(b,j[0],j[j.length-1])},[j,l,C,E,b,o.dateFormat]),H=ee=>{d||a(ee),s&&s({value:ee})},w=t.useCallback(()=>{const ee=[];return l.forEach(te=>{ee.push({viewType:te.viewType,name:te.name,displayName:te.displayName,component:te.component,interval:te.interval})}),ee},[l]),I=ee=>{S(ee)},Y=()=>({height:o.height,width:o.width,selectedDate:E,view:C,eventSettings:o.eventSettings,timeScale:o.timeScale,workHours:o.workHours,startHour:o.startHour,endHour:o.endHour,showWeekend:o.showWeekend,firstDayOfWeek:o.firstDayOfWeek,workDays:o.workDays,showTimeIndicator:o.showTimeIndicator,dateFormat:o.dateFormat,timeFormat:o.timeFormat,showWeekNumber:o.showWeekNumber,eventOverlap:o.eventOverlap,rowAutoHeight:o.rowAutoHeight,readOnly:o.readOnly,cell:o.cell,dateHeader:o.dateHeader,headerIndent:o.headerIndent,quickInfo:o.quickInfo,editor:o.editor,onEditorSubmit:o.onEditorSubmit,showQuickInfoPopup:o.showQuickInfoPopup,header:o.header,keyboardNavigation:o.keyboardNavigation,onDataRequest:o.onDataRequest,onSelectedDateChange:ee=>H(ee.value),onViewChange:ee=>S(ee.value),onCellClick:o.onCellClick,onCellDoubleClick:o.onCellDoubleClick,onEventClick:o.onEventClick,onEventDoubleClick:o.onEventDoubleClick,onDataChangeStart:o.onDataChangeStart,onDataChangeComplete:o.onDataChangeComplete,eventDrag:o.eventDrag,eventResize:o.eventResize,onResizeStart:o.onResizeStart,onResizing:o.onResizing,onResizeStop:o.onResizeStop,onDragStart:o.onDragStart,onDrag:o.onDrag,onDragStop:o.onDragStop,onMoreEventsClick:o.onMoreEventsClick,enableRecurrenceValidation:o.enableRecurrenceValidation,weekRule:o.weekRule}),ce=(()=>{var ve,de,N,B;const ee=ft.findViewByNameOrType(l,C);if(!ee)return{};const te=ee.component.props||{},oe=Hs(xr,Y());typeof oe.eventDrag=="boolean"?oe.eventDrag={enable:oe.eventDrag,externalDragAndDrop:!1}:oe.eventDrag={...oe.eventDrag,enable:oe.eventDrag.enable,externalDragAndDrop:oe.eventDrag.externalDragAndDrop??!1},typeof oe.eventResize=="boolean"?oe.eventResize={enable:oe.eventResize,startResizable:!0,endResizable:!0}:oe.eventResize={...oe.eventResize,enable:oe.eventResize.enable,startResizable:oe.eventResize.startResizable??!0,endResizable:oe.eventResize.endResizable??!0};const De={height:oe.height,width:oe.width,selectedDate:$.setValidDate(oe.selectedDate),view:oe.view,eventSettings:oe.eventSettings,workHours:oe.workHours,showTimeIndicator:oe.showTimeIndicator,rowAutoHeight:oe.rowAutoHeight,eventTemplate:te.eventTemplate,readOnly:te.readOnly??oe.readOnly,header:oe.header,showQuickInfoPopup:oe.showQuickInfoPopup,displayDate:$.setValidDate(te.displayDate),numberOfWeeks:te.numberOfWeeks,weekDay:te.weekDay,showTrailingAndLeadingDates:te.showTrailingAndLeadingDates,cellHeader:te.cellHeader,interval:te.interval??ee.interval,displayName:te.displayName??ee.displayName,maxEventsPerRow:te.maxEventsPerRow,dateHeader:te.dateHeader??oe.dateHeader,headerIndent:te.headerIndent??oe.headerIndent,cell:te.cell??oe.cell,timeScale:te.timeScale??oe.timeScale,startHour:te.startHour??oe.startHour,endHour:te.endHour??oe.endHour,showWeekend:te.showWeekend??oe.showWeekend,firstDayOfWeek:$.setValidFirstDayOfWeek(te.firstDayOfWeek,oe.firstDayOfWeek),workDays:te.workDays??oe.workDays,dateFormat:te.dateFormat??oe.dateFormat,timeFormat:te.timeFormat??oe.timeFormat,showWeekNumber:te.showWeekNumber??oe.showWeekNumber,eventOverlap:te.eventOverlap??oe.eventOverlap,quickInfo:te.quickInfo??oe.quickInfo,editor:te.editor??oe.editor,onEditorSubmit:oe.onEditorSubmit,onDataRequest:oe.onDataRequest,onSelectedDateChange:oe.onSelectedDateChange,onViewChange:oe.onViewChange,onCellClick:oe.onCellClick,onCellDoubleClick:oe.onCellDoubleClick,onEventClick:oe.onEventClick,onEventDoubleClick:oe.onEventDoubleClick,onDataChangeStart:oe.onDataChangeStart,onDataChangeComplete:oe.onDataChangeComplete,keyboardNavigation:oe.keyboardNavigation,eventDrag:oe.eventDrag,eventResize:oe.eventResize,onResizeStart:oe.onResizeStart,onResizing:oe.onResizing,onResizeStop:oe.onResizeStop,onDragStart:oe.onDragStart,onDrag:oe.onDrag,onDragStop:oe.onDragStop,onMoreEventsClick:oe.onMoreEventsClick,enableRecurrenceValidation:oe.enableRecurrenceValidation,handleCurrentViewChange:S,getAvailableViews:w,weekRule:oe.weekRule};return(De.startHour!=="00:00"||De.endHour!=="24:00")&&(De.startHourTuple=[Number((ve=De.startHour)==null?void 0:ve.split(":")[0]),Number((de=De.startHour)==null?void 0:de.split(":")[1])],De.endHourTuple=[Number((N=De.endHour)==null?void 0:N.split(":")[0]),Number((B=De.endHour)==null?void 0:B.split(":")[1])]),De})();t.useEffect(()=>{const ee=ft.findViewByNameOrType(l,C);if(ee){const te=$.getRenderDates(ee.viewType,E,ce);y(te)}},[E,C,l]),t.useEffect(()=>{if(!ft.findViewByNameOrType(l,C)){const te=w();if(te.length>0){const oe=te.find(De=>De.viewType==="Week")||te[0];S(oe.name)}}},[C,l,S]);const K=()=>{const ee=ft.findViewByNameOrType(l,C);return ee?ee.component:null},O=ee=>{const te=ft.findViewByNameOrType(l,C);if(!te)return;const oe={currentDate:E,viewType:te.viewType,interval:te.interval,showWeekend:ce.showWeekend,workDays:ce.workDays},De=ee==="next"?lr.navigateToNext(oe):lr.navigateToPrevious(oe);H(De)},L=()=>{O("next")},V=()=>{O("previous")},J=()=>{const ee=lr.navigateToToday();H(ee)},ue=t.useCallback(ee=>{if(ee.value){const te=Array.isArray(ee.value)?ee.value[0]:ee.value;H&&H(te),x(!1)}},[H]),F=()=>{x(!D)};return{classNames:t.useMemo(()=>{const ee=[p.CONTROL,p.SCHEDULER];return M==="rtl"&&ee.push(p.RTL),n&&ee.push(n),ee.join(" ")},[M,n]),selectedDate:E,view:C,renderDates:j,activeViewProps:ce,dateRangeText:T,showCalendar:D,calendarView:k,handleSelectedDateChange:H,handleCurrentViewChange:S,getAvailableViews:w,handleViewButtonClick:I,handlePreviousClick:V,handleNextClick:L,handleTodayClick:J,handleDateDropdownClick:F,handleCalendarChange:ue,renderCurrentView:K}},_r=(o,n,r)=>{t.useEffect(()=>{const e=s=>{var i;n&&o.current&&!o.current.contains(s.target)&&!((i=s.target)!=null&&i.closest(`.${p.POPUP}`))&&r()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n,o])},Ki="sf-hscroll",Mn="sf-rtl",Ys="sf-overlay",Xi="sf-hscroll-bar",qi="sf-hscroll-content",Ks="sf-hscroll-arrow",Xs="sf-nav-right-arrow",qs="sf-nav-left-arrow",Cr="sf-hscroll-nav",Gi="sf-scroll-right-nav",Zi="sf-scroll-left-nav",Qi="sf-scroll-device",Gs=t.memo(t.forwardRef((o,n)=>{const{className:r="",scrollStep:e=void 0,isDisabled:s=!1,children:i,...l}=o,c=t.useRef(e),f=t.useRef(Bn("hscroll")),[d,h]=t.useState(!0),[g,m]=t.useState(!1),{dir:E}=$e(),a=t.useRef(null),C=t.useRef(null),v=t.useRef(null),R=t.useRef(null),j=t.useRef(!1),y=t.useRef(null),D={scrollStep:e,isDisabled:s},x=t.useMemo(()=>({name:Ae.info.name,isDevice:Ae.isDevice,isMozilla:Ae.info.name==="mozilla"}),[]);t.useEffect(()=>{(()=>{var L;typeof e!="number"||e<0?c.current=((L=C.current)==null?void 0:L.offsetWidth)||void 0:c.current=e})()},[e]);const k=t.useCallback((O,L)=>{C.current&&(L==="add"?C.current.scrollLeft+=O:C.current.scrollLeft-=O,E==="rtl"&&C.current.scrollLeft>0&&(C.current.scrollLeft=0))},[E]),z=t.useCallback((O,L,V)=>{if(V){k(O,L);return}const ue=()=>{var ee;let F=O,q=10;(ee=a.current)!=null&&ee.classList.contains(Mn)&&x.isMozilla&&(F=-O,q=-10),F<10?cancelAnimationFrame(q):(k(q,L),O-=q,requestAnimationFrame(ue))};ue()},[x.isMozilla,k]),S=t.useCallback((O,L,V)=>{const J=a.current;let ue=L.classList;if(!ue.contains(Cr)){const F=L.closest("."+Cr);F&&(L=F)}ue=L.querySelector(`.${Ks}`).classList,J.classList.contains(Mn)&&x.isMozilla&&(O=-O),!J.classList.contains(Mn)||x.isMozilla?ue.contains(Xs)?z(O,"add",V):z(O,"",V):ue.contains(qs)?z(O,"add",V):z(O,"",V)},[x.isMozilla,z]),b=t.useCallback(O=>{if(O){const L=O.originalEvent.target,V=10,J=()=>{S(V,L,!0)};R.current=window.setInterval(()=>{J()},50)}},[S]),M=t.useCallback(O=>{if(O.key==="Enter"){const L=()=>{j.current=!0,S(10,O.target,!0)};y.current=window.setTimeout(()=>{L()},100)}},[S]),T=t.useCallback(O=>{O.key==="Enter"&&(j.current?j.current=!1:O.target.click(),clearTimeout(y.current))},[]),H=t.useCallback(()=>{clearInterval(R.current)},[]),w=t.useCallback(O=>{S(c.current,O.target,!1)},[S]),I=t.useCallback(O=>{if(O){const L=C.current;let V;typeof O.velocity=="number"&&typeof O.distanceX=="number"&&(O.velocity<=1?V=O.distanceX/(O.velocity*10):V=O.distanceX/O.velocity);let J=.5;const ue=()=>{const F=Math.sin(J);F<=0?cancelAnimationFrame(F):(O.swipeDirection==="Left"?L.scrollLeft+=V*F:O.swipeDirection==="Right"&&(L.scrollLeft-=V*F),J-=.5,requestAnimationFrame(ue))};ue()}},[]),Y=t.useCallback(O=>{if(O){const L=C.current;if(L&&typeof O.distanceX=="number"){const V=O.distanceX;O.scrollDirection==="Left"?L.scrollLeft=L.scrollLeft+V:O.scrollDirection==="Right"&&(L.scrollLeft=L.scrollLeft-V)}}},[]),Z=O=>{const L=O.target,V=L.offsetWidth;let J=L.scrollLeft;J<=0&&(J=-J),J===0?(h(!0),m(!1),H()):Math.ceil(V+J+.1)>=L.scrollWidth?(h(!1),m(!0),H()):(h(!1),m(!1))};t.useImperativeHandle(n,()=>({...D,element:a.current})),t.useEffect(()=>()=>{R.current&&clearInterval(R.current),y.current&&clearTimeout(y.current)},[]);const ce=t.useMemo(()=>({swipe:I,scroll:Y}),[I,Y]);v.current=qt(a,ce);const K=t.useMemo(()=>["sf-control","sf-lib",Ki,E==="rtl"&&Mn,x.isDevice&&Qi,s&&Ys,r].filter(Boolean).join(" "),[r,E,x.isDevice,s]);return u.jsxs("div",{ref:a,id:f.current,className:K,...l,children:[u.jsx(Dr,{direction:"left",id:f.current,isDisabled:s||d,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b}),u.jsx("div",{ref:C,className:`${Xi} sf-display-flex`,style:{overflowX:"hidden"},onScroll:Z,children:u.jsx("div",{className:qi,children:i})}),u.jsx(Dr,{direction:"right",id:f.current,isDisabled:s||g,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b})]})}));Gs.displayName="HScrollComponent";const Dr=t.memo(({direction:o,id:n,isDisabled:r,onKeyPress:e,onKeyUp:s,onMouseUp:i,onClick:l,onTapHold:c})=>{const f=o==="right",d=`sf-${n}_nav ${Cr} ${f?Gi:Zi}`,h=`${f?Xs:qs} ${Ks} sf-icons`,g=t.useRef(null),m=t.useMemo(()=>({tapHold:c,tapHoldThreshold:500}),[c]);return qt(g,m),u.jsx("div",{ref:g,className:`${d} ${r?Ys:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":r?"true":"false",tabIndex:r?-1:0,onKeyDown:e,onKeyUp:s,onMouseUp:i,onTouchEnd:i,onContextMenu:E=>E.preventDefault(),onClick:l,children:u.jsx("div",{className:h,children:f?u.jsx(ks,{}):u.jsx(_s,{})})})});Dr.displayName="NavIcon";const Ji="sf-vscroll",el="sf-rtl",Zs="sf-overlay",tl="sf-vscroll-bar",nl="sf-vscroll-content",Qs="sf-vscroll-arrow",Js="sf-nav-up-arrow",eo="sf-nav-down-arrow",vr="sf-vscroll-nav",rl="sf-scroll-up-nav",sl="sf-scroll-down-nav",ol="sf-scroll-device",to=t.memo(t.forwardRef((o,n)=>{const{className:r="",scrollStep:e=void 0,isDisabled:s=!1,children:i,...l}=o,c=t.useRef(e),f=t.useRef(Bn("vscroll")),[d,h]=t.useState(!0),[g,m]=t.useState(!1),{dir:E}=$e(),a=t.useRef(null),C=t.useRef(null),v=t.useRef(null),R=t.useRef(null),j=t.useRef(!1),y=t.useRef(null),D=t.useMemo(()=>({isDevice:Ae.isDevice}),[]),x={scrollStep:e,isDisabled:s};t.useEffect(()=>{(()=>{var V;typeof e!="number"||e<0?c.current=((V=C.current)==null?void 0:V.offsetHeight)||void 0:c.current=e})()},[e]);const k=t.useCallback((L,V)=>{C.current&&(V==="add"?C.current.scrollTop+=L:C.current.scrollTop-=L)},[]),z=t.useCallback((L,V,J)=>{if(J){k(L,V);return}const F=()=>{L<10?cancelAnimationFrame(10):(k(10,V),L-=10,requestAnimationFrame(F))};F()},[k]),S=t.useCallback((L,V,J)=>{let ue=V.classList;if(!ue.contains(vr)){const q=V.closest("."+vr);q&&(V=q)}const F=V.querySelector(`.${Qs}`);F&&(ue=F.classList),ue.contains(eo)?z(L,"add",J):ue.contains(Js)&&z(L,"",J)},[z]),b=t.useCallback(L=>{if(L){const V=L.originalEvent.target,J=10,ue=()=>{S(J,V,!0)};R.current=window.setInterval(()=>{ue()},50)}},[S]),M=t.useCallback(L=>{if(L.key==="Enter"){const V=()=>{j.current=!0,S(10,L.target,!0)};y.current=window.setTimeout(()=>{V()},100)}},[S]),T=t.useCallback(L=>{L.key==="Enter"&&(j.current?j.current=!1:L.target.click(),y.current&&clearTimeout(y.current))},[]),H=t.useCallback(()=>{clearInterval(R==null?void 0:R.current)},[]),w=t.useCallback(L=>{S(c.current,L.target,!1)},[S,c]),I=t.useCallback(L=>{L.preventDefault(),z(c.current,L.deltaY>0?"add":"",!1)},[z,c]),Y=t.useCallback(L=>{if(L&&C.current){const V=C.current;let J=0;typeof L.velocity=="number"&&typeof L.distanceY=="number"&&(L.velocity<=1?J=L.distanceY/(L.velocity*10):J=L.distanceY/L.velocity);let ue=.5;const F=()=>{const q=Math.sin(ue);q<=0?cancelAnimationFrame(q):(L.swipeDirection==="Up"?V.scrollTop+=J*q:L.swipeDirection==="Down"&&(V.scrollTop-=J*q),ue-=.02,requestAnimationFrame(F))};F()}},[]),Z=t.useCallback(L=>{if(L){const V=C.current;if(V&&typeof L.distanceY=="number"){const J=L.distanceY;L.scrollDirection==="Up"?V.scrollTop=V.scrollTop+J:L.scrollDirection==="Down"&&(V.scrollTop=V.scrollTop-J)}}},[]),ce=t.useCallback(L=>{const V=L.target,J=V.offsetHeight;let ue=V.scrollTop;ue<=0&&(ue=-ue),ue===0?(h(!0),m(!1),H()):Math.ceil(J+ue+.1)>=V.scrollHeight?(h(!1),m(!0),H()):(h(!1),m(!1))},[H]);t.useImperativeHandle(n,()=>({...x,element:a.current})),t.useEffect(()=>()=>{R.current&&clearInterval(R.current),y.current&&clearTimeout(y.current)},[]);const K=t.useMemo(()=>({scroll:Z,swipe:Y}),[Y,Z]);v.current=qt(a,K);const O=t.useMemo(()=>["sf-control","sf-lib",Ji,E==="rtl"&&el,D.isDevice&&ol,s&&Zs,r].filter(Boolean).join(" "),[r,E,D.isDevice,s]);return u.jsxs("div",{ref:a,id:l.id||f.current,className:O,...l,onWheel:I,children:[u.jsx(yr,{direction:"up",id:f.current,isDisabled:s||d,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b}),u.jsx("div",{ref:C,className:tl,tabIndex:-1,style:{overflow:"hidden"},onScroll:ce,children:u.jsx("div",{className:nl,children:i})}),u.jsx(yr,{direction:"down",id:f.current,isDisabled:s||g,onKeyPress:M,onKeyUp:T,onMouseUp:H,onClick:w,onTapHold:b})]})}));to.displayName="VScrollComponent";const yr=t.memo(({direction:o,id:n,isDisabled:r,onKeyPress:e,onKeyUp:s,onMouseUp:i,onClick:l,onTapHold:c})=>{const f=o==="down",d=`sf-${n}_nav ${vr} ${f?sl:rl}`,h=`${f?eo:Js} ${Qs} sf-icons`,g=t.useRef(null),m=t.useMemo(()=>({tapHold:c,tapHoldThreshold:500}),[c]);return qt(g,m),u.jsx("div",{ref:g,className:`${d} ${r?Zs:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":r?"true":"false",tabIndex:r?-1:0,onKeyDown:e,onKeyUp:s,onMouseUp:i,onTouchEnd:i,onContextMenu:E=>E.preventDefault(),onClick:l,children:u.jsx("div",{className:h,children:f?u.jsx(qn,{}):u.jsx(Vs,{})})})});yr.displayName="NavIcon";const il="sf-toolbar-items",ll="sf-toolbar-multirow-items",no=t.memo(o=>{const{children:n,onOverflowChange:r}=o,e=t.useRef(null);return t.useEffect(()=>{const s=t.Children.count(n);(Be(e.current)||e.current!==s)&&(e.current=t.Children.count(n),r())},[r,n]),u.jsx("div",{className:`${il} ${ll}`,children:n})});no.displayName="ToolbarMultiRow";const gs="sf-toolbar-items",al="sf-hscroll-bar",cl="sf-vscroll-bar",ul="sf-hscroll-content",dl="sf-vscroll-content",ro=t.memo(t.forwardRef((o,n)=>{const{toolbarRef:r,orientation:e,scrollStep:s,children:i,className:l,onOverflowChange:c}=o,f=t.useRef(null),d=t.useRef(null),h=t.useRef(null),[g,m]=t.useState(!1),[E,a]=t.useState(s),C=t.useCallback(x=>x.querySelector("."+(e===et.Vertical?dl:ul)),[e]),v=t.useCallback(()=>{let x=!1;if(r.current&&Nr(r.current)){let k=r.current.querySelector(`.${gs}`);k=g?C(k):k;const z=e===et.Vertical,S=z?r.current.offsetHeight:r.current.offsetWidth;(z?k.scrollHeight:k.scrollWidth)>S?x=!0:x=!1}return x},[g,e,C]),R=t.useCallback((x=!0)=>{if(r.current){h.current&&clearTimeout(h.current);const k=v();k!==g&&m(k),k&&x&&(h.current=window.setTimeout(()=>{if(r.current){const z=e===et.Vertical?`.${cl}`:`.${al}`,S=r.current.querySelector(z);S&&a(e===et.Vertical?S.offsetHeight:S.offsetWidth)}},500))}},[v,e,g]),j=t.useRef(R);t.useEffect(()=>{j.current=R},[R]);const y=t.useCallback(()=>{j.current()},[]);t.useEffect(()=>{if(r.current){let x=!0;f.current=new ResizeObserver(()=>{if(x){x=!1;return}j.current()}),f.current.observe(r.current)}return()=>{var x;(x=f.current)==null||x.disconnect(),f.current=null}},[]),t.useEffect(()=>{const x=t.Children.count(i);(Be(d.current)||d.current!==x)&&(d.current=t.Children.count(i),c(),j.current(!1))},[i,c]),t.useEffect(()=>{c()},[g,c]),t.useImperativeHandle(n,()=>({refreshOverflow:y}),[y]);const D=t.useMemo(()=>{const x=[gs];return l&&x.push(l),x.join(" ")},[l]);return g?e===et.Horizontal?u.jsx(Gs,{scrollStep:E,className:D,children:i}):u.jsx(to,{scrollStep:E,className:D,children:i}):u.jsx("div",{className:D,children:i})}));ro.displayName="ToolbarScrollable";const fl="sf-toolbar-item",zt=t.memo(t.forwardRef((o,n)=>{const{className:r="",children:e,...s}=o,i=t.useRef(null),l=t.useMemo(()=>{const c=[fl];return r&&c.push(r),c.join(" ")},[r]);return t.useImperativeHandle(n,()=>({element:i.current})),u.jsx("div",{ref:i,className:l,...s,children:e})}));zt.displayName="ToolbarItem";const ml="sf-toolbar-item",pl="sf-toolbar-separator",so=t.memo(t.forwardRef((o,n)=>{const{className:r="",...e}=o,s=t.useRef(null),i=t.useMemo(()=>{const l=[ml,pl];return r&&l.push(r),l.join(" ")},[r]);return t.useImperativeHandle(n,()=>({element:s.current})),u.jsx("div",{ref:s,className:i,...e})}));so.displayName="ToolbarSeparator";const hl="sf-toolbar-item",El="sf-toolbar-spacer",Pr=t.memo(t.forwardRef((o,n)=>{const{className:r="",...e}=o,s=t.useRef(null),i=t.useMemo(()=>{const l=[hl,El];return r&&l.push(r),l.join(" ")},[r]);return t.useImperativeHandle(n,()=>({element:s.current})),u.jsx("div",{ref:s,className:i,...e})}));Pr.displayName="ToolbarSpacer";const Hn="sf-toolbar-items",gl="sf-popup-up-icon",Tl="sf-popup-down-icon",Cl="sf-popup-open",Dl="sf-toolbar-hor-nav",vl="sf-nav-active",yl="sf-toolbar-popup-items",bl="sf-hidden-popup",Rl="sf-toolbar-extended-items",wl="sf-extended-nav",Nl="sf-toolbar-popup-overflow",jn="sf-toolbar-separator",pn="sf-toolbar-spacer",dr="sf-toolbar-item",Sl="sf-toolbar-popup-icon sf-icon",oo=t.memo(t.forwardRef((o,n)=>{const{toolbarRef:r,orientation:e,overflowMode:s,isToolbarRefReady:i,children:l,className:c,collision:f,isPopupVisible:d,onPopupOpenChange:h,onOverflowChange:g}=o,m=t.useCallback(Q=>t.Children.toArray(Q).filter(le=>t.isValidElement(le)&&(le.type===zt||le.type===so||le.type===Pr)).map((le,fe)=>t.cloneElement(le,{key:le.key||fe})),[]),E=t.useMemo(()=>m(l),[l,m]),a=t.useRef(null),C=t.useRef(t.Children.count(l)),v=t.useRef([...m(l)]),R=t.useRef([]),j=t.useRef(null),y=t.useRef(null),{dir:D}=$e(),[x,k]=t.useState([...v.current]),[z,S]=t.useState([]),[b,M]=t.useState(!1),[T,H]=t.useState(d),[w,I]=t.useState(!1),[Y,Z]=t.useState({maxHeight:""}),ce=t.useCallback(Q=>{let le=0;return Q&&(le=e===et.Vertical?Q.offsetHeight:Q.offsetWidth),le},[e]),K=t.useCallback(Q=>{let le=0;return Q&&(le=e===et.Vertical?Q.offsetTop:Q.offsetLeft),le},[e]),O=t.useCallback(()=>j.current?ce(j.current):e===et.Horizontal?40:48,[ce,e]),L=t.useCallback(()=>r.current?r.current.offsetHeight:0,[s]),V=t.useCallback(()=>{let Q=0;if(r.current){const le=window.getComputedStyle(r.current),fe=parseFloat(le.width),A=parseFloat(le.borderRightWidth);Q=fe+A*2}return Q},[]),J=t.useCallback(()=>{var Q;if(r.current&&((Q=y.current)!=null&&Q.element)){const le=y.current.element,fe=r.current,A=le.offsetTop+le.offsetHeight+(fe.getBoundingClientRect().top||0),ne=window.scrollY||0;if(e===et.Horizontal&&window.innerHeight+ne<A&&fe.offsetTop<le.offsetHeight&&s===ze.Popup){let U=le.offsetHeight-(A-window.innerHeight-ne+5);for(let G=0;G<le.childElementCount;G++){const ge=le.children[parseInt(G.toString(),10)];if(ge.offsetTop+ge.offsetHeight>U){U=ge.offsetTop;break}}Z(G=>({...G,maxHeight:`${U}px`}))}else if(e===et.Vertical){const U=fe.getBoundingClientRect();Z(G=>({...G,maxHeight:`${U.top+fe.offsetHeight}px`,bottom:"0"}))}}},[s,e]),ue=t.useCallback(()=>{H(!1),Z({maxHeight:""})},[]),F=t.useCallback(Q=>{if(r.current&&Q&&Nr(r.current)){const le=[...x],fe=[...z],A=Array.from(Q.children),ne=ce(r.current),U=window.getComputedStyle(Q),G=parseInt(e===et.Vertical?U.paddingTop:U.paddingLeft,10);if(D==="rtl"&&e===et.Horizontal){const ge=parseInt(U.gap,10)||0,pe=A.length;let ye=0;A.forEach(_=>{ye+=ce(_)}),ye+=G*2+ge*(pe-1);const Ie=ye>ne,me=fe.length>0||Ie?O():0,we=ne-me;if(ye>we){let _=ye;for(let X=pe-1;X>=0;X--){const re=A[parseInt(X.toString(),10)];if(_>we||re.classList.contains(jn)){const he=ce(re);_-=he+(X===0?0:ge),fe.unshift(le[parseInt(X.toString(),10)]),le.pop()}else break}}}else{let ge=ce(A[A.length-1]),pe=K(A[A.length-1]);const ye=pe+ge+G>ne,Ie=fe.length>0||ye?O():0,me=ne-Ie;for(let we=A.length-1;we>=0;we--){const _=A[parseInt(we.toString(),10)];if(ge=ce(_),pe=K(_),pe+ge+G>me||_.classList.contains(jn))fe.unshift(le[parseInt(we.toString(),10)]),le.pop();else break}}v.current=le,R.current=fe}},[e,ce,K,O,x,z,D]),q=t.useCallback(()=>{x!==v.current&&(k(Q=>Q.length!==v.current.length?[...v.current]:Q),S(Q=>Q.length!==R.current.length?[...R.current]:Q))},[x]),ee=t.useCallback(()=>{if(r.current&&!w){const Q=r.current.querySelector(`.${Hn}`);s===ze.Popup&&H(le=>le&&!1),F(Q),q(),I(R.current.length>0)}},[F,w,q,s]),te=t.useRef(ee);t.useLayoutEffect(()=>{te.current=ee},[ee]);const oe=t.useCallback(Q=>{let le=0;if(Q){const fe=Array.from(Q.children),A=window.getComputedStyle(Q),ne=parseInt(A.gap,10)||0,U=parseInt(e===et.Vertical?A.paddingTop:A.paddingLeft,10);fe.forEach(G=>{le+=(G.classList.contains(pn)?0:ce(G))+ne}),fe.length>0&&(le-=ne),le+=U*2}return le},[ce,e]),De=t.useCallback((Q,le)=>{var ge;const fe=[].slice.call(le.querySelectorAll(`.${dr}`)),A=[...x],ne=[...z],U=(ge=r.current)==null?void 0:ge.querySelector(`.${Hn}`),G=parseInt(window.getComputedStyle(U).gap,10)||0;for(let pe=0;pe<fe.length;pe++){const ye=fe[parseInt(pe.toString(),10)],Ie=ye.classList.contains(pn),me=A.length>0,we=(Ie?0:ce(ye))+(me?G:0);let _=Q>we;if(Ie||ye.classList.contains(jn)){let X=we,re=pe+1;for(;re<fe.length;){const he=fe[parseInt(re.toString(),10)],Se=he.classList.contains(pn);if(X+=(Se?0:ce(he))+(me?G:0),!he.classList.contains(pn)&&!he.classList.contains(jn))break;re++}_=Q>X}if(_)A.push(ne[0]),ne.shift(),Q-=we;else break}v.current=A,R.current=ne},[ce,x,z]),ve=t.useCallback(()=>{var Q;if(r.current&&((Q=y.current)!=null&&Q.element)){const le=r.current.querySelector(`.${Hn}`),fe=ce(le),A=oe(le),ne=fe-A,U=parseInt(window.getComputedStyle(le).gap,10)||0,G=ce(y.current.element.querySelector(`.${dr}`))+U,ge=ne>G,pe=[].slice.call(y.current.element.querySelectorAll(`.${dr}`));let ye=0;pe.forEach(me=>{ye+=me.classList.contains(pn)?0:ce(me)}),ye+=pe.length*U,ne+O()>ye?(v.current=[...E],R.current=[]):ge&&De(ne,y.current.element)}},[ce,oe,De]),de=t.useCallback(()=>{s===ze.Popup&&T&&H(!1)},[s,T]),N=()=>{H(Q=>!Q)},B=t.useCallback(()=>{ee()},[ee]);t.useEffect(()=>{if(s===ze.Popup||s===ze.Extended){const Q=le=>{if(s===ze.Popup&&y.current&&y.current.element){const fe=!gt(le.target,".sf-popup"),A=y.current.element.classList.contains(Cl);fe&&A&&H(!1)}};return document.addEventListener("click",Q),document.addEventListener("scroll",Q,!0),()=>{document.removeEventListener("click",Q),document.removeEventListener("scroll",Q,!0)}}},[s]),t.useEffect(()=>{h(T)},[T,h]),t.useEffect(()=>{H(Q=>Q!==d?d:Q)},[d]),t.useEffect(()=>{g()},[x,g]),t.useLayoutEffect(()=>{r.current&&i&&!b&&(te.current(),M(!0))},[i,b]),t.useEffect(()=>{if(r.current){let Q=!0;return a.current||(a.current=new ResizeObserver(()=>{if(Q){Q=!1;return}te.current()}),a.current.observe(r.current)),()=>{var le;(le=a.current)==null||le.disconnect(),a.current=null}}},[]),t.useLayoutEffect(()=>{w&&(ve(),q(),H(Q=>Q&&R.current.length<=0?!1:Q),I(!1))},[w,ve,q]),t.useLayoutEffect(()=>{if(!b)return;const Q=E.length;if(C.current!==Q){C.current=Q,v.current=[...E],R.current=[],k([...v.current]),S([]),H(!1),M(!1);return}const fe=new Map(E.map(ne=>[ne.key,ne])),A=ne=>ne.map(U=>fe.get(U.key)||U);k(A),S(A)},[E,b]),t.useImperativeHandle(n,()=>({refreshOverflow:B}),[B]);const ie=t.useMemo(()=>{const Q=[Hn];return z.length>0&&Q.push(Nl),Q.join(" ")},[z]),se=t.useMemo(()=>{const Q=[Dl];return s===ze.Extended&&Q.push(wl),T&&Q.push(vl),Q.join(" ")},[s,T]),xe=t.useMemo(()=>{const Q=[yl];return s===ze.Extended&&Q.push(Rl),c&&Q.push(c),w&&Q.push(bl),Q.join(" ")},[s,c,w]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:ie,children:x}),z.length>0&&u.jsx("div",{ref:j,className:se,tabIndex:0,role:"button","aria-haspopup":"true","aria-label":"overflow","aria-expanded":T?"true":"false",onClick:N,children:u.jsx("div",{className:`${T?gl:Tl} ${Sl}`,children:T?u.jsx(Vs,{}):u.jsx(qn,{})})}),z.length>0&&u.jsx(At,{ref:y,className:xe,relateTo:r.current,offsetY:e===et.Vertical?0:L(),open:T,onOpen:J,onClose:ue,targetType:"container",collision:{Y:f?st.None:st.None,X:st.None},position:D==="rtl"?{X:"left",Y:"top"}:{X:"right",Y:"top"},width:s===ze.Extended&&e===et.Horizontal?V():void 0,offsetX:s===ze.Extended&&e===et.Horizontal?0:void 0,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},style:Y,onClick:de,children:z})]})}));oo.displayName="ToolbarPopup";var ze;(function(o){o.Scrollable="Scrollable",o.Popup="Popup",o.MultiRow="MultiRow",o.Extended="Extended"})(ze||(ze={}));const xl="sf-toolbar",Al="sf-toolbar-vertical",Ol="sf-toolbar-items",Ll="sf-rtl",Ts="sf-hscroll-nav",hn="sf-toolbar-hor-nav",fr="sf-toolbar-popup-items",Il="sf-toolbar-extended",kl="sf-toolbar-multirow",_l="sf-tbar-extended",Pl="sf-toolbar-popup",io=t.memo(t.forwardRef((o,n)=>{const{keyboardNavigation:r=!0,children:e,className:s="",collision:i=!0,orientation:l=et.Horizontal,overflowMode:c=ze.Scrollable,scrollStep:f=void 0,...d}=o,h=t.useRef(null),g=t.useRef({toolbar:[],popup:[]}),m=t.useRef(null),E=t.useRef(null),a=t.useRef(null),{dir:C}=$e(),[v,R]=t.useState(!1),[j,y]=t.useState(!1),D=t.useCallback(F=>F.hasAttribute("disabled")||F.getAttribute("aria-disabled")==="true"||F.classList.contains("sf-disabled"),[]),x=t.useCallback((F,q,ee)=>{if(!F.length)return-1;const te=F.length;let oe=q,De=0;for(;De<te;){if(oe=(oe+ee+te)%te,!D(F[oe]))return oe;De++}return-1},[D]),k=t.useCallback(()=>{if(r&&h.current){const F=te=>h.current?Array.from(h.current.querySelectorAll(`.${te} .sf-btn`)):[];g.current.toolbar=F(Ol),(c===ze.Extended||c===ze.Popup)&&(g.current.popup=F(fr));let q=0;m.current&&(q=g.current.toolbar.indexOf(m.current),q=q===-1?0:q);const ee=[...g.current.toolbar,...g.current.popup];q>=0&&q<ee.length&&D(ee[q])&&(q=x(ee,-1,1)),ee.forEach((te,oe)=>{te.tabIndex=oe===q?0:-1,oe===q&&(m.current=te)})}},[r,c,D,x]),z=t.useCallback(F=>{const q=!!gt(F,"."+fr);return{isToolbar:!q,items:q?g.current.popup:g.current.toolbar,currentIndex:q?g.current.popup.indexOf(F):g.current.toolbar.indexOf(F)}},[]),S=t.useCallback(F=>!Be(gt(F,"."+fr)),[]),b=t.useCallback(F=>!Be(gt(F,"."+hn)),[]),M=t.useCallback((F,q)=>{const ee=q?g.current.toolbar:g.current.popup;if(F>-1&&F<ee.length){ee.forEach(oe=>{oe.tabIndex=-1});const te=ee[parseInt(F.toString(),10)];te.tabIndex=0,te.focus(),q&&(m.current=te)}},[]),T=t.useCallback((F,q)=>{const{isToolbar:ee,items:te,currentIndex:oe}=z(F);if(!te.length)return;let De;switch(q){case"next":De=x(te,oe,1);break;case"previous":De=x(te,oe,-1);break;case"first":De=x(te,-1,1);break;case"last":De=x(te,te.length,-1);break}De!==-1&&M(De,ee)},[z,M,x]),H=t.useCallback((F,q)=>{if(l===et.Horizontal){const ee=F.classList.contains(hn),te=F.classList.contains(Ts);if(q==="ArrowRight"&&h.current===F){M(0,!0);return}(q==="ArrowRight"||q==="ArrowLeft")&&!ee&&!te&&T(F,q==="ArrowRight"?"next":"previous")}},[M,T,l]),w=t.useCallback((F,q)=>{const ee=l===et.Vertical,te=S(F),oe=b(F);q==="ArrowUp"&&!oe&&(ee||te)?T(F,"previous"):q==="ArrowDown"&&(oe&&j&&g.current.popup.length>0?M(0,!1):(ee||te)&&T(F,"next"))},[S,b,j,M,T,l]),I=t.useCallback((F,q)=>{T(F,q==="Home"?"first":"last")},[T]),Y=t.useCallback(F=>{const q=F.classList.contains(hn),ee=F.classList.contains(Ts),te=h.current;if(!ee&&!q&&te===F&&g.current.toolbar)if(m.current&&!D(m.current))m.current.focus();else{const oe=x(g.current.toolbar,-1,1);oe!==-1&&M(oe,!0)}},[M,D,x]),Z=t.useCallback(F=>{F.classList.contains(hn)&&y(ee=>!ee)},[]),ce=t.useCallback(()=>{c===ze.Popup&&j&&y(!1)},[j,c]),K=t.useCallback(F=>{if(!h.current||!r||["INPUT","TEXTAREA","SELECT"].includes(F.target.tagName))return;const q=F.target;F.preventDefault();const te={ArrowRight:()=>H(q,F.key),ArrowLeft:()=>H(q,F.key),ArrowUp:()=>w(q,F.key),ArrowDown:()=>w(q,F.key),Home:()=>I(q,F.key),End:()=>I(q,F.key),Tab:()=>Y(q),Enter:()=>Z(q),Escape:()=>ce()}[F.key];te&&te()},[r,H,w,I,Y,Z,ce]),O=t.useCallback(F=>{if(!r||["INPUT","TEXTAREA","SELECT"].includes(F.target.tagName))return;const q=c===ze.Popup&&j;F.key==="Tab"&&F.target.classList.contains(hn)&&q&&y(!1),(F.key==="ArrowDown"||F.key==="ArrowUp"||F.key==="End"||F.key==="Home")&&F.preventDefault()},[r,c,j]),L=t.useCallback(F=>{y(F)},[]),V=t.useCallback(()=>{c===ze.Scrollable&&E.current?E.current.refreshOverflow():(c===ze.Popup||c===ze.Extended)&&a.current&&a.current.refreshOverflow()},[c]);t.useLayoutEffect(()=>{Ot("toolbar"),R(!0)},[]);const J=t.useMemo(()=>{const F=["sf-control",xl,"sf-lib"];switch(C==="rtl"&&F.push(Ll),c){case ze.MultiRow:F.push(kl);break;case ze.Popup:F.push(Pl);break;case ze.Extended:F.push(Il),j&&F.push(_l);break}return l===et.Vertical&&F.push(Al),s&&F.push(s),F.join(" ")},[s,C,l,j,c]),ue={keyboardNavigation:r,collision:i,orientation:l,overflowMode:c,scrollStep:f};return t.useImperativeHandle(n,()=>({...ue,refreshOverflow:V,element:h.current})),u.jsx("div",{ref:h,className:J,role:"toolbar","aria-orientation":l.toLowerCase(),onKeyDown:O,onKeyUp:K,...d,children:(()=>{switch(c){case ze.Scrollable:return u.jsx(ro,{ref:E,toolbarRef:h,orientation:l,scrollStep:f,onOverflowChange:k,className:s,children:e},`scrollable-${l}-toolbar`);case ze.MultiRow:return u.jsx(no,{onOverflowChange:k,children:e});case ze.Popup:case ze.Extended:return u.jsx(oo,{ref:a,toolbarRef:h,isToolbarRefReady:v,orientation:l,overflowMode:c,collision:i,isPopupVisible:j,onPopupOpenChange:L,onOverflowChange:k,className:s,children:e},`${c===ze.Popup?"popup":"extended"}-${l}-toolbar`)}})()})}));io.displayName="Toolbar";const lo=t.forwardRef((o,n)=>{var N,B,ie;const{children:r,className:e="",icon:s,iconPosition:i=Xe.Left,items:l=[],popupWidth:c="auto",animation:f={show:{name:"SlideDown",duration:100,timingFunction:"ease"},hide:{name:"SlideUp",duration:100,timingFunction:"ease"}},disabled:d=!1,lazyOpen:h=!1,itemTemplate:g,target:m,relateTo:E,color:a,variant:C,size:v=Yt.Medium,onClose:R,onOpen:j,onSelect:y,...D}=o,x=t.useRef(null),k=t.useRef(null),z=t.useRef(null),S=t.useRef([]),[b,M]=t.useState(null),[T,H]=t.useState(!1),[w,I]=t.useState(l),{dir:Y}=$e(),[Z,ce]=t.useState(!1);t.useEffect(()=>{ce(!0)},[]);const K=t.useRef(!0),O=t.useCallback((se,xe)=>{se.disabled||(H(!1),y&&y({event:xe,item:se}))},[y]),L=(se,xe)=>{K&&xe(Q=>se.length!==Q.length||se.some((fe,A)=>{const ne=Q[A];return fe.id!==(ne==null?void 0:ne.id)||fe.text!==(ne==null?void 0:ne.text)||fe.url!==(ne==null?void 0:ne.url)||fe.disabled!==(ne==null?void 0:ne.disabled)||typeof fe.icon=="string"?fe.icon!==(ne==null?void 0:ne.icon):!t.isValidElement(fe.icon)})?se:Q)};t.useEffect(()=>(L(l,I),()=>{K.current=!1}),[l]),t.useEffect(()=>{Ot("dropDownButton")},[]);const V=t.useMemo(()=>w.map((se,xe)=>!se.disabled&&!se.hasSeparator?xe:-1).filter(se=>se>=0),[w]),J=t.useCallback((se,xe)=>{const Q=V.length;if(!Q)return-1;const le=V.indexOf(se);if(le<0)return V[xe?0:Q-1];const fe=(le+(xe?1:-1)+Q)%Q;return V[fe]},[V]),ue=t.useCallback(se=>se!=null&&V.includes(se)?se:null,[V]),F=t.useCallback(se=>{var Q;const xe=ue(se);M(xe),xe!=null&&((Q=S.current[xe])==null||Q.focus())},[ue]);t.useEffect(()=>{M(se=>ue(se))},[w,ue]),t.useEffect(()=>{const se=Q=>{var ne,U;const le=(ne=x.current)==null?void 0:ne.element,fe=(U=k.current)==null?void 0:U.element,A=Q.target;le&&fe&&!le.contains(A)&&!fe.contains(A)&&(H(!1),R&&T&&R(Q))},xe=Q=>{var le,fe;((Q.altKey||Q.metaKey)&&Q.key==="ArrowUp"||Q.key==="Escape"||Q.key==="Esc")&&(Q.preventDefault(),Q.stopPropagation(),H(!1),R==null||R(Q),(fe=(le=x.current)==null?void 0:le.element)==null||fe.focus())};return T&&(document.addEventListener("mousedown",se),document.addEventListener("keydown",xe)),()=>{document.removeEventListener("mousedown",se),document.removeEventListener("keydown",xe)}},[T,R]);const q={iconPosition:i,icon:s,target:m,popupWidth:c,items:l,lazyOpen:h,relateTo:E,itemTemplate:g,color:a,variant:C,size:v},ee=((N=f.show)==null?void 0:N.name)!==void 0?{name:(B=f.show)==null?void 0:B.name,duration:f.show.duration,timingFunction:f.show.timingFunction}:null,te=se=>{var xe,Q;if(T)H(!1),R&&R(se);else{if(ee){const fe=Zt(ee);if(fe.animate){const A=(Q=(xe=k.current)==null?void 0:xe.element)==null?void 0:Q.children[0];A&&fe.animate(A,{begin:ne=>{const U=ne==null?void 0:ne.element;if(U&&U.parentElement){const G=U.parentElement,ge=G.style.display;G.style.display="block",G.style.maxHeight=G.offsetHeight+"px",G.style.display=ge}}})}}H(!0),j&&j(se);const le=ue(b);F(le)}};t.useImperativeHandle(n,()=>{var se;return{...q,toggle:te,element:(se=x.current)==null?void 0:se.element}},[q]);const oe=t.useCallback(se=>{var xe,Q,le,fe;switch(se.key){case"ArrowDown":{if(se.preventDefault(),se.stopPropagation(),se.altKey||se.metaKey)te(se);else{const A=J(b??-1,!0);F(A)}break}case"ArrowUp":{if(se.preventDefault(),se.stopPropagation(),se.altKey||se.metaKey)H(!1),R==null||R(se),(Q=(xe=x.current)==null?void 0:xe.element)==null||Q.focus();else{const A=J(b??-1,!1);F(A)}break}case"Home":{T&&(se.preventDefault(),F(V[0]??null));break}case"End":{T&&(se.preventDefault(),F(V[V.length-1]??null));break}case"Enter":case" ":{if(se.preventDefault(),T){const A=ue(b);A!=null&&O(w[A],se)}else te(se);break}case"Escape":case"Esc":{se.preventDefault(),T&&(H(!1),R==null||R(se),(fe=(le=x.current)==null?void 0:le.element)==null||fe.focus());break}}},[T,b,V,J,ue,te,H,R,x,F,O,w]),De=t.useCallback(se=>{if(g)return g(se);const xe=u.jsxs(u.Fragment,{children:[se.icon&&u.jsx("span",{className:"sf-menu-icon",children:typeof se.icon=="string"?u.jsx("span",{className:se.icon}):se.icon}),u.jsx("span",{children:se.text})]});return se.url?u.jsx("a",{href:se.url,className:"sf-menu-link",children:xe}):xe},[g]),ve=t.useCallback((se,xe)=>{xe.stopPropagation();const Q=xe.currentTarget,le=S.current.findIndex(fe=>fe===Q);F(le),O(se,xe)},[O,F]),de=t.useCallback(()=>u.jsx("ul",{role:"menu",tabIndex:0,"aria-label":"dropdown menu",ref:z,onKeyDown:oe,onMouseDown:se=>se.preventDefault(),children:w.map((se,xe)=>{const Q=b===xe,le=`sf-item sf-ellipsis ${se.hasSeparator?"sf-separator":""} ${se.disabled?"sf-disabled":""} ${Q?"sf-focused":""}`;return u.jsx("li",{ref:fe=>{S.current[xe]=fe},className:le,role:se.hasSeparator?"separator":"menuitem","aria-label":se.text,"aria-disabled":se.disabled?"true":"false",onClick:se.disabled||se.hasSeparator?void 0:fe=>ve(se,fe),children:!se.hasSeparator&&De(se)},se.id||`item-${xe}`)})}),[w,De,ve,b,F,oe]);return u.jsxs(u.Fragment,{children:[u.jsx(Ze,{ref:x,className:`${e} sf-dropdown-btn sf-drp-btn-${v.toLowerCase().substring(0,2)} ${T?"sf-active":""}`,icon:s,color:a,dropIcon:!0,variant:C,size:v,iconPosition:i,disabled:d,onKeyDown:oe,onClick:se=>{se.preventDefault(),te(se)},"aria-haspopup":"true","aria-expanded":T?"true":"false",...D,children:r}),Z&&(T||!h)&&typeof document<"u"&&Xt.createPortal(u.jsx(At,{open:T,ref:k,targetRef:m||x.current,relateTo:E||((ie=x.current)==null?void 0:ie.element),position:{X:"left",Y:"bottom"},animation:f,collision:Y==="rtl"?{X:st.Fit,Y:st.Flip}:{X:st.Flip,Y:st.Flip},width:c,className:`sf-dropdown-popup sf-drp-btn-${v.toLowerCase().substring(0,2)} ${c!=="auto"?"sf-dropdown-popup-width":""}`,onClose:()=>{var se;H(!1),(se=x.current)!=null&&se.element&&x.current.element.focus()},onOpen:()=>{var se;(se=z.current)==null||se.focus()},children:de()}),document.body)]})});t.memo(lo);const ao=o=>{const{onClick:n,ariaLabel:r,title:e,disabled:s=!1,icon:i=u.jsx(Wo,{}),text:l,color:c,variant:f,className:d}=o,{locale:h}=$e(),{getString:g}=tt(h||"en-US");return Ae.isDevice?u.jsx(Ze,{icon:i,color:c||Tt.Secondary,variant:f||qe.Standard,className:d||p.TODAY_BUTTON,onClick:n,"aria-label":r||g("today"),title:e||g("today"),disabled:s}):u.jsx(Ze,{icon:i,variant:f||qe.Outlined,color:c||Tt.Secondary,className:d||p.TODAY_BUTTON,onClick:n,"aria-label":r||g("today"),title:e,disabled:s,children:l||g("today")})},co=o=>{const{onClick:n,ariaLabel:r,title:e,disabled:s=!1,icon:i=u.jsx(_s,{}),color:l,variant:c,className:f}=o,{locale:d}=$e(),{getString:h}=tt(d||"en-US");return u.jsx(Ze,{className:f||p.PREVIOUS_ICON,icon:i,color:l||Tt.Secondary,variant:c||qe.Standard,onClick:n,"aria-label":r||h("previous"),title:e,disabled:s})},uo=o=>{const{onClick:n,ariaLabel:r,title:e,disabled:s=!1,icon:i=u.jsx(ks,{}),color:l,variant:c,className:f}=o,{locale:d}=$e(),{getString:h}=tt(d||"en-US");return u.jsx(Ze,{className:f||p.NEXT_ICON,icon:i,color:l||Tt.Secondary,variant:c||qe.Standard,onClick:n,"aria-label":r||h("next"),title:e,disabled:s})},Ml=(o,n)=>{const{onClick:r,ariaLabel:e,title:s,disabled:i=!1,dateRangeContent:l,showCalendar:c=!1,ariaExpanded:f,color:d,variant:h,icon:g=u.jsx(qn,{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true"}),onKeyDown:m,className:E}=o;return u.jsx(Ze,{ref:n,onClick:a=>{a.stopPropagation(),r==null||r(a)},"aria-haspopup":"dialog","aria-label":e,"aria-expanded":f!==void 0?f:c,className:E||p.DATEPICKER_BUTTON,color:d||Tt.Secondary,variant:h||qe.Standard,iconPosition:Xe.Right,title:s,disabled:i,onKeyDown:m,icon:g,children:l})},Mr=t.forwardRef(Ml);Mr.displayName="DateRangeButton";const fo=o=>{var g;const{items:n,currentView:r,onSelect:e,ariaLabel:s,title:i,disabled:l=!1,className:c,variant:f=qe.Outlined,color:d=Tt.Secondary}=o,h=((g=n.find(m=>m.id===r))==null?void 0:g.text)||r;return u.jsx("div",{onClick:m=>m.stopPropagation(),children:u.jsx(lo,{items:n,variant:f,className:c||p.VIEW_BUTTON,color:d,onSelect:e,"aria-label":s,title:i,disabled:l,children:h})})};ao.displayName="TodayButton";co.displayName="PreviousButton";uo.displayName="NextButton";fo.displayName="ViewButton";const Hl=({view:o,availableViews:n,onViewButtonClick:r,onPreviousClick:e,onNextClick:s,onTodayClick:i,onDateDropdownClick:l,dateRangeText:c,showCalendar:f=!1,selectedDate:d=new Date,firstDayOfWeek:h=0,calendarView:g=Wn.Month,handleCalendarChange:m,renderDates:E,customizeHeader:a})=>{var H,w;const C=t.useRef(null),v=t.useRef(null);_r(v,!!f,()=>{f&&l&&l()});const R=(n||[]).map(I=>({id:I.name,text:I.displayName})),j=t.useCallback(I=>{var Z;const Y=(Z=I.item)==null?void 0:Z.id;Y&&r(Y)},[r]),y=R.map(I=>`${I.id}:${I.text}`).join("|"),x=E&&E.length>=2?`${(H=E[0])==null?void 0:H.toDateString()} - ${(w=E[E.length-1])==null?void 0:w.toDateString()}`:c;let k=c;const z=I=>[I.today,I.previous,I.next,I.dateRange,u.jsx(Pr,{},"spacer"),I.viewSwitcher].filter(Boolean),S=I=>{var Y;return{today:(I==null?void 0:I.todayProps)!==null&&u.jsx(zt,{children:u.jsx(ao,{onClick:i,...(I==null?void 0:I.todayProps)||{}})},"today"),previous:(I==null?void 0:I.previousProps)!==null&&u.jsx(zt,{children:u.jsx(co,{onClick:e,...(I==null?void 0:I.previousProps)||{}})},"previous"),next:(I==null?void 0:I.nextProps)!==null&&u.jsx(zt,{children:u.jsx(uo,{onClick:s,...(I==null?void 0:I.nextProps)||{}})},"next"),dateRange:(I==null?void 0:I.dateRangeProps)!==null&&u.jsx(zt,{children:u.jsx(Mr,{ref:C,onClick:l,ariaLabel:x,dateRangeContent:k,showCalendar:f,onKeyDown:Z=>{Z.key==="Escape"&&f&&(l==null||l())},...(I==null?void 0:I.dateRangeProps)||{}})},"dateRange"),viewSwitcher:(I==null?void 0:I.viewSwitcherProps)!==null&&((n==null?void 0:n.length)??0)>1&&u.jsx(zt,{children:u.jsx(fo,{items:R,currentView:o,onSelect:j,ariaLabel:((Y=n==null?void 0:n.find(Z=>Z.name===o))==null?void 0:Y.displayName)??o,...(I==null?void 0:I.viewSwitcherProps)||{}})},"viewSwitcher")}};let b,M=ze.Popup;const T=S();if(a){const I=a({}),Y=t.isValidElement(I)?I.props:{},Z=S(Y),ce={overflowMode:(Y==null?void 0:Y.overflowMode)??ze.Popup,today:Z.today,previous:Z.previous,next:Z.next,dateRange:Z.dateRange,viewSwitcher:Z.viewSwitcher,children:z(Z)},K=a(ce);if(K&&t.isValidElement(K)){const O=K.props;if(M=(O==null?void 0:O.overflowMode)??ze.Popup,O!=null&&O.dateRangeTemplate&&E&&E.length>=2&&(k=O.dateRangeTemplate({startDate:E[0],endDate:E[E.length-1],view:o})),O!=null&&O.children)O.children===ce.children?b=z(S(O)):b=O.children;else{const L=S(O);b=z(L)}}else b=z(T)}else b=z(T);return u.jsxs("div",{ref:v,className:p.SCHEDULER_TOOLBAR_CONTAINER,children:[u.jsx(io,{overflowMode:M,style:{width:"auto"},children:b},`tb-${y}-${c}`),f&&C.current&&u.jsx(At,{open:!0,relateTo:C.current.element,position:{X:"left",Y:"bottom"},collision:{X:st.Fit,Y:st.None},actionOnScroll:Ps.Hide,onClose:l,className:p.CALENDAR_POPUP_CONTAINER,viewPortElementRef:v,onKeyDown:I=>{I.key==="Escape"&&(l==null||l())},children:u.jsx(Vo,{className:p.SCHEDULER_CALENDAR,value:d,onChange:m,showTodayButton:!0,firstDayOfWeek:h,start:g,depth:g})})]})};Mr.__docgenInfo={description:"DateRange button component",methods:[],displayName:"DateRangeButton"};const mo=(o,n,r)=>{const[e,s]=t.useState(!1),[i,l]=t.useState(null),c=jl(e),f=t.useRef(null),d=t.useRef(null),h=t.useRef(null),g=t.useRef(null),m=t.useCallback(()=>{s(!1)},[r]);po(m),t.useEffect(()=>{i&&(d.current=i.closest(".sf-scheduler"))},[i]);const E=t.useCallback(D=>{c&&typeof c=="object"&&"current"in c&&(c.current=D),f.current=D},[c]),a=t.useCallback(()=>{var D,x;(D=h.current)==null||D.hide(),(x=g.current)==null||x.hide()},[]),C=t.useCallback((D,x)=>{var k;(k=h.current)==null||k.handleCellClick(D,x)},[]),v=t.useCallback((D,x)=>{var k;(k=h.current)==null||k.handleEventClick(D,x)},[]),R=t.useCallback(()=>{a()},[]),j=t.useCallback(D=>{o&&o(D),!D.cancel&&D&&D.element&&(D.nativeEvent&&D.nativeEvent.stopPropagation(),C(D,D.element))},[o,C]),y=t.useCallback(D=>{n&&n(D),!D.cancel&&D&&D.data&&D.event.currentTarget&&v(D.data,D.event.currentTarget)},[n,v]);return{visible:e,setVisible:s,target:i,setTarget:l,containerRef:c,popupElement:f,schedulerElement:d,handleClose:m,handleRef:E,cellEditRef:h,eventEditRef:g,handleCellClick:C,handleEventClick:v,handleEditEvent:R,closeAllPopups:a,onCellClickHandler:j,onEventClickHandler:y}},po=o=>{t.useEffect(()=>{const n=r=>{r.key==="Escape"&&o()};return document==null||document.addEventListener("keydown",n),()=>{document==null||document.removeEventListener("keydown",n)}},[o])},jl=o=>{const n=t.useRef(null),r=t.useRef(null);return t.useEffect(()=>{if(o&&n.current){r.current=document==null?void 0:document.activeElement;const e=n.current.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'),s=e[0],i=e[e.length-1],l=c=>{i&&(document==null?void 0:document.activeElement)===i&&!c.shiftKey&&(c.preventDefault(),s.focus()),s&&(document==null?void 0:document.activeElement)===s&&c.shiftKey&&(c.preventDefault(),i.focus())};return document==null||document.addEventListener("keydown",l),()=>{var c;document==null||document.removeEventListener("keydown",l),(c=r.current)!=null&&c.focus&&r.current.focus()}}return()=>{}},[o]),n};class ct{static calculateEventPosition(n,r,e,s){const i=n.event.isAllDay&&n.event.isBlock?"0px":this.calculateTopPosition(n.startDate,r,e),l=this.calculateHeight(n,r,e,s);let c=96,f=n.event.isBlock?"1px":"0%";n.totalOverlapping>1&&(c=(c-n.totalOverlapping)/n.totalOverlapping,f=`${n.positionIndex*c+n.positionIndex}%`);const d=n.event.isBlock?"calc(100% - 2px)":`${c}%`;return{top:i,height:l,width:d,left:f}}static getOverflowDirection(n,r,e,s){var E,a;if(!n.totalSegments&&!e&&!s||!((E=n.event)!=null&&E.startTime)||!((a=n.event)!=null&&a.endTime)||!(r!=null&&r.length))return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:!1,isOverflowBottom:!1};const i=$.normalizeDate(n.event.startTime),l=$.normalizeDate(n.event.endTime),c=$.normalizeDate(r[0]),f=$.normalizeDate(r[r.length-1]);let d=n.isFirstDay===!1,h=n.isLastDay===!1;if(!i||!l||!c||!f)return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:d,isOverflowBottom:h};const g=i.getTime()<c.getTime(),m=l.getTime()>f.getTime();return e&&s&&(i.setHours(e[0],e[1],0,0),l.setHours(s[0],s[1],0,0),!d&&i>n.event.startTime&&(d=!0),!h&&l<n.event.endTime&&(h=!0)),{isOverflowLeft:g,isOverflowRight:m,isOverflowTop:d,isOverflowBottom:h}}static calculatePositionStyles(n,r,e,s,i){return n.totalSegments?{top:`${n.positionIndex*(Yn+gn)}px`,width:this.calculateEventWidth(n,r)}:!n.event.isBlock&&n.positionIndex!==void 0&&(n.event.isAllDay||n.isMonthEvent)?{top:`${n.positionIndex*(Yn+gn)}px`}:e&&s&&i?this.calculateEventPosition(n,e,s,i):{}}static calculateTopPosition(n,r,e){const s=$.getStartEndHours(e),i=s.getHours()*Ge+s.getMinutes(),c=n.getHours()*Ge+n.getMinutes()-i,d=Ds/(r.interval/r.slotCount),h=c*d;return`${Math.max(0,h)}px`}static calculateHeight(n,r,e,s){const i=new Date(n.startDate),l=new Date(n.endDate);n.event.isBlock&&n.event.isAllDay&&(i.setHours(0,0,0,0),l.setDate(l.getDate()+1),l.setHours(0,0,0,0));const c=r.interval/r.slotCount,{schedulerStartMinutes:f,schedulerEndMinutes:d}=$.getSchedulerStartAndEndMinutes(e,s),h=i.getHours()*Ge+i.getMinutes(),g=Math.max(h,f),m=d-g;let E;if($.isSameDay(i,l)){const C=i.getDate()!==l.getDate()?Fo:l.getHours()*Ge+l.getMinutes();E=(Math.min(C,d)-g)/c;const R=Math.ceil(m/c);E=Math.min(E,R)}else E=Math.min(m/c);let a=Math.round(E*Ds-2);return a=a>0?a:1,`${a}px`}static calculateEventWidth(n,r){const e=$.normalizeDate(n.event.startTime),s=$.normalizeDate(n.event.endTime),i=$.normalizeDate(r[0]),l=$.normalizeDate(r[r.length-1]),{isOverflowLeft:c,isOverflowRight:f}=this.getOverflowDirection(n,r);if(r.length<=7){const{visibleDayCount:d,startDayIndex:h}=$.getVisibleAndStartDays(r,e,s,n.event);if(d>0&&h!==-1)return`calc(${d*100}% - 4px)`}if(c&&f)return`${r.length*100}%`;if(c){const d=s.getTime()<=l.getTime()?s:l;return`${(Math.floor((d.getTime()-i.getTime())/hr)+1)*100}%`}else return f?`${(Math.floor((l.getTime()-e.getTime())/hr)+1)*100}%`:`${n.totalSegments?n.totalSegments*100:100}%`}static setIndexPosition(n,r,e){const s=$.generateDateKey(r),i=n.get(s)||[];for(;i.length<=e;)i.push(!1);return i.splice(e,1,!0),n.set(s,i),n}}const zn=o=>{const n=o.closest(".sf-scheduler");if(n){const r=n.querySelector("."+p.SELECTED_CELL);r&&(r.classList.remove(p.SELECTED_CELL),r.removeAttribute("tabindex"))}o.classList.add(p.SELECTED_CELL),o.tabIndex=0,o.focus()},br=(o,n,r)=>{if(!o||n<0||r<0)return null;const s=o.querySelectorAll(`.${p.WORK_CELLS_ROW}`).item(n);return s?s.querySelectorAll(`.${p.WORK_CELLS}`).item(r)??null:null},Gn=o=>{const n=o.closest("."+p.SCHEDULER);n&&(n.querySelectorAll("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE).forEach(e=>{e.classList.remove(p.APPOINTMENT_ACTIVE)}),zn(n)),o.classList.add(p.APPOINTMENT_ACTIVE)},Cs=(o,n)=>{const r=n.querySelector("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE),e=r==null?void 0:r.getAttribute("data-guid");return{data:Me.getEventByGuid(o,e),element:r}},$l=o=>{var e,s;let n;const r=((e=o==null?void 0:o.getAttribute)==null?void 0:e.call(o,"data-date"))??((s=o.dataset)==null?void 0:s.date)??void 0;if(r){const i=parseInt(r,10);n=new Date(i)}return n},Vl=(o,n)=>{const r=Array.isArray(o)?o==null?void 0:o[0]:o,s=r.classList.contains(p.ALL_DAY_CELL)||r.classList.contains(p.WORK_DAYS)||!((n==null?void 0:n.enable)??!0),i=$l(r);let l;if(s)i&&(l=$.addDays(i,1));else if(i&&n){const c=n.interval/n.slotCount,f=new Date(i);f.setMinutes(f.getMinutes()+c),l=f}return{startTime:i,endTime:l??i,isAllDay:s,element:r}},Yn=24,gn=4,Ds=40;class Me{static filterEventsByDateRange(n,r){if(!(n!=null&&n.length)||!(r!=null&&r.length))return[];const e=$.normalizeDate(r[0]),s=$.normalizeDate(r[r.length-1]);return n.filter(i=>{if(!i.startTime||!i.endTime)return!1;const l=$.normalizeDate(i.startTime);return!($.normalizeDate(i.endTime)<e||l>s)})}static findNonConflictingPosition(n,r,e,s,i){let l=0,c=!1;for(;!c;){c=!0;for(const f of n){const d=$.normalizeDate(f);if(d>=r&&(d<e||d.getTime()===e.getTime()&&s)){const g=$.generateDateKey(f);if((i.get(g)||[]).findIndex((a,C)=>C===l&&a)!==-1){c=!1,l++;break}}}}return l}static mapEventData(n,r){if(!n||n.length===0)return[];const e=r||{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException"};return n.map(s=>{const i={};if(e.id&&Object.prototype.hasOwnProperty.call(s,e.id)&&(i.id=s[e.id]),e.subject&&Object.prototype.hasOwnProperty.call(s,e.subject)&&(i.subject=s[e.subject]),e.startTime&&Object.prototype.hasOwnProperty.call(s,e.startTime)){const f=s[e.startTime];f instanceof Date?i.startTime=f:(typeof f=="string"||typeof f=="number")&&(i.startTime=new Date(f))}if(e.endTime&&Object.prototype.hasOwnProperty.call(s,e.endTime)){const f=s[e.endTime];f instanceof Date?i.endTime=f:(typeof f=="string"||typeof f=="number")&&(i.endTime=new Date(f))}e.isAllDay&&Object.prototype.hasOwnProperty.call(s,e.isAllDay)&&(i.isAllDay=s[e.isAllDay]),e.location&&Object.prototype.hasOwnProperty.call(s,e.location)&&(i.location=s[e.location]),e.description&&Object.prototype.hasOwnProperty.call(s,e.description)&&(i.description=s[e.description]),e.isReadonly&&Object.prototype.hasOwnProperty.call(s,e.isReadonly)&&(i.isReadonly=s[e.isReadonly]),e.isBlock&&Object.prototype.hasOwnProperty.call(s,e.isBlock)&&(i.isBlock=s[e.isBlock]),e.recurrenceRule&&Object.prototype.hasOwnProperty.call(s,e.recurrenceRule)&&(i.recurrenceRule=s[e.recurrenceRule]),e.recurrenceID&&Object.prototype.hasOwnProperty.call(s,e.recurrenceID)&&(i.recurrenceID=s[e.recurrenceID]),e.recurrenceException&&Object.prototype.hasOwnProperty.call(s,e.recurrenceException)&&(i.recurrenceException=s[e.recurrenceException]);const l=new Set(Object.values(e)),c=Object.fromEntries(Object.entries(s).filter(([f])=>!l.has(f)));return Object.assign(i,c),i.guid=Me.generateEventGuid(),i})}static sortEventsByStartTimeAndDuration(n){return[...n].sort((r,e)=>{if(!r.event.startTime||!e.event.startTime)return 0;const s=r.event.startTime.getTime()-e.event.startTime.getTime();if(s!==0)return s;const i=r.event.endTime?r.event.endTime.getTime()-r.event.startTime.getTime():0;return(e.event.endTime?e.event.endTime.getTime()-e.event.startTime.getTime():0)-i})}static calculateOverlappingEvents(n,r=!0){if(!n||n.length===0)return[];if(!r)return this.resolveOverlappingEvents(n);const e=this.sortEventsByStartTimeAndDuration(n);return this.identifyOverlapGroups(e)}static identifyOverlapGroups(n){const r=[];for(const e of n){let s=!1;for(const i of r)if(i.some(c=>this.eventsOverlap(e,c))){i.push(e),s=!0;break}s||r.push([e])}return this.convertOverlapGroupsToEventGroups(r)}static convertOverlapGroupsToEventGroups(n){return n.filter(e=>e.length>0).map(e=>{if(e.length===1)return[{...e[0],positionIndex:0,totalOverlapping:1}];const s=[...e].sort((c,f)=>!c.event.startTime||!f.event.startTime?0:c.event.startTime.getTime()-f.event.startTime.getTime()),i=[],l=[];return s.forEach(c=>{let f=i.findIndex(d=>d<=c.event.startTime);f===-1?(f=i.length,i.push(c.event.endTime)):i[parseInt(f.toString(),10)]=c.event.endTime,l.push(f)}),s.map((c,f)=>({...c,positionIndex:l[parseInt(f.toString(),10)],totalOverlapping:i.length}))})}static prioritizeEvents(n){return[...n].sort((r,e)=>{if(r.event.isAllDay&&!e.event.isAllDay)return-1;if(!r.event.isAllDay&&e.event.isAllDay)return 1;if(!r.event.startTime||!e.event.startTime||!r.event.endTime||!e.event.endTime)return 0;const s=r.event.endTime.getTime()-r.event.startTime.getTime(),i=e.event.endTime.getTime()-e.event.startTime.getTime();return s!==i?i-s:r.event.startTime.getTime()-e.event.startTime.getTime()})}static resolveOverlappingEvents(n){if(!n||n.length===0)return[];const r=this.prioritizeEvents(n),e=[],s=new Set;return r.forEach(i=>{if(s.has(i))return;const l=r.filter(f=>i!==f&&!s.has(f)&&this.eventsOverlap(i,f)),c=[{...i,positionIndex:0,totalOverlapping:1}];e.push(c),s.add(i),l.forEach(f=>{s.add(f)})}),e}static eventsOverlap(n,r){return!(n!=null&&n.event.startTime)||!(n!=null&&n.event.endTime)||!(r!=null&&r.event.startTime)||!(r!=null&&r.event.endTime)?!1:n.event.startTime<r.event.endTime&&n.event.endTime>r.event.startTime||r.event.startTime<n.event.endTime&&r.event.endTime>n.event.startTime}static checkEventOverlap(n,r,e=!0,s){const i=e?n.startTime:n[s.startTime],l=e?n.endTime:n[s.endTime];if(!i||!l)return!1;const c=$.normalizeDate(i),f=$.normalizeDate(l);return(r||[]).filter(h=>{if(h.isBlock||!h.startTime||!h.endTime)return!1;const g=$.normalizeDate(h.startTime);return!($.normalizeDate(h.endTime)<c||g>f)}).some(h=>{const g=h.startTime,m=h.endTime,E=h.isAllDay;return h.id===n.id||h.id===n.Id||h.guid===n.guid||!g||!m?!1:E?i<=m&&l>=g:i<m&&l>g})}static isBlockRange(n,r,e=!0,s){const i=Array.isArray(n)?n:[n];if(i&&i.length===0)return!1;const l=(r==null?void 0:r.filter(c=>c.isBlock))||[];if(l&&l.length===0)return!1;for(const c of l){const f=c.startTime,d=c.endTime;if(!f||!d)continue;const h=c.isAllDay||Me.isMultiDayEvent(c);for(const g of i){const m=e?g.startTime:g[s.startTime],E=e?g.endTime:g[s.endTime];if(!m||!E)continue;let a;if(h){const C=$.normalizeDate(m),v=$.normalizeDate(E),R=$.normalizeDate(f),j=$.normalizeDate(d);a=C<=j&&R<=v}else a=m<d&&E>f;if(a)return!0}}return!1}static splitEventByDay(n,r){const e=[],s=$.normalizeDate(n.startTime),i=$.normalizeDate(n.endTime),l=r.filter(f=>{const d=$.normalizeDate(f);return d>=s&&d<=i}).length;let c=0;return r.forEach((f,d)=>{const h=$.normalizeDate(f);if(h>=s&&h<=i){const g=h.getTime()===s.getTime(),m=h.getTime()===i.getTime(),E=g?new Date(n.startTime):new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0),a=m?new Date(n.endTime):new Date(h.getFullYear(),h.getMonth(),h.getDate()+1,0,0,0),C={event:n,startDate:E,endDate:a,isFirstDay:g,isLastDay:m,segmentIndex:c,totalSegments:l,columnIndex:d};e.push(C),c++}}),e}static isAlldayHasMoreEvents(n,r,e=2){let s=!1;return n.forEach(i=>{const l=$.generateDateKey(i);(r.get(l)||[]).length>e&&(s=!0)}),s}static isMultiDayEvent(n){if(!(n!=null&&n.startTime)||!(n!=null&&n.endTime))return!1;const r=new Date(n.startTime),e=new Date(n.endTime);if($.isSameDay(r,e))return!1;if(n.isAllDay)return!0;const s=$.normalizeDate(r),i=$.normalizeDate(e),l=Math.round((i.getTime()-s.getTime())/hr);return l<=0?!1:l>=2?!0:!$.isMidnight(e)}static getAriaLabel(n){const{subject:r,startTime:e,endTime:s}=n,i=e?e.toString():"",l=s?s.toString():"";return`${r} Begin From ${i} Ends At ${l}`}static generateEventGuid(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}static getEventClassNames(n){const r=[];return n.isBlock?r.push("sf-block-appointment"):(r.push("sf-appointment"),n.isReadonly&&r.push("sf-read-only")),r}static getEventsMap(n,r){const e=new Map;return n.forEach(s=>{const i=$.generateDateKey(s);e.set(i,[])}),r.forEach(s=>{if(!s.startDate)return;const i=$.generateDateKey(s.startDate),l=e.get(i)||[];l&&(l.push(s),e.set(i,l))}),e}static getMaxEventsInCell(n,r){let e=0;return r.forEach(s=>{var c;const i=$.generateDateKey(s),l=(c=n.get(i))==null?void 0:c.filter(f=>!f.event.isBlock);e=Math.max(e,l==null?void 0:l.length)}),e}static processDayEvents(n,r){if(!(n!=null&&n.length)||!(r!=null&&r.length))return[];const e=Me.filterEventsByDateRange(r,n),s=[];let i=new Map;return n.forEach(c=>{const f=$.generateDateKey(c);i.set(f,[])}),$.sortByTimeAndSpan(e).forEach(c=>{if(!c.startTime||!c.endTime)return;const f=Me.getEventClassNames(c),d=$.normalizeDate(c.startTime),h=$.normalizeDate(c.endTime),g=Me.isMultiDayEvent(c),m=g?$.getDaysCount(c.startTime,c.endTime,c.isAllDay):1,E=c.isAllDay?!0:!$.isMidnight(c.endTime),a=c.isBlock?null:Me.findNonConflictingPosition(n,d,h,E,i);if(g)for(const C of n){const v=$.normalizeDate(C);if(!(v>=d&&(v<h||v.getTime()===h.getTime()&&E)))continue;c.isBlock||(i=ct.setIndexPosition(i,C,a));const j=v.getTime()===d.getTime(),y=v.getTime()===h.getTime()&&E,D=Math.floor((v.getTime()-d.getTime())/(1e3*60*60*24)),x=n.findIndex(b=>{const M=$.normalizeDate(b);return M>=d&&(M<h||M.getTime()===h.getTime()&&E)})===n.findIndex(b=>$.normalizeDate(b).getTime()===v.getTime()),k=j?new Date(c.startTime.getTime()):new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0),z=y?new Date(c.endTime.getTime()):new Date(v.getFullYear(),v.getMonth(),v.getDate()+1,0,0,0),S=`${C.toISOString()}-${c.id}`;s.push({event:c,startDate:k,endDate:z,isFirstDay:j,isLastDay:y,isFirstSegmentInRenderRange:x,segmentIndex:D,totalSegments:m,positionIndex:a,eventClasses:f,eventKey:S,isMonthEvent:!0})}else{c.isBlock||(i=ct.setIndexPosition(i,d,a));const C=`${d.toISOString()}-${c.id}`;s.push({event:c,startDate:c.startTime,endDate:c.endTime,positionIndex:a,eventClasses:f,eventKey:C,isMonthEvent:!0})}}),s.sort((c,f)=>{const d=c.positionIndex??0,h=f.positionIndex??0;return d-h})}static cloneEventPosition(n,r,e,s,i=!1,l,c){const f=$.normalizeDate(r.startDate),d=$.normalizeDate(r.endDate),{visibleDayCount:h}=$.getVisibleAndStartDays(r.week,f,d,r.event),g=Math.max(0,e*h-gn);let m,E,a;if(s){const v=n==null?void 0:n.querySelector(`.${p.ALL_DAY_ROW}`);m=v.querySelectorAll(`.${p.ALL_DAY_CELL}`).item(r.columnIndex),E=v.offsetTop}else m=br(n,r.rowIndex,r.columnIndex),l?E=m.querySelector(`.${p.APPOINTMENT_WRAPPER}`).offsetTop:(E=m==null?void 0:m.offsetTop,a=Math.max(0,c.offsetHeight));const C={top:`${E}px`,width:`${g}px`,height:`${a}px`};if(i){const v=m.parentElement?Math.max(0,m.parentElement.clientWidth-(m.offsetLeft+m.offsetWidth)):0;C.insetInlineStart=`${v}px`}else C.insetInlineStart=`${m.offsetLeft}px`;return C}static splitEventByWeek(n,r){const e=new Date(r.startTime),s=new Date(r.endTime),i=$.normalizeDate(e),l=$.normalizeDate(s),c=[];return n.forEach((f,d)=>{const h=$.normalizeDate(f[0]),g=$.normalizeDate(f[f.length-1]),m=$.addDays(g,1);if(!(e<=m&&s>=h))return;const a=i>=h&&i<=g,C=l>=h&&l<=g,v=a?e:h,R=C?s:m,j=f.map(S=>$.normalizeDate(S).getTime()),y=$.normalizeDate(v).getTime();let D=j.indexOf(y);D===-1&&(D=0);const x=i.getTime()<h.getTime(),k=l.getTime()>g.getTime(),z={event:r,startDate:v,endDate:R,week:f,rowIndex:d,columnIndex:D,isOverflowLeft:x,isOverflowRight:k};c.push(z)}),c}static processCloneEvent(n,r,e,s,i,l,c,f=!1,d,h){const g=c?[r]:$.getRenderWeeks(r,s,i),m=this.splitEventByWeek(g,e),E=Me.isMultiDayEvent(e);return m.forEach(a=>{var C;a.eventStyle=this.cloneEventPosition(n,a,l,c,f,d,h),a.totalSegments=E?$.getDaysCount(a.startDate,a.endDate,(C=a.event)==null?void 0:C.isAllDay):1}),m}static processTimeSlotCloneEvent(n,r,e,s,i,l,c,f=!1){const d=this.splitEventByDay(e,r);return d.forEach(h=>{const g=ct.calculateTopPosition(h.startDate,s,i),m=ct.calculateHeight(h,s,i,l),E=br(n,0,h.columnIndex);if(h.eventStyle={top:g,height:m,width:`${c}px`},f){const a=E.parentElement?Math.max(0,E.parentElement.clientWidth-(E.offsetLeft+E.offsetWidth)):0;h.eventStyle.right=`${a}px`}else h.eventStyle.left=`${E.offsetLeft}px`}),d}static getEventByGuid(n,r){if(!(!(n!=null&&n.length)||!r))return n.find(e=>(e==null?void 0:e.guid)===r)}}var wt;(function(o){o.Left="left",o.Right="right",o.Up="up",o.Down="down"})(wt||(wt={}));var xt;(function(o){o.OccurrenceAlert="occurenceAlert",o.SameDayAlert="sameDayAlert"})(xt||(xt={}));function Wl(o,n){if(!o||o.length===0||!n||n.length===0)return o;const r=[];for(const e of o)if(e.recurrenceRule&&!e.recurrenceID){const s=Fl(e);r.push(...s)}else r.push(e);return r}function Fl(o){const n=Bo(o.startTime,o.recurrenceRule,o.recurrenceException,0),r=o.endTime.getTime()-o.startTime.getTime(),e=[];for(let s=0;s<n.length;s++){const i=n[s],l=_t({},o,null,!0);l.startTime=new Date(i),l.endTime=new Date(new Date(i).getTime()+r),l.recurrenceID=l.id,l.guid=Bl(),delete l.recurrenceException,e.push(l)}return e}function Bl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{const n=Math.random()*16|0;return(o==="x"?n:n&3|8).toString(16)})}function Rr(o,n,r,e,s){var g,m,E,a,C;if(!o.recurrenceID||!o.recurrenceRule)return{isValid:!0,shouldAlert:!1,messageKey:xt.SameDayAlert};const i=e.find(v=>v.id===o.recurrenceID);let l=s.filter(v=>v.recurrenceID===i.id&&v.recurrenceRule);l=l.sort((v,R)=>v.startTime.getTime()-R.startTime.getTime());const c=l.findIndex(v=>v.guid===o.guid);if(c===-1)return{isValid:!0,shouldAlert:!1};const f=(m=$.normalizeDate((g=l[c-1])==null?void 0:g.startTime))==null?void 0:m.getTime(),d=(a=$.normalizeDate((E=l[c+1])==null?void 0:E.startTime))==null?void 0:a.getTime(),h=$.normalizeDate(n).getTime();return c===0&&h<d?{isValid:!0,shouldAlert:!1}:c===l.length-1&&h>f?{isValid:!0,shouldAlert:!1}:h>f&&h<d?((C=l[c+1])==null?void 0:C.startTime.getTime())<r.getTime()?{isValid:!1,shouldAlert:!0,messageKey:xt.SameDayAlert}:{isValid:!0,shouldAlert:!1}:h<f&&h<d||h>f&&h>d||!f&&h>d||!d&&h<f?{isValid:!1,shouldAlert:!0,messageKey:xt.OccurrenceAlert}:{isValid:!1,shouldAlert:!0,messageKey:xt.SameDayAlert}}function vs(o,n){return n==null?void 0:n.find(r=>r.id===o.recurrenceID)}function ho(o,n){return(o==null?void 0:o.reduce((r,e)=>{const s=Number(e[n.id]||e.id);return Math.max(r,s)},0))??0}function Hr(o,n,r,e,s,i,l){var f,d;const c={};if(Array.isArray(i)||o||s)if(o.recurrenceRule&&o.recurrenceID===o.id){const h=ho(i,s);c[s.id]=h+1,ys(c,o,n,r,s),(f=e==null?void 0:e.current)!=null&&f.addEvent&&e.current.addEvent(c),Eo(o,e,s,l)}else c[s.id]=o.id,ys(c,o,n,r,s),(d=e==null?void 0:e.current)!=null&&d.saveEvent&&e.current.saveEvent(c);return c}function Eo(o,n,r,e){var s;if(o.recurrenceException){const i=e==null?void 0:e.find(l=>Number(l[r.id]||l.id)===Number(o.recurrenceID));if((s=n==null?void 0:n.current)!=null&&s.saveEvent){const l=i[r.recurrenceException]||i.recurrenceException?String(i[r.recurrenceException]??i.recurrenceException):"",c=l?`${l},${o.recurrenceException}`:o.recurrenceException||l,f={[r.id]:i[r.id]||i.id,[r.recurrenceException]:c};n.current.saveEvent(f)}}}function ys(o,n,r,e,s){o[s.subject]=n.subject,o[s.startTime]=r,o[s.endTime]=e,o[s.isAllDay]=n.isAllDay,o[s.recurrenceID]=n.recurrenceID,o[s.recurrenceException]=n.recurrenceException,o[s.recurrenceRule]=n.recurrenceRule}function En(o,n,r,e,s,i){var l,c,f,d;if(n==="occurrence")o.recurrenceID!==o.id?(c=(l=r==null?void 0:r.current)==null?void 0:l.deleteEvent)==null||c.call(l,o):(o.recurrenceException=Xn(o.startTime),Eo(o,r,e,s));else if(n==="series"){const h=i??(s==null?void 0:s.filter(g=>(g.recurrenceID||g.id)===o.recurrenceID));for(const g of h)(d=(f=r==null?void 0:r.current)==null?void 0:f.deleteEvent)==null||d.call(f,g)}}function bs(o,n,r,e){e==null||e.show({title:o,message:n,confirmText:r,showCancel:!1,onConfirm:()=>e.hide()})}function Fn(o,n,r,e){const i={recurrenceEdit:{title:r("editEvent"),message:r("editEventContent"),showCancel:!1},recurrenceDelete:{title:r("deleteEvent"),message:r("editEventContent"),showCancel:!1},seriesChange:{title:r("alert"),message:r("seriesChangeAlert"),showCancel:!0,confirmText:r("yes")}}[o];n==null||n.show({action:o,title:i.title,message:i.message,confirmText:i.confirmText||r("ok"),showCancel:i.showCancel??!1,onConfirm:l=>{e(l),n.hide()}})}const Ul=o=>{const{activeViewProps:n,renderDates:r}=o,{eventSettings:e,readOnly:s,onDataChangeStart:i,onDataChangeComplete:l,onError:c,onDataRequest:f}=n,[d,h]=t.useState(),[g,m]=t.useState(),E=t.useMemo(()=>(e==null?void 0:e.dataSource)instanceof rr?e.dataSource:Array.isArray(e==null?void 0:e.dataSource)?new rr(e.dataSource):new rr([]),[e==null?void 0:e.dataSource]),a=t.useMemo(()=>(e==null?void 0:e.query)instanceof es?e==null?void 0:e.query:new es,[e==null?void 0:e.query]),C=(w,I)=>{const Y=a.clone();return w&&I&&(Y.addParams("StartDate",w.toISOString()),Y.addParams("EndDate",I.toISOString())),Y},v=w=>E.executeQuery(w),R=()=>e.query?e.query.clone().fromTable:null,j=w=>{const I={result:w.result,count:w.count};f&&f(I);const Y=I.result,Z=Me.mapEventData(Y,e.fields),ce=Wl(Z,r);m(Z),h(ce)},y=w=>{c&&c(w)},D=t.useCallback(()=>{if(!r||r.length===0)return;const w=C(r[0],r[r.length-1]);v(w).then(Y=>j(Y)).catch(Y=>y(Y))},[r,v,C]),x=w=>(typeof w[e.fields.startTime]=="string"&&(w[e.fields.startTime]=$.getDateFromString(w[e.fields.startTime])),typeof w[e.fields.endTime]=="string"&&(w[e.fields.endTime]=$.getDateFromString(w[e.fields.endTime])),w),k=t.useCallback(w=>{var Y;const I={cancel:!1,addedRecords:w.editParams.addedRecords,changedRecords:w.editParams.changedRecords,deletedRecords:w.editParams.deletedRecords};(Y=E.dataSource)!=null&&Y.offline?(l&&l(I),D()):w.promise.then(()=>{l&&l(I),D()}).catch(Z=>{c&&c(Z)})},[l,c,D,E]),z=t.useCallback(w=>{const I={addedRecords:[],changedRecords:[],deletedRecords:[]};let Y;if(w.addedRecords instanceof Array){for(let ce of w.addedRecords){ce=x(ce);const K=_t({},ce,null,!0);I.addedRecords.push(K)}Y=E.saveChanges(I,e.fields.id,R(),C())}else{const ce=w.addedRecords;I.addedRecords.push(ce),Y=E.insert(ce,R(),C())}k({cancel:!1,promise:Y,editParams:I})},[E,e,R,C,k]),S=t.useCallback(w=>{let I;const Y={addedRecords:[],changedRecords:[],deletedRecords:[]};w.deletedRecords.length>1?(Y.deletedRecords=Y.deletedRecords.concat(w.deletedRecords),I=E.saveChanges(Y,e.fields.id,R(),C())):(Y.deletedRecords.push(w.deletedRecords[0]),I=E.remove(e.fields.id,w.deletedRecords[0],R(),C())),k({cancel:!1,promise:I,editParams:Y})},[E,e,R,C,k]),b=t.useCallback(w=>{let I;const Y={addedRecords:[],changedRecords:[],deletedRecords:[]};if(w.changedRecords instanceof Array){for(let ce of w.changedRecords){ce=x(ce);const K=_t({},ce,null,!0);Y.changedRecords.push(K)}I=E.saveChanges(Y,e.fields.id,R(),C())}else{const ce=w.changedRecords;Y.changedRecords.push(ce),I=E.update(e.fields.id,ce,R(),C())}k({cancel:!1,promise:I,editParams:Y})},[E,e,R,C,k,x]),M=t.useCallback(async w=>{if(e.allowAdding&&!s){const I=w instanceof Array?w:[w];if(I.length===0)return;const Y={cancel:!1,addedRecords:I,changedRecords:[],deletedRecords:[]};i&&i(Y),Y.promise?Y.promise.then(Z=>{Z&&z(Y)}).catch(Z=>{c&&c(Z)}):z(Y)}},[e,s,i,c,z]),T=t.useCallback(async w=>{if(e.allowDeleting&&!s){const I=w instanceof Array?w:[w];if(I.length===0)return;const Y={cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:I};i&&i(Y),Y.promise?Y.promise.then(Z=>{Z&&S(Y)}).catch(Z=>{c&&c(Z)}):S(Y)}},[e,s,i,c,S]),H=t.useCallback(async w=>{if(e.allowEditing&&!s){const I=w instanceof Array?w:[w];if(I.length===0)return;const Y={cancel:!1,addedRecords:[],changedRecords:I,deletedRecords:[]};i&&i(Y),Y.promise?Y.promise.then(Z=>{Z&&b(Y)}).catch(Z=>{c&&c(Z)}):b(Y)}},[e,s,i,c,b]);return t.useEffect(()=>{D()},[E,a,r]),{eventsData:d,eventsProcessed:g,addEvent:M,deleteEvent:T,saveEvent:H}},wr=(o,n="Close")=>u.jsx(Ze,{className:`${p.POPUP_CLOSE} ${p.ROUND}`,onClick:o,"aria-label":n,icon:u.jsx(Un,{}),color:Tt.Secondary,variant:qe.Standard},"close-btn"),zl=({visible:o,target:n,schedulerElement:r,popupPosition:e,onClose:s,onOpen:i,children:l,adaptive:c})=>{if(!o||!n)return null;const{dir:f}=$e();return Ae.isDevice&&c?Xt.createPortal(u.jsx("div",{className:`${p.CONTROL} ${p.POPUP_WRAPPER} ${p.MOBILE_POPUP}
                ${f==="rtl"?p.RTL:""}`,children:l}),document==null?void 0:document.body):u.jsx(At,{open:o,relateTo:n,position:e,collision:{X:st.Flip,Y:st.Fit},actionOnScroll:Ps.None,autoReposition:!0,onOpen:i,onClose:s,className:`${p.POPUP_WRAPPER}`,viewPortElementRef:r,zIndex:1003,children:l})},Yl=(o,n)=>({show:()=>o(!0),hide:()=>o(!1),element:n.current}),jr=t.forwardRef((o,n)=>{var U;const{onClose:r,onEditEvent:e,onMoreDetails:s}=o,{schedulerRef:i,eventSettings:l,showQuickInfoPopup:c,showDeleteAlert:f,showRecurrenceDeleteAlert:d,view:h,readOnly:g,timeFormat:m,quickInfo:E}=We(),{eventsProcessed:a}=Pt(),[C,v]=t.useState({}),[R,j]=t.useState({}),[y,D]=t.useState({}),[x,k]=t.useState(null),[z,S]=t.useState({X:"right",Y:"top"}),[b,M]=t.useState(!1),T=t.useRef(null),H=t.useRef(null),{visible:w,setVisible:I,target:Y,setTarget:Z,popupElement:ce,schedulerElement:K,handleClose:O,closeAllPopups:L,handleRef:V}=mo(r),{locale:J}=$e();_r(ce,w,O);const{getString:ue}=tt(J||"en-US");t.useEffect(()=>{b&&(requestAnimationFrame(()=>{ee()}),M(!1))},[b]),t.useImperativeHandle(n,()=>({...Yl(I,ce),handleCellClick:(G,ge)=>{c&&(v(G),Z(ge),k("cell"),D({[l.fields.startTime]:G.startTime,[l.fields.endTime]:G.isAllDay?$.addDays(G.endTime,-1):G.endTime,[l.fields.isAllDay]:G.isAllDay}),q(),I(!0))},handleEventClick:(G,ge)=>{c&&(j(G),Z(ge),k("event"),q(),I(!0),Gn(ge))},handleDelete:de}));const F=()=>{S((h==null?void 0:h.toLowerCase())==="day"?{X:"center",Y:"center"}:{X:"right",Y:"top"}),M(!0)},q=()=>{(T||H)&&O(),requestAnimationFrame(()=>{ee()})},ee=()=>{x==="cell"?T.current&&T.current.element&&T.current.element.focus():x==="event"&&H.current&&H.current.element&&H.current.element.focus()},te=t.useCallback(G=>{const ge=G.value,pe={...y,[l.fields.subject]:ge};D(pe)},[y]),oe=t.useCallback(()=>{var ge,pe;const G={...y,[l.fields.id]:Me.generateEventGuid(),[l.fields.subject]:y[l.fields.subject]||ue("newEvent")};(pe=(ge=i==null?void 0:i.current)==null?void 0:ge.addEvent)==null||pe.call(ge,G),O(),L()},[y,O]),De=t.useCallback(()=>{e(R),O()},[R,O,e]),ve=t.useCallback(()=>{var ge;const G={...C,[l.fields.subject]:(ge=T==null?void 0:T.current)==null?void 0:ge.value};s(G),O()},[C,O,s]),de=t.useCallback(()=>{const G=pe=>{x==="event"&&R&&En(R,pe,i,l.fields,a),O(),L()},ge=()=>{var pe,ye;x==="event"&&R&&((ye=(pe=i==null?void 0:i.current)==null?void 0:pe.deleteEvent)==null||ye.call(pe,R)),O(),L()};x==="event"&&R&&R.recurrenceID?d==null||d(G):f==null||f(ge),I(!1)},[x,R,O,L,i,f,d,l]),N=G=>ge=>{(ge.key==="Enter"||ge.key===" "&&ge.target.type==="button")&&(ge.preventDefault(),G())},B={startTime:C.startTime,endTime:C.endTime,isAllDay:C.isAllDay,element:C.element},ie=u.jsx(u.Fragment,{children:E!=null&&E.addHeader?E==null?void 0:E.addHeader({cellData:B}):u.jsx("div",{className:p.POPUP_HEADER,children:u.jsx("div",{className:`${p.POPUP_HEADER_WRAP} ${p.CONTENT_RIGHT}`,children:wr(O,ue("close"))})})}),se=u.jsx(u.Fragment,{children:E!=null&&E.addContent?E==null?void 0:E.addContent({cellData:B}):u.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[u.jsx("div",{className:p.POPUP_INPUT_WRAP,children:u.jsx(Er,{ref:T,className:p.POPUP_CELL_SUBJECT,placeholder:ue("addTitle"),onKeyDown:N(oe),onChange:te,value:y[(U=l==null?void 0:l.fields)==null?void 0:U.subject]||"",size:Yt.Large})}),C.startTime&&C.endTime&&u.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[u.jsx(us,{}),u.jsx("span",{className:p.POPUP_TIME_TEXT,children:$.formatCellDateRange(new Date(C.startTime),new Date(C.endTime),J,m)})]})]})}),xe=u.jsx(u.Fragment,{children:E!=null&&E.addFooter?E==null?void 0:E.addFooter({cellData:B}):u.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[u.jsx(Ze,{className:p.POPUP_MORE_DETAILS,onClick:ve,color:Tt.Primary,variant:qe.Standard,children:ue("moreDetails")}),u.jsx(Ze,{className:p.SAVE_EVENT,onClick:oe,onKeyDown:N(oe),color:Tt.Primary,variant:qe.Standard,children:ue("save")})]})}),Q=u.jsx(u.Fragment,{children:E!=null&&E.editHeader?E==null?void 0:E.editHeader({eventData:R}):u.jsxs("div",{className:`${p.POPUP_HEADER} ${p.POPUP_CELL_HEADER} ${p.DISPLAY_FLEX}`,children:[u.jsx("div",{className:p.POPUP_EVENT_SUBJECT,children:R.subject||ue("addTitle")}),u.jsx("div",{className:`${p.POPUP_HEADER_WRAP}`,children:wr(O,ue("close"))})]})}),le=u.jsx(u.Fragment,{children:E!=null&&E.editContent?E==null?void 0:E.editContent({eventData:R}):u.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[R.startTime&&R.endTime&&u.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[u.jsx(us,{}),u.jsx("span",{className:p.POPUP_TIME_TEXT,children:$.formatPopupDateRange(R,J,m)})]}),R.location&&u.jsxs("div",{className:`${p.LOCATION} ${p.DISPLAY_FLEX}`,children:[u.jsx(Ei,{}),u.jsx("span",{className:p.POPUP_LOCATION_TEXT,children:R.location})]}),R.description&&u.jsxs("div",{className:`${p.DESCRIPTION} ${p.DISPLAY_FLEX}`,children:[u.jsx(Ti,{}),u.jsx("span",{className:p.POPUP_DESCRIPTION_TEXT,children:R.description})]})]})}),fe=u.jsx(u.Fragment,{children:E!=null&&E.editFooter?E==null?void 0:E.editFooter({eventData:R}):u.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[u.jsx(Ze,{ref:H,className:p.EDIT_EVENT,disabled:!!(R!=null&&R.isReadonly)||g,onClick:De,onKeyDown:N(De),color:Tt.Primary,variant:qe.Standard,children:ue("edit")}),u.jsx(Ze,{className:p.DELETE_EVENT,disabled:!!(R!=null&&R.isReadonly)||g,onClick:de,onKeyDown:N(de),color:Tt.Primary,variant:qe.Standard,children:ue("delete")})]})}),A=()=>u.jsxs("div",{ref:V,className:`${p.QUICK_INFO_WRAPPER} ${p.CELL_POPUP}`,children:[ie,se,xe]}),ne=()=>u.jsxs("div",{ref:V,className:`${p.QUICK_INFO_WRAPPER} ${p.EVENT_POPUP}`,children:[Q,le,fe]});return u.jsx(zl,{visible:w,target:Y,popupPosition:z,schedulerElement:K,onClose:O,onOpen:F,adaptive:(E==null?void 0:E.adaptive)??!0,children:x==="cell"?A():ne()})});jr.displayName="QuickInfoPopup";jr.__docgenInfo={description:"Combined QuickInfoPopup component that handles both cell and event popups",methods:[],displayName:"QuickInfoPopup"};function Kl(){const{renderDates:o}=pt(),{showWeekNumber:n,workDays:r,weekRule:e,firstDayOfWeek:s}=We(),{locale:i}=$e(),[l,c]=t.useState(!0),[f,d]=t.useState(!1),h=o.length>0&&n?$.getWeekNumber(o[0],e,s):null,g=t.useCallback(a=>{d(a)},[]),m=t.useCallback(()=>{c(a=>!a)},[]);return{headerCells:o.map((a,C)=>{const v=$.isSameDay(a,new Date),R=$.isWeekend(a,r),j=ut(a,{type:"date",skeleton:"E",locale:i}),y=ut(a,{type:"date",skeleton:"d",locale:i}),D=["sf-header-cells",v?"sf-current-day":"",R?"sf-weekend":""].filter(Boolean).join(" ");return{date:a,dayName:j,dateNumber:y,isToday:v,isWeekend:R,className:D,key:`sf-header-cells-${C}`}}),isAllDayCollapsed:l,showAllDayToggle:f,weekNumber:h,toggleAllDayCollapse:m,handleMoreEventsChange:g}}function $r(){const{onViewChange:o,onSelectedDateChange:n,getAvailableViews:r}=We();return{handleDateClick:t.useCallback((s,i)=>{s.preventDefault(),s.stopPropagation(),ft.isDayViewAvailable(r)&&(n({value:i}),o({value:"Day"}))},[n,o])}}const Xl=()=>{const[o,n]=t.useState({date:null,events:[],visible:!1,target:null}),r=t.useRef(null),e=t.useRef(null),{locale:s}=$e(),{handleDateClick:i}=$r(),{quickPopupRef:l}=We();t.useEffect(()=>{o.target&&(e.current=o.target.closest(".sf-scheduler"))},[o.target]);const c=()=>{n({date:null,events:[],target:null,visible:!1})};po(c);const f=(g,m)=>{var E;(E=l.current)==null||E.handleEventClick(g,m)},d=(g,m)=>{m&&(i(g,o.date),c())},h=(g,m,E)=>{n({date:g,events:m,target:E,visible:!0})};return{date:o.date,events:o.events,visible:o.visible,target:o.target,popupElement:r,schedulerElement:e,locale:s,handleClose:c,handleEventClick:f,handleNavigation:d,open:h}},Vr=t.forwardRef((o,n)=>{const{date:r,events:e,visible:s,target:i,popupElement:l,schedulerElement:c,locale:f,handleClose:d,handleEventClick:h,handleNavigation:g,open:m}=Xl(),{eventTemplate:E,getAvailableViews:a}=We(),C=ft.isDayViewAvailable(a),{getString:v}=tt(f||"en-US");t.useImperativeHandle(n,()=>({element:l.current,open:m})),_r(l,s,d);const R=t.useCallback(y=>E?E(y):u.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:y.subject||v("addTitle")}),[E]),j=()=>u.jsxs("div",{ref:l,className:p.MORE_EVENT_POPUP,children:[u.jsxs("div",{className:p.MORE_EVENT_HEADER,children:[u.jsxs("div",{className:`${p.MORE_EVENT_DATE_HEADER} ${C?p.LINK:""}`,onClick:y=>g(y,C),tabIndex:0,children:[ut(r,{format:"E",calendar:"gregorian",locale:f})," ",ut(r,{format:"d",calendar:"gregorian",locale:f})]}),u.jsx("div",{className:"sf-more-event-close",children:wr(d,v("close"))})]}),u.jsx("div",{className:p.MORE_EVENT_CONTENT,children:e.map(y=>u.jsx("div",{className:p.APPOINTMENT,onClick:D=>h(y,D.currentTarget),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),h(y,D.currentTarget))},"data-id":`Appointment_${y.id}`,"data-guid":y.guid,role:"button",tabIndex:0,children:R(y)},`eventId-${y.id}`))})]});return!s||!i?null:Ae.isDevice?Xt.createPortal(u.jsx("div",{className:`${p.CONTROL} ${p.MORE_POPUP_WRAPPER} ${p.MOBILE_POPUP}`,children:j()}),document==null?void 0:document.body):u.jsx(At,{open:s,relateTo:i,position:{X:"right",Y:"top"},collision:{X:st.Flip,Y:st.Flip},autoReposition:!0,onClose:d,className:p.MORE_POPUP_WRAPPER,viewPortElementRef:c||null,zIndex:1e3,children:j()})});Vr.displayName="MorePopup";Vr.__docgenInfo={description:"MorePopup component for displaying additional events in month view",methods:[],displayName:"MorePopup"};const ql=(o,n,r)=>{const{schedulerRef:e,keyboardNavigation:s,handleTodayClick:i,eventSettings:l,readOnly:c,showDeleteAlert:f,showQuickInfoPopup:d,getAvailableViews:h,handleCurrentViewChange:g,handlePreviousClick:m,handleNextClick:E}=o,a=(S,b)=>{S.getAttribute("tabindex")!=="0"&&S.setAttribute("tabindex","0"),S.focus(),b.preventDefault()},C=S=>{var T;const b=(T=e.current)==null?void 0:T.element,M=b==null?void 0:b.querySelector(`.${p.CONTENT_TABLE} .${p.WORK_CELLS}`);M&&(a(M,S),M.classList.add(p.SELECTED_CELL))},v=S=>{i&&(i(),S.preventDefault())},R=S=>{m&&(m(),S.preventDefault(),S.stopPropagation())},j=S=>{E&&(E(),S.preventDefault(),S.stopPropagation())},y=S=>{const b=S.code.replace("Digit",""),M=parseInt(b,10)-1;if(isNaN(M)||M<0)return;const T=h==null?void 0:h();if(!(!T||T.length===0)&&M<T.length){const H=T[parseInt(M.toString(),10)];g&&(g(H.name),S.preventDefault(),S.stopPropagation())}},D=S=>{var T,H,w,I,Y,Z;let b=document==null?void 0:document.activeElement;const M=(T=e.current)==null?void 0:T.element;if((!b||!((H=b.classList)!=null&&H.contains(p.APPOINTMENT))||gt(b,"."+p.POPUP_WRAPPER))&&(b=Cs(n||[],M).element),b&&b.classList.contains(p.APPOINTMENT)){if(Gn(b),c||l&&!l.allowDeleting)return;if(d&&((I=(w=o.quickPopupRef)==null?void 0:w.current)!=null&&I.element))(Y=o.quickPopupRef)==null||Y.current.handleDelete();else if(f){const ce=Cs(n||[],M).data,K=Array.isArray(ce)?ce:[ce],O=K[0];if(O&&O.recurrenceID&&o.showRecurrenceDeleteAlert){const L=V=>{O&&En(O,V,e,l.fields,r)};(Z=o.showRecurrenceDeleteAlert)==null||Z.call(o,L)}else f(()=>{K.forEach(V=>{var J,ue;(ue=(J=e==null?void 0:e.current)==null?void 0:J.deleteEvent)==null||ue.call(J,V)})})}S.preventDefault()}},x=(S,b,M,T,H,w)=>{let I=b,Y=M;switch(S){case wt.Left:{if(M>0)Y=M-1;else if(b>0){I=b-1;const Z=H(I);Y=Math.max(0,((Z==null?void 0:Z.length)??1)-1)}break}case wt.Right:{M<((w==null?void 0:w.length)??0)-1?Y=M+1:b<T.length-1&&(I=b+1,Y=0);break}case wt.Up:{if(b===0)return null;I=b-1;const Z=H(I);Y=Math.min(M,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}case wt.Down:{if(b>=T.length-1)return null;I=b+1;const Z=H(I);Y=Math.min(M,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}}return{nextRow:I,nextCol:Y}},k=(S,b)=>{var V,J,ue;const M=(V=e.current)==null?void 0:V.element,T=(ue=(J=b.target).closest)==null?void 0:ue.call(J,"."+p.WORK_CELLS_ROW),H=M.querySelectorAll(`.${p.WORK_CELLS_ROW}`),w=Array.prototype.indexOf.call(H,T),I=F=>{var q;return(q=H.item(F))==null?void 0:q.querySelectorAll(`.${p.WORK_CELLS}`)},Y=I(w),Z=Array.prototype.indexOf.call(Y,b.target);let ce=w,K=Z;const O=x(S,w,Z,H,I,Y);if(!O)return;ce=O.nextRow,K=O.nextCol;const L=br(M,ce,K);L&&(zn(L),b.preventDefault(),b.stopPropagation())};return S=>{var M,T,H,w;if(!s)return;const b=S.target;if(!(b&&["INPUT","TEXTAREA","SELECT"].indexOf(b.tagName)>-1&&b.closest(`.${p.POPUP_WRAPPER}`))){if(S.shiftKey&&S.altKey&&S.code==="KeyY"){v(S);return}if(S.altKey&&S.code>="Digit1"&&S.code<="Digit6"){y(S);return}switch(S.key){case"Home":{C(S);break}case"ArrowUp":{!S.ctrlKey&&!S.metaKey&&(M=b==null?void 0:b.closest)!=null&&M.call(b,"."+p.WORK_CELLS)&&k(wt.Up,S);break}case"ArrowDown":{!S.ctrlKey&&!S.metaKey&&(T=b==null?void 0:b.closest)!=null&&T.call(b,"."+p.WORK_CELLS)&&k(wt.Down,S);break}case"Delete":{D(S);break}case"ArrowLeft":{S.ctrlKey||S.metaKey?R(S):(H=b==null?void 0:b.closest)!=null&&H.call(b,"."+p.WORK_CELLS)&&k(wt.Left,S);break}case"ArrowRight":{S.ctrlKey||S.metaKey?j(S):(w=b==null?void 0:b.closest)!=null&&w.call(b,"."+p.WORK_CELLS)&&k(wt.Right,S);break}}}}},go=t.createContext(void 0),Gl=({children:o})=>{const[n,r]=t.useState({visible:!1,guid:null,segments:[],isDayEvent:!1}),e=t.useCallback(l=>{r({visible:!0,guid:l==null?void 0:l.guid,segments:(l==null?void 0:l.segments)??[],isDayEvent:!!(l!=null&&l.isDayEvent)})},[]),s=t.useCallback(()=>{r({visible:!1,guid:null,segments:[],isDayEvent:!1})},[]),i=t.useMemo(()=>({...n,show:e,hide:s}),[n,e,s]);return u.jsx(go.Provider,{value:i,children:o})},Wr=()=>{const o=t.useContext(go);if(!o)throw new Error("useCloneEventContext must be used within CloneEventProvider");return o},Kt=({event:o})=>{if(!(o.recurrenceRule||o.recurrenceID)||Ae.isDevice)return null;const r=o.id!==o.recurrenceID,e=r?Di:yi,s=r?p.EVENT_RECURRENCE_EDIT_ICON_CLASS:p.EVENT_RECURRENCE_ICON_CLASS;return u.jsx("div",{className:`${p.ICONS} ${s}`,children:u.jsx(e,{})})};Kt.displayName="RecurrenceIcon";const Zl=o=>{const{event:n,eventStyle:r,totalSegments:e,isOverflowLeft:s=!1,isOverflowRight:i=!1}=o,{timeFormat:l}=We(),{locale:c}=$e(),f=a=>ut(a??new Date,{type:"time",skeleton:"short",format:l,locale:c}),d=a=>u.jsx("div",{className:`sf-indicator sf-icons sf-${a}-icon`,children:a==="left"?u.jsx(Ir,{}):u.jsx(kr,{})}),h=a=>u.jsx("div",{className:p.TIME,children:a}),E=e?(()=>{const{subject:a,isAllDay:C,startTime:v,endTime:R}=n,j=s?d("left"):!C&&h(f(v)),y=i?d("right"):!C&&h(f(R));return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[j,u.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:a||"Add title"}),y,u.jsx(Kt,{event:n})]})})():(()=>{const{subject:a,startTime:C,isAllDay:v}=n;return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!v&&h(f(C)),u.jsx("div",{className:`${p.SUBJECT}`,children:a||"Add title"}),u.jsx(Kt,{event:n})]})})();return u.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:r,children:E})},Ql=o=>{const{timeFormat:n,startHourTuple:r,endHourTuple:e}=We(),{renderDates:s}=pt(),{locale:i}=$e(),l=(h,g)=>{let m=n;m||(m=Uo({type:"time",skeleton:"short",format:n},!1));const E=ut(h,{type:"time",format:m,locale:i}),a=ut(g,{type:"time",format:m,locale:i});return`${E} - ${a}`},c=h=>{const{event:g}=h,m=g.startTime&&g.endTime?l(g.startTime,g.endTime):"";return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[u.jsx("div",{className:`${p.SUBJECT}`,children:g.subject||"Add title"}),g.location&&u.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:g.location}),u.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:m}),u.jsx(Kt,{event:g})]})},f=h=>{const{isOverflowTop:g,isOverflowBottom:m}=ct.getOverflowDirection(h,s,r,e);return u.jsxs(t.Fragment,{children:[g&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:u.jsx($s,{})}),c(h),m&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:u.jsx(js,{})})]})},d=o.totalSegments&&o.totalSegments>1||r||e?f(o):c(o);return u.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:o.eventStyle,children:d})},Jl=()=>{var s,i,l,c;const o=Wr(),{schedulerRef:n}=We();t.useEffect(()=>{const f=h=>{var E,a,C,v;const g=(h==null?void 0:h.detail)||{},m=(E=n.current)==null?void 0:E.element;m&&(g!=null&&g.container)&&(g.container===m||m.contains(g.container))&&o.show({guid:(a=g.payload)==null?void 0:a.guid,segments:(C=g.payload)==null?void 0:C.segments,isDayEvent:(v=g.payload)==null?void 0:v.isDayEvent})},d=h=>{var E;const g=(h==null?void 0:h.detail)||{},m=(E=n.current)==null?void 0:E.element;m&&(g!=null&&g.container)&&(g.container===m||m.contains(g.container))&&o.hide()};return window==null||window.addEventListener("showCloneEvent",f),window==null||window.addEventListener("hideCloneEvent",d),()=>{window==null||window.removeEventListener("showCloneEvent",f),window==null||window.removeEventListener("hideCloneEvent",d)}},[n,o]);const r=o.isDayEvent?(i=(s=n.current)==null?void 0:s.element)==null?void 0:i.querySelector(`.${p.DAY_CLONE_CONTAINER}`):(c=(l=n.current)==null?void 0:l.element)==null?void 0:c.querySelector(`.${p.TIME_SLOT_CLONE_CONTAINER}`),e=u.jsx(u.Fragment,{children:o.visible&&o.segments.map((f,d)=>o.isDayEvent?u.jsx(Zl,{...f},`${f==null?void 0:f.guid}-${d}`):u.jsx(Ql,{...f},`${f==null?void 0:f.guid}-${d}`))});return r?Xt.createPortal(e,r):null},ea=o=>{const{visible:n,onConfirm:r,onCancel:e,title:s,message:i,confirmText:l,showCancel:c=!0,action:f="delete"}=o,{locale:d}=$e(),{getString:h}=tt(d||"en-US"),g=f==="recurrenceEdit"||f==="recurrenceDelete",m=f==="recurrenceDelete";return u.jsx(Cn,{header:s||h("deleteEvent"),open:n,style:{maxWidth:"400px"},animation:{effect:"Zoom",duration:400,delay:1},footer:u.jsxs(u.Fragment,{children:[g?u.jsxs(u.Fragment,{children:[u.jsx(Ze,{onClick:()=>r("occurrence"),variant:qe.Standard,children:h(m?"deleteEvent":"editThisEvent")}),u.jsx(Ze,{onClick:()=>r("series"),variant:qe.Standard,children:h("editEntireSeries")})]}):f==="seriesChange"?u.jsxs(u.Fragment,{children:[u.jsx(Ze,{onClick:()=>r("yes"),variant:qe.Standard,children:h("yes")}),u.jsx(Ze,{onClick:()=>r("no"),variant:qe.Standard,children:h("no")})]}):u.jsx(Ze,{onClick:()=>r(),variant:qe.Standard,children:l||h("delete")}),c&&u.jsx(Ze,{onClick:e,variant:qe.Standard,children:h("cancel")})]}),onClose:e,children:u.jsx("div",{children:i||h("confirmDeleteMessage")})})},To=t.createContext(null),Zn=()=>{const o=t.useContext(To);if(!o)throw new Error("useEditorContext must be used within EditorProvider");return o},ta=({editorState:o,children:n})=>u.jsx(To.Provider,{value:o,children:n}),na=o=>{const{locale:n}=$e(),{getString:r}=tt(n||"en-US"),{schedulerRef:e,showDeleteAlert:s,eventSettings:i,eventOverlap:l,confirmationDialog:c,onEditorSubmit:f,enableRecurrenceValidation:d}=We(),{eventsData:h,eventsProcessed:g}=Pt(),{data:m,action:E,originalData:a,startDateOnly:C,startTimeOnly:v,endDateOnly:R,endTimeOnly:j,slotDuration:y,formRef:D,validateRequiredFields:x}=Zn(),k=t.useCallback(()=>{var I,Y,Z,ce,K,O,L;let T,H;if(m!=null&&m.isAllDay){const V=C?$.normalizeDate(C):void 0,J=R?$.normalizeDate(R):V;T=V,H=J}else{const V=(J,ue)=>$.combineDateAndTime(J,ue);if(T=V(C,v)??(m==null?void 0:m.startTime),H=V(R,j)??(m==null?void 0:m.endTime),T&&H&&H<=T){const J=new Date(T);J.setMinutes(J.getMinutes()+y),H=J}}const w={[((I=i==null?void 0:i.fields)==null?void 0:I.subject)||"subject"]:(m==null?void 0:m.subject)||r("newEvent"),[((Y=i==null?void 0:i.fields)==null?void 0:Y.startTime)||"startTime"]:T,[((Z=i==null?void 0:i.fields)==null?void 0:Z.endTime)||"endTime"]:H,[((ce=i==null?void 0:i.fields)==null?void 0:ce.isAllDay)||"isAllDay"]:!!(m!=null&&m.isAllDay),[((K=i==null?void 0:i.fields)==null?void 0:K.location)||"location"]:(m==null?void 0:m.location)||"",[((O=i==null?void 0:i.fields)==null?void 0:O.description)||"description"]:(m==null?void 0:m.description)||"",[((L=i==null?void 0:i.fields)==null?void 0:L.recurrenceRule)||"recurrenceRule"]:(m==null?void 0:m.recurrenceRule)||""};if(E==="Edit"&&a){const V=new Set(["id","subject","startTime","endTime","isAllDay","location","description","isReadonly","isBlock"]),J=new Set(Object.values(i==null?void 0:i.fields).filter(F=>{var q;return F!==((q=i==null?void 0:i.fields)==null?void 0:q.id)}));return{...Object.fromEntries(Object.entries(a).filter(([F])=>!V.has(F)&&!J.has(F))),...w,[i.fields.id]:a.id}}else return{...w,[i.fields.id]:Me.generateEventGuid()}},[m==null?void 0:m.isAllDay,C,v,R,j,y,m==null?void 0:m.startTime,m==null?void 0:m.endTime,i,m==null?void 0:m.subject,m==null?void 0:m.location,m==null?void 0:m.description,E,a]),z=t.useCallback(T=>!l&&Me.checkEventOverlap(T,h,!1,i.fields)?(c==null||c.show({title:r("eventOverlap"),message:r("overlapAlert"),confirmText:r("ok"),showCancel:!1,onConfirm:()=>c.hide()}),!1):Me.isBlockRange(T,h,!1,i.fields)?(c==null||c.show({title:r("alert"),message:r("blockAlert"),confirmText:r("ok"),showCancel:!1,onConfirm:()=>c.hide()}),!1):!0,[l,h,i,c]),S=t.useCallback(()=>{var Y,Z,ce,K,O,L,V,J,ue,F,q;const T=x(r);if(T){c==null||c.show({title:r("alert"),message:T,confirmText:r("ok"),showCancel:!1,onConfirm:()=>c.hide()});return}if(D!=null&&D.current&&!((Y=D.current)!=null&&Y.validate()))return;let H=k();if(f){const ee={data:H,cancel:!1,requestType:E,originalData:E==="Add"?void 0:a};if(f(ee),ee.cancel)return;H=ee.data}if(!z(H))return;const w=H[i.fields.startTime],I=H[i.fields.endTime];if(E==="Edit"&&a)(ce=(Z=e==null?void 0:e.current)==null?void 0:Z.saveEvent)==null||ce.call(Z,H);else if(E==="EditOccurrence"&&a)if(a.subject=(m==null?void 0:m.subject)||a.subject,a.location=(m==null?void 0:m.location)||a.location,a.description=(m==null?void 0:m.description)||a.description,a.isAllDay=(m==null?void 0:m.isAllDay)??a.isAllDay,a.id!==a.recurrenceID)if(H[i.fields.id]=a.id,!a.recurrenceRule)(O=(K=e==null?void 0:e.current)==null?void 0:K.saveEvent)==null||O.call(K,H);else{const ee=d?Rr(a,w,I,g,h):{isValid:!0,messageKey:xt.SameDayAlert};if(!ee.isValid){bs(r("alert"),r(ee.messageKey),r("ok"),c);return}(V=(L=e==null?void 0:e.current)==null?void 0:L.saveEvent)==null||V.call(L,H)}else{const ee=d?Rr(a,w,I,g,h):{isValid:!0,messageKey:xt.SameDayAlert};if(ee.isValid)a.recurrenceException=a.recurrenceException??Xn(a.startTime);else{bs(r("alert"),r(ee.messageKey),r("ok"),c);return}Hr(a,w,I,e,i.fields,h,g)}else if(E==="EditSeries"&&a){let ee=!1,te={};const oe=g==null?void 0:g.filter(De=>((De.recurrenceID&&De.recurrenceID===a.recurrenceID&&De.id!==a.recurrenceID||!De.recurrenceID&&De.recurrenceRule&&De.id===a.recurrenceID&&De.recurrenceException)&&(ee=!0),De.id===a.recurrenceID&&(te=De),(De.recurrenceID||De.id)===a.recurrenceID));if(H[i.fields.id]=te.id,H[i.fields.recurrenceRule]=te.recurrenceRule,delete H[i.fields.recurrenceID],ee){Fn("seriesChange",c,r,De=>{var ve,de,N,B;De==="yes"?(delete H[i.fields.recurrenceException],En(a,"series",e,i.fields,g,oe),(de=(ve=e==null?void 0:e.current)==null?void 0:ve.addEvent)==null||de.call(ve,H)):De==="no"&&((B=(N=e==null?void 0:e.current)==null?void 0:N.saveEvent)==null||B.call(N,H)),o()});return}else(ue=(J=e==null?void 0:e.current)==null?void 0:J.saveEvent)==null||ue.call(J,H)}else H[i.fields.recurrenceRule]&&(H[i.fields.id]=ho(h,i.fields)+1),(q=(F=e==null?void 0:e.current)==null?void 0:F.addEvent)==null||q.call(F,H);o()},[x,k,z,E,a,e,o,c]),b=t.useCallback(()=>{if(!a)return;const T=()=>{var H,w;E==="EditOccurrence"&&a.recurrenceID?En(a,"occurrence",e,i.fields,g):E==="EditSeries"&&a.recurrenceID?En(a,"series",e,i.fields,g):(w=(H=e==null?void 0:e.current)==null?void 0:H.deleteEvent)==null||w.call(H,a)};o(),s==null||s(T)},[a,e,o,s]),M=t.useCallback(()=>o(),[o]);return{handleSave:S,handleDelete:b,handleCancel:M,buildEventData:k,validateEventConflicts:z}},Rs=[{name:"subject",visible:!0,className:p.SUBJECT_CONTAINER},{name:"location",visible:!0,className:p.LOCATION_CONTAINER},{name:"startDate",visible:!0,className:p.START_DATE_CONTAINER},{name:"startTime",visible:!0,className:p.START_TIME_CONTAINER},{name:"endDate",visible:!0,className:p.END_DATE_CONTAINER},{name:"endTime",visible:!0,className:p.END_TIME_CONTAINER},{name:"isAllDay",visible:!0,className:p.ALL_DAY_CONTAINER},{name:"description",visible:!0,className:p.DESCRIPTION_CONTAINER},{name:"repeatMode",visible:!0,className:p.REPEAT_MODE}],ra=[["subject","location"],["startDate","startTime"],["endDate","endTime"],["isAllDay"],["repeatMode"],["description"]],sa=({fields:o})=>{const{locale:n}=$e(),{getString:r}=tt(n||"en-US"),{dateFormat:e,timeFormat:s,timeScale:i}=We(),{data:l,startDateOnly:c,startTimeOnly:f,endDateOnly:d,endTimeOnly:h,slotDuration:g,repeatData:m,repeatModeValue:E,formState:a,formRef:C,setFormState:v,handleSubjectChange:R,handleLocationChange:j,handleDescriptionChange:y,handleStartDateChange:D,handleStartTimeChange:x,handleEndDateChange:k,handleEndTimeChange:z,handleIsAllDayChange:S,handleRepeatModeChange:b,setSlotDuration:M,action:T}=Zn(),H=t.useMemo(()=>o?o.reduce((ve,de)=>(de.validationRule&&(ve[de.name]=de.validationRule),ve),{}):{},[o]),w=t.useMemo(()=>{const ve={};return l!=null&&l.subject&&(ve.subject=l.subject),l!=null&&l.location&&(ve.location=l.location),l!=null&&l.description&&(ve.description=l.description),c&&(ve.startDate=c),f&&(ve.startTime=f),d&&(ve.endDate=d),h&&(ve.endTime=h),(l==null?void 0:l.isAllDay)!==void 0&&(ve.isAllDay=l.isAllDay),ve},[l,c,f,d,h]),I=t.useMemo(()=>(i==null?void 0:i.interval)/(i==null?void 0:i.slotCount)||30,[i]);t.useEffect(()=>{M==null||M(I)},[I]);const Y=(ve={})=>{var N;const de=ve.props??{};return u.jsxs(Rt,{name:"subject",children:[u.jsx(Er,{placeholder:de.placeholder??r("title"),value:de.value??((a==null?void 0:a.values.subject)||(l==null?void 0:l.subject)),onChange:B=>{var ie;a==null||a.onChange("subject",{value:B.value||""}),(ie=de.onChange??R)==null||ie(B)},onBlur:()=>a==null?void 0:a.onBlur("subject"),className:`${de.className??p.EVENT_SUBJECT} ${a!=null&&a.errors.subject?"sf-error":""}`,labelMode:de.labelMode??"Always",...de}),((N=a==null?void 0:a.errors)==null?void 0:N.subject)&&u.jsx("div",{className:"sf-form-error",children:a.errors.subject})]})},Z=(ve={})=>{var N;const de=ve.props??{};return u.jsxs(Rt,{name:"location",children:[u.jsx(Er,{placeholder:de.placeholder??r("location"),value:de.value??((a==null?void 0:a.values.location)||(l==null?void 0:l.location)),onChange:B=>{var ie;a==null||a.onChange("location",{value:B.value||""}),(ie=de.onChange??j)==null||ie(B)},onBlur:()=>a==null?void 0:a.onBlur("location"),className:`${de.className??p.EVENT_LOCATION} ${a!=null&&a.errors.location?"sf-error":""}`,labelMode:de.labelMode??"Always",...de}),((N=a==null?void 0:a.errors)==null?void 0:N.location)&&u.jsx("div",{className:"sf-form-error",children:a.errors.location})]})},ce=(ve={})=>{var N;const de=ve.props??{};return u.jsxs(Rt,{name:"startDate",children:[u.jsx(ts,{placeholder:de.placeholder??r("startDate"),className:`${de.className??p.EVENT_START_DATE} ${a!=null&&a.errors.startDate?"sf-error":""}`,labelMode:de.labelMode??"Always",value:de.value||(a==null?void 0:a.values.startDate)||c,format:de.format??e,onChange:B=>{var ie;a==null||a.onChange("startDate",{value:B.value}),(ie=de.onChange??D)==null||ie(B)},onBlur:()=>a==null?void 0:a.onBlur("startDate"),strictMode:de.strictMode??!0,...de}),((N=a==null?void 0:a.errors)==null?void 0:N.startDate)&&u.jsx("div",{className:"sf-form-error",children:a.errors.startDate})]})},K=(ve={})=>{var N;const de=ve.props??{};return u.jsxs(Rt,{name:"startTime",children:[u.jsx(Tr,{placeholder:de.placeholder??r("startTime"),className:`${de.className??p.EVENT_START_TIME} ${a!=null&&a.errors.startTime?"sf-error":""}`,labelMode:de.labelMode??"Always",step:de.step??g,value:de.value??((a==null?void 0:a.values.startTime)||f),format:de.format??s,onChange:B=>{var ie;a==null||a.onChange("startTime",{value:B.value}),(ie=de.onChange??x)==null||ie(B)},onBlur:()=>a==null?void 0:a.onBlur("startTime"),strictMode:de.strictMode??!0,...de}),((N=a==null?void 0:a.errors)==null?void 0:N.startTime)&&u.jsx("div",{className:"sf-form-error",children:a.errors.startTime})]})},O=(ve={})=>{var N;const de=ve.props??{};return u.jsxs(Rt,{name:"endDate",children:[u.jsx(ts,{placeholder:de.placeholder??r("endDate"),className:`${de.className??p.EVENT_END_DATE} ${a!=null&&a.errors.endDate?"sf-error":""}`,labelMode:de.labelMode??"Always",value:de.value??((a==null?void 0:a.values.endDate)||d),format:de.format??e,onChange:B=>{var ie;a==null||a.onChange("endDate",{value:B.value}),(ie=de.onChange??k)==null||ie(B)},onBlur:()=>a==null?void 0:a.onBlur("endDate"),strictMode:de.strictMode??!0,...de}),((N=a==null?void 0:a.errors)==null?void 0:N.endDate)&&u.jsx("div",{className:"sf-form-error",children:a.errors.endDate})]})},L=(ve={})=>{var N;const de=ve.props??{};return u.jsxs(Rt,{name:"endTime",children:[u.jsx(Tr,{placeholder:de.placeholder??r("endTime"),className:`${de.className??p.EVENT_END_TIME} ${a!=null&&a.errors.endTime?"sf-error":""}`,labelMode:de.labelMode??"Always",step:de.step??g,value:de.value??((a==null?void 0:a.values.endTime)||h),format:de.format??s,onChange:B=>{var ie;a==null||a.onChange("endTime",{value:B.value}),(ie=de.onChange??z)==null||ie(B)},onBlur:()=>a==null?void 0:a.onBlur("endTime"),strictMode:de.strictMode??!0,...de}),((N=a==null?void 0:a.errors)==null?void 0:N.endTime)&&u.jsx("div",{className:"sf-form-error",children:a.errors.endTime})]})},V=(ve={})=>{var N,B;const de=ve.props??{};return u.jsxs(Rt,{name:"isAllDay",children:[u.jsx(Yo,{label:de.label??r("allDay"),className:`${de.className??p.EVENT_ALLDAY} ${a!=null&&a.errors.isAllDay?"sf-error":""}`,checked:de.checked??(a==null?void 0:a.values.isAllDay)??(l==null?void 0:l.isAllDay),onChange:ie=>{var se;a==null||a.onChange("isAllDay",{value:ie.value}),(se=de.onChange??S)==null||se(ie)},...de}),((N=a==null?void 0:a.modified)==null?void 0:N.isAllDay)&&((B=a==null?void 0:a.errors)==null?void 0:B.isAllDay)&&u.jsx("div",{className:"sf-form-error",children:a.errors.isAllDay})]})},J=(ve={})=>{const de=ve.props??{};return u.jsx(Rt,{name:"repeatMode",children:u.jsx(zo,{dataSource:m,fields:{text:"text",value:"value"},value:de.value??E,placeholder:de.placeholder??r("repeat"),labelMode:"Always",onChange:de.onChange??b,...de})})},ue=(ve={})=>{var N;const de=ve.props??{};return u.jsx("div",{className:p.DESCRIPTION_ROW,children:u.jsxs(Rt,{name:"description",children:[u.jsx(Si,{placeholder:de.placeholder??r("description"),className:`${de.className??p.EVENT_DESCRIPTION} ${a!=null&&a.errors.description?"sf-error":""}`,labelMode:de.labelMode??"Always",value:de.description??((a==null?void 0:a.values.description)||(l==null?void 0:l.description)),width:de.width??"100%",resizeMode:de.resizeMode??It.Vertical,onChange:B=>{var ie;a==null||a.onChange("description",{value:B.value||""}),(ie=de.onChange??y)==null||ie(B)},onBlur:()=>a==null?void 0:a.onBlur("description"),...de}),((N=a==null?void 0:a.errors)==null?void 0:N.description)&&u.jsx("div",{className:"sf-form-error",children:a.errors.description})]})})},F={subject:Y,location:Z,startDate:ce,startTime:K,endDate:O,endTime:L,isAllDay:V,repeatMode:J,description:ue},q=t.useMemo(()=>!o||o.length===0?Rs:o.filter(ve=>ve.visible!==!1),[o]),ee=t.useMemo(()=>{const ve=[],de=new Map(q.map(N=>[N.name,N]));return ra.forEach(N=>{const B=N.map(ie=>de.get(ie)).filter(ie=>!!ie);B.length>0&&ve.push(B)}),ve},[q]),te=ve=>{var de;return(de=Rs.find(N=>N.name===ve))==null?void 0:de.className},oe=t.useCallback(ve=>{const de=[p.EDITOR_FIELD_CONTAINER,te(ve.name),ve.className].filter(Boolean).join(" ");if(ve.component)return u.jsx("div",{className:de,children:ve.component},ve.name);const N=F[ve.name];return N?(ve.name==="startTime"||ve.name==="endTime")&&(l!=null&&l.isAllDay)||ve.name==="repeatMode"&&T==="EditOccurrence"?null:u.jsx("div",{className:de,children:N(ve)},ve.name):null},[l==null?void 0:l.isAllDay,r,F,T]);return!o||o.length===0?u.jsx(gr,{ref:C,rules:H,initialValues:w,onFormStateChange:v,validateOnChange:!0,autoComplete:"off",children:u.jsxs("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:[u.jsxs("div",{className:`${p.TITLE_LOCATION_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[u.jsx("div",{className:`${p.SUBJECT_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:Y()}),u.jsx("div",{className:`${p.LOCATION_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:Z()})]}),u.jsxs("div",{className:`${p.START_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[u.jsx("div",{className:`${p.START_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:ce()}),!(l!=null&&l.isAllDay)&&u.jsx("div",{className:`${p.START_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:K()})]}),u.jsxs("div",{className:`${p.END_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[u.jsx("div",{className:`${p.END_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:O()}),!(l!=null&&l.isAllDay)&&u.jsx("div",{className:`${p.END_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:L()})]}),u.jsx("div",{className:`${p.ALL_DAY_TIMEZONE_ROW} ${p.DISPLAY_FLEX}`,children:u.jsx("div",{className:`${p.ALL_DAY_CONTAINER}`,children:V()})}),T!=="EditOccurrence"&&u.jsx("div",{className:`${p.REPEAT_MODE_ROW} ${p.DISPLAY_FLEX}`,children:u.jsx("div",{className:`${p.REPEAT_MODE}`,children:J()})}),u.jsx("div",{className:p.DESCRIPTION_ROW,children:u.jsx("div",{className:p.DESCRIPTION_CONTAINER,children:ue()})})]})}):u.jsx(gr,{ref:C,rules:H,initialValues:w,onFormStateChange:v,validateOnChange:!0,autoComplete:"off",children:u.jsx("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:ee.map((ve,de)=>{const N=ve.map(oe).filter(Boolean);return N.length?u.jsx("div",{className:`${p.EDITOR_FIELDS_ROW} ${p.DISPLAY_FLEX}`,children:N},`row-${de}`):null})})})},oa=()=>{const{locale:o}=$e(),{getString:n}=tt(o||"en-US"),{recurrenceOpen:r,closeRecurrenceEditor:e,recurrenceStart:s,recurrenceRule:i,handleRecurrenceRuleChange:l}=Zn(),[c,f]=t.useState(i),d=t.useCallback(E=>{f(E.value)},[]),h=t.useCallback(()=>{l(c),e()},[c,e,l]),g=t.useCallback(()=>{e()},[e]),m=t.useMemo(()=>u.jsxs("div",{className:p.DIALOG_FOOTER,children:[u.jsx(Ze,{className:p.SAVE_EVENT,variant:qe.Standard,onClick:h,children:n("save")}),u.jsx(Ze,{className:p.CANCEL_EVENT,variant:qe.Standard,onClick:g,children:n("cancel")})]}),[h,g]);return r?u.jsx(Cn,{header:n("customRecurrence"),footer:m,open:r,onClose:e,modal:!0,style:{width:"500px",minHeight:"388px"},className:`${p.DIALOG}`,children:u.jsx(Ko,{value:c,onChange:d,startDate:s})}):null},ia=({open:o,onClose:n,fields:r,action:e,children:s,dialogProps:i,className:l,style:c})=>{const{locale:f}=$e(),{getString:d}=tt(f||"en-US"),{handleCancel:h,handleDelete:g,handleSave:m}=na(n),{formState:E}=Zn(),a=t.useMemo(()=>i!=null&&i.header?i.header:d(e==="Add"?"newEvent":"editEvent"),[i==null?void 0:i.header,e,d]),C=t.useMemo(()=>i!=null&&i.footer?i==null?void 0:i.footer:u.jsxs("div",{className:p.DIALOG_FOOTER,children:[e!=="Add"&&u.jsx(Ze,{className:p.DELETE_EVENT,variant:qe.Standard,onClick:g,children:d("delete")}),u.jsx(Ze,{className:p.SAVE_EVENT,variant:qe.Standard,onClick:m,children:d("save")}),u.jsx(Ze,{className:p.CANCEL_EVENT,variant:qe.Standard,onClick:h,children:d("cancel")})]}),[i==null?void 0:i.footer,e,g,m,h,E==null?void 0:E.allowSubmit]);return u.jsxs(u.Fragment,{children:[u.jsx(Cn,{header:a,open:o,onClose:n,modal:(i==null?void 0:i.modal)??!0,style:{width:"500px",minHeight:"300px",...c},className:`${p.DIALOG} ${l||""}`,footer:C,...i,children:u.jsx("div",{className:p.FORM_CONTAINER,children:s||u.jsx(sa,{fields:r})})}),u.jsx(oa,{})]})};function la(o,n){switch(n.type){case"setField":return{...o,[n.key]:n.value};case"setMany":return{...o,...n.payload};default:return o}}const aa=(o,n,r,e,s)=>{const[i,l]=t.useState(!1),[c,f]=t.useState(),d=t.useRef(null),h=t.useRef(s);t.useEffect(()=>{h.current=s},[s]);const m={subject:"",location:"",description:"",startTime:void 0,endTime:void 0,isAllDay:!1,action:"Add",originalData:void 0,repeatData:[{value:"Never",text:"Never"},{value:"FREQ:DAILY",text:"Daily"},{value:"FREQ:WEEKLY",text:"Weekly"},{value:"FREQ:MONTHLY",text:"Monthly"},{value:"Custom",text:"Custom"}],recurrenceRule:void 0},[E,a]=t.useReducer(la,m),C=t.useCallback(W=>a({type:"setField",key:"subject",value:W}),[a]),v=t.useCallback(W=>a({type:"setField",key:"location",value:W}),[a]),R=t.useCallback(W=>a({type:"setField",key:"description",value:W}),[a]),j=t.useCallback(W=>a({type:"setField",key:"startTime",value:W}),[a]),y=t.useCallback(W=>a({type:"setField",key:"endTime",value:W}),[a]),D=t.useCallback(W=>a({type:"setField",key:"isAllDay",value:W}),[a]),x=t.useCallback(W=>a({type:"setField",key:"recurrenceRule",value:W}),[a]),k=t.useCallback(W=>a({type:"setField",key:"action",value:W}),[a]),z=t.useCallback(W=>a({type:"setField",key:"originalData",value:W}),[a]),{eventSettings:S}=We(),b=t.useCallback((W,Ce)=>{const Ee=[{value:"Never",text:"Never"},{value:Ln("DAILY",W),text:"Daily"},{value:Ln("WEEKLY",W),text:"Weekly"},{value:Ln("MONTHLY",W),text:"Monthly"},{value:Ln("YEARLY",W),text:"Yearly"},{value:"Custom",text:"Custom"}];if(Ce){const Oe=Ee.find(Pe=>Pe.value===Ce);if(Oe){a({type:"setField",key:"repeatData",value:Ee}),x(Ce),xe(Oe.value);return}if(typeof Ce=="string"){const Pe={value:Ce,text:Ce},Ye=Math.max(0,Ee.length-1),He=[...Ee.slice(0,Ye),Pe,...Ee.slice(Ye)];a({type:"setField",key:"repeatData",value:He}),x(Ce),xe(Ce);return}a({type:"setField",key:"repeatData",value:Ee}),x(""),xe("Never")}else a({type:"setField",key:"repeatData",value:Ee}),x(""),xe("Never")},[a]),M=t.useCallback(W=>{if(o==null||o(W),W.cancel)return;r==null||r();const Ce=W.isAllDay?$.normalizeDate(W.startTime):W.startTime,Ee={startTime:Ce,endTime:W.isAllDay?Ce:W.endTime};b(Ce),a({type:"setMany",payload:{subject:"",location:"",description:"",isAllDay:W.isAllDay,action:"Add",startTime:Ee.startTime,endTime:Ee.endTime}}),l(!0)},[o,r]),T=t.useCallback(W=>{if(n==null||n(W),W.cancel)return;r==null||r(),W!=null&&W.data||(W.data={});const Ce=!!W.data.isAllDay,Ee=Ce?$.normalizeDate(W.data.startTime):W.data.startTime,Oe=Ce?$.normalizeDate(W.data.endTime):W.data.endTime;b(Ee,W.data.recurrenceRule);const Pe={originalData:W.data,subject:W.data.subject??"",location:W.data.location??"",description:W.data.description??"",isAllDay:Ce,startTime:Ee,endTime:Oe};if(W.data.recurrenceID||W.data[S.fields.recurrenceID]){e==null||e(Ye=>{let He={};Ye==="series"&&(He=vs(W.data,h.current),b(Ee,W.data.recurrenceRule??(He==null?void 0:He.recurrenceRule))),a({type:"setMany",payload:{action:Ye==="series"?"EditSeries":"EditOccurrence",...Pe,startTime:Ye==="series"?He.startTime:Ee,endTime:Ye==="series"?He.endTime:Oe}}),l(!0)});return}a({type:"setMany",payload:{action:"Edit",...Pe}}),l(!0)},[n,r,S,e]),H=t.useCallback(()=>l(!1),[]),{subject:w,location:I,description:Y,startTime:Z,endTime:ce,isAllDay:K,action:O,originalData:L,recurrenceRule:V,repeatData:J}=E,[ue,F]=t.useState(30),[q,ee]=t.useState(void 0),[te,oe]=t.useState(void 0),[De,ve]=t.useState(void 0),[de,N]=t.useState(void 0),[B,ie]=t.useState(!1),[se,xe]=t.useState("Never"),[Q,le]=t.useState(!1);t.useEffect(()=>{if(!i)return;const W=Z?new Date(Z):void 0,Ce=ce?new Date(ce):void 0;ee(W?$.normalizeDate(W):void 0),ve(Ce?$.normalizeDate(Ce):void 0),ie(!1),oe(Z?new Date(Z):te),N(ce?new Date(ce):de)},[i,Z,ce]);const fe=t.useCallback((W,Ce)=>$.combineDateAndTime(W,Ce),[]),A=t.useCallback(W=>{ee(W==null?void 0:W.value)},[]),ne=t.useCallback(W=>{const Ce=W==null?void 0:W.value;if(oe(Ce),!Ce)return;const Ee=fe(q,Ce),Oe=fe(De??q,de);if(!B&&$.isMidnight(de)){const Pe=new Date(Ce);Pe.setMinutes(Pe.getMinutes()+ue),N(Pe)}else if(Ee&&Oe&&Oe<=Ee){const Pe=new Date(Ce);Pe.setMinutes(Pe.getMinutes()+ue),N(Pe)}},[q,De,de,B,ue,fe]),U=t.useCallback(W=>{ve(W==null?void 0:W.value)},[]),G=t.useCallback(W=>{const Ce=W==null?void 0:W.value;N(Ce),ie(!!Ce)},[]),ge=t.useCallback(W=>{if(D(W==null?void 0:W.value),O==="Add"&&(W==null?void 0:W.value)===!1)if(!B&&$.isMidnight(de)){const Ce=te?new Date(te):new Date(0);te||Ce.setHours(0,0,0,0),Ce.setMinutes(Ce.getMinutes()+ue),N(Ce)}else{const Ce=fe(q,te),Ee=fe(De??q,de);if(Ce&&Ee&&Ee<=Ce){const Oe=te?new Date(te):new Date(Ee);Oe.setMinutes(Oe.getMinutes()+ue),N(Oe)}}},[O,B,de,te,ue,fe,q,De]),pe=t.useCallback(W=>{C(W.value)},[]),ye=t.useCallback(W=>{v(W.value)},[]),Ie=t.useCallback(()=>{le(!0)},[]),me=t.useCallback(()=>{le(!1)},[]),we=t.useCallback(W=>{const Ce=W==null?void 0:W.value;xe(Ce),Ce!=="Never"&&Ce!=="Custom"&&x(Ce),Ce==="Never"&&x(""),Ce==="Custom"&&Ie()},[xe,Ie]),_=t.useCallback(W=>{x(W)},[]),X=t.useCallback(W=>{R(W==null?void 0:W.value)},[]),re=t.useCallback(W=>{if(!W)return;const Ce=(Ee,Oe,Pe)=>{C(W.subject),v(W.location),R(W.description),j(Pe==="series"?Oe.startTime:W.startTime),y(Pe==="series"?Oe.endTime:W.endTime),D(!!W.isAllDay),z(W),b(W.startTime,W.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule)),Ee&&x(Ee),l(!0)};W.recurrenceID||W[S.fields.recurrenceID]?e==null||e(Ee=>{let Oe={};Ee==="series"&&(Oe=vs(W,h.current)),k(Ee==="series"?"EditSeries":"EditOccurrence");const Pe=Ee==="series"?W.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule):void 0;Ce(Pe,Oe,Ee)}):(k("Edit"),Ce())},[S,S.fields,e]),he=t.useCallback(W=>{k("Add");const Ce={subject:W[S.fields.subject]??"",location:W[S.fields.location]??"",description:W[S.fields.description]??"",startTime:W[S.fields.startTime]??W.startTime,endTime:W[S.fields.endTime]??W.endTime,isAllDay:W[S.fields.isAllDay]??(W==null?void 0:W.isAllDay)??!1};if(C(Ce.subject),v(Ce.location),R(Ce.description),z(void 0),Ce.isAllDay){const Ee=$.normalizeDate(Ce.startTime);j(Ee),y(Ee)}else j(Ce.startTime),y(Ce.endTime);D(Ce.isAllDay),b(Ce.startTime),l(!0)},[]),Se=t.useCallback(W=>{if(!q||!De)return W("invalidDateValue");if(!K&&(!te||!de))return W("invalidTimeValue");let Ce,Ee;return K?(Ce=q?$.normalizeDate(q):void 0,Ee=De?$.normalizeDate(De):void 0):(Ce=$.combineDateAndTime(q,te),Ee=$.combineDateAndTime(De,de)),Ce&&Ee&&Ee<Ce?W("invalidDateRange"):null},[q,te,De,de,K]),Re=t.useMemo(()=>K?q?$.normalizeDate(q):Z:$.combineDateAndTime(q,te)??Z,[K,q,te,Z]);return{open:i,data:{subject:w,location:I,startTime:Z,endTime:ce,isAllDay:K,description:Y,recurrenceRule:V},action:O,originalData:L,setOpen:l,onCellDoubleClickHandler:M,onEventDoubleClickHandler:T,onClose:H,startDateOnly:q,startTimeOnly:te,endDateOnly:De,endTimeOnly:de,slotDuration:ue,recurrenceStart:Re,repeatModeValue:se,repeatData:J,recurrenceOpen:Q,recurrenceRule:V,setRepeatModeValue:xe,setSlotDuration:F,handleSubjectChange:pe,handleLocationChange:ye,handleDescriptionChange:X,handleStartDateChange:A,handleStartTimeChange:ne,handleEndDateChange:U,handleEndTimeChange:G,handleIsAllDayChange:ge,handleRecurrenceRuleChange:_,handleRepeatModeChange:we,closeRecurrenceEditor:me,onEditEvent:re,onMoreDetails:he,formState:c,setFormState:f,formRef:d,validateRequiredFields:Se}},ca=()=>{const o=t.useRef({visible:!1}),n=t.useRef(null),r=t.useCallback(s=>{var i;o.current={...s,visible:!0},(i=n.current)==null||i.call(n,o.current)},[]),e=t.useCallback(()=>{var s;o.current.visible=!1,(s=n.current)==null||s.call(n,{...o.current})},[]);return{show:r,hide:e,setStateUpdater:s=>{n.current=s}}},ua=({children:o,onTooltipOpen:n,content:r,arrow:e,...s})=>{const[i,l]=t.useState(null),{locale:c}=$e(),{getString:f}=tt(c),{timeFormat:d}=We(),{eventsData:h}=Pt(),g=t.useRef(h);t.useEffect(()=>{g.current=h},[h]);const m=a=>{const C=a.closest("."+p.APPOINTMENT);if(!C)return!1;const v=C==null?void 0:C.getAttribute("data-guid"),R=Me.getEventByGuid(g.current,v),j={cancel:!1,data:R};if(n==null||n(j),j.cancel)return!1;if(typeof r=="function"){const y=r({data:R});l(y)}else if(r!=null)l(r);else{const y=E(R);l(y)}return!0},E=t.useCallback(a=>{const C=a.subject??a.description??f("addTitle"),v=$.formatStartAndEndDateRange(a.startTime,a.endTime,c),R=$.formatTimeDisplay(a,c,d);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:p.SCHEDULER_TOOLTIP_SUBJECT,children:C}),u.jsxs("div",{className:p.SCHEDULER_TOOLTIP_TEXT,children:[v?u.jsx("div",{children:v}):null,!a.isAllDay&&R?u.jsx("div",{children:R}):null]})]})},[f,d,c]);return u.jsx(Fs,{className:p.SCHEDULER_TOOLTIP,onFilterTarget:m,arrow:e??!1,content:u.jsx(u.Fragment,{children:i}),...s,children:o})},Co=t.forwardRef((o,n)=>{const{height:r,width:e,selectedDate:s,defaultSelectedDate:i,view:l,defaultView:c,eventSettings:f,timeScale:d,workHours:h,startHour:g,endHour:m,showWeekend:E,firstDayOfWeek:a,workDays:C,showTimeIndicator:v,showWeekNumber:R,dateFormat:j,timeFormat:y,dateHeader:D,cell:x,headerIndent:k,eventOverlap:z,rowAutoHeight:S,readOnly:b,showQuickInfoPopup:M,header:T,quickInfo:H,keyboardNavigation:w,onDataRequest:I,onSelectedDateChange:Y,onViewChange:Z,onCellClick:ce,onCellDoubleClick:K,onEventClick:O,onEventDoubleClick:L,onDataChangeStart:V,onDataChangeComplete:J,eventDrag:ue,eventResize:F,onResizeStart:q,onResizing:ee,onResizeStop:te,onDragStart:oe,onDrag:De,onDragStop:ve,onError:de,onMoreEventsClick:N,eventTooltip:B,onTooltipOpen:ie,onEditorSubmit:se,editor:xe,children:Q,className:le,weekRule:fe,enableRecurrenceValidation:A,...ne}=Hs(xr,o),U=t.useRef(null),G=t.useRef(null),ge=t.useRef(null),pe=ca(),[ye,Ie]=t.useState({visible:!1});t.useEffect(()=>{pe.setStateUpdater(Ie)},[]);const{locale:me}=$e(),{getString:we}=tt(me||"en-US"),{cellEditRef:_,handleClose:X,onCellClickHandler:re,onEventClickHandler:he}=mo(ce,O),Se=t.useRef(null),Re=aa(K,L,X,Fe=>Fn("recurrenceEdit",pe,we,Fe),Se.current),{open:Le,data:W,originalData:Ce,action:Ee,onClose:Oe,onCellDoubleClickHandler:Pe,onEventDoubleClickHandler:Ye,onMoreDetails:He,onEditEvent:ht}=Re,ot=t.useMemo(()=>ft.getViewsInfo(Q,we),[Q]),{classNames:Nt,selectedDate:St,view:Et,renderDates:Mt,activeViewProps:Ht,dateRangeText:tr,showCalendar:Dn,calendarView:nr,handleViewButtonClick:nn,handlePreviousClick:rn,handleNextClick:vn,handleTodayClick:sn,handleDateDropdownClick:yn,handleCalendarChange:Ct,renderCurrentView:bn}=Yi({className:le,height:r,width:e,selectedDate:s,defaultSelectedDate:i,view:l,defaultView:c,eventSettings:f,timeScale:d,workHours:h,startHour:g,endHour:m,showWeekend:E,firstDayOfWeek:a,workDays:C,showTimeIndicator:v,showWeekNumber:R,dateFormat:j,timeFormat:y,dateHeader:D,cell:x,headerIndent:k,editor:xe,quickInfo:H,eventOverlap:z,showQuickInfoPopup:M,header:T,keyboardNavigation:w,rowAutoHeight:S,readOnly:b,onEditorSubmit:se,onDataRequest:I,onSelectedDateChange:Y,onViewChange:Z,onCellClick:re,onCellDoubleClick:Pe,onEventClick:he,onEventDoubleClick:Ye,onMoreEventsClick:N,onDataChangeStart:V,onDataChangeComplete:J,eventDrag:ue,eventResize:F,onResizeStart:q,onResizing:ee,onResizeStop:te,onDragStart:oe,onDrag:De,onDragStop:ve,enableRecurrenceValidation:A,viewComponents:ot,weekRule:fe}),{eventsData:jt,eventsProcessed:$t,addEvent:Vt,deleteEvent:Wt,saveEvent:on}=Ul({activeViewProps:Ht,renderDates:Mt});Se.current=$t;const Rn=(Fe,nt)=>{var an,Ut;if((P=>!!P&&"guid"in P)(Fe)){nt&&((an=_.current)==null||an.handleEventClick(Fe,nt));return}Fe&&(Fe!=null&&Fe.element)&&((Ut=_.current)==null||Ut.handleCellClick(Fe,Fe==null?void 0:Fe.element))},Lt=(Fe,nt,vt)=>{Fe==="Add"?He(nt):Fe==="Edit"&&ht(nt)},wn=Fe=>{var Ut;const nt=Fe&&"current"in Fe?Fe==null?void 0:Fe.current:Fe,vt=(Ut=nt==null?void 0:nt.getAttribute)==null?void 0:Ut.call(nt,"data-guid");return Me.getEventByGuid(jt,vt)??null},it=Fe=>{const nt=Vl(Fe,d);return{startTime:nt.startTime,endTime:nt.endTime,isAllDay:nt.isAllDay,element:nt.element}},Nn=Ht.editor??xe??ia,Ft=t.useMemo(()=>({element:U.current,addEvent:Vt,deleteEvent:Wt,saveEvent:on,openEditor:Lt,closeEditor:()=>{Oe()},getEventDetails:wn,getCellDetails:it,closeQuickInfoPopup:()=>{var Fe;(Fe=_.current)==null||Fe.hide()},openQuickInfoPopup:Rn}),[Vt,Wt,on,U.current,jt,Oe]);t.useEffect(()=>{G.current=Ft},[Ft]),t.useEffect(()=>{Ot("scheduler")},[]),t.useImperativeHandle(n,()=>Ft,[Ft]);const Bt={...Ht,handleCalendarChange:Ct,handleViewButtonClick:nn,handlePreviousClick:rn,handleNextClick:vn,handleTodayClick:sn,schedulerRef:G,morePopupRef:ge,quickPopupRef:_,keyboardNavigation:w,confirmationDialog:pe,showDeleteAlert:Fe=>{pe==null||pe.show({title:we("deleteEvent"),message:we("confirmDeleteMessage"),confirmText:we("delete"),showCancel:!0,onConfirm:()=>{Fe(),pe.hide()}})},showRecurrenceEditAlert:Fe=>Fn("recurrenceEdit",pe,we,Fe),showRecurrenceDeleteAlert:Fe=>Fn("recurrenceDelete",pe,we,Fe)},Sn=B===!0||typeof B=="object",ln=typeof B=="object"?B:void 0,xn=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:p.TABLE_CONTAINER,children:u.jsx("div",{className:p.TABLE_WRAP,children:u.jsxs(Gl,{children:[u.jsx(Jl,{}),bn()]})})}),u.jsx(Vr,{ref:ge})]});return u.jsx("div",{ref:U,className:Nt,style:{height:r,width:e},tabIndex:0,role:"application","aria-label":"Scheduler",onKeyDown:ql(Bt,jt,$t),...ne,children:u.jsx(Ar.Provider,{value:Bt,children:u.jsx(Or.Provider,{value:{renderDates:Mt},children:u.jsxs(Lr.Provider,{value:{eventsData:jt,eventsProcessed:$t},children:[T!==!1&&u.jsx(Hl,{view:Et,availableViews:ot,onViewButtonClick:nn,onPreviousClick:rn,onNextClick:vn,onTodayClick:sn,onDateDropdownClick:yn,dateRangeText:tr,showCalendar:Dn,calendarView:nr,selectedDate:St,firstDayOfWeek:Ht.firstDayOfWeek,handleCalendarChange:Ct,renderDates:Mt,customizeHeader:typeof T=="function"?T:void 0}),Sn?u.jsx(ua,{...ln||{},onTooltipOpen:ie,children:xn}):xn,u.jsx(jr,{ref:_,onClose:X,onEditEvent:ht,onMoreDetails:He}),u.jsx(ta,{editorState:Re,children:u.jsx(Nn,{open:Le,onClose:Oe,data:W,action:Ee,originalData:Ce})}),u.jsx(ea,{visible:ye.visible,title:ye.title,message:ye.message,confirmText:ye.confirmText,showCancel:ye.showCancel,action:ye.action,onConfirm:ye.onConfirm||(()=>pe.hide()),onCancel:pe.hide})]})})})})});Co.displayName="Scheduler";Co.__docgenInfo={description:`The React Scheduler component that displays a list of events scheduled at specific dates and times, helping users plan and manage their schedule effectively.

\`\`\`typescript
import { Scheduler, DayView, WeekView, WorkWeekView, MonthView } from '@syncfusion/react-scheduler';

<Scheduler>
  <DayView />
  <WeekView />
  <WorkWeekView />
  <MonthView />
</Scheduler>
\`\`\``,methods:[],displayName:"Scheduler"};const da=o=>u.jsx(u.Fragment,{children:o.children});da.displayName="SchedulerHeader";const fa=({showTimeIndicator:o,startHour:n,endHour:r,renderDates:e,onPositionUpdate:s})=>{const[i,l]=t.useState(0),[c,f]=t.useState(new Date),[d,h]=t.useState(!1),[g,m]=t.useState(!1),E=t.useRef(null),a=e.length>1,C=!!(e&&e.length>0),v=t.useCallback(()=>{const D=new Date,x=$.getStartEndHours(n),k=$.getStartEndHours(r),z=D.getHours()*Ge+D.getMinutes(),S=x.getHours()*Ge+x.getMinutes(),b=k.getHours()===0&&k.getMinutes()===0?ns*Ge:k.getHours()*Ge+k.getMinutes();return z>=S&&z<=b},[n,r]),R=t.useCallback(()=>{const D=new Date,x=$.getStartEndHours(n),k=$.getStartEndHours(r),z=(D.getHours()-x.getHours())*Ge+(D.getMinutes()-x.getMinutes()),S=x.getHours()*Ge+x.getMinutes(),M=(k.getHours()===0&&k.getMinutes()===0?ns*Ge:k.getHours()*Ge+k.getMinutes())-S,T=z/M*100;return Math.max(0,Math.min(100,T))},[n,r]),j=t.useCallback(()=>{const D=new Date,x=v();if(Math.abs(D.getTime()-c.getTime())>=tn&&f(D),g!==x&&m(x),d!==(x&&o)&&h(x&&o),!x)return;const k=R();Math.abs(k-i)>.1&&l(k)},[R,c,d,g,i,o,v]);t.useEffect(()=>{if(o)return j(),E.current=setInterval(()=>{j()},tn),()=>{E.current&&(clearInterval(E.current),E.current=null)}},[o,j]);const y=t.useCallback(()=>{const D=new Date,x=(e==null?void 0:e.length)>0&&e.some(z=>$.isSameDay(z,D));if(!C||!x)return{isMultiDayView:a,hasValidRenderDates:C,columns:[],isCurrentDayRendered:!1};if(!a){const z=e.length===1&&$.isSameDay(e[0],D);return{isMultiDayView:a,hasValidRenderDates:C,columns:[],isCurrentDayRendered:z}}const k=e.map((z,S)=>{const b=$.isSameDay(z,D),M=z<D&&!$.isSameDay(z,D);if(z>D&&!$.isSameDay(z,D)||!b&&!M)return null;const H=100/e.length,w=S*H;return{key:z.getTime(),isCurrentDay:b,leftPosition:w,columnWidth:H}}).filter(Boolean);return{isMultiDayView:a,hasValidRenderDates:C,columns:k,isCurrentDayRendered:x}},[a,C,e]);return t.useEffect(()=>{s&&s(i,d&&g&&y().isCurrentDayRendered)},[i,d,g,s,y]),{position:i,currentTime:c,isVisible:d,isWithinBounds:g,multiDayViewInfo:y(),updatePosition:j}},ma=o=>{const{onPositionUpdate:n}=o,{renderDates:r}=pt(),{showTimeIndicator:e,startHour:s,endHour:i}=We(),{position:l,isVisible:c,isWithinBounds:f,multiDayViewInfo:d}=fa({showTimeIndicator:e,startHour:s,endHour:i,renderDates:r,onPositionUpdate:n});return!c||!f||!d.isCurrentDayRendered?null:!d.isMultiDayView||!d.hasValidRenderDates?u.jsx("div",{className:p.CURRENT_TIMELINE,style:{top:`${l}%`}}):u.jsx(u.Fragment,{children:d.columns.map(h=>u.jsx("div",{className:h.isCurrentDay?p.CURRENT_TIMELINE:p.PREVIOUS_TIMELINE,style:{top:`${l}%`,width:`${h.columnWidth}%`,insetInlineStart:`${h.leftPosition}%`}},h.key))})},pa=(o,n,r,e)=>{let s=0,i=!1;for(;!i;){i=!0;for(const l of o){const c=$.normalizeDate(l);if(c>=n&&c<=r){const f=$.generateDateKey(l);if((e.get(f)||[]).findIndex((g,m)=>m===s&&g)!==-1){i=!1,s++;break}}}}return s},ha=(o,n=2)=>{const{eventSettings:r}=We(),{renderDates:e}=pt(),{eventsData:s}=Pt(),i=t.useMemo(()=>{if(!(e!=null&&e.length)||!(s!=null&&s.length))return[];const E=s.filter(y=>!y.startTime||!y.endTime||y.isBlock?!1:y.isAllDay&&!Me.isMultiDayEvent(y)),a=s.filter(y=>!y.startTime||!y.endTime?!1:r.spannedEventPlacement==="AllDayRow"?!y.isAllDay&&$.isLessthan24Hours(y.startTime,y.endTime)?!1:Me.isMultiDayEvent(y):y.isAllDay&&Me.isMultiDayEvent(y));let C=new Map;e.forEach(y=>{const D=$.generateDateKey(y);C.set(D,[])});const v=[],R=[...E,...a];return $.sortByTimeAndSpan(R).forEach(y=>{if(!y.startTime||!y.endTime)return;const D=$.normalizeDate(y.startTime),x=$.normalizeDate(y.endTime),k=Me.isMultiDayEvent(y),z=k?$.getDaysCount(D,x)+1:1,S=pa(e,D,x,C),b=["sf-appointment"];if((y.isAllDay||z>1)&&b.push("sf-all-day-appointment"),y.isReadonly&&b.push("sf-read-only"),k)for(const M of e){const T=$.normalizeDate(M);if(T>=D&&T<=x){C=ct.setIndexPosition(C,M,S);const H=T.getTime()===D.getTime(),w=T.getTime()===x.getTime(),I=Math.floor((T.getTime()-D.getTime())/(1e3*60*60*24)),Y=e.findIndex(O=>{const L=$.normalizeDate(O);return L>=D&&L<=x})===e.findIndex(O=>$.normalizeDate(O).getTime()===T.getTime()),Z=H?new Date(y.startTime.getTime()):new Date(T.getFullYear(),T.getMonth(),T.getDate(),0,0,0),ce=w?new Date(y.endTime.getTime()):new Date(T.getFullYear(),T.getMonth(),T.getDate(),0,0,0),K=`${M.toISOString()}-${y.id}`;v.push({event:y,startDate:Z,endDate:ce,isFirstDay:H,isLastDay:w,isFirstSegmentInRenderRange:Y,segmentIndex:I,totalSegments:z,positionIndex:S,eventClasses:b,eventKey:K})}}else{C=ct.setIndexPosition(C,D,S);const M=`${D.toISOString()}-${y.id}`;v.push({event:y,startDate:y.startTime,endDate:y.endTime,positionIndex:S,eventClasses:b,eventKey:M})}}),v.sort((y,D)=>{const x=y.positionIndex??0,k=D.positionIndex??0;return x-k})},[s,e,r.spannedEventPlacement,r.fields]),l=t.useMemo(()=>Me.getEventsMap(e,i),[e,i]),c=t.useMemo(()=>Me.isAlldayHasMoreEvents(e,l,n),[l,n,e]),f=t.useMemo(()=>Me.getMaxEventsInCell(l,e),[l,e]),d=t.useMemo(()=>o?f>n?n-1:n:1/0,[o,f,n]),h=t.useCallback(()=>{const E=Me.getMaxEventsInCell(l,e);return E>3&&!o?E*(Yn+gn):Math.min(3,E)*(Yn+gn)},[o,l,e]),g=t.useCallback(E=>[...l.get(E)||[]].sort((v,R)=>(v.positionIndex??0)-(R.positionIndex??0)).slice(0,d),[l,d]),m=t.useCallback(E=>{const a=l.get(E)||[];return Math.max(0,a.length-d)},[l,d]);return{allDayRowEvents:i,eventsByDate:l,hasEventsExceedingMaxCount:c,maxEventsInAnyColumn:f,visibleEventLimit:d,calculateHeight:h,getVisibleEvents:g,getHiddenEventCount:m}},Ea=o=>{const{eventInfo:n,renderDates:r}=o,e=t.useMemo(()=>({...n.event}),[n]),s=t.useMemo(()=>ct.getOverflowDirection(n,r),[n.event.startTime,n.event.endTime,r,n]),i=t.useMemo(()=>ct.calculatePositionStyles(n,r),[n,r]);return{processedEvent:e,overflowDirection:s,positionStyle:i}};class kt{constructor(){Object.defineProperty(this,"isActionPerformed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"removeDocListenersRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cellWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scrollInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slotInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isMonthView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isAllDaySource",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"cloneRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"minScrollSpeed",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"minScrollThreshold",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"enableScroll",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"currentCell",{enumerable:!0,configurable:!0,writable:!0,value:null})}performAutoScrolling(n,r){var D,x;const{clientX:e,clientY:s}=this.getPointerCoordinates(n);if(e==null||s==null)return;const i=r==null?void 0:r.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}`),l=(D=r==null?void 0:r.closest(`.${p.SCHEDULER}`))==null?void 0:D.querySelector(`.${p.MAIN_SCROLL_CONTAINER}`),c=[i,l].filter(Boolean);if(c.length===0)return;const f=c.find(k=>k.scrollHeight>k.clientHeight)||null,d=c.find(k=>k.scrollWidth>k.clientWidth)||null;if(!f&&!d)return;const h=((x=f||d)==null?void 0:x.closest(`.${p.SCHEDULER}`))||(r==null?void 0:r.closest(`.${p.SCHEDULER}`)),g=h==null?void 0:h.querySelector(`.${p.STICKY_HEADER}, .${p.HEADER_SECTION}, .${p.HEADER_ROW}`),m=f?f.getBoundingClientRect():null,E=d?d.getBoundingClientRect():null,a=(g==null?void 0:g.getBoundingClientRect().bottom)??(m?m.top:E?E.top:0);this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);const C=(k,z=this.minScrollThreshold)=>{if(k>z||k<0)return 0;const S=Math.floor((1-k/z)*this.minScrollSpeed);return isFinite(S)?S:0},v=()=>{let k=0;if(f&&m){const z=Math.max(0,f.scrollHeight-f.clientHeight),S=Math.max(0,s-a),b=Math.max(0,d?d.offsetHeight-d.clientHeight:0,f?f.offsetHeight-f.clientHeight:0),M=m.bottom-b,T=Math.max(0,M-s),H=this.minScrollThreshold+b,w=f.scrollTop<=0,I=Math.ceil(f.scrollTop)>=z;S<this.minScrollThreshold&&!w?k=-C(S):T<H&&!I&&(k=C(T,H))}return k},R=()=>{let k=0;if(d&&E){const z=Math.max(0,d.scrollWidth-d.clientWidth),S=Math.max(0,e-E.left),b=Math.max(0,E.right-e),M=d.scrollLeft<=0,T=d.scrollLeft>=z;S<this.minScrollThreshold&&!M?k=-C(S):b<this.minScrollThreshold&&!T&&(k=C(b))}return k},j=v(),y=R();if(j!==0||y!==0){const k=()=>{let z=!1;if(!(!this.currentCell&&kt.currentActionName!=="resize")&&!this.isAllDaySource){if(f&&j!==0){const S=Math.max(0,f.scrollHeight-f.clientHeight),b=Math.max(0,Math.min(S,f.scrollTop+j));b!==f.scrollTop&&(f.scrollTop=b,z=!0)}if(d&&y!==0){const S=Math.max(0,d.scrollWidth-d.clientWidth),b=Math.max(0,Math.min(S,d.scrollLeft+y));b!==d.scrollLeft&&(d.scrollLeft=b,z=!0)}if(!z){this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);return}this.scrollInterval=requestAnimationFrame(k)}};this.scrollInterval=requestAnimationFrame(k)}}getPointerCoordinates(n){if(!n)return{clientX:null,clientY:null};let r=null,e=null;return n.touches&&n.touches.length>0?(r=n.touches[0].clientX,e=n.touches[0].clientY):n.changedTouches&&n.changedTouches.length>0?(r=n.changedTouches[0].clientX,e=n.changedTouches[0].clientY):n.clientX!=null&&n.clientY!=null&&(r=n.clientX,e=n.clientY),{clientX:r,clientY:e}}getContentWrap(n){return n?n.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}, .${p.DATE_HEADER_CONTAINER}`):null}getCurrentTargetDate(n,r){var l,c;if(!n&&!r)return null;let e=null;const s=(l=n||r)==null?void 0:l.closest(`.${p.SCHEDULER}`),i=r==null?void 0:r.closest(`.${p.ALL_DAY_ROW}`);if(s&&i&&r){const d=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`)).indexOf(r),h=s.querySelector(`.${p.CONTENT_TABLE}, .${p.WORK_CELLS_ROW}`),m=(c=(h?Array.from(h.querySelectorAll(`.${p.WORK_CELLS}`)):[])[d])==null?void 0:c.getAttribute("data-date");m&&(e=Number(m))}return e}getCell(n,r,e){const s=document==null?void 0:document.elementsFromPoint(n,r);for(const i of s){const l=i.classList.contains(`${p.WORK_CELLS}`)||i.classList.contains(`${p.ALL_DAY_CELL}`)?i:null;if(l&&(e||!(this!=null&&this.isAllDaySource)||i.classList.contains(p.ALL_DAY_CELL)))return l}return null}getCellUnderPointer(n){const{clientX:r,clientY:e}=this.getPointerCoordinates(n);return r==null||e==null?null:this.getCell(r,e,!0)}getCellUnderClone(n){if(!this.cloneRef||!n)return null;const r=this.getContentWrap(n),e=r==null?void 0:r.getBoundingClientRect();if(!r||!e)return null;const s=(C,v=0)=>isFinite(C)?C:v,i=r.scrollLeft||0;let l=0,c=0;const f=r.querySelector(`.${p.ALL_DAY_ROW}`);if(!f)return null;const d=Array.from(f.querySelectorAll(`.${p.ALL_DAY_CELL}`));if(d.length===0)return null;const h=d[0],g=Math.max(1,h.offsetWidth||this.cellWidth||1),m=s(parseFloat(this.direction==="rtl"?this.cloneRef.style.right:this.cloneRef.style.left||"0"),0),E=Math.max(1,Math.ceil(this.cloneRef.offsetWidth/g));l=this.direction==="rtl"?e.right-m-this.cloneRef.offsetWidth/E+i:e.left+m+this.cloneRef.offsetWidth/E-i;const a=Math.max(0,h.offsetHeight);return c=e.top+f.offsetTop+a/2,this.getCell(l,c,!1)}cloneFromSource(n,r){const e=n.cloneNode(!0);return e.classList.add(p.DRAG_CLONE,p.NO_POINTER,p.POSITION_ABSOLUTE),r!=null&&r.externalDragAndDrop&&(e.classList.add(p.EXTERNAL_DRAG_CLONE,p.CONTROL),e.style.zIndex=Is(e).toString()),e}suppressEvent(n){var r,e;(this.isActionPerformed||kt.currentActionName==="resize")&&(kt.currentActionName="",(r=n==null?void 0:n.preventDefault)==null||r.call(n),(e=n==null?void 0:n.stopPropagation)==null||e.call(n))}addDocSuppressors(){const n=["click"],r=e=>this.suppressEvent(e);n.forEach(e=>document==null?void 0:document.addEventListener(e,r,!0)),this.removeDocListenersRef=()=>{this.removeDocListenersRef&&(n.forEach(e=>document==null?void 0:document.removeEventListener(e,r,!0)),this.removeDocListenersRef=void 0)}}setCursorClass(n){document!=null&&document.body&&(document.body.classList.remove(p.SCHEDULER_CURSOR_MOVE,p.SCHEDULER_CURSOR_NOT_ALLOWED,p.SCHEDULER_CURSOR_DEFAULT),n==="move"?document.body.classList.add(p.SCHEDULER_CURSOR_MOVE):n==="notAllowed"?document.body.classList.add(p.SCHEDULER_CURSOR_NOT_ALLOWED):document.body.classList.add(p.SCHEDULER_CURSOR_DEFAULT))}getCurrentTargetCell(n){if(!n)return null;const r=n.closest(`.${p.DATE_HEADER_CONTAINER}`);if(r){const e=n.closest(`.${p.HEADER_CELLS}`),s=r.querySelector(`.${p.HEADER_ROW}`),i=r.querySelector(`.${p.ALL_DAY_ROW}`);if(s&&i){const l=Array.from(s.querySelectorAll(`.${p.HEADER_CELLS}`)),c=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`));let f=-1;if(e)f=l.indexOf(e);else for(let d=0;d<l.length;d++)if(l[d].contains(n)){f=d;break}if(f>=0&&c[f])return c[f];if(c.length)return c[0]}}return n.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}getSteppedCellDate(n,r,e,s,i,l){const c=r,f=c?this.getPointerCoordinates(c):{clientY:null},d=l==null?void 0:l.getBoundingClientRect();let h=i;if(d&&f.clientY!=null&&s>0){let g=Math.max(0,Math.round((f.clientY-d.top+l.scrollTop)*s));const m=Math.max(0,this.slotInterval||0);m>0&&(g=Math.floor(g/m)*m);const E=new Date(i);E.setHours(0,0,0,0),h=E.getTime()+(n+g)*tn,h=h-e}else h=i-e;return new Date(h)}}Object.defineProperty(kt,"currentActionName",{enumerable:!0,configurable:!0,writable:!0,value:""});function ga({ref:o,data:n,containerProps:r}){const e=We(),{timeScale:s,startHour:i,endHour:l,schedulerRef:c,eventSettings:f,showWeekend:d,workDays:h,onDragStart:g,onDrag:m,onDragStop:E,eventOverlap:a,confirmationDialog:C,eventDrag:v,enableRecurrenceValidation:R}=e,j=t.useMemo(()=>({...n,startTime:new Date(n==null?void 0:n.startTime),endTime:new Date(n==null?void 0:n.endTime)}),[n]),{getString:y}=tt(),{dir:D}=$e(),{eventsData:x,eventsProcessed:k}=Pt(),{renderDates:z}=pt(),S=Wr(),b=t.useRef(null),M=b,T=t.useRef(null),H=t.useRef({}),w=t.useRef({minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}),I=t.useRef(null),Y=t.useRef(0),Z=t.useRef(0),ce=t.useRef(!0),K=t.useRef(null),O=t.useRef(!1),L=t.useRef(null),V=t.useRef(null),J=t.useRef(!1);qt(b,{tapHold:()=>{ce.current=!1}}),t.useEffect(()=>{s&&T.current&&(T.current.slotInterval=s.interval/s.slotCount)},[s]);const ue=t.useCallback(_=>{b.current=_,typeof o=="function"?o(_):o&&(o.current=_)},[o,S]),F=t.useCallback(_=>{if(!_||!T.current)return{};const X=T.current.getContentWrap(_),re=X?X.getBoundingClientRect():null,he=_.getBoundingClientRect(),Se=re?Math.round(he.left-re.left+((X==null?void 0:X.scrollLeft)||0)):_.offsetLeft,Re=re?Math.round(he.top-re.top+((X==null?void 0:X.scrollTop)||0)):_.offsetTop;return{left:Se,top:Re}},[S]),q=t.useCallback(()=>{var _,X;Y.current=0,Z.current=0,H.current={},K.current=null,O.current=!1,T.current&&(T.current.setCursorClass("default"),T.current.isActionPerformed=!1,T.current.enableScroll=!0,T.current.scrollInterval!=null&&(cancelAnimationFrame(T.current.scrollInterval),T.current.scrollInterval=null),(X=(_=T.current)==null?void 0:_.removeDocListenersRef)==null||X.call(_)),I.current!=null&&(cancelAnimationFrame(I.current),I.current=null),w.current={minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}},[]);t.useEffect(()=>()=>{q()},[q]);const ee=()=>{if(I.current=null,!T.current||T.current.scrollInterval==null)return;const _=H.current.lastDragEvent;if(_){let X=T.current.getCellUnderPointer(_);if(!X){const re=_.target||null;X=T.current.getCurrentTargetCell(re)}if(X&&T.current.currentCell){let re=new Date(Number(X.getAttribute("data-date")));T.current.isAllDaySource&&(re=$.normalizeDate(re)),!T.current.isMonthView&&!T.current.isAllDaySource&&(fe(X),w.current.finalDragStartTime&&(re=w.current.finalDragStartTime)),ie(re)}}T.current&&T.current.scrollInterval!=null&&(I.current=requestAnimationFrame(ee))},te=t.useCallback(_=>{if(!T.current)return;const X=v.externalDragAndDrop&&T.current.getCellUnderPointer(_)||b.current;T.current.performAutoScrolling(_,X),T.current.scrollInterval!==null&&I.current===null&&!T.current.isMonthView&&(I.current=requestAnimationFrame(ee))},[F]),oe=_=>{const X=T.current.getContentWrap(_);if(T.current.isAllDaySource=J.current=_.classList.contains(`${p.ALL_DAY_APPOINTMENT}`),T.current.isAllDaySource){const re=Me.getEventByGuid(x,n.guid);re.endTime=new Date($.normalizeDate(re.endTime).getTime()+T.current.slotInterval*tn)}if(X){const re=X.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`);re&&(Y.current=re.offsetHeight??0,T.current.cellWidth=re.offsetWidth??0)}return w.current.minutesPerPixel=Y.current>0?T.current.slotInterval/Y.current:0,T.current.isMonthView=!!(_!=null&&_.closest(`.${p.MONTH_VIEW}`)),_.draggable=!1,X},De=(_,X)=>{var re;if(T.current.cloneRef=_,v!=null&&v.externalDragAndDrop){T.current.isMonthView&&_.classList.add(`${p.MONTH_EVENT}`);const he=T.current.isMonthView||T.current.isAllDaySource;he||(_.style.height=b.current.style.height),_.style.width=`${he?b.current.clientWidth:T.current.cellWidth}px`}else _.style.width="1px",_.style.height="1px";(re=v.externalDragAndDrop&&(document==null?void 0:document.querySelector(v.eventDragArea))||X||(document==null?void 0:document.body))==null||re.appendChild(_)},ve=()=>{var re,he,Se,Re;const _=(he=T.current)==null?void 0:he.getContentWrap((re=T.current)==null?void 0:re.currentCell);return((Se=_==null?void 0:_.closest)==null?void 0:Se.call(_,`.${p.TABLE_WRAP}`))||L.current||((Re=c.current)==null?void 0:Re.element)||null},de=(_,X)=>{const re=ve();if(!re)return;const he={container:re,payload:{guid:n.guid,segments:_,isDayEvent:X}};window==null||window.dispatchEvent(new CustomEvent("showCloneEvent",{detail:he}))},N=()=>{T.current.currentCell=L.current=null;const _=document==null?void 0:document.querySelectorAll(`.${p.SCHEDULER}`);_.length&&_.forEach(X=>window==null?void 0:window.dispatchEvent(new CustomEvent("hideCloneEvent",{detail:{container:X}})))},B=_=>{if(!_)return 0;let X=Math.max(0,_.endTime.getTime()-_.startTime.getTime());return X===0&&_.startTime.getTime()===_.endTime.getTime()&&(X=T.current.slotInterval*tn),X},ie=(_,X,re)=>{var Ce,Ee;const he=v.externalDragAndDrop,Se=Me.getEventByGuid(x,n.guid);if(!Se||!T.current)return;let Re=z;if(_){const Oe=B(Se);Se.startTime=new Date(_),Se.endTime=new Date(Se.startTime.getTime()+Oe)}if(he&&_){const Oe=$.normalizeDate(X??_).getTime();(!Re.some(Ye=>$.normalizeDate(Ye).getTime()===Oe)||e.view!==V.current)&&(e.selectedDate=X??_,Re=$.getRenderDates(V.current,e.selectedDate,e,X,re))}const Le=T.current.isMonthView||T.current.isAllDaySource;if(Le||!s.enable){const Oe=Me.processCloneEvent(he?L.current:(Ce=c.current)==null?void 0:Ce.element,Re,Se,d,h,T.current.cellWidth,T.current.isAllDaySource,D==="rtl",T.current.isMonthView,b.current);he?de(Oe,Le):S==null||S.show({guid:n.guid,segments:Oe,isDayEvent:Le});return}const W=Me.processTimeSlotCloneEvent(he?L.current:(Ee=c.current)==null?void 0:Ee.element,Re,Se,s,i,l,T.current.cellWidth,D==="rtl");he?de(W,!1):S==null||S.show({guid:n.guid,segments:W,isDayEvent:!1})},se=_=>{var Se,Re,Le;if(!b.current||((Se=_.sender)==null?void 0:Se.type)==="touchmove"&&ce.current)return null;(Le=(Re=T.current)==null?void 0:Re.cloneRef)!=null&&Le.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef),T.current=new kt,T.current.direction=D,T.current.slotInterval=(s==null?void 0:s.interval)/(s==null?void 0:s.slotCount),V.current=e.view;const X=b.current,re=oe(X),he=T.current.cloneFromSource(X,v);return De(he,re),he},xe=_=>{var he,Se,Re,Le;if(!T.current)return;H.current={};const X=T.current;X.isActionPerformed=!0,A(_),X.addDocSuppressors(),(he=b.current)==null||he.classList.add(p.DRAGGING),T.current.setCursorClass("move"),H.current.lastDragEvent=_.event,Q(_);const re={..._,data:n};if(g==null||g(re),re.cancel){_.cancel=!0,U(),q(),T.current=null;return}v&&(v.interval&&(O.current=X.slotInterval!==v.interval,X.slotInterval=v.interval),X.enableScroll=((Se=v.scroll)==null?void 0:Se.enable)??!0,X.minScrollSpeed=((Re=v.scroll)==null?void 0:Re.scrollBy)??X.minScrollSpeed,X.minScrollThreshold=((Le=v.scroll)==null?void 0:Le.timeDelay)??X.minScrollThreshold,K.current=v.excludeSelectors??null)},Q=_=>{try{const X=b.current;if(!X)return;const re=T.current.getContentWrap(X),he=re==null?void 0:re.getBoundingClientRect(),{clientY:Se,clientX:Re}=T.current.getPointerCoordinates(_.event);if(!re||!he||Se==null&&Re==null)return;const Le=X.getBoundingClientRect(),W={top:re.scrollTop||0,left:re.scrollLeft||0};w.current.dragAnchorOffsetPx=Se!=null?Se-he.top+W.top-(Le.top-he.top+W.top):null,w.current.dragAnchorOffsetX=Re!=null?Re-he.left+W.left-(Le.left-he.left+W.left):null}catch{w.current.dragAnchorOffsetPx=w.current.dragAnchorOffsetX=null}},le=_=>{var X;!((X=T.current)!=null&&X.isAllDaySource)&&T.current.enableScroll&&te(_.event)},fe=_=>{var Se;if(!((Se=T.current)!=null&&Se.cloneRef&&_&&T.current))return;const X=T.current,re=X.getContentWrap(_);if((re==null?void 0:re.getBoundingClientRect())&&n){let Re=Number(_.getAttribute("data-date"));if(!Re||isNaN(Re))return;X.isAllDaySource&&(Re=Number($.normalizeDate(new Date(Re))));let Le=new Date;if(e.view===V.current)if(J.current&&!X.isAllDaySource)Le=new Date(Re);else if(O.current&&!X.isAllDaySource&&!X.isMonthView){const{schedulerStartMinutes:Ee}=$.getSchedulerStartAndEndMinutes(i,l);Le=T.current.getSteppedCellDate(Ee,H.current.lastDragEvent,Z.current,w.current.minutesPerPixel,Re,re)}else X.isAllDaySource===J.current&&(Re=Re-Z.current),Le=new Date(Re);else Le=new Date(Re),v.externalDragAndDrop&&V.current==="Month"&&$.setHours(Le,j.startTime);if(isNaN(Le.getTime()))return;w.current.finalDragStartTime=new Date(Le);const W=Me.getEventByGuid(x,n.guid),Ce=B(W);w.current.finalDragEndTime=new Date(w.current.finalDragStartTime.getTime()+Ce)}},A=_=>{const X=T.current.getCellUnderPointer(_.event);if(X&&T.current&&X&&n){const re=X.getAttribute("data-date");if(!re||isNaN(Number(re)))return;const he=Me.getEventByGuid(x,n.guid);if(!he)return;const Se=new Date(he.startTime).getTime();Z.current=Number(re)-Se}},ne=_=>{var re,he,Se,Re,Le,W,Ce,Ee,Oe,Pe,Ye,He,ht;if(!T.current)return;let X=T.current.getCellUnderPointer(_.event);if(X||(X=T.current.getCurrentTargetCell(_.target)),v.externalDragAndDrop&&(N(),e.view!==V.current&&(T.current.cellWidth=((he=(re=_.target.closest(`.${p.SCHEDULER}`))==null?void 0:re.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`))==null?void 0:he.clientWidth)??b.current.clientWidth),T.current.isMonthView=!!((Se=X||_.target)!=null&&Se.closest(`.${p.MONTH_VIEW}`)),(Re=X||_.target)!=null&&Re.closest(`.${p.DAY_VIEW}`)?V.current="Day":(Le=X||_.target)!=null&&Le.closest(`.${p.WEEK_VIEW}`)?V.current="Week":(W=X||_.target)!=null&&W.closest(`.${p.WORK_WEEK_VIEW}`)?V.current="WorkWeek":T.current.isMonthView&&(V.current="Month")),T.current.currentCell=X,T.current.isMonthView||(T.current.isAllDaySource=n.isAllDay=((Ce=X||_.target)==null?void 0:Ce.classList.contains(p.ALL_DAY_CELL))||!!((Ee=_.target)!=null&&Ee.closest(`.${p.DATE_HEADER_CONTAINER}`))),X){T.current.setCursorClass("move"),le(_),v.externalDragAndDrop&&(L.current=X.closest(`.${p.SCHEDULER}`),T.current.cloneRef.classList.add(p.DRAG_CLONE));let ot=new Date(Number(X.getAttribute("data-date"))),Nt=ot,St=ot;if(T.current.isMonthView){const Et=(Oe=X.closest(`.${p.CONTENT_TABLE}`))==null?void 0:Oe.querySelectorAll(`.${p.WORK_CELLS}`);ot=new Date(Number((Pe=Et[0])==null?void 0:Pe.getAttribute("data-date"))),St=new Date(Number((Ye=Et[(Et==null?void 0:Et.length)-1])==null?void 0:Ye.getAttribute("data-date")))}H.current.lastDragEvent=_.event,fe(X),w.current.finalDragStartTime&&(Nt=w.current.finalDragStartTime),ie(Nt,ot,St)}else v.externalDragAndDrop&&((ht=(He=_.target)==null?void 0:He.closest)!=null&&ht.call(He,`.${p.SCHEDULER_TOOLBAR_CONTAINER}, .${p.STICKY_HEADER}, .${p.HEADER_SECTION},
                .${p.HEADER_ROW}, .${p.LEFT_INDENT}`)&&(document!=null&&document.body)?T.current.setCursorClass("notAllowed"):document!=null&&document.body&&T.current.setCursorClass("default"),T.current.cloneRef.classList.remove(p.DRAG_CLONE));m==null||m({..._,data:n})},U=()=>{var _,X,re,he;(_=b.current)==null||_.removeAttribute("aria-grabbed"),(X=b.current)==null||X.classList.remove(p.DRAGGING),T.current.setCursorClass("default"),(he=(re=T.current)==null?void 0:re.cloneRef)!=null&&he.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef)},G=()=>{T.current&&(T.current.cloneRef=null)},ge=_=>{var he,Se,Re,Le,W,Ce,Ee;let X=null,re=null;if((he=T.current)!=null&&he.isAllDaySource?X=((Re=T.current)==null?void 0:Re.getCellUnderClone((Se=T.current)==null?void 0:Se.cloneRef))||((Le=T.current)==null?void 0:Le.getCellUnderPointer(_.event)):X=(W=T.current)==null?void 0:W.getCellUnderPointer(_.event),X||(X=(Ce=T.current)==null?void 0:Ce.getCurrentTargetCell(_.target)),X){const Oe=X.getAttribute("data-date");re=Oe?Number(Oe):(Ee=T.current)==null?void 0:Ee.getCurrentTargetDate(_.target,X)}return{cell:X,finalDropTimestamp:re}},pe=(_,X)=>{var W,Ce,Ee;const re=new Date(_.startTime),he=new Date(_.endTime),Se=Math.max(0,he.getTime()-re.getTime());let Re=new Date(X);(W=T.current)!=null&&W.isAllDaySource?$.setHours(Re,re):(Ce=T.current)!=null&&Ce.isMonthView?(Re=$.normalizeDate(Re),$.setHours(Re,re)):(X=X-Z.current,Re=new Date(X));const Le=new Date(Re.getTime()+Se);return(Ee=T.current)!=null&&Ee.isAllDaySource&&$.setHours(Le,he),{originalStart:re,originalEnd:he,durationMs:Se,newStartTime:Re,newEndTime:Le}},ye=(_,X,re,he)=>{if(!T.current)return;const Se=Hr(_,X,re,c,f.fields,x,k);q(),he.cancel=!0,E==null||E({...he,data:Se})},Ie=t.useCallback(_=>{if(!K.current)return!0;const X=K.current.split(",");for(const re of X)if(_!=null&&_.classList.contains(re.trim()))return!1;return!0},[]),me=_=>{if(!T.current)return;if(U(),_.element){const Re=_.element.closest(`.${p.TABLE_WRAP}`);Re&&(T.current.cloneRef=Re.querySelector(`.${p.APPOINTMENT}.${p.EVENT_CLONE}`))}const{cell:X,finalDropTimestamp:re}=ge(_);G(),v.externalDragAndDrop?N():S==null||S.hide();const he=Array.isArray(n)?n[0]:n,Se=(Re,Le)=>{const W=Me.getEventByGuid(x,n.guid);W&&(W.startTime=j.startTime,W.endTime=j.endTime,W.isAllDay=j.isAllDay),q(),_.cancel=!0,Re!==null&&Le!==null&&(C==null||C.show({title:y(Re),message:y(Le),confirmText:y("ok"),showCancel:!1,onConfirm:()=>C.hide()})),E==null||E({..._,data:he}),T.current=null};if(!X){Se(null,null);return}if(Ie(X)){let Re,Le;if(w.current.finalDragStartTime&&w.current.finalDragEndTime)Re=w.current.finalDragStartTime,Le=w.current.finalDragEndTime;else if(X&&re){const{newStartTime:W,newEndTime:Ce}=pe(he,re);Re=W,Le=Ce}if(Re&&Le){const W={...he,startTime:Re,endTime:Le};if(!a&&Me.checkEventOverlap(W,x,!0)){Se("eventOverlap","overlapAlert");return}if(Me.isBlockRange(W,x,!0)){Se("alert","blockAlert");return}if(J.current&&T.current.isMonthView&&(n.isAllDay=!0),he.recurrenceID&&he.recurrenceRule){he.startTime=j.startTime,he.endTime=j.endTime;const Ce=R?Rr(he,Re,Le,k,x):{isValid:!0};if(Ce.isValid)he.recurrenceException=he.recurrenceException??Xn(j.startTime);else{const Ee=Ce.messageKey||xt.SameDayAlert;Se("alert",Ee);return}}ye(he,Re,Le,_);return}}else{const Re=Me.getEventByGuid(x,n.guid);Re.startTime=he.startTime,Re.endTime=he.endTime}q(),E==null||E({..._,data:n}),T.current=null};Jt(M,{clone:!0,cursorAt:v!=null&&v.externalDragAndDrop?{left:-20,top:-20}:{left:-5,top:-5},dragArea:(v==null?void 0:v.eventDragArea)??`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}`,abort:`.${p.EVENT_RESIZE_CLASS}, .${p.LEFT_RESIZE_HANDLER}, .${p.RIGHT_RESIZE_HANDLER}, .${p.TOP_RESIZE_HANDLER}, .${p.BOTTOM_RESIZE_HANDLER}, .${p.BLOCK_APPOINTMENT}`,distance:5,helper:_=>se(_),onDragStart:_=>xe(_),onDrag:_=>ne(_),onDragStop:_=>me(_),enableTailMode:v==null?void 0:v.externalDragAndDrop});const we={...r||{},onClick:_=>{var X,re,he;(X=T.current)==null||X.suppressEvent(_),!((re=T.current)!=null&&re.isActionPerformed)&&((he=r==null?void 0:r.onClick)==null||he.call(r,_))}};return{mergedRef:ue,composedProps:we}}const Qn=t.memo(t.forwardRef((o,n)=>{const{children:r,data:e,className:s,containerProps:i}=o,{mergedRef:l,composedProps:c}=ga({ref:n,data:e,containerProps:i});return u.jsx("div",{ref:l,className:s,...c,children:r})}));Qn.displayName="DraggableEvent";Qn.__docgenInfo={description:"",methods:[],displayName:"DraggableEvent"};function Ta(o){var le,fe,A,ne;const{onResizeStart:n,onResizing:r,onResizeStop:e,timeScale:s,startHour:i,endHour:l,schedulerRef:c,showWeekend:f,workDays:d,eventOverlap:h,confirmationDialog:g,eventResize:m,eventSettings:E}=We(),{eventsData:a,eventsProcessed:C}=Pt(),{renderDates:v}=pt(),R=Wr(),{dir:j}=$e(),y=t.useRef(null),D=t.useRef(null),x=10,k=t.useRef(new Date),z=t.useRef(0),S=t.useRef(0),b=t.useRef(0),M=t.useRef(0),T=t.useRef(Xe.Right),H=t.useRef(void 0),w=t.useRef(void 0),I=t.useRef(null),Y=t.useRef(void 0),Z=t.useRef(!1),ce=t.useRef(0),K=t.useRef(0),{getString:O}=tt(),L=t.useRef(null);t.useEffect(()=>()=>{ue(),D.current=null,y.current=null},[]);const V=()=>{Ve.add(document,"mousemove",B,!0),Ve.add(document,"touchmove",B,{capture:!0,passive:!1}),Ve.add(document,"mouseup",ie,!0),Ve.add(document,"touchend",ie,{capture:!0})},J=()=>{Ve.remove(document,"mousemove",B),Ve.remove(document,"touchmove",B),Ve.remove(document,"mouseup",ie),Ve.remove(document,"touchend",ie)},ue=()=>{N(),J(),Z.current=!1,ce.current=0,K.current=0},F=()=>{document.body.style.userSelect="none",document.body.style.cursor=T.current===Xe.Left||T.current===Xe.Right?"ew-resize":"ns-resize"},q=()=>{document.body.style.userSelect="",document.body.style.cursor=""},ee=(U,G)=>{const ge=(G==null?void 0:G.offsetWidth)||0,pe=U.classList.contains(p.ALL_DAY_APPOINTMENT),ye=!!U.closest(`.${p.MONTH_VIEW}`),Ie=D.current.slotInterval;ce.current=(G==null?void 0:G.offsetHeight)||0,K.current=ce.current>0?Ie/ce.current:0,H.current=o!=null&&o.startTime?new Date(o.startTime):void 0,w.current=o!=null&&o.endTime?new Date(o.endTime):void 0,_t(D.current,{cellWidth:ge,isAllDaySource:pe,isMonthView:ye,slotInterval:Ie,interval:Ie},null,!0)},te=()=>{if(!y.current||!(y.current.offsetParent||y.current.parentElement))return;const G=D.current.cloneFromSource(y.current);D.current.cloneRef=G},oe=t.useCallback((U,G)=>{var we,_,X,re;const ge=G.nativeEvent,pe=(we=G.target)==null?void 0:we.closest(`.${p.APPOINTMENT}`);if(!pe)return;D.current=new kt,D.current.slotInterval=s!=null&&s.interval&&(s!=null&&s.slotCount)?s.interval/s.slotCount:30,D.current.isActionPerformed=!1,T.current=U,D.current.direction=j,y.current=pe,b.current=pe.offsetTop,M.current=pe.offsetHeight;const ye=D.current.getCellUnderPointer(G.nativeEvent);ee(pe,ye),T.current===Xe.Top?k.current=H.current:T.current===Xe.Bottom&&(k.current=w.current);const Ie=De(ge),me=D.current.getPointerCoordinates(ge);me.clientX!=null&&(z.current=me.clientX),me.clientY!=null&&(S.current=me.clientY),Y.current=ge,n==null||n(Ie),!Ie.cancel&&(L.current={startTime:new Date(o.startTime),endTime:new Date(o.endTime)},m&&(m.interval>0&&!D.current.isAllDaySource&&!D.current.isMonthView&&(Z.current=D.current.slotInterval!==m.interval,Z.current&&(D.current.slotInterval=m.interval)),D.current.enableScroll=((_=m.scroll)==null?void 0:_.enable)??!0,D.current.minScrollSpeed=((X=m.scroll)==null?void 0:X.scrollBy)??D.current.minScrollSpeed,D.current.minScrollThreshold=((re=m.scroll)==null?void 0:re.timeDelay)??D.current.minScrollThreshold),V())},[n,v,o]),De=U=>({event:U,cancel:!1,startTime:H.current,endTime:w.current,data:y.current?o:void 0}),ve=U=>(D.current.performAutoScrolling(U,y.current),D.current.scrollInterval!==null&&I.current===null&&(I.current=requestAnimationFrame(Q)),!1),de=(U,G)=>{if(!D.current.isActionPerformed){if(Math.hypot(U,G)<x)return;const pe=y.current;if(!pe)return;D.current.isActionPerformed=!0,D.current.addDocSuppressors(),pe.classList.add(p.RESIZING),te(),document!=null&&document.body&&F()}},N=()=>{I.current!=null&&(cancelAnimationFrame(I.current),I.current=null)},B=t.useCallback(U=>{var we,_;if(!D.current)return;const G=D.current.getPointerCoordinates(U),ge=G.clientX-z.current,pe=G.clientY-S.current;if(de(ge,pe),!D.current.isActionPerformed)return;Y.current=U;const ye=De(U);if(r==null||r(ye),ye.cancel)return;kt.currentActionName="resize",ye.startTime&&(H.current=ye.startTime),ye.endTime&&(w.current=ye.endTime);const Ie=y.current;!D.current.isAllDaySource&&D.current.enableScroll&&ve(U);const me=D.current.getCellUnderPointer(U);D.current.cloneRef&&Ie&&s.enable&&!(D.current.isAllDaySource||D.current.isMonthView)&&se(me),xe(me),(we=U.preventDefault)==null||we.call(U),(_=U==null?void 0:U.stopPropagation)==null||_.call(U)},[(le=D.current)==null?void 0:le.isActionPerformed,y.current,v,o,z.current,S.current,T.current,(fe=D.current)==null?void 0:fe.cloneRef,r]),ie=t.useCallback(U=>{var me,we;if((me=y.current)==null||me.classList.remove(p.RESIZING),D.current.scrollInterval&&cancelAnimationFrame(D.current.scrollInterval),D.current.scrollInterval=null,ue(),document!=null&&document.body&&q(),D.current.cloneRef=null,(we=R==null?void 0:R.hide)==null||we.call(R),!D.current.isActionPerformed){D.current.isActionPerformed=!1;return}D.current.isActionPerformed=!1;const G=De(U);if(e==null||e(G),G.cancel){const _=G.data;_&&(H.current=_.startTime,w.current=_.endTime);return}const ge=Array.isArray(o)?o[0]:o,pe={...ge,startTime:new Date(ge.startTime),endTime:new Date(ge.endTime)};if(T.current===Xe.Top)$.setHours(pe.startTime,k.current);else if(T.current===Xe.Bottom){const _=$.isMidnight(pe.endTime),X=$.isMidnight(k.current);$.setHours(pe.endTime,k.current);const re=_&&!X?-1:!_&&X?1:0;pe.endTime=$.addDays(pe.endTime,re)}if(D.current.isAllDaySource||D.current.isMonthView||!s.enable){const _=D.current.getCellUnderPointer(U),X=(_==null?void 0:_.getAttribute("data-date"))??D.current.getCurrentTargetDate(U.target,_);if(!X)return;let he=new Date(Number(X));if(T.current===Xe.Right){const Se=$.normalizeDate(pe.startTime);he.getTime()<Se.getTime()&&(he=Se),$.setYear(pe.endTime,he)}else if(T.current===Xe.Left){const Se=$.normalizeDate(pe.endTime);he.getTime()>Se.getTime()&&(he=Se),$.setYear(pe.startTime,he)}}const ye={...pe,startTime:pe.startTime,endTime:pe.endTime},Ie=(_,X)=>{const re=Me.getEventByGuid(a,o.guid);re&&L.current&&(re.startTime=new Date(L.current.startTime),re.endTime=new Date(L.current.endTime)),g==null||g.show({title:O(_),message:O(X),confirmText:O("ok"),showCancel:!1,onConfirm:()=>g.hide()})};if(!h&&Me.checkEventOverlap(ye,a,!0)){Ie("eventOverlap","overlapAlert");return}if(Me.isBlockRange(ye,a,!0)){Ie("alert","blockAlert");return}pe.recurrenceRule&&pe.recurrenceID&&(pe.recurrenceException=pe.recurrenceException??Xn(L.current.startTime)),Hr(pe,pe.startTime,pe.endTime,c,E.fields,a,C),D.current=null},[(A=D.current)==null?void 0:A.isActionPerformed,y.current,D,(ne=D.current)==null?void 0:ne.cloneRef,B,e]),se=U=>{var X;const G=U==null?void 0:U.getAttribute("data-date");if(!G)return;const ge=new Date(Number(G));let pe=ge.getHours()*Ge+ge.getMinutes();const ye=H.current?new Date(H.current):void 0,Ie=w.current?new Date(w.current):void 0;let me=!1,we=!1,_=ge;if(y.current.querySelector(`.${p.INDICATOR}`)&&(me=y.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.UP_ARROW_ICON}`),we=y.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.DOWN_ARROW_ICON}`)),Z.current){const re=Y.current,he=(X=D.current)==null?void 0:X.getContentWrap(U);if(he&&re){const{schedulerStartMinutes:Se}=$.getSchedulerStartAndEndMinutes(i,l);_=D.current.getSteppedCellDate(Se,re,0,K.current,Number(G),he)}}if(T.current===Xe.Top){const re=Ie.getHours()*Ge+Ie.getMinutes();we||re>pe||re===0?(ye.setTime(_.getTime()),k.current=ye):m.resizeToZero&&(k.current=Ie)}else if(T.current===Xe.Bottom){pe=pe+D.current.slotInterval;const re=ye.getHours()*Ge+ye.getMinutes();if(Z.current){const he=_.getHours()*Ge+_.getMinutes();me||re<he?(Ie.setTime(_.getTime()),k.current=Ie):m.resizeToZero&&(k.current=ye)}else me||re<pe?(Ie.setHours(ge.getHours(),ge.getMinutes()+D.current.slotInterval),k.current=Ie):m.resizeToZero&&(k.current=ye)}},xe=U=>{var me,we,_,X;if(!o.guid)return;const G=Me.getEventByGuid(a,o.guid);if(!G)return;const ge={...G,startTime:new Date(G.startTime),endTime:new Date(G.endTime)},pe=((me=D.current)==null?void 0:me.isMonthView)||((we=D.current)==null?void 0:we.isAllDaySource);if(!pe&&s.enable){const re={...ge};if(T.current===Xe.Top)$.setHours(re.startTime,k.current);else if(T.current===Xe.Bottom){const Se=$.isMidnight(re.endTime),Re=$.isMidnight(k.current);$.setHours(re.endTime,k.current);const Le=Se&&!Re?-1:!Se&&Re?1:0;re.endTime=$.addDays(re.endTime,Le)}const he=Me.processTimeSlotCloneEvent((_=c.current)==null?void 0:_.element,v,re,s,i,l,D.current.cellWidth,j==="rtl");R==null||R.show({guid:o.guid,segments:he,isDayEvent:!1});return}let ye=null;if(U){const re=U.getAttribute("data-date");ye=re?new Date(Number(re)):null}if(!ye&&U){const re=D.current.getCurrentTargetDate(U,U);ye=re!=null?new Date(re):null}if(ye){const re=$.normalizeDate(ge.startTime),he=$.normalizeDate(ge.endTime);T.current===Xe.Right?(ye.getTime()<re.getTime()&&(ye=re),$.setYear(ge.endTime,ye)):T.current===Xe.Left&&(ye.getTime()>he.getTime()&&(ye=new Date(he)),$.setYear(ge.startTime,ye))}const Ie=Me.processCloneEvent((X=c.current)==null?void 0:X.element,v,ge,f,d,D.current.cellWidth,D.current.isAllDaySource,j==="rtl",D.current.isMonthView,y.current);R==null||R.show({guid:o.guid,segments:Ie,isDayEvent:pe})},Q=()=>{if(I.current=null,!D.current||D.current.scrollInterval==null)return;const U=Y.current;if(U){let G=D.current.getCellUnderPointer(U);if(!G){const ge=U.target||null;G=ge==null?void 0:ge.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}G&&(D.current.cloneRef&&!(D.current.isAllDaySource||D.current.isMonthView)&&se(G),xe(G))}D.current&&D.current.scrollInterval!=null&&(I.current=requestAnimationFrame(Q))};return{resizeStart:oe,onClick:U=>{var G;(G=D.current)!=null&&G.suppressEvent&&D.current.suppressEvent(U)}}}const $n=typeof document<"u"&&typeof window<"u",Vn=o=>{var n,r;o==null||o.stopPropagation(),o!=null&&o.nativeEvent&&((r=(n=o.nativeEvent).stopImmediatePropagation)==null||r.call(n))},Ca=o=>{switch(o){case Xe.Top:return p.TOP_RESIZE_HANDLER;case Xe.Bottom:return p.BOTTOM_RESIZE_HANDLER;case Xe.Left:return p.LEFT_RESIZE_HANDLER;default:return p.RIGHT_RESIZE_HANDLER}},ws=({dir:o,resizeStart:n,showResizeHandle:r})=>Ae.isDevice&&!r?null:u.jsxs("div",{className:`${p.EVENT_RESIZE_CLASS} ${Ca(o)}`,onMouseDown:e=>{Vn(e),n==null||n(o,e)},onTouchStart:e=>{Vn(e),n==null||n(o,e)},children:[o===Xe.Top||o===Xe.Bottom?u.jsx("div",{className:p.VERTICAL_RESIZE_INNER}):u.jsx("div",{className:p.HORIZONTAL_RESIZE_INNER}),Ae.isDevice&&r&&u.jsx("div",{className:p.MOB_RESIZE_DOT,onMouseDown:e=>{Vn(e),n==null||n(o,e)},onTouchStart:e=>{Vn(e),n==null||n(o,e)}})]}),Tn=t.memo(({isVertical:o=!1,data:n,children:r,hasPrevious:e,hasNext:s})=>{const{eventResize:i}=We();if(!i)return u.jsx(u.Fragment,{children:r});const{resizeStart:l}=Ta(n),c=t.useRef(null),f=t.useRef(null),[d,h]=t.useState(!1);qt(f,{tapHold:()=>{Ae.isDevice&&h(!0)}}),t.useEffect(()=>{const a=f.current;if(!a)return;const C=v=>{v.preventDefault()};return a.addEventListener("contextmenu",C,!0),()=>{a.removeEventListener("contextmenu",C,!0)}},[]);const g=t.useCallback((a,C)=>{if(l(a,C),!Ae.isDevice)return;const v=()=>{h(!1),$n&&(document.removeEventListener("mouseup",v,!0),document.removeEventListener("touchend",v,!0))};$n&&(document.addEventListener("mouseup",v,{capture:!0,once:!0}),document.addEventListener("touchend",v,{capture:!0,once:!0}))},[l]);t.useEffect(()=>{if(!Ae.isDevice||!d)return;const a=C=>{const v=C.target;c.current&&v&&!c.current.contains(v)&&h(!1)};return $n&&(document.addEventListener("mousedown",a,!0),document.addEventListener("touchstart",a,!0)),()=>{$n&&(document.removeEventListener("mousedown",a,!0),document.removeEventListener("touchstart",a,!0))}},[d]);const m=o?Xe.Top:Xe.Left,E=o?Xe.Bottom:Xe.Right;return u.jsxs("div",{className:`${p.RESIZE_CONTAINER}`,ref:a=>{c.current=a,f.current=a?a.closest(`.${p.APPOINTMENT}`):null},children:[!e&&i.startResizable&&u.jsx(ws,{dir:m,resizeStart:g,showResizeHandle:d}),r,!s&&i.endResizable&&u.jsx(ws,{dir:E,resizeStart:g,showResizeHandle:d})]})});Tn.displayName="ResizeHandlers";const Kn=o=>{const{weekRenderDates:n,isBlockedEvent:r,...e}=o,{renderDates:s}=pt(),{timeFormat:i,eventTemplate:l,onEventClick:c,onEventDoubleClick:f,eventDrag:d,eventResize:h,quickPopupRef:g,readOnly:m}=We(),{locale:E}=$e(),{getString:a}=tt(E||"en-US"),C=t.useRef(null),{processedEvent:v,overflowDirection:R,positionStyle:j}=Ea({eventInfo:e,renderDates:n||s}),{isOverflowLeft:y,isOverflowRight:D}=R,x=t.useCallback(O=>{if(r){O==null||O.preventDefault(),O==null||O.stopPropagation();return}if(Gn(O.currentTarget),O.stopPropagation(),c){const L={event:O,data:e.event,element:O.currentTarget};c(L)}},[c,v]),k=t.useCallback(O=>{var L;if(e.event.isReadonly||m||r){O==null||O.preventDefault(),O==null||O.stopPropagation();return}if(O.stopPropagation(),f){(L=g==null?void 0:g.current)==null||L.hide();const V={event:O,data:e.event,element:O.currentTarget};f(V)}},[f,v]),z=O=>ut(O??new Date,{type:"time",skeleton:"short",format:i,locale:E}),S=O=>u.jsx("div",{className:`sf-indicator sf-icons sf-${O}-icon`,children:O==="left"?u.jsx(Ir,{}):u.jsx(kr,{})}),b=O=>u.jsx("div",{className:p.TIME,children:O}),M=t.useCallback(()=>{const{subject:O,isAllDay:L,startTime:V,endTime:J}=v;if(!e.totalSegments)return null;const ue=()=>y?S("left"):!L&&b(z(V)),F=()=>D?S("right"):!L&&b(z(J));return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[ue(),u.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:O||a("addTitle")}),F(),u.jsx(Kt,{event:e.event})]})},[v,e,E,i,y,D]),T=t.useCallback(()=>{const{subject:O,startTime:L,isAllDay:V}=v;return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!V&&b(z(L)),u.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:O||a("addTitle")}),u.jsx(Kt,{event:e.event})]})},[v,e]),H=t.useCallback(()=>{const{subject:O}=v;return u.jsx("div",{className:p.APPOINTMENT_DETAILS,children:u.jsx("div",{className:`${p.SUBJECT}`,children:O||a("addTitle")})})},[v,e]),w=t.useCallback(()=>l?l(v):r?H():e.totalSegments?M():T(),[l,v,M,T,H,e,y,D]),I={...e.eventStyle||{},...j},Y=e.eventClasses.join(" "),Z={"data-id":v.id,"aria-label":Me.getAriaLabel(v),"data-guid":e.event.guid,role:"button",tabIndex:0,onClick:x,onDoubleClick:k,onKeyDown:O=>{(O.key==="Enter"||O.key===" ")&&(O.stopPropagation(),x(O))},style:I},ce=w(),K=!r&&!e.event.isReadonly&&!m;return d!=null&&d.enable&&K?u.jsx(Qn,{data:v,className:Y,containerProps:Z,ref:C,children:h!=null&&h.enable&&K?u.jsx(Tn,{data:v,hasPrevious:y,hasNext:D,children:ce}):u.jsx(u.Fragment,{children:ce})}):u.jsx("div",{ref:C,className:Y,...Z,children:h!=null&&h.enable&&K?u.jsx(Tn,{data:v,hasPrevious:y,hasNext:D,children:ce}):u.jsx(u.Fragment,{children:ce})})};Kn.displayName="DayEvent";const Jn=()=>{const{timeScale:o,onCellClick:n,onCellDoubleClick:r,readOnly:e,quickPopupRef:s}=We(),i=t.useCallback((d,h,g)=>{const m=new Date(h);return!o.enable||g?(h.setHours(0,0,0,0),m.setDate(m.getDate()+1),m.setHours(0,0,0,0),g=!0):m.setTime(h.getTime()+o.interval/o.slotCount*tn),{cancel:!1,nativeEvent:d.nativeEvent,startTime:h,endTime:m,isAllDay:!!g,element:d.currentTarget}},[o]),l=t.useCallback((d,h,g)=>{var m,E;if(!((m=d.target)!=null&&m.classList.contains(p.DATE_HEADER)||(E=d.target)!=null&&E.classList.contains(p.HEADER_DATE)||e)&&(zn(d.currentTarget),n)){const a=i(d,h,g);if(n(a),a.cancel)return}},[n,i]),c=t.useCallback((d,h,g)=>{var m;if(!e&&(zn(d.currentTarget),r)){(m=s==null?void 0:s.current)==null||m.hide();const E=i(d,h,g);if(r(E),E.cancel)return}},[r,i]);return{handleCellClick:l,handleCellDoubleClick:c,handleKeyDown:(d,h)=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),l(d,h))}}},Do=o=>{const{date:n,visibleEvents:r,hiddenEventCount:e,onMoreIndicatorClick:s}=o,{timeScale:i}=We(),{locale:l}=$e(),{getString:c}=tt(l||"en-US"),{handleCellClick:f,handleCellDoubleClick:d}=Jn(),h=()=>e<=0?null:u.jsx("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,onClick:m=>{m==null||m.stopPropagation(),m==null||m.preventDefault(),s()},role:"button",tabIndex:0,"aria-label":`${e} more events`,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m==null||m.stopPropagation(),m==null||m.preventDefault(),s())},children:Ae.isDevice?`+${e}`:`+${e} ${c("more")}`}),g=()=>r.map(m=>{const{totalSegments:E,isFirstSegmentInRenderRange:a,event:C,eventKey:v}=m;return E&&E>1&&a||(!E||E<=1)&&C.isAllDay&&!C.isBlock?u.jsx(Kn,{...m},v):null});return u.jsx("div",{className:p.ALL_DAY_CELL,"data-date":n.getTime(),onClick:m=>f(m,n,!0),onDoubleClick:m=>d(m,n,!0),onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),f(m,n,!0))},children:i.enable&&u.jsxs(u.Fragment,{children:[g(),h()]})},$.generateDateKey(n))};Do.displayName="AllDayRowCell";const Fr=t.forwardRef((o,n)=>{const{isCollapsed:r,onCollapseChange:e,onMoreEventsChange:s}=o,{renderDates:i}=pt(),{timeScale:l}=We(),c=t.useRef(null),f=3,[d,h]=t.useState("auto"),{eventsByDate:g,hasEventsExceedingMaxCount:m,calculateHeight:E,getVisibleEvents:a,getHiddenEventCount:C}=ha(r,f),v=t.useCallback(()=>{e&&e()},[e]);t.useImperativeHandle(n,()=>({hasMoreEvents:m})),t.useEffect(()=>{s&&s(m)},[m,s]),t.useEffect(()=>{if(c.current)if(!l.enable)h("auto");else{const y=E();h(`${y}px`)}},[r,g,E]);const R=["sf-all-day-row",r?"sf-all-day-collapsed":"",m?"sf-has-more-events":""].filter(Boolean).join(" "),j=y=>{const D=$.generateDateKey(y),x=a(D),k=C(D);return u.jsx(Do,{date:y,visibleEvents:x,hiddenEventCount:k,onMoreIndicatorClick:v},D)};return u.jsx("div",{ref:c,className:R,style:{height:d},children:i.map(j)})});Fr.displayName="AllDayRow";Fr.__docgenInfo={description:"",methods:[],displayName:"AllDayRow"};const vo=()=>{const{timeScale:o,dateHeader:n,headerIndent:r}=We(),{handleDateClick:e}=$r(),{locale:s}=$e(),{getString:i}=tt(s||"en-US"),{headerCells:l,isAllDayCollapsed:c,showAllDayToggle:f,weekNumber:d,toggleAllDayCollapse:h,handleMoreEventsChange:g}=Kl(),{handleCellClick:m,handleCellDoubleClick:E}=Jn(),a=v=>u.jsx("div",{className:v.className,onClick:R=>m(R,v.date,!0),onDoubleClick:R=>E(R,v.date,!0),children:n?n({date:v.date}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:p.HEADER_DAY,children:v.dayName}),u.jsx("div",{className:`${p.HEADER_DATE} ${v.isToday?p.TODAY:""}`,onClick:R=>e(R,v.date),children:v.dateNumber})]})},v.key),C=()=>u.jsx("div",{className:p.ALL_DAY_APPOINTMENT_SECTION,onClick:h,role:"button",tabIndex:0,"aria-label":i(c?"expandAllDaySection":"collapseAllDaySection"),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&h()},children:u.jsx(qn,{className:c?p.APPOINTMENT_EXPAND:p.APPOINTMENT_COLLAPSE})});return u.jsxs("div",{className:p.HEADER_SECTION,children:[o.enable&&u.jsxs("div",{className:p.LEFT_INDENT,children:[r?r({weekNumber:d}):u.jsx(u.Fragment,{children:d&&u.jsx("div",{className:p.WEEK_NUMBER,children:u.jsx("div",{title:`Week ${d}`,children:d})})}),f&&C()]}),u.jsx("div",{className:p.RIGHT_SECTION,children:u.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:u.jsxs("div",{className:p.DATE_HEADER,children:[u.jsx("div",{className:p.HEADER_ROW,children:l.map(v=>a(v))}),u.jsx("div",{className:p.DAY_CLONE_CONTAINER}),u.jsx(Fr,{isCollapsed:c,onCollapseChange:h,onMoreEventsChange:g})]})})})]})};vo.displayName="DateHeader";const Da=o=>{const{currentTime:n=new Date,currentTimePosition:r=0,isTimeWithinBounds:e=!1}=o,{startHour:s,endHour:i,timeFormat:l,timeScale:c}=We(),{locale:f}=$e(),{hours:d,minutes:h}=$.parseTimeString(s),{hours:g,minutes:m}=$.parseTimeString(i),[E,a]=t.useState(null),[C,v]=t.useState(0),R=t.useMemo(()=>{const y=[],D=d*Ge+h,x=g*Ge+m;let k=D;for(;k<x;){for(let z=0;z<c.slotCount;z++){const S=k+z*(c.interval/c.slotCount);if(S>=x)break;const b=Math.floor(S/Ge),M=Math.floor(S%Ge),T=new Date;T.setHours(b,M,0,0);const H=z===0,w=z===c.slotCount-1,Y=S+c.interval/c.slotCount>=x,Z={date:T,type:H?"majorSlot":"minorSlot"};y.push({key:`${b}-${M}`,date:T,isMajorSlot:H,isLastSlotOfInterval:w,isLastSlotBeforeEnd:Y,label:ut(T,{type:"time",skeleton:"h",format:l,locale:f}),templateProps:Z,index:y.length})}k+=c.interval}return v(y.length),y},[d,h,g,m,l,c,f]);t.useEffect(()=>{if(!e){E!==null&&a(null);return}const y=100/C,D=Math.floor(r/y);D!==E&&a(D)},[r,E,C,e]);const j=ut(n,{type:"time",skeleton:"short",format:l,locale:f});return{timeSlots:R,totalSlots:C,hiddenSlotIndex:E,currentTimeString:j}},yo=o=>{const{currentTime:n,currentTimePosition:r=0,isTimeWithinBounds:e=!1}=o,{showTimeIndicator:s,timeScale:i}=We(),{timeSlots:l,hiddenSlotIndex:c,currentTimeString:f}=Da({currentTime:n,currentTimePosition:r,isTimeWithinBounds:e}),d=()=>l.map(h=>u.jsx("div",{className:`${p.TIME_SLOTS} ${h.isLastSlotOfInterval||h.isLastSlotBeforeEnd?"sf-time-cells":""} ${c===h.index?"sf-hide-children":""}`,children:h.isMajorSlot?i.majorSlot?i.majorSlot(h.templateProps):u.jsx("span",{children:h.label}):i.minorSlot?i.minorSlot(h.templateProps):null},h.key));return u.jsx("div",{className:p.LEFT_INDENT,children:u.jsxs("div",{className:p.TIME_CELLS_WRAP,children:[u.jsx("div",{className:p.SCHEDULER_TABLE,children:d()}),s&&e&&u.jsx("div",{className:p.CURRENT_TIME,style:{top:`${r}%`},children:f})]})})};yo.displayName="TimeCells";const va=o=>{const{renderDates:n,workDays:r,workHours:e,cell:s,timeScale:i,startHour:l,endHour:c}=o,{hours:f,minutes:d}=$.parseTimeString(l||"00:00"),{hours:h,minutes:g}=c==="24:00"?{hours:24,minutes:0}:$.parseTimeString(c||"24:00"),m=a=>s?s({date:a,type:"workCell"}):null;return{workCellRows:t.useMemo(()=>{const a=[];if(i.enable){const C=f*Ge+d,v=h*Ge+g;let R=C;for(;R<v;){for(let j=0;j<i.slotCount;j++){const y=R+j*(i.interval/i.slotCount);if(y>=v)break;const D=Math.floor(y/Ge),x=Math.floor(y%Ge),z=!(j===i.slotCount-1),S=`${D}-${x}`,b=`${D}:${x.toString().padStart(2,"0")}`,M=n.map(T=>{const H=new Date(T);H.setHours(D,x,0,0);const w=$.isWorkHour(H,e,r),I=$.isSameDay(T,new Date),Y=$.isWeekend(T,r),Z=["sf-work-cells",z?"sf-alternate-cells":"",I?"sf-today":"",Y?"sf-weekend":"",w?"sf-work-hours":""].filter(Boolean).join(" ");return{date:H,className:Z,key:`${T.getTime()}-${D}-${x}`,dataAttributes:{date:H.getTime()},isWorkHour:w,isToday:I,isWeekend:Y,isAlternate:z}});a.push({key:S,dataAttribute:b,cells:M})}R+=i.interval}}else{const C=n.map(v=>{const R=new Date(v);R.setHours(0,0,0,0);const j=$.isSameDay(v,new Date),y=$.isWeekend(v,r),D=["sf-work-cells","sf-timescale-disabled-cell",j?"sf-today":"",y?"sf-weekend":""].filter(Boolean).join(" ");return{date:R,className:D,key:`${v.getTime()}-timescale-disabled`,dataAttributes:{date:R.getTime(),dateKey:$.generateDateKey(v)},isToday:j,isWeekend:y}});a.push({key:"disabled-timescale-row",cells:C})}return a},[n,i,f,d,h,g,r,e]),renderCellTemplate:m}},bo=()=>{const{renderDates:o}=pt(),{workDays:n,workHours:r,cell:e,timeScale:s,startHour:i,endHour:l}=We(),{workCellRows:c,renderCellTemplate:f}=va({renderDates:o,workDays:n,workHours:r,cell:e,timeScale:s,startHour:i,endHour:l}),{handleCellClick:d,handleCellDoubleClick:h,handleKeyDown:g}=Jn();return u.jsx("div",{className:p.CONTENT_TABLE,children:c.map(m=>u.jsx("div",{className:p.WORK_CELLS_ROW,"data-date":m.dataAttribute,children:m.cells.map(E=>u.jsx("div",{className:E.className,"data-date":E.dataAttributes.date,"data-date-key":E.dataAttributes.dateKey,onClick:a=>d(a,E.date),onDoubleClick:a=>h(a,E.date),onKeyDown:a=>{g(a,E.date)},children:f(E.date)},E.key))},m.key))})};bo.displayName="WorkCells";const mr=118,Ns=2,ya=()=>{const{eventSettings:o,eventOverlap:n,timeFormat:r,timeScale:e,startHour:s,endHour:i,maxEventsPerRow:l=3,startHourTuple:c,endHourTuple:f}=We(),{renderDates:d}=pt(),{eventsData:h}=Pt(),{locale:g,dir:m}=$e(),E=t.useCallback((C,v)=>{const R=(D,x)=>{if(c&&f){const k=$.normalizeDate(D),z=$.normalizeDate($.isMidnight(x)?$.addDays(x,-1):x);return k==null||k.setHours(c[0],c[1],0,0),z==null||z.setHours(f[0],f[1],0,0),x>k&&D<z}else return!0};if(e!=null&&e.enable){const D=o.spannedEventPlacement||"AllDayRow",x=[];let k=v.filter(w=>!w.isAllDay&&!w.isBlock&&Me.isMultiDayEvent(w));D==="AllDayRow"&&(k=k.filter(w=>$.isLessthan24Hours(w.startTime,w.endTime))),k.forEach(w=>{const I=Me.splitEventByDay(w,[C]);x.push(...I.filter(Y=>R(Y.startDate,Y.endDate)))});const S=v.filter(w=>!w.isAllDay&&!w.isBlock&&!Me.isMultiDayEvent(w)&&$.isSameDay(new Date(w.startTime),C)&&R(w.startTime,w.endTime)).map(w=>({event:w,startDate:w.startTime,endDate:w.endTime}));x.push(...S);const b=Me.calculateOverlappingEvents(x,n),M=v.filter(w=>w.isBlock&&$.isSameDay(new Date(w.startTime),C)),T=[],H=(w,I={})=>{const{event:Y}=w;if(!Y.startTime||!Y.endTime)return;const Z=ct.calculateEventPosition(w,e,s,i),ce=`${C.toISOString()}-${Y.id}`,K=$.formatTimeDisplay(Y,g,r),O=Me.getEventClassNames(Y),L={width:Z.width||"96%",height:`${Z.height}`,top:Z.top||"0px"};m==="rtl"?L.right=Z.left||"0%":L.left=Z.left||"0%",T.push({event:Y,timeDisplay:K,eventKey:ce,eventClasses:O,eventStyle:L,...I})};return b.forEach(w=>{w.forEach(I=>{H(I,{totalOverlapping:I.totalOverlapping,totalSegments:I.totalSegments,isFirstDay:I.isFirstDay,isLastDay:I.isLastDay,positionIndex:I.positionIndex,segmentIndex:I.segmentIndex})})}),M.forEach(w=>{const I={event:w,startDate:w.startTime,endDate:w.endTime};H(I)}),T}const j=Me.processDayEvents(d,v),y=[];return j.forEach(D=>{if(!$.isSameDay(D.startDate,C)||!R(D.startDate,D.endDate))return;const x=`${D.startDate.toISOString()}-${D.event.id}`,k=$.formatTimeDisplay(D.event,g,r),z=ct.calculatePositionStyles(D,d).width,S=D.positionIndex??0,b={height:`${mr}px`,top:`${S*(mr+Ns)}px`,width:z||"96%"};m==="rtl"?b.right="0%":b.left="0%",y.push({...D,timeDisplay:k,eventKey:x,eventStyle:b})}),y},[o,n,e,s,i,d,m,g,r]);return{dayWrappers:t.useMemo(()=>!d||d.length===0||!h||h.length===0?null:d.map(C=>{const v=$.generateDateKey(C),R=E(C,h);let j;return e.enable||(j=l*(mr+Ns)),{key:v,dateTimestamp:C.getTime(),events:R,moreIndicatorTopPx:j}}),[d,o,n,e,r,s,i,g,h])}},Ss=24,ba=124,pr=4,Br=(o,n)=>{const{height:r,rowAutoHeight:e,numberOfWeeks:s,eventSettings:i,schedulerRef:l}=We(),{eventsData:c}=Pt(),f=t.useMemo(()=>Me.processDayEvents(o,c),[c,o]),d=t.useMemo(()=>Me.getEventsMap(o,f),[o,f]),h=t.useMemo(()=>{var b,M,T,H,w,I,Y,Z,ce;const y=Me.getMaxEventsInCell(d,o),D=((T=(M=(b=l==null?void 0:l.current)==null?void 0:b.element)==null?void 0:M.querySelector("."+p.MONTH_VIEW+" ."+p.APPOINTMENT))==null?void 0:T.offsetHeight)??Ss,x=((I=(w=(H=l==null?void 0:l.current)==null?void 0:H.element)==null?void 0:w.querySelector("."+p.MONTH_VIEW+" ."+p.DATE_HEADER))==null?void 0:I.offsetHeight)??0;let k=((ce=(Z=(Y=l==null?void 0:l.current)==null?void 0:Y.element)==null?void 0:Z.querySelector("."+p.MONTH_VIEW+" ."+p.WORK_CELLS_ROW))==null?void 0:ce.offsetHeight)??ba;const z=K=>K*D+(K>0?K-1:0)*pr,S=()=>{var J,ue,F,q,ee,te,oe,De;const K=((F=(ue=(J=l==null?void 0:l.current)==null?void 0:J.element)==null?void 0:ue.querySelector("."+p.SCHEDULER_TOOLBAR_CONTAINER))==null?void 0:F.offsetHeight)??0,O=((te=(ee=(q=l==null?void 0:l.current)==null?void 0:q.element)==null?void 0:ee.querySelector("."+p.MONTH_VIEW+" ."+p.HEADER_ROW))==null?void 0:te.offsetHeight)??0,V=(((De=(oe=l==null?void 0:l.current)==null?void 0:oe.element)==null?void 0:De.offsetHeight)??parseInt(r,10))-K-O;return parseInt(Math.abs(V/s).toFixed(2),10)};if(e){const K=z(y)+x+(e&&(i!=null&&i.ignoreWhitespace)?0:Ss);return r!=="auto"&&s&&(k=S()),`${Math.max(K,k)}px`}if(s&&r!=="auto"&&n>=3){const K=S(),O=z(n)+x+D+pr;return`${Math.max(O,K)}px`}if(y>=3){const K=Math.min(y,n),O=z(K)+x+(y>n?D:0)+pr;return`${Math.max(O,k)}px`}return`${k}px`},[o,d,e,s,r,i==null?void 0:i.ignoreWhitespace,n,l]),g=t.useCallback(y=>{const D=E(y);return e?D:D.slice(0,n)},[d,n,e]),m=t.useCallback(y=>d.get(y).find(k=>k.event.isBlock&&(k.event.isAllDay||$.isFullDayEvent(k.startDate,k.endDate))),[d,n]),E=t.useCallback(y=>{var k;return[...(k=d.get(y))==null?void 0:k.filter(z=>!z.event.isBlock)].sort((z,S)=>(z.positionIndex||0)-(S.positionIndex||0))},[d]),a=t.useCallback(y=>{var x;if(m(y))return 0;const D=(x=d.get(y))==null?void 0:x.filter(k=>!k.event.isBlock);return Math.max(0,D.length-n)},[d,n]),C=t.useCallback(y=>a(y)>0,[a]),v=t.useCallback(y=>d.get(y).some(x=>x.event.isBlock&&!x.event.isAllDay&&!$.isFullDayEvent(x.startDate,x.endDate)),[d]),R=t.useCallback(y=>d.get(y).some(x=>x.event.isBlock&&(x.event.isAllDay||$.isFullDayEvent(x.startDate,x.endDate))),[d]);return{getVisibleEvents:g,getAlldayBlockEvent:m,getHiddenEventCount:a,getAllEventsForDate:E,hasMoreIndicator:C,hasBlockIndicator:v,hasAllDayBlock:R,calculatedRowHeight:h,sortEventsByTime:y=>y.sort((D,x)=>new Date(D.startTime).getTime()-new Date(x.startTime).getTime())}};function Ro(o){const{onMoreEventsClick:n,morePopupRef:r}=We();return{handleMoreClick:t.useCallback((s,i)=>{var l;if(s&&typeof s.stopPropagation=="function"&&s.stopPropagation(),i&&s.target){const c=$.generateDateKey(i),d=o(c).map(g=>g.event),h={cancel:!1,data:d};if(n&&n(h),h.cancel)return;(l=r==null?void 0:r.current)==null||l.open(i,d,s.target)}},[o,n,r])}}const wo=o=>{const{date:n,count:r,onMoreClick:e,topPx:s}=o,{locale:i}=$e(),{getString:l}=tt(i||"en-US"),c=s!==void 0?{top:`${s}px`}:void 0,f=d=>{if(d.key==="Enter"||d.key===" "){const h={...d,currentTarget:d.currentTarget,type:"click"};e(h,n)}};return u.jsxs("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,style:c,onClick:d=>e(d,n),onKeyDown:f,tabIndex:0,role:"button",children:["+",r," ",!Ae.isDevice&&`${l("more")}`]})},No=t.memo(()=>{const{eventTemplate:o,onEventClick:n,onEventDoubleClick:r,eventDrag:e,eventResize:s,maxEventsPerRow:i=3,timeScale:l,readOnly:c,quickPopupRef:f,startHourTuple:d,endHourTuple:h}=We(),{dayWrappers:g}=ya(),{locale:m}=$e(),{getString:E}=tt(m||"en-US"),{renderDates:a}=pt(),{getAllEventsForDate:C,getHiddenEventCount:v}=Br(a,i),{handleMoreClick:R}=Ro(C),j=b=>{if(l.enable){const{isOverflowTop:M,isOverflowBottom:T}=ct.getOverflowDirection(b,a,d,h);return u.jsxs(t.Fragment,{children:[M&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:u.jsx($s,{})}),y(b),T&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:u.jsx(js,{})})]})}else{const{isOverflowLeft:M,isOverflowRight:T}=ct.getOverflowDirection(b,a);return u.jsxs(t.Fragment,{children:[M&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.LEFT_ARROW_ICON}`,children:u.jsx(Ir,{})}),y(b),T&&u.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.RIGHT_ARROW_ICON}`,children:u.jsx(kr,{})})]})}},y=b=>{const{event:M,timeDisplay:T}=b;return u.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[u.jsx("div",{className:`${p.SUBJECT}`,children:M.subject||E("addTitle")}),!M.isBlock&&M.location&&u.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:M.location}),!M.isBlock&&u.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:T}),u.jsx(Kt,{event:M})]})},D=b=>o?o(b.event):b.totalSegments||d||h?j(b):y(b),x=(b,M)=>{if(M.event.isBlock){b==null||b.preventDefault(),b==null||b.stopPropagation();return}if(Gn(b.currentTarget),n){const T={event:b,data:M.event,element:b.currentTarget};n(T)}},k=(b,M)=>{var T;if(M.event.isReadonly||c||M.event.isBlock){b==null||b.preventDefault(),b==null||b.stopPropagation();return}if(r){(T=f==null?void 0:f.current)==null||T.hide();const H={event:b,data:M.event,element:b.currentTarget};r(H)}},z=(b,M)=>{(b.key==="Enter"||b.key===" ")&&x(b,M)};if(!g)return u.jsx("div",{className:p.EVENT_CONTAINER});const S=!(l&&l.enable);return u.jsx("div",{className:p.EVENT_CONTAINER,children:g.map(b=>{const M=b.events.filter(K=>!K.event.isBlock),T=b.events.filter(K=>K.event.isBlock),H=S?M.slice(0,i):M,w=new Date(b.dateTimestamp),I=$.generateDateKey(w),Y=S?v(I):0,Z=H.filter(K=>K.totalSegments&&K.totalSegments>1&&K.isFirstSegmentInRenderRange||!K.totalSegments||K.totalSegments<=1),ce=S?Z:[...T,...Z];return u.jsxs("div",{className:p.DAY_WRAPPER,"data-date":b.dateTimestamp,children:[ce.map(K=>{const{isOverflowTop:O,isOverflowBottom:L}=ct.getOverflowDirection(K,a,d,h),V=K.eventClasses.join(" "),J={style:K.eventStyle,"data-id":String(K.event.id),"data-guid":K.event.guid,"aria-label":Me.getAriaLabel(K.event),tabIndex:0,onClick:q=>x(q,K),onDoubleClick:q=>k(q,K),onKeyDown:q=>z(q,K)},ue=D(K),F=!K.event.isBlock&&!K.event.isReadonly&&!c;return e.enable&&F?u.jsx(Qn,{data:K.event,className:V,containerProps:J,children:s.enable&&F?u.jsx(Tn,{isVertical:l.enable,data:K.event,hasPrevious:O,hasNext:L,children:ue}):u.jsx(u.Fragment,{children:ue})},K.eventKey):u.jsx("div",{className:V,...J,children:s.enable&&F?u.jsx(Tn,{isVertical:l.enable,data:K.event,hasPrevious:O,hasNext:L,children:ue}):u.jsx(u.Fragment,{children:ue})},K.eventKey)}),S&&Y>0&&u.jsx(wo,{date:new Date(b.dateTimestamp),count:Y,onMoreClick:R,topPx:b.moreIndicatorTopPx})]},b.key)})})});No.displayName="TimeSlotEvent";const Ra=o=>{const{timeScale:n}=We(),[r,e]=t.useState(0),[s,i]=t.useState(new Date),[l,c]=t.useState(!1),f=t.useCallback((g,m)=>{e(g),i(new Date),c(m)},[]),d=t.useMemo(()=>{let g="";switch(o){case"Day":g=p.DAY_VIEW;break;case"Week":g=p.WEEK_VIEW;break;case"WorkWeek":g=p.WORK_WEEK_VIEW;break}return g},[o]),h=t.useMemo(()=>`${n.enable?"":"sf-timescale-disabled"}`,[n.enable]);return{currentTime:s,currentTimePosition:r,isTimeWithinBounds:l,viewClassName:d,contentSectionClassName:h,handleTimePositionUpdate:f}},er=o=>{const{viewType:n}=o,{timeScale:r,showTimeIndicator:e}=We(),{currentTime:s,currentTimePosition:i,isTimeWithinBounds:l,viewClassName:c,contentSectionClassName:f,handleTimePositionUpdate:d}=Ra(n);return u.jsx("div",{className:`${p.VERTICAL_VIEW} ${c}`,children:u.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[u.jsx("div",{className:p.STICKY_HEADER,children:u.jsx(vo,{})}),u.jsxs("div",{className:`${p.CONTENT_SECTION} ${f}`,children:[r.enable&&u.jsx(yo,{currentTime:s,currentTimePosition:i,isTimeWithinBounds:l}),u.jsxs("div",{className:p.WORK_CELLS_CONTAINER,children:[u.jsx("div",{className:p.TIME_SLOT_CLONE_CONTAINER}),u.jsxs("div",{className:p.CONTENT_WRAP,children:[u.jsx(No,{}),u.jsx(bo,{})]}),e&&r.enable&&u.jsx(ma,{onPositionUpdate:d})]})]})]})})};er.displayName="VerticalView";const wa=()=>u.jsx(er,{viewType:"Day"});wa.displayName="DayView";const Na=()=>u.jsx(er,{viewType:"Week"});Na.displayName="WeekView";const Sa=()=>u.jsx(er,{viewType:"WorkWeek"});Sa.displayName="WorkWeekView";function xa(){const{locale:o}=$e(),{firstDayOfWeek:n,showWeekend:r,workDays:e}=We(),s=t.useCallback(()=>{const l=[],c="gregorian",f=Ae.isDevice?"abbreviated":"wide",d=`days.stand-alone.${f}`;let h;if(!o||o==="en"||o==="en-US")h=Qt(d,Xo(c));else{const g=`main.${o}.dates.calendars.${c}.days.format.${f}`;h=Qt(g,qo)}for(const g of Object.keys(h))l.push(Qt(g,h));return Array.from({length:7},(g,m)=>{const E=(m+n)%7;return l[E>=0&&E<l.length?E:0]})},[n,o]);return{weekdayHeaderCells:t.useCallback(()=>{const l=s(),c=new Date().getDay();if(r)return l.map((f,d)=>{const g=(d+n)%7===c;return{day:f,isCurrentDay:g,className:`sf-header-cells ${g?"sf-current-day":""}`,key:`header-${d}`}});{const f=[];for(let d=0;d<7;d++){const h=(d+n)%7;if(e.includes(h)){const g=h===c;f.push({day:l[d>=0&&d<l.length?d:0],isCurrentDay:g,className:`sf-header-cells ${g?"sf-current-day":""}`,key:`header-${d}`})}}return f}},[n,r,e,s])()}}const So=()=>{const{showWeekNumber:o,weekDay:n}=We(),{weekdayHeaderCells:r}=xa(),e=s=>u.jsx("div",{className:s.className,children:n?n({day:s.day}):u.jsx("div",{className:p.HEADER_DAY,children:s.day})},s.key);return u.jsxs("div",{className:p.HEADER_SECTION,children:[o&&u.jsx("div",{className:p.LEFT_INDENT}),u.jsx("div",{className:p.RIGHT_SECTION,children:u.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:u.jsx("div",{className:p.DATE_HEADER,children:u.jsx("div",{className:p.HEADER_ROW,children:r.map(s=>e(s))})})})})]})};So.displayName="WeekDayHeader";function Aa(){const{numberOfWeeks:o,interval:n,showTrailingAndLeadingDates:r=!0,showWeekend:e,workDays:s,weekRule:i,firstDayOfWeek:l}=We(),{renderDates:c}=pt(),{weeksToRender:f,weekNumbers:d}=t.useMemo(()=>{if(!c||c.length===0)return{weeksToRender:[],weekNumbers:[]};const E=[],a=[],C=e?Go:s==null?void 0:s.length;for(let v=0;v<c.length;v+=C){const R=c.slice(v,v+C);if(R.length>0){E.push(R);const j=$.getWeekNumber(R[0],i,l);a.push(j)}}return{weeksToRender:E,weekNumbers:a}},[c,e,s,i,l]),h=t.useMemo(()=>!r&&!(o||n>1),[r,o,n]),g=t.useMemo(()=>o?{"--week-count":o}:void 0,[o]),m=t.useMemo(()=>[o&&"sf-custom-weeks",h&&"sf-hide-dates"].filter(Boolean).join(" "),[o,h]);return{weekNumbers:d,weeksToRender:f,contentTableStyle:g,additionalClass:m,hideOtherMonths:h}}function Oa(o){const{weekRenderDates:n,rowIndex:r}=o,{selectedDate:e,workDays:s,showWeekend:i,maxEventsPerRow:l=3}=We(),{locale:c}=$e(),{renderDates:f}=pt(),{getAllEventsForDate:d}=Br(f,l),{handleMoreClick:h}=Ro(d),g=t.useCallback(a=>{let C="sf-work-cells";return $.isWorkDay(a,s)&&(C+=" sf-work-days"),$.isToday(a)&&(C+=" sf-current-date"),$.isSameMonth(a,e)||(C+=" sf-other-month"),C},[s,e]),m=t.useCallback(a=>a.getDate()===1&&!Ae.isDevice?ut(a,{type:"dateTime",format:"MMM d",locale:c}):ut(a,{type:"dateTime",format:"d",locale:c}),[c]);return{workCells:t.useCallback(()=>(i?n:n.filter(C=>$.isWorkDay(C,s))).map((C,v)=>({date:C,className:g(C),dateTimestamp:C.getTime(),displayText:m(C),key:`date-${r}-${v}`})),[n,g,m,i,s,r])(),handleMoreClick:h}}const La=o=>{const{weekRenderDates:n,hideOtherMonths:r,rowIndex:e,onHeightCalculated:s}=o,{maxEventsPerRow:i=2,cellHeader:l,cell:c,rowAutoHeight:f,getAvailableViews:d}=We(),{workCells:h,handleMoreClick:g}=Oa(o),{handleCellClick:m,handleCellDoubleClick:E,handleKeyDown:a}=Jn(),{handleDateClick:C}=$r(),{getVisibleEvents:v,getAlldayBlockEvent:R,getHiddenEventCount:j,hasMoreIndicator:y,hasBlockIndicator:D,hasAllDayBlock:x,calculatedRowHeight:k}=Br(n,i),z=M=>u.jsx(wo,{date:M,count:j($.generateDateKey(M)),onMoreClick:g}),S=M=>{const T=$.generateDateKey(M),H=v(T);if(x(T)){const w=R(T);if(w&&(w.totalSegments&&w.totalSegments>1&&w.isFirstSegmentInRenderRange||!w.totalSegments||w.totalSegments<=1))return u.jsx(Kn,{...w,weekRenderDates:n,isBlockedEvent:!0},w.eventKey||w.event.guid)}return H.map(w=>{const{totalSegments:I,isFirstSegmentInRenderRange:Y,event:Z,eventKey:ce}=w;return!Z.isBlock&&(I&&I>1&&Y||!I||I<=1)?u.jsx(Kn,{...w,weekRenderDates:n},ce||w.event.guid):null})},b=()=>u.jsx("div",{className:`${p.ICONS} ${p.BLOCK_INDICATOR}`,children:u.jsx(pi,{})});return t.useLayoutEffect(()=>{s(e,k)},[k]),u.jsx("div",{className:p.WORK_CELLS_ROW,style:{height:f||i>=3?k:""},children:h.map(M=>{if(r&&M.className.includes("sf-other-month"))return u.jsx("div",{className:M.className},M.key);const T=$.generateDateKey(M.date),H=ft.isDayViewAvailable(d);return u.jsxs("div",{className:M.className,"data-date":M.dateTimestamp,onClick:w=>m(w,M.date,!0),onDoubleClick:w=>E(w,M.date,!0),onKeyDown:w=>{a(w,M.date)},children:[u.jsxs("div",{className:p.DATE_HEADER_CONTAINER,children:[u.jsx("div",{className:p.DATE_HEADER,children:l?l({date:M.date}):u.jsx("span",{className:H?p.LINK:"",onClick:w=>C(w,M.date),children:M.displayText})}),D(T)&&b()]}),u.jsxs("div",{className:p.APPOINTMENT_WRAPPER,children:[S(M.date),!f&&y(T)&&z(M.date)]}),c&&c({date:M.date,type:"monthCell"})]},M.key)})})},Ia=()=>{const{showWeekNumber:o,numberOfWeeks:n,rowAutoHeight:r}=We(),{weekNumbers:e,weeksToRender:s,contentTableStyle:i,additionalClass:l,hideOtherMonths:c}=Aa(),f=t.useRef([]),[d,h]=t.useState([]),g=t.useCallback((E,a)=>{f.current[Number(E)]!==a&&(f.current[Number(E)]=a,h([...f.current]))},[]);t.useEffect(()=>{const E=s.length,a=f.current.length;if(E!==a){const C=f.current[0],v=new Array(E).fill(C).map((R,j)=>f.current[parseInt(j.toString(),10)]||R);f.current=v,h([...v])}},[s.length]);const m=t.useCallback(()=>e==null?void 0:e.map((E,a)=>u.jsx("div",{className:p.WEEK_NUMBER,title:`Week ${E}`,style:{height:r?d[Number(a)]:""},children:E},`week-${a}`)),[d,e]);return u.jsxs(u.Fragment,{children:[o&&u.jsx("div",{className:`sf-left-indent ${n?"sf-custom-weeks":""}`,style:n?{"--week-count":n}:void 0,children:u.jsx("div",{className:p.WEEK_NUMBER_WRAPPER,children:m()})}),u.jsxs("div",{className:`sf-content-table ${l}`,style:i,children:[u.jsx("div",{className:p.DAY_CLONE_CONTAINER}),s.map((E,a)=>u.jsx(La,{weekRenderDates:E,hideOtherMonths:c,rowIndex:a,onHeightCalculated:g},`week-${a}`))]})]})},ka=()=>u.jsx("div",{className:`${p.VERTICAL_VIEW} ${p.MONTH_VIEW}`,children:u.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[u.jsx("div",{className:p.STICKY_HEADER,children:u.jsx(So,{})}),u.jsx("div",{className:p.CONTENT_SECTION,children:u.jsx("div",{className:p.WORK_CELLS_CONTAINER,children:u.jsx(Ia,{})})})]})});ka.displayName="MonthView";export{wa as D,gr as F,Ei as L,ka as M,ze as O,Co as S,Tr as T,Na as W,Sa as a,da as b,zt as c,Er as d,Pr as e,qt as f,ia as g,Rt as h,Si as i};
