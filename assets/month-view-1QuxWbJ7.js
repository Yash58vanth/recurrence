import{j as a,r as Yt}from"./index-DlC1yEB1.js";import{r as e}from"./index-D5jfS-9e.js";import{n as vt,a as xe,o as wo,q as Qt,r as Be,s as ws,t as Yr,v as Kr,w as No,x as An,y as gt,z as Xr,E as So,G as xo,H as wr,I as F,c as mt,S as Ut,u as $e,p as Ot,J as Ns,K as Nr,M as Ss,N as ct,L as xs,Q as Bn,A as Zt,T as qr,X as On,h as Gr,Y as Ao,i as Oo,Z as At,e as Zr,g as Lo,_ as Io,B as Ze,V as qe,C as Tt,$ as Un,a0 as As,a1 as ko,f as ut,a2 as _o,a3 as dn,a4 as Po,a5 as Mo,a6 as st,a7 as Wn,a8 as Os,a9 as Ls,aa as et,ab as Xe,ac as Is,m as Ho,ad as tt,ae as jo,af as Ge,ag as $o,ah as pr,ai as Vo,b as nr,aj as Qr,ak as En,al as Wo,D as Fo,k as Bo,j as Jr,R as Uo,am as Ln,an as es,ao as tn,ap as zo,aq as Yo,ar as Ko}from"./recurrence-editor-BX5e3chV.js";const Sr={height:"auto",width:"auto",defaultSelectedDate:new Date,defaultView:"Week",eventSettings:{dataSource:[],fields:{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException",guid:"Guid"},spannedEventPlacement:"AllDayRow",enableIndicator:!1,allowAdding:!0,allowDeleting:!0,allowEditing:!0,ignoreWhitespace:!1},timeScale:{enable:!0,interval:60,slotCount:2},workHours:{highlight:!0,start:"09:00",end:"18:00"},startHour:"00:00",endHour:"24:00",showWeekend:!0,firstDayOfWeek:0,workDays:[1,2,3,4,5],showTimeIndicator:!0,showWeekNumber:!1,eventOverlap:!0,keyboardNavigation:!0,showQuickInfoPopup:!0,header:!0,rowAutoHeight:!1,readOnly:!1,eventDrag:!0,eventResize:!0,enableRecurrenceValidation:!0,weekRule:"FirstDay"},xr=e.createContext(Sr),We=()=>{const o=e.useContext(xr);if(o===void 0)throw new Error("useSchedulerPropsContext must be used within a Scheduler");return o};xr.displayName="SchedulerPropsContext";const Ar=e.createContext(void 0),pt=()=>{const o=e.useContext(Ar);if(o===void 0)throw new Error("useSchedulerRenderDatesContext must be used within a Scheduler");return o};Ar.displayName="SchedulerRenderDatesContext";const Or=e.createContext(void 0),Kt=()=>{const o=e.useContext(Or);if(o===void 0)throw new Error("useSchedulerEventsContext must be used within a Scheduler");return o};Or.displayName="SchedulerEventsContext";function ts(o){return o!=null&&typeof o=="object"&&!Array.isArray(o)&&o.constructor===Object}function ks(o,r){const s={...o};for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const n=r[t],i=s[t];if(typeof n>"u")continue;ts(n)&&ts(i)?s[t]=ks(i,n):s[t]=n}return s}function _s(o,r){return ks(o,r)}class ft{static getViewsInfo(r,s){const t=[],n=new Set;return e.Children.forEach(r,i=>{if(e.isValidElement(i)){const l=i.type,u=i.props||{};let f=null;switch(l.displayName){case"DayView":f="Day";break;case"WeekView":f="Week";break;case"WorkWeekView":f="WorkWeek";break;case"MonthView":f="Month";break}if(f){const d=u.name||u.displayName||f;n.has(d)||(n.add(d),t.push({viewType:f,name:d,displayName:u.displayName||s(f.toLowerCase()),interval:u.interval||1,component:i}))}}}),t}static findViewByNameOrType(r,s){const t=r.find(i=>i.name===s);if(t)return t;const n=s;return r.find(i=>i.viewType===n)||null}static getDefaultView(r){return r.length>0?r[0]:void 0}static isViewAvailable(r,s){const t=r==null?void 0:r();return Array.isArray(t)&&t.some(n=>n.viewType===s)}static isDayViewAvailable(r){return ft.isViewAvailable(r,"Day")}}const Ve=(()=>{function o(i){return i?"__eventList"in i?i.__eventList.events||[]:(i.__eventList={},i.__eventList.events=[]):null}function r(i,l,u,f,d){if(!i)return null;const E=o(i);let m=d?wo(u,d):u;f&&(m=m.bind(f));const g=l.split(" ");for(let h=0;h<g.length;h++){E.push({name:g[parseInt(h.toString(),10)],listener:u,debounce:m});const c=xe.isIE?null:{passive:!1};i.addEventListener(g[parseInt(h.toString(),10)],m,c)}return m}function s(i,l,u){if(!i)return null;const f=o(i),d=l.split(" ");for(let E=0;E<d.length;E++){let m=-1,g=null;f&&f.length!==0&&f.some((h,c)=>h.name===d[parseInt(E.toString(),10)]&&h.listener===u?(m=c,g=h.debounce||null,!0):!1),m!==-1&&f.splice(m,1),g&&i.removeEventListener(d[parseInt(E.toString(),10)],g)}}function t(i){if(!i)return null;const l=o(i),u=vt([],void 0,l);for(let f=0;f<u.length;f++){const d=u[parseInt(f.toString(),10)];i.removeEventListener(d.name,d.debounce),l.shift()}}function n(i,l,u){if(!i)return null;const f=o(i);for(const d of f)d.name===l&&d.debounce(u)}return{add:r,clearEvents:t,remove:s,trigger:n}})(),Xo=()=>{let o=[];const r={};function s(d,E,m,g){if(Be(E))return;const h=m||{};f(d)?r[`${d}`]=[{handler:E,context:h,id:g}]:g&&!o.includes(g)?(o.push(g),r[`${d}`].push({handler:E,context:h,id:g})):r[`${d}`].some(c=>c.handler===E)||r[`${d}`].push({handler:E,context:h})}function t(d,E,m){if(f(d))return;const g=Qt(d,r);if(E)for(let h=0;h<g.length;h++){const c=g[parseInt(h.toString(),10)];if(m&&c.id===m){g.splice(h,1),o=o.filter(v=>v!==m);break}else if(E===c.handler){g.splice(h,1);break}}else delete r[`${d}`]}function n(d,E,m,g){if(f(d)){m&&m(E);return}E&&(E={...E,name:d});const h=Qt(d,r).slice(0);for(const c of h)try{c.handler(E)}catch(v){g&&g(v)}m&&m(E)}function i(d){try{JSON.parse(d)}catch{return!1}return!0}function l(){Object.keys(r).forEach(d=>{delete r[`${d}`]}),o=[]}function u(){const d=r.notifyExternalChange;if(d){for(let E=0;E<d.length;E++){const m=d[parseInt(E.toString(),10)],g=m.context;g&&g.detectFunction&&g.randomId&&g.isReactMock&&(t("notifyExternalChange",m.handler,g.randomId),E--)}r.notifyExternalChange.length||delete r.notifyExternalChange}}function f(d){return!r[`${d}`]||r[`${d}`].length===0}return{isJson:i,on:s,off:t,notify:n,destroy:l,ranArray:o,boundedEvents:r,offIntlEvents:u}},qo=new RegExp("]");function Go(o,r){const t={isDestroyed:!1,isProtectedOnChange:!0,modelObserver:Xo(),...o};return t.element=e.useRef(null),t.addEventListener=(n,i)=>{t.modelObserver.on(n,i)},t.removeEventListener=(n,i)=>{t.modelObserver.off(n,i)},t.trigger=(n,i,l,u)=>{if(t.isDestroyed!==!0){const f=t.isProtectedOnChange;t.isProtectedOnChange=!1;const d=t.modelObserver.notify(n,i,l,u);if(qo.test(n)){const E=Qt(n,t);E&&E.call(t,i),l&&l.call(t,i)}return t.isProtectedOnChange=f,d}},t.destroy=()=>{t.modelObserver.destroy(),t.isDestroyed=!0},e.useLayoutEffect(()=>{t.isDestroyed=!1},[]),t}let In,kn,ns,rs;function ss(o,r,s,t,n){let i,l,u=0,f=0,d;if(typeof o==="string"?d=ws(o):d=o,d){const m=d.getBoundingClientRect();i=d.scrollWidth?d.scrollWidth:m.right-m.left,l=d.scrollHeight?o&&!Be(r)&&r.classList.contains("sf-treeview")?d.clientHeight:d.scrollHeight:m.bottom-m.top;const g=["Top","Left","Bottom","Right"],h=getComputedStyle(d);for(let c=0;c<g.length;c++){const v=g[parseInt(c.toString(),10)],D=h["border"+v+"Width"],O=h["padding"+v],P=v.toLowerCase();s[`${P}`]=isNaN(parseFloat(D))?0:parseFloat(D),t[`${P}`]=isNaN(parseFloat(O))?0:parseFloat(O)}o&&!Be(r)&&r.classList.contains("sf-treeview")?u=m.top+document.scrollingElement.scrollTop:u=m.top,f=m.left,n.left=f+s.left+t.left,n.top=d.offsetTop+s.top+t.top,n.right=f+i-(s.right+t.right),n.bottom=u+l-(s.bottom+t.bottom)}}function os(o){const r=document.body,s=document.documentElement;return Math.max(r["scroll"+o],s["scroll"+o],r["offset"+o],s["offset"+o],s["client"+o])}function rr(o){for(kn=o.offsetTop,In=o.offsetLeft,ns=o.offsetWidth,rs=o.offsetHeight;o.offsetParent;)o=o.offsetParent,kn+=o.offsetTop,In+=o.offsetLeft;return kn>=window.pageYOffset&&In>=window.pageXOffset&&kn+rs<=window.pageYOffset+window.innerHeight&&In+ns<=window.pageXOffset+window.innerWidth}function fn(o){return o.type.indexOf("touch")>-1?o.changedTouches[0]:o}function sr(o){if(Be(o))return{left:0,top:0};const r=o.getBoundingClientRect(),s=getComputedStyle(o);return{left:r.left+window.pageXOffset-parseInt(s.marginLeft,10),top:r.top+window.pageYOffset-parseInt(s.marginTop,10)}}function is(o){const r=o.clientX>0?o.clientX:0,s=o.clientY>0?o.clientY:0;return document.elementsFromPoint(r,s)}function ls(o,r){const s=r?[...o].reverse():o;for(const i of s){const u=window.getComputedStyle(i).overflowY;if((u==="auto"||u==="scroll")&&i.scrollHeight>i.clientHeight)return i}const t=document.scrollingElement;return window.getComputedStyle(t).overflowY==="visible"?(t.style.overflow="auto",t):null}const Zo=e.createContext(void 0),Qo=()=>{const o=e.useContext(Zo);if(o)return o},Jo={left:0,top:0,bottom:0,right:0},or={isDragged:!1};function ei(o){return{left:0,top:0,...o}}function Jt(o,r){const s=Qo(),t={cursorAt:ei({}),clone:!1,dragArea:null,isDragScroll:!1,isReplaceDragEle:!1,isPreventSelect:!0,distance:1,handle:"",abort:"",helper:null,scope:"default",dragTarget:"",dragDirection:null,queryPositionInfo:null,enableTailMode:!1,skipDistanceCheck:!1,preventDefault:!0,enableAutoScroll:!1,enableTapHold:!1,tapHoldThreshold:750,enableScrollHandler:!1,element:o,...r},n=e.useRef(t);let i,l,u,f,d,E,m,g=Jt.getDefaultPosition(),h=Jt.getDefaultPosition();const c=Jt.getDefaultPosition();let v,D=0,O=0,P=0,T=!1,A=null,R,B,k=!1,b=0,N,L,C,G,M=0,X=0,se=0,fe=0;const pe={};function K(x){let V;!Be(n.current.handle)&&n.current.handle!==""&&(V=ws(n.current.handle,o.current));const z=n.current.enableTapHold&&xe.isDevice&&xe.isTouch?H:q;x?Ve.remove(V||o.current,xe.isSafari()?"touchstart":xe.touchStartEvent,z):Ve.add(V||o.current,xe.isSafari()?"touchstart":xe.touchStartEvent,z)}function H(x){const V=x.currentTarget;A=setTimeout(()=>{k=!0,S(),q(x,V)},n.current.tapHoldThreshold),Ve.add(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,S,this),Ve.add(document,xe.isSafari()?"touchend":xe.touchEndEvent,S,this)}function y(x){wr(x)?(Ve.add(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,U,this),Ve.add(document,xe.isSafari()?"touchend":xe.touchEndEvent,ne,this),w(!1,o.current,x)):(K(),document.body.classList.remove("sf-prevent-select"))}function S(){clearTimeout(A),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,S),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,S)}function I(){M=0,X=0}function q(x,V){var te;if(o.current=Yr(o),B=x.target,re())return;if(re(!0),k=!1,i=x.currentTarget||V,T=!1,n.current.abort){let he=n.current.abort;typeof he=="string"&&(he=[he]);for(let Ee=0;Ee<he.length;Ee++)if(!Be(gt(x.target,he[`${Ee}`]))){re()&&re(!0);return}}n.current.preventDefault&&!An(x.changedTouches)&&x.type!=="touchstart"&&x.preventDefault(),(te=o==null?void 0:o.current)==null||te.setAttribute("aria-grabbed","true");const z=fn(x);if(l={x:z.pageX,y:z.pageY},!n.current.clone){const he=o.current.getBoundingClientRect();I(),u=z.pageX-(he.left+M),f=z.pageY-(he.top+X)}k?_(x):(Ve.add(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,_,this),Ve.add(document,xe.isSafari()?"touchend":xe.touchEndEvent,t.intDestroy,this)),K(!0),x.type!=="touchstart"&&n.current.isPreventSelect&&document.body.classList.add("sf-prevent-select"),k=!1,Ve.trigger(document.documentElement,xe.isSafari()?"touchstart":xe.touchStartEvent,x)}function _(x){S(),document.scrollingElement&&(se=document.scrollingElement.scrollLeft,fe=document.scrollingElement.scrollTop);const V=!An(x.changedTouches);if(V&&x.changedTouches.length!==1)return;const z=fn(x);let te;const he=getComputedStyle(o.current);d={left:parseInt(he.marginLeft,10),top:parseInt(he.marginTop,10),right:parseInt(he.marginRight,10),bottom:parseInt(he.marginBottom,10)};let Ee=o.current;if(n.current.clone&&n.current.dragTarget){const Ce=gt(x.target,n.current.dragTarget);Be(Ce)||(Ee=Ce)}n.current.isReplaceDragEle&&(Ee=ce(x.target,Ee)),E=sr(Ee),m=ve(x,n.current.isDragScroll);const be=l.x-z.pageX,ke=l.y-z.pageY;if(Math.sqrt(be*be+ke*ke)>=n.current.distance||k){const Ce=ue(x);if(!Ce)return;V&&x.preventDefault();const $=L=Ce;if(G=sr($.offsetParent),n.current&&n.current.onDragStart){const Ae=Ne(x),Re={event:x,element:Ee,target:Ae,bindEvents:null,dragElement:$};if(n.current.onDragStart(Re),Re.cancel){t.intDestroy();return}}n.current.dragArea?ss(n.current.dragArea,L,h,c,g):(g={left:0,right:0,bottom:0,top:0},h={top:0,left:0}),te={left:m.left-G.left,top:m.top-G.top},n.current.clone&&!n.current.enableTailMode&&(D=m.left-E.left,b=m.top-E.top),I();const W=getComputedStyle(Ee),ae=parseFloat(W.marginTop);n.current.clone&&ae!==0&&(te.top+=ae),n.current.enableScrollHandler&&!n.current.clone&&(te.top-=X,te.left-=M);const ge=Se({top:`${te.top-b}px`,left:`${te.left-D}px`});n.current.dragArea&&typeof n.current.dragArea!="string"&&n.current.dragArea.classList.contains("sf-kanban-content")&&n.current.dragArea.style.position==="relative"&&(te.top+=n.current.dragArea.scrollTop),R={top:te.top,left:te.left},Xr($,ee({position:"absolute",left:ge.left,top:ge.top})),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,_),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,t.intDestroy),y($)}}function U(x){var Ye;if(!An(x.changedTouches)&&x.changedTouches.length!==1)return;n.current.clone&&x.changedTouches&&xe.isDevice&&xe.isTouch&&x.preventDefault();let V,z;m=ve(x,n.current.isDragScroll);const te=os("Height");te<m.top&&(m.top=te);const he=os("Width");if(he<m.left&&(m.left=he),n.current&&n.current.onDrag){const He=Ne(x);n.current.onDrag({event:x,element:o.current,target:He})}const Ee=Z(x);if(Ee.target&&Ee.instance){let He=!0;C&&(C.instance!==Ee.instance?J(x,Ee):He=!1),He&&(Ee.instance.dragData[n.current.scope]=pe[n.current.scope],Ee.instance.intOver(x,Ee.target),C=Ee)}else C&&J(x,Ee);const be=(Ye=pe==null?void 0:pe[n.current.scope])==null?void 0:Ye.helper;if(!be)return;G=sr(be.offsetParent);const ke=G.left,de=G.top,Ce=fn(x),$=Ce.pageX,W=Ce.pageY,ae=m.left-D,ge=m.top-b,Ae=getComputedStyle(be);if(n.current.dragArea){if(n.current.enableAutoScroll&&ss(n.current.dragArea,be,h,c,g),v!==$||n.current.skipDistanceCheck){const He=be.offsetWidth+(parseFloat(Ae.marginLeft)+parseFloat(Ae.marginRight));g.left>ae&&ae>0?V=g.left:g.right+window.pageXOffset<ae+He&&ae>0?V=ae-(ae-g.right)+window.pageXOffset-He:V=ae<0?g.left:ae}if(N!==W||n.current.skipDistanceCheck){const He=be.offsetHeight+(parseFloat(Ae.marginTop)+parseFloat(Ae.marginBottom));g.top>ge&&ge>0?z=g.top:g.bottom+window.pageYOffset<ge+He&&ge>0?z=ge-(ge-g.bottom)+window.pageYOffset-He:z=ge<0?g.top:ge}}else V=ae,z=ge;const Re=de+h.top,Le=ke+h.left;T&&(Be(z)&&(z=P),Be(V)&&(V=O));let Y,De;if(be.classList.contains("sf-treeview"))n.current.dragArea?(g.top=n.current.clone?g.top:0,Y=z-Re<0?g.top:z-h.top,De=V-Le<0?g.left:V-h.left):(Y=z-h.top,De=V-h.left);else if(n.current.dragArea){const He=be.classList.contains("sf-dialog");g.top=n.current.clone?g.top:0,Y=z-Re<0?g.top:z-Re,De=V-Le<0?He?V-(Le-h.left):R.left:V-Le}else Y=z-Re,De=V-Le;const me=o.current?parseFloat(getComputedStyle(o.current).marginTop):0;if(me>0&&(n.current.clone&&(Y+=me,ge<0&&(me+ge>=0?Y=me+ge:Y-=me),n.current.dragArea&&(Y=g.bottom<Y?g.bottom:Y)),z-Re<0))if(ge+me+(be.offsetHeight-Re)>=0){const He=g.top+ge-Re;He+me+Re<0?Y-=me+Re:Y=He}else Y-=me+Re;if(n.current.dragArea&&be.classList.contains("sf-treeview")){const He=be.offsetHeight+(parseFloat(Ae.marginTop)+parseFloat(Ae.marginBottom));Y=Y+He>g.bottom?g.bottom-He:Y}n.current.enableScrollHandler&&!n.current.clone&&(Y-=X,De-=M),n.current.dragArea&&typeof n.current.dragArea!="string"&&n.current.dragArea.classList.contains("sf-kanban-content")&&n.current.dragArea.style.position==="relative"&&(Y+=n.current.dragArea.scrollTop);const Oe=Se({top:Y+"px",left:De+"px"});Xr(be,ee(Oe)),!rr(be)&&n.current.enableAutoScroll&&!be.classList.contains("sf-treeview")&&be.scrollIntoView();let Pe=document.querySelectorAll(":hover");if(n.current.enableAutoScroll&&be.classList.contains("sf-treeview")){Pe.length===0&&(Pe=is(x));let He=ls(Pe,!1);rr(be)?oe(He,Y):rr(be)||(Pe=[].slice.call(document.querySelectorAll(":hover")),Pe.length===0&&(Pe=is(x)),He=ls(Pe,!0),oe(He,Y))}T=!0,O=V,P=z,m.left=V,m.top=z,v=$,N=W}function ne(x){var te;if(T=!1,se=0,fe=0,!An(x.changedTouches)&&x.changedTouches.length!==1)return;if(["touchend","pointerup","mouseup"].indexOf(x.type)!==-1){if(n.current&&n.current.onDragStop){const he=Ne(x);n.current.onDragStop({event:x,element:o.current,target:he,helper:L})}t.intDestroy()}else(te=o==null?void 0:o.current)==null||te.setAttribute("aria-grabbed","false");const z=Z(x);z.target&&z.instance&&(z.instance.dragStopCalled=!0,z.instance.dragData[n.current.scope]=pe[n.current.scope],z.instance.intDrop(x,z.target)),w(!0),document.body.classList.remove("sf-prevent-select")}function Q(){K(),xe.isIE&&Kr([t.element.current],"sf-block-touch"),pe[n.current.scope]={}}t.intDestroy=()=>{var x;T=!1,K(),document.body.classList.remove("sf-prevent-select"),(x=o==null?void 0:o.current)==null||x.setAttribute("aria-grabbed","false"),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,_),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,ne),Ve.remove(document,xe.isSafari()?"touchend":xe.touchEndEvent,t.intDestroy),Ve.remove(document,xe.isSafari()?"touchmove":xe.touchMoveEvent,U),re()&&re(!0)},t.destroy=()=>{K(!0)};function J(x,V){C.instance.intOut(x,V.target),C.instance.dragData[n.current.scope]=null,C=null}function Ne(x){const V=fn(x);let z;const te=L.style.pointerEvents||"",he=x.type.indexOf("pointer")!==-1&&xe.info.name==="safari"&&parseInt(xe.info.version,10)>12;return xo(x.target,L)||x.type.indexOf("touch")!==-1||he?(L.style.pointerEvents="none",z=document.elementFromPoint(V.clientX,V.clientY),L.style.pointerEvents=te):z=x.target,z}function ve(x,V){const z=x.srcElement!==void 0?x.srcElement:x.target,te=fn(x);let he,Ee;const be=Be(z.offsetParent);if(V){if(he=n.current.clone?te.pageX:te.pageX+(be?0:z.offsetParent.scrollLeft)-u,Ee=n.current.clone?te.pageY:te.pageY+(be?0:z.offsetParent.scrollTop)-f,!n.current.clone){const ke=z.offsetParent;if(!be&&ke){const de=ke.scrollLeft,Ce=ke.scrollTop,$=de-se,W=Ce-fe;he=he-$,Ee=Ee-W}}}else if(he=n.current.clone?te.pageX:te.pageX+window.pageXOffset-u,Ee=n.current.clone?te.pageY:te.pageY+window.pageYOffset-f,document.scrollingElement&&!n.current.clone){const ke=document.scrollingElement,de=ke.scrollLeft,Ce=ke.scrollTop,$=de-se,W=Ce-fe;he=he-$,Ee=Ee-W}return{left:he-(d.left+n.current.cursorAt.left),top:Ee-(d.top+n.current.cursorAt.top)}}function ue(x){let V;return n.current.clone?n.current&&n.current.helper?V=n.current.helper({sender:x,element:i}):(V=So("div",{className:"sf-drag-helper sf-block-touch",innerHTML:"Draggable"}),document.body.appendChild(V)):V=t.element.current,V}function w(x,V,z){pe[n.current.scope]=x?null:{draggable:V,helper:z,draggedElement:t.element.current}}function Z(x){const V=Ne(x);let z=ie(V);if(!z&&V&&!Be(V.parentNode)){const te=gt(V.parentNode,".sf-droppable")||V.parentElement;te&&(z=ie(te))}return{target:V,instance:z}}function ie(x){let V,z;if(s){const{getAllDroppables:te}=s;V=te();for(const he in V)if(Object.prototype.hasOwnProperty.call(V,he)){const Ee=V[`${he}`];if(Ee.element&&Ee.element.current===x){z=Ee;break}}}else return;return z}function re(x){return x&&(or.isDragged=!or.isDragged),or.isDragged}function Se(x){return n.current&&n.current.queryPositionInfo?n.current.queryPositionInfo(x):x}function ee(x){const V={...x};return n.current.dragDirection&&(n.current.dragDirection==="x"?delete V.top:n.current.dragDirection==="y"&&delete V.left),V}function oe(x,V){if(x===document.scrollingElement)x.clientHeight+x.scrollTop-L.clientHeight<V&&x.getBoundingClientRect().height+G.top>V?x.scrollTop+=L.clientHeight:x.scrollTop>V-L.clientHeight&&(x.scrollTop-=L.clientHeight);else if(x){const z=document.scrollingElement.scrollTop,te=L.clientHeight;x.clientHeight+x.getBoundingClientRect().top-te+z<V?x.scrollTop+=L.clientHeight:x.getBoundingClientRect().top>V-te-z&&(x.scrollTop-=L.clientHeight)}}function ce(x,V){let z;return!Be(B)&&B!==x?z=B:z=Be(V)?x:V,z}return e.useLayoutEffect(()=>{if(t.element.current=Yr(t.element),!!t.element.current)return n.current={...t,...r},Kr([t.element.current],["sf-lib","sf-draggable"]),Q(),()=>{t.element.current&&No([t.element.current],["sf-lib","sf-draggable"]),t.destroy()}}),t}Jt.getDefaultPosition=()=>vt({},Jo);const ti=/(Up|Down)/;function Xt(o,r){const s=Go(),t={...r};let n=!1,i={clientX:0,clientY:0},l=null,u={clientX:0,clientY:0},f="",d=!1,E=!1,m={originalEvent:null},g=0,h=0,c="",v=0,D=!0,O=null,P=null,T=0;e.useLayoutEffect(()=>(A(),()=>{B(),s.destroy()}),[]);function A(){o.current&&(R(),xe.isIE&&o.current.classList.add("sf-block-touch"))}function R(){Ve.add(o.current,xe.touchStartEvent,b,void 0)}function B(){Ve.remove(o.current,xe.touchStartEvent,b)}function k(y){const S=getComputedStyle(y),I=S.overflow+S.overflowX+S.overflowY;return/(auto|scroll)/.test(I)}function b(y){if(D===!0){const S=H(y);y.changedTouches!==void 0&&(D=!1),n=!1,c="",i=u={clientX:S.clientX,clientY:S.clientY},l=S,d=E=!1,v=Date.now(),P=setTimeout(()=>{C(y)},t.tapHoldThreshold?t.tapHoldThreshold:750),Ve.add(o.current,xe.touchMoveEvent,N,void 0),Ve.add(o.current,xe.touchEndEvent,G,void 0),Ve.add(o.current,xe.touchCancelEvent,L,void 0)}}function N(y){const S=H(y);n=!(S.clientX===i.clientX&&S.clientY===i.clientY);let I={};if(n){clearTimeout(P),fe(y);const q={startEvents:l,originalEvent:y,startX:i.clientX,startY:i.clientY,distanceX:g,distanceY:h,scrollDirection:f,velocity:pe(S)};I=vt(I,{},q),s.trigger("scroll",I,t.scroll),u={clientX:S.clientX,clientY:S.clientY}}}function L(y){clearTimeout(P),clearTimeout(O),T=0,M(y),Ve.remove(o.current,xe.touchCancelEvent,L)}function C(y){T=0,D=!0,Ve.remove(o.current,xe.touchMoveEvent,N),Ve.remove(o.current,xe.touchEndEvent,G);const S={originalEvent:y};s.trigger("tapHold",S,t.tapHold),Ve.remove(o.current,xe.touchCancelEvent,L)}function G(y){M(y),n||typeof t.tap=="function"&&(s.trigger("tap",{originalEvent:y,tapCount:++T},t.tap),O=setTimeout(()=>{T=0},t.tapThreshold?t.tapThreshold:350)),X()}function M(y){clearTimeout(P),clearTimeout(O);const S=H(y);let I=S.clientX-i.clientX,q=S.clientY-i.clientY;I=Math.floor(I<0?-1*I:I),q=Math.floor(q<0?-1*q:q),n=I>1||q>1,/Firefox/.test(xe.userAgent)&&S.clientX===0&&S.clientY===0&&y.type==="mouseup"&&(n=!1),se(y);const U={originalEvent:y,startEvents:l,startX:i.clientX,startY:i.clientY,distanceX:g,distanceY:h,swipeDirection:c,velocity:pe(S)};if(n){const ne=t.swipeSettings?t.swipeSettings.swipeThresholdDistance:50,Q=vt(void 0,m,U);let J=!1;const Ne=k(o.current),ve=ti.test(c);ne&&(ne<g&&!ve||ne<h&&ve)&&(Ne?J=K(o.current,ve):J=!0),J&&s.trigger("swipe",Q,t.swipe)}X()}function X(){setTimeout(()=>{D=!0},typeof t.tap!="function"?0:20),Ve.remove(o.current,xe.touchMoveEvent,N),Ve.remove(o.current,xe.touchEndEvent,G),Ve.remove(o.current,xe.touchCancelEvent,L)}function se(y){const S=H(y);m={originalEvent:y},g=Math.abs(Math.abs(S.clientX)-Math.abs(i.clientX)),h=Math.abs(Math.abs(S.clientY)-Math.abs(i.clientY)),c=g>h?S.clientX>i.clientX?"Right":"Left":S.clientY<i.clientY?"Up":"Down"}function fe(y){const S=H(y);m={originalEvent:y},g=Math.abs(Math.abs(S.clientX)-Math.abs(u.clientX)),h=Math.abs(Math.abs(S.clientY)-Math.abs(u.clientY)),(g>h||d)&&!E?(f=S.clientX>u.clientX?"Right":"Left",d=!0):(f=S.clientY<u.clientY?"Up":"Down",E=!0)}function pe(y){const S=y.clientX,I=y.clientY,q=Date.now(),_=S-i.clientX,U=I-i.clientY,ne=q-v;return Math.sqrt(_*_+U*U)/ne}function K(y,S){const I=["scroll","offset"],q=S?["Height","Top"]:["Width","Left"];return y[I[0]+q[0]]<=y[I[1]+q[0]]?!0:y[I[0]+q[1]]===0||y[I[1]+q[0]]+y[I[0]+q[1]]>=y[I[0]+q[0]]}function H(y){return y.changedTouches&&y.changedTouches.length!==0?y.changedTouches[0]:y}return t}class ir{static addWorkDays(r,s,t,n){if(s<=0)return new Date(r);let i=new Date(r),l=0;for(;l<s;){const u=F.addDays(i,t);F.isWorkDay(u,n)&&(l+=1),i=u}return i}static navigate(r,s){const{currentDate:t,viewType:n,interval:i,showWeekend:l,workDays:u}=s;switch(n){case"Day":return l===!1?this.addWorkDays(t,i,r,u):F.addDays(t,r*i);case"Week":case"WorkWeek":return F.addDays(t,r*7*i);case"Month":return F.addMonths(t,r*i);default:return F.addDays(t,r)}}static navigateToPrevious(r){return this.navigate(-1,r)}static navigateToNext(r){return this.navigate(1,r)}static navigateToToday(){return new Date}}const ni=a.jsx("path",{d:"M11.5 10.0858L5.50003 4.08582L4.08582 5.50003L11.5 12.9142L18.9142 5.50003L17.5 4.08582L11.5 10.0858ZM11.5 17.0858L5.50003 11.0858L4.08582 12.5L11.5 19.9142L18.9142 12.5L17.5 11.0858L11.5 17.0858Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ps=mt(ni),ri=a.jsx("path",{d:"M5 7.08578L12 14.0858L19 7.08578L20.4142 8.5L12 16.9142L3.58578 8.5L5 7.08578Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Xn=mt(ri),si=a.jsx("path",{d:"M6.41418 12L12.4142 6L11 4.58578L3.58575 12L11 19.4142L12.4142 18L6.41418 12ZM13.4142 12L19.4142 6L18 4.58578L10.5858 12L18 19.4142L19.4142 18L13.4142 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Lr=mt(si),oi=a.jsx("path",{d:"M10.5858 12L4.58582 18L6.00003 19.4142L13.4142 12L6.00003 4.58575L4.58582 5.99997L10.5858 12ZM17.5858 12L11.5858 18L13 19.4142L20.4142 12L13 4.58575L11.5858 5.99997L17.5858 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ir=mt(oi),ii=a.jsx("path",{d:"M11.5 6.91418L17.5 12.9142L18.9142 11.5L11.5 4.08575L4.08575 11.5L5.49997 12.9142L11.5 6.91418ZM11.5 13.9142L17.5 19.9142L18.9142 18.5L11.5 11.0858L4.08575 18.5L5.49997 19.9142L11.5 13.9142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ms=mt(ii),li=a.jsx("path",{d:"M6.00003 16.4142L12 10.4142L18 16.4142L19.4142 15L12 7.58578L4.58582 15L6.00003 16.4142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Hs=mt(li),ci=a.jsx("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13 11.382V5H11V12.618L16.4472 15.3416L17.3416 13.5528L13 11.382Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),ai=mt(ci),ui=a.jsx("path",{d:"M6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM4.9681 6.38231C3.73647 7.92199 3 9.87499 3 12C3 16.9706 7.02944 21 12 21C14.125 21 16.078 20.2635 17.6177 19.0319L4.9681 6.38231ZM12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),di=mt(ui),fi=a.jsx("path",{d:"M17 9C17 9.59519 16.7516 10.6096 16.1971 11.9583C15.6652 13.2521 14.932 14.6644 14.1531 15.9825C13.4 17.257 12.6299 18.4 12 19.2216C11.3701 18.4 10.5999 17.257 9.84685 15.9825C9.06796 14.6644 8.33481 13.2521 7.80291 11.9583C7.24843 10.6096 7 9.59519 7 9C7 6.23858 9.23858 4 12 4C14.7614 4 17 6.23858 17 9ZM19 9C19 13 13 22 12 22C11 22 5 13 5 9C5 5.13401 8.13401 2 12 2C15.866 2 19 5.13401 19 9ZM12 11.5C13.3807 11.5 14.5 10.3807 14.5 9C14.5 7.61929 13.3807 6.5 12 6.5C10.6193 6.5 9.5 7.61929 9.5 9C9.5 10.3807 10.6193 11.5 12 11.5Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),mi=mt(fi),pi=a.jsx("path",{d:"M3 3C3 1.89543 3.89543 1 5 1H13.5858C14.1162 1 14.6249 1.21071 15 1.58579L20.4142 7C20.7893 7.37507 21 7.88378 21 8.41421V21C21 22.1046 20.1046 23 19 23H5C3.89543 23 3 22.1046 3 21V3ZM5 3L13 3V9H19V21H5V3ZM11 6H7V8H11V6ZM7 11H11V13H7V11ZM17 13V11H13V13H17ZM7 16H11V18H7V16ZM17 18V16H13V18H17Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),hi=mt(pi),Ei=a.jsx("path",{d:"M20 13V17.6862L18 15.1528V13V12H20V13ZM17.0417 20L18.7151 22.1196L20.2849 20.8803L5.28485 1.88034L3.71509 3.11963L4.75394 4.43551C4.29445 4.80196 4 5.36659 4 6V11V12H6V11V6.01385L15.4627 18H6V15L1 19L6 23V20H17.0417ZM18 6H10.7741L9.19513 4H18V1L23 5L18 9V6Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),gi=mt(Ei),Ti=a.jsx("path",{d:"M18 9L23 5L18 1V4H6C4.89543 4 4 4.89543 4 6V12H6V6H18V9ZM18 18H6V15L1 19L6 23V20H18C19.1046 20 20 19.1046 20 18V12H18V18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ci=mt(Ti),Di=a.jsx("path",{d:"M8 1V3H16V1H18V3H20C21.1046 3 22 3.89543 22 5V8V9V10V11.7546C21.3984 11.2724 20.7257 10.8753 20 10.5815V10H4V21H9.58152C9.87526 21.7257 10.2724 22.3984 10.7546 23H4C2.89543 23 2 22.1046 2 21V10V9V8V5C2 3.89543 2.89543 3 4 3H6V1H8ZM4 8H20V5H18H16H8H6H4V8ZM13 18C13 15.7909 14.7909 14 17 14C19.2091 14 21 15.7909 21 18C21 20.2091 19.2091 22 17 22C14.7909 22 13 20.2091 13 18ZM17 12C13.6863 12 11 14.6863 11 18C11 21.3137 13.6863 24 17 24C20.3137 24 23 21.3137 23 18C23 14.6863 20.3137 12 17 12ZM18 15V17H20V19H16V15H18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),cs=mt(Di);var as;(function(o){o.Success="Success",o.Warning="Warning",o.Error="Error"})(as||(as={}));const hr=e.forwardRef((o,r)=>{const{disabled:s=!1,onChange:t,onBlur:n,onFocus:i,clearButton:l=!1,labelMode:u="Never",className:f="",id:d,readOnly:E=!1,value:m,defaultValue:g,width:h,placeholder:c="",variant:v,size:D=Ut.Medium,color:O,prefix:P,suffix:T,...A}=o,B=e.useRef(d||`default_${e.useId()}`).current,k=m!==void 0,[b,N]=e.useState(k?m:g||""),[L,C]=e.useState(!1),G=e.useRef(null),{locale:M,dir:X}=$e(),se={clearButton:l,labelMode:u,disabled:s,readOnly:E,variant:v,size:D,color:O,value:m},fe=()=>pe(ct.INPUTGROUP,ct.WRAPPER,u!=="Never"?ct.FLOATINPUT:"",f,X==="rtl"?ct.RTL:"",s?ct.DISABLE:"",L?ct.TEXTBOX_FOCUS:"",b!==""?ct.VALIDINPUT:"",v&&v.toLowerCase()!=="standard"?v.toLowerCase()==="outlined"?"sf-outline":`sf-${v.toLowerCase()}`:"",D&&D.toLowerCase()!=="small"?`sf-${D.toLowerCase()}`:"",O?`sf-${O.toLowerCase()}`:"",P?"sf-has-prefix":"","sf-control"),pe=(...U)=>U.filter(Boolean).join(" "),K=fe();e.useEffect(()=>{Ot("textbox")},[]),e.useEffect(()=>{k&&N(m||"")},[m,k]),e.useImperativeHandle(r,()=>({...se,element:G.current}));const H=e.useCallback((U,ne)=>{k||N(U),t&&t({event:ne,value:U})},[t,k]),y=e.useCallback(U=>{const ne=U.target.value;H(ne,U)},[H]),S=e.useCallback(U=>{C(!0),i&&i(U)},[i]),I=e.useCallback(()=>{k||(N(""),G.current&&(G.current.value="")),t&&t({value:"",event:void 0})},[k,t]),q=e.useCallback(U=>{C(!1),n&&n(U)},[n]),_=k?m:b;return a.jsxs("div",{className:K,style:{width:h||"100%"},children:[P&&a.jsx("span",{className:"sf-input-icon sf-no-hover",children:P}),a.jsx(Ns,{id:B,floatLabelType:u,ref:G,...A,readOnly:E,value:k?_:void 0,defaultValue:k?void 0:b||"",disabled:s,placeholder:u==="Never"?c:void 0,className:"sf-textbox sf-lib sf-ellipsis",onChange:y,"aria-label":u==="Never"?"textbox":void 0,onFocus:S,onBlur:q}),Nr(u||"Never",L||_!=="",_,c,B),l&&Ss(L?_:"",I,l,"textbox",M),T&&a.jsx("span",{className:"sf-input-icon sf-no-hover",children:T})]})}),vi="sf-multi-line-input",yi="sf-auto-width";var It;(function(o){o.None="None",o.Both="Both",o.Horizontal="Horizontal",o.Vertical="Vertical"})(It||(It={}));const Ri={[It.None]:"sf-resize-none",[It.Both]:"sf-resize-xy",[It.Horizontal]:"sf-resize-x",[It.Vertical]:"sf-resize-y"},bi=e.forwardRef((o,r)=>{const{readOnly:s=!1,value:t,defaultValue:n,labelMode:i="Never",placeholder:l="",disabled:u=!1,width:f,resizeMode:d=It.Both,maxLength:E,cols:m=null,rows:g=null,clearButton:h=!1,autoResize:c=!1,className:v="",size:D=Ut.Medium,variant:O,onChange:P,onBlur:T,onFocus:A,...R}=o,B=t!==void 0,[k,b]=e.useState(n||""),N=B?t:k,L=`textArea_${e.useId()}`,[C,G]=e.useState(!1),M=e.useMemo(()=>R.id||L,[R.id]),X=e.useRef(null),se=e.useRef(null),fe=e.useRef(null),pe=e.useRef(null),{locale:K,dir:H}=$e(),y={clearButton:h,labelMode:i,disabled:u,readOnly:s,resizeMode:d};e.useEffect(()=>{Ot("textarea")},[]),e.useEffect(()=>{B&&b(t||"")},[B,t]);const S=()=>I(ct.INPUTGROUP,ct.WRAPPER,i!=="Never"?ct.FLOATINPUT:"",vi,v,H==="rtl"?ct.RTL:"",u?ct.DISABLE:"",C?ct.TEXTBOX_FOCUS:"",N!==""?ct.VALIDINPUT:"",O&&O.toLowerCase()!=="standard"?O.toLowerCase()==="outlined"?"sf-outline":`sf-${O.toLowerCase()}`:"",yi,D&&D.toLowerCase()!=="small"?`sf-${D.toLowerCase()}`:"","sf-control"),I=(...w)=>w.filter(Boolean).join(" "),q=S();e.useImperativeHandle(r,()=>({...y,element:X.current}));const _=e.useCallback(w=>{w&&(w.style.height="auto",w.style.height=`${w.scrollHeight}px`)},[]),U=e.useCallback(()=>{!c||!X.current||(se.current!==null&&(cancelAnimationFrame(se.current),se.current=null),se.current=requestAnimationFrame(()=>{_(X.current)}))},[c,_]),ne=w=>{const Z=Array.isArray(w.contentBoxSize)?w.contentBoxSize[0]:w.contentBoxSize;if(Z&&typeof Z.inlineSize=="number")return Z.inlineSize;const ie=w.contentRect.width;return typeof ie=="number"?ie:null};e.useEffect(()=>()=>{se.current!==null&&(cancelAnimationFrame(se.current),se.current=null)},[]),e.useEffect(()=>{if(!c||!X.current)return;let w=!1;const Z=()=>{w||(w=!0,requestAnimationFrame(()=>{w=!1,X.current&&U()}))};if("ResizeObserver"in window){const Se=oe=>{const ce=oe[0];if(!ce)return;const x=ne(ce);x!==null&&pe.current===x||(pe.current=x,Z())},ee=new ResizeObserver(Se);return ee.observe(X.current),fe.current=ee,()=>{ee.disconnect(),fe.current=null,pe.current=null}}const ie=X.current.ownerDocument?X.current.ownerDocument.defaultView:null;if(!ie)return;const re=()=>{Z()};return ie.addEventListener("resize",re),()=>{ie.removeEventListener("resize",re)}},[c,U]),e.useLayoutEffect(()=>{!c||!X.current||U()},[c,N,f,g,m]);const Q=e.useCallback(w=>{const Z=w.target.value;B||b(Z),P&&P({event:w,value:Z}),c&&U()},[B,P,k,t,c,U]),J=e.useCallback(w=>{G(!0),A&&A(w)},[A]),Ne=e.useCallback(w=>{G(!1),T&&T(w)},[T]),ve=e.useCallback(()=>{B||(b(""),X.current&&(X.current.value="")),P&&P({value:"",event:void 0}),c&&U()},[P,B,U]),ue=w=>Ri[`${w}`];return a.jsxs("div",{className:q,children:[a.jsx("textarea",{ref:X,id:M,value:B?t:void 0,defaultValue:B?void 0:n,onChange:Q,onFocus:J,onBlur:Ne,readOnly:s,placeholder:i==="Never"?l:void 0,disabled:u,maxLength:E,cols:m??void 0,rows:g??void 0,...R,style:{width:f?typeof f=="number"?`${f}px`:f:void 0,resize:d==="None"||c?"none":void 0,overflowY:c?"hidden":void 0},className:`sf-textarea sf-lib sf-input ${ue(d)}`,"aria-labelledby":`label_${M}`}),Nr(i,C||N!=="",N,l,M),h&&Ss(N&&C?N.toString():"",ve,h,"textarea",K)]})}),Gt={EMAIL:/^(?!.*\.\.)[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,URL:/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/,DATE_ISO:/^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,DIGITS:/^[0-9]*$/,PHONE:/^[+]?[0-9]{9,13}$/,CREDIT_CARD:/^\d{13,16}$/},js=e.createContext(null),wi=js.Provider,Er=e.forwardRef((o,r)=>{const{rules:s,onSubmit:t,onReset:n,children:i,onFormStateChange:l,initialValues:u={},validateOnChange:f=!1,className:d="",...E}=o,m=e.useRef(null),{locale:g,dir:h}=$e(),c=e.useRef({values:{...u},errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),v=e.useCallback(()=>{l&&(L.current=ne(),l(L.current))},[l]),D=e.useCallback((w,Z)=>{c.current={...c.current,values:{...c.current.values,[w]:Z},modified:{...c.current.modified,[w]:!0}}},[]),O=e.useCallback(w=>{c.current={...c.current,touched:{...c.current.touched,[w]:!0}}},[]),P=e.useCallback(w=>{c.current={...c.current,visited:{...c.current.visited,[w]:!0}}},[]),T=e.useCallback((w,Z)=>{const ie={...c.current.errors};Z?ie[w]=Z:delete ie[w],c.current={...c.current,errors:ie}},[]),A=e.useCallback(w=>{c.current={...c.current,submitted:w}},[]),R=e.useCallback(w=>{c.current={values:w,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}},v()},[v]),B=e.useCallback(()=>{const w={};Object.keys(c.current.values).forEach(Z=>{w[Z]=!0}),c.current={...c.current,touched:w}},[]),k=e.useCallback(()=>{const w={};Object.keys(c.current.values).forEach(Z=>{w[Z]=!0}),c.current={...c.current,visited:w}},[]),b=e.useCallback(w=>{const Z={...c.current.errors};Object.entries(w).forEach(([ie,re])=>{re?Z[ie]=re:delete Z[ie]}),c.current={...c.current,errors:Z},v()},[v]),N=e.useRef(s),L=e.useRef(null),C=e.useRef(null),G={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date (ISO).",creditCard:"Please enter valid card number.",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",equalTo:"Please enter the same value again."},M=e.useRef({}),X=w=>{M.current[w]=!0};e.useEffect(()=>(C.current=xs("formValidator",G,g),()=>{C.current=null}),[g]),e.useEffect(()=>(v(),se(),Ot("formValidator"),()=>{C.current=null,N.current={},M.current={},m.current&&(m.current=null),L.current=null}),[]),e.useEffect(()=>{N.current=s},[s]);const se=()=>{if(Object.keys(u).length>0){const w={};for(const Z in u)if(Object.prototype.hasOwnProperty.call(u,Z)&&Object.prototype.hasOwnProperty.call(N.current,Z)){const ie=K(Z,u[Z]);ie?w[Z]=ie:w[Z]=null}Object.keys(w).length>0&&b(w)}},fe=(w,Z)=>{var re;let ie=(re=C.current)==null?void 0:re.getConstant(w);return Array.isArray(Z)?Z.forEach((Se,ee)=>{const oe=`{${ee}}`;ie.includes(oe)&&(ie=ie.replace(oe,String(Se)))}):ie=ie.replace("{0}",String(Z)),ie},pe=w=>{if(!Gt.CREDIT_CARD.test(w))return!1;const Z=w.replace(/[\s-]/g,"");let ie=0,re=!1;for(let Se=Z.length-1;Se>=0;Se--){let ee=parseInt(Z.charAt(Se),10);re&&(ee*=2,ee>9&&(ee-=9)),ie+=ee,re=!re}return ie%10===0},K=(w,Z)=>{const ie=N.current[w];if(!ie||!M.current[w])return null;const re=Z==null||Z.toString().trim()==="",Se=ie.required!=null&&ie.required[0]!==!1;if(re&&!Se)return null;for(const ee in ie)if(Object.prototype.hasOwnProperty.call(ie,ee)){const oe=ie[ee];if(!oe)continue;let ce=!0,x=null,V;if(ee==="customValidator"&&typeof oe=="function"){const z=oe(Z);if(z)return z;continue}if(Array.isArray(oe)&&(x=oe[0],V=oe[1],ee==="required"&&x===!1)||ee!=="required"&&(Z===""||Z===null||Z===void 0))continue;switch(ee){case"required":ce=!re;break;case"email":ce=Gt.EMAIL.test(Z);break;case"url":ce=Gt.URL.test(Z);break;case"date":ce=!isNaN(Date.parse(Z));break;case"dateIso":ce=Gt.DATE_ISO.test(Z);break;case"number":ce=!isNaN(Number(Z))&&String(Z).indexOf(" ")===-1;break;case"digits":ce=Gt.DIGITS.test(Z);break;case"creditCard":ce=pe(Z);break;case"minLength":ce=String(Z).length>=Number(x);break;case"maxLength":ce=String(Z).length<=Number(x);break;case"rangeLength":Array.isArray(x)&&(ce=String(Z).length>=x[0]&&String(Z).length<=x[1]);break;case"min":ce=Number(Z)>=Number(x);break;case"max":ce=Number(Z)<=Number(x);break;case"range":Array.isArray(x)&&(ce=Number(Z)>=x[0]&&Number(Z)<=x[1]);break;case"regex":x instanceof RegExp?ce=x.test(Z):typeof x=="string"&&(ce=new RegExp(x).test(Z));break;case"tel":ce=Gt.PHONE.test(Z);break;case"equalTo":typeof x=="string"&&(ce=Z===c.current.values[x]);break}if(!ce)return V||fe(ee,x)}return null},H=()=>{const w={},Z=Object.keys(N.current);for(const ie of Z){const re=K(ie,c.current.values[ie]);c.current.values[ie]||D(ie,c.current.values[ie]),re&&(w[ie]=re)}return w},y=()=>{const w=H();for(const ie in w)Object.prototype.hasOwnProperty.call(w,ie)&&T(ie,w[ie]);const Z=Object.keys(N.current);for(const ie of Z)w[ie]||T(ie,null);return Object.keys(w).length===0&&(c.current={...c.current,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),v(),Object.keys(w).length===0},S=w=>{w==null||w.preventDefault();const Z=y();B(),k(),A(!0),v(),Z&&(t==null||t(c.current.values))},I=(w,{value:Z})=>{if(D(w,Z),f){const ie=K(w,Z);T(w,ie)}v()},q=w=>{O(w);const Z=K(w,c.current.values[w]);T(w,Z),v()},_=w=>{R({...u}),n==null||n(w)},U=()=>{_()},ne=()=>{const w=c.current;return{values:w.values,errors:w.errors,submitted:w.submitted,touched:w.touched,visited:w.visited,modified:w.modified,valid:Object.keys(N.current).reduce((Z,ie)=>(Z[ie]=!w.errors[ie],Z),{}),allowSubmit:Object.keys(w.errors).length===0,onChange:I,onBlur:q,onFocus:ve,onFormReset:_,onSubmit:S,fieldNames:Object.keys(M.current).reduce((Z,ie)=>(Z[ie]=ie,Z),{})}},Q=w=>{const Z=K(w,c.current.values[w]);return T(w,Z),v(),!Z},J=e.useMemo(()=>({rules:s,initialValues:u,validateOnChange:f}),[s,u,f]);e.useImperativeHandle(r,()=>({...J,validate:y,reset:U,validateField:Q,element:m.current}),[J]);const Ne=e.useMemo(()=>["sf-control sf-form-validator",h==="rtl"?"sf-rtl":"",d].filter(Boolean).join(" "),[h,d]),ve=w=>{P(w),v()},ue={registerField:X};return a.jsx(wi,{value:ue,children:a.jsx("form",{ref:m,className:Ne,onSubmit:S,onReset:_,noValidate:!0,...E,children:i})})});Er.displayName="Form";const wt=o=>{const{name:r,children:s}=o;if(!r)return null;const t=e.useContext(js);return t?(t.registerField&&t.registerField(r),a.jsx(a.Fragment,{children:s})):null};wt.displayName="FormField";const Ni=1500,Si=500,us=0,ds=8,xi=2,bt=2,Ai="sf-control sf-tooltip",Oi="sf-bigger",Li="sf-tooltip-close",lr="sf-tooltip-wrap",Ii="sf-tooltip-content sf-content",fs="sf-tooltip-arrow",ki="sf-tooltip-arrow-outer",_i="sf-tooltip-arrow-inner",_n="bottom",cr="top",ar="left",Pn="right",ms="sf-popup",ps="sf-lib",Pi="M10.5858 12.0001L2.58575 4.00003L3.99997 2.58582L12 10.5858L20 2.58582L21.4142 4.00003L13.4142 12.0001L21.4142 20L20 21.4142L12 13.4143L4.00003 21.4142L2.58581 20L10.5858 12.0001Z",Mi="M20.7929 7H3.20712C2.76167 7 2.53858 7.53857 2.85356 7.85355L11.6465 16.6464C11.8417 16.8417 12.1583 16.8417 12.3536 16.6464L21.1465 7.85355C21.4614 7.53857 21.2384 7 20.7929 7Z",Hi="M20.7929 17H3.20712C2.76167 17 2.53858 16.4615 2.85356 16.1465L11.6465 7.3536C11.8417 7.15834 12.1583 7.15834 12.3536 7.3536L21.1465 16.1465C21.4614 16.4615 21.2384 17 20.7929 17Z",ji="M7 20.7928L7 3.20706C7 2.76161 7.53857 2.53852 7.85355 2.8535L16.6464 11.6464C16.8417 11.8417 16.8417 12.1582 16.6464 12.3535L7.85355 21.1464C7.53857 21.4614 7 21.2383 7 20.7928Z",$i="M17 3.20718L17 20.793C17 21.2384 16.4614 21.4615 16.1464 21.1465L7.35354 12.3536C7.15828 12.1584 7.15828 11.8418 7.35354 11.6465L16.1464 2.85363C16.4614 2.53864 17 2.76173 17 3.20718Z",$s=e.forwardRef((o,r)=>{const{width:s="auto",height:t="auto",position:n="TopCenter",offsetX:i=0,offsetY:l=0,arrow:u=!0,windowCollision:f=!1,arrowPosition:d="Auto",opensOn:E="Auto",followCursor:m=!1,sticky:g=!1,animation:h={open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:c=0,closeDelay:v=0,children:D,target:O,content:P,container:T,className:A,open:R,onClose:B,onOpen:k,title:b,style:N,onFilterTarget:L,...C}=o,[G,M]=e.useState(!0),[X,se]=e.useState(!1),[fe,pe]=e.useState(void 0),[K,H]=e.useState(null),[y,S]=e.useState(!1),[I,q]=e.useState(_n),[_,U]=e.useState({top:0,left:0}),[ne,Q]=e.useState({}),[J,Ne]=e.useState({top:"",left:""}),[ve,ue]=e.useState({style:N}),w=e.useRef(null),Z=e.useRef({show:null,hide:null,autoClose:null}),ie=e.useRef({x:"Center",y:"Top"}),re=e.useRef(null),Se=e.useRef({event:null,target:null}),ee=e.useRef(!0),oe=e.useRef(null),ce=e.useRef(null),x=e.useRef(null),V=e.useRef(null),z=e.useRef({event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null}),te=e.useRef(typeof document<"u"?document.body:null),he=e.useRef(R),Ee=e.useRef(!1);xe.isDevice&&(re.current=Xt(ce));const be={width:"auto",height:"auto",position:"TopCenter",offsetX:0,offsetY:0,arrow:!0,windowCollision:!1,arrowPosition:"Auto",opensOn:"Auto",followCursor:!1,sticky:!1,animation:{open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:0,closeDelay:0,target:O,content:P,container:T,open:R};e.useEffect(()=>{de(),Ce(n),w.current&&w.current.element&&oe.current&&Ae(oe.current)},[n]),e.useEffect(()=>{w.current&&w.current.element&&oe.current&&Ae(oe.current)},[d]),e.useEffect(()=>{var j,le;w.current&&w.current.element&&oe.current&&(er(oe.current),Dn(oe.current,(j=z.current)==null?void 0:j.event,(le=z.current)==null?void 0:le.showAnimation))},[G,oe.current]),e.useEffect(()=>(Mt(),Sn(E),()=>{Fe(E)}),[E,O]),e.useEffect(()=>{if(!(typeof document>"u"))return document.addEventListener("wheel",Wt),document.addEventListener("scroll",Wt),document.addEventListener("touchend",Vt),document.addEventListener("keydown",Nn),window.addEventListener("resize",ge),()=>{typeof document>"u"||(document.removeEventListener("wheel",Wt),document.removeEventListener("scroll",Wt),document.removeEventListener("touchend",Vt),document.removeEventListener("keydown",Nn),window.removeEventListener("resize",ge))}},[be]),e.useEffect(()=>{var j,le,ye,Te,we,_e;!R&&he.current===R||(he.current=R,R?(j=z.current)!=null&&j.showTarget?(Pt((le=z.current)==null?void 0:le.showTarget,z.current.event,z.current.showAnimation),z.current={...z.current,showTarget:null}):Et(O!=null&&O.current?O==null?void 0:O.current:ce.current,h.open):(ye=z.current)!=null&&ye.hideAnimation?(xt(),qt((Te=z.current)==null?void 0:Te.hideAnimation,(we=z.current)==null?void 0:we.hideTarget,(_e=z.current)==null?void 0:_e.hideEvent),z.current={...z.current,hideEvent:null,hideAnimation:null,hideTarget:null}):Ct(h.close))},[R]),e.useLayoutEffect(()=>(Ot("tooltip"),ke(),()=>{clearTimeout(Z.current.show),clearTimeout(Z.current.hide),clearTimeout(Z.current.autoClose),Z.current={show:null,hide:null,autoClose:null},w.current=null,re.current=null,z.current={event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null},Se.current={event:null,target:null},m&&oe.current&&(oe.current.removeEventListener("mousemove",it),oe.current.removeEventListener("touchstart",it),oe.current.removeEventListener("mouseenter",it)),oe.current=null,ce.current=null,V.current=null,te.current=null,x.current=null}),[]),e.useImperativeHandle(r,()=>({...be,animation:h,openTooltip:(j,le)=>{if(Be(le)&&(le=h==null?void 0:h.open),Be(j)&&(j=ce.current),j){if(j.style.display==="none")return;Et(j,le)}},closeTooltip:j=>{j||(j=h==null?void 0:h.close),Ct(j)},refresh:()=>{var j;w.current&&w.current.element&&Ae(oe.current?oe.current:ce.current),!Be(o.target)&&!Be((j=o.target)==null?void 0:j.current)&&(Fe(E),Sn(E))},element:ce.current}));const ke=e.useCallback(()=>{de()},[be]),de=()=>{if(!n)return;let j=null,le=null;n.indexOf("Top")===0||n.indexOf("Bottom")===0?[le,j]=n.split(/(?=[A-Z])/):[j,le]=n.split(/(?=[A-Z])/),ie.current.x=j,ie.current.y=le},Ce=e.useCallback(j=>{let le;if(!Be(j))return j.indexOf("Right")===0?le=ar:j.indexOf("Bottom")===0?le=cr:j.indexOf("Left")===0?le=Pn:le=_n,q(le),le},[]),$=j=>{var ye,Te;if(m&&((ye=z.current)!=null&&ye.event)){it((Te=z.current)==null?void 0:Te.event);return}const le=ae(j);U(le)},W=j=>{var Te,we;if(!j)return{x:1,y:1};const le={x:1,y:1},ye=j.closest('[style*="transform: scale"]');if(ye&&ye!==((Te=w.current)==null?void 0:Te.element)&&ye.contains((we=w.current)==null?void 0:we.element)){const je=window.getComputedStyle(ye).getPropertyValue("transform");if(je!=="none"){const Ue=je.match(/scale\(([\d., ]+)\)/);if(Ue){const Ie=Ue[1].split(",").map(parseFloat);le.x=Ie[0],le.y=Ie.length>1?Ie[1]:Ie[0]}else{const Ie=je.match(/matrix\(([^)]+)\)/);if(Ie){const Ke=Ie[1].split(",").map(parseFloat);le.x=Ke[0],le.y=Ke[3]}}}}return le},ae=j=>{var Ke,Qe,rt,lt,Dt;w.current&&w.current.element&&(w.current.element.style.visibility="hidden",w.current.element.style.display="block");const le=(Ke=ce.current)==null?void 0:Ke.closest('[style*="zoom"]');le&&w.current&&w.current.element&&!le.contains((Qe=w.current)==null?void 0:Qe.element)&&(w.current.element.style.zoom=getComputedStyle(le).zoom);const ye=Gr(j,(rt=ie.current.x)==null?void 0:rt.toLowerCase(),(lt=ie.current.y)==null?void 0:lt.toLowerCase(),ee.current||(Dt=te.current)==null?void 0:Dt.getBoundingClientRect()),Te=W(j),we=Y(n,Te.x,Te.y),_e=rn(ye,we),je=_e[0],Ue=_e[1],Ie=vn(j,je,Ue);return Ie.left=Ie.left/Te.x,Ie.top=Ie.top/Te.y,!ee.current&&te.current&&(Ie.left-=window.scrollX*2,Ie.top-=window.scrollY*2),w.current&&w.current.element&&(w.current.element.style.display="",m&&(w.current.element.style.visibility="visible")),Ie},ge=()=>{Ae(oe.current)},Ae=j=>{if(w.current&&w.current.element&&j){const le=ae(j);U(le),w.current.element.style.visibility="visible"}},Re=()=>{m||Ae(oe.current)},Le=()=>{var le;$t();const j=e.createRef();j.current=(le=w.current)==null?void 0:le.element,Zt.stop(j.current),Ee.current=!1,M(!0)},Y=(j,le,ye)=>{var rt,lt,Dt,dt,Je,Rt,an,Fr,Br,Ur;const Te={top:0,left:0};let we,_e,je,Ue,Ie,Ke,Qe;if(le!==1||ye!==1){const zr=(lt=(rt=w.current)==null?void 0:rt.element)==null?void 0:lt.getBoundingClientRect();let un;je=Math.round(zr.width),Ue=Math.round(zr.height),x.current&&(un=x.current.getBoundingClientRect()),we=un?Math.round(un.width):0,_e=un?Math.round(un.height):0,Ie=u?us:ds,Ke=_e/2+bt+(Ue-((Dt=w.current)==null?void 0:Dt.element).clientHeight*ye),Qe=we/2+bt+(je-((dt=w.current)==null?void 0:dt.element).clientWidth*le)}else je=((Je=w.current)==null?void 0:Je.element).offsetWidth,Ue=((Rt=w.current)==null?void 0:Rt.element).offsetHeight,we=x.current?x.current.offsetWidth:0,_e=x.current?x.current.offsetHeight:0,Ie=u?us:ds,Ke=_e/2+bt+(((an=w.current)==null?void 0:an.element).offsetHeight-((Fr=w.current)==null?void 0:Fr.element).clientHeight),Qe=we/2+bt+(((Br=w.current)==null?void 0:Br.element).offsetWidth-((Ur=w.current)==null?void 0:Ur.element).clientWidth);switch(m&&(Ie+=xi),j){case"RightTop":Te.left+=we+Ie,Te.top-=Ue-Ke;break;case"RightCenter":Te.left+=we+Ie,Te.top-=Ue/2;break;case"RightBottom":Te.left+=we+Ie,Te.top-=Ke;break;case"BottomRight":Te.top+=_e+Ie,Te.left-=Qe;break;case"BottomCenter":Te.top+=_e+Ie,Te.left-=je/2;break;case"BottomLeft":Te.top+=_e+Ie,Te.left-=je-Qe;break;case"LeftBottom":Te.left-=we+je+Ie,Te.top-=Ke;break;case"LeftCenter":Te.left-=we+je+Ie,Te.top-=Ue/2;break;case"LeftTop":Te.left-=we+je+Ie,Te.top-=Ue-Ke;break;case"TopLeft":Te.top-=Ue+_e+Ie,Te.left-=je-Qe;break;case"TopRight":Te.top-=Ue+_e+Ie,Te.left-=Qe;break;default:Te.top-=Ue+_e+Ie,Te.left-=je/2;break}return Te.left+=i,Te.top+=l,Te},De=(j,le,ye,Te)=>{var rt,lt,Dt,dt;if(u===!1||x.current===null)return;const we=Ce(le);let _e,je;const Ue=((rt=w.current)==null?void 0:rt.element).clientWidth,Ie=((lt=w.current)==null?void 0:lt.element).clientHeight,Ke=x.current.offsetWidth,Qe=x.current.offsetHeight;if(we===_n||we===cr){if(we===_n?(je="99.9%",Ne(Je=>({...Je,top:`-${Qe-2}px`}))):(je=-(Qe-1)+"px",Ne(Je=>({...Je,top:`-${Qe-6}px`}))),j){const Je=ye!=="Center"||Ue>j.offsetWidth||m;Je&&ye==="Left"||!Je&&d==="End"?_e=Ue-Ke-bt+"px":Je&&ye==="Right"||!Je&&d==="Start"?_e=bt+"px":Je&&(d==="End"||d==="Start")?_e=d==="End"?j.offsetWidth+(((Dt=w.current)==null?void 0:Dt.element).offsetWidth-j.offsetWidth)/2-Ke/2-bt+"px":(((dt=w.current)==null?void 0:dt.element).offsetWidth-j.offsetWidth)/2-Ke/2+bt+"px":_e=Ue/2-Ke/2+"px"}}else{we===Pn?(_e="99.9%",Ne(Rt=>({...Rt,left:`-${Ke-2}px`}))):(_e=-(Ke-1)+"px",Ne(Rt=>({...Rt,left:`${-Ke+(Ke-2)}px`})));const Je=Te!=="Center"||Ie>j.offsetHeight||m;Je&&Te==="Top"||!Je&&d==="End"?je=Ie-Qe-bt+"px":Je&&Te==="Bottom"||!Je&&d==="Start"?je=bt+"px":je=Ie/2-Qe/2+"px"}x.current.style.top=je,x.current.style.left=_e},me=()=>{var le;if(oe.current&&!Be(oe.current.getAttribute("title"))&&(oe.current.setAttribute("data-content",oe.current.getAttribute("title")),oe.current.removeAttribute("title")),e.isValidElement(P))return P;let j="";return typeof P=="function"?j=P():(le=oe==null?void 0:oe.current)!=null&&le.getAttribute("data-content")&&(j=oe.current.getAttribute("data-content")),j},Oe=(j,le)=>{const ye=(j.getAttribute("aria-describedby")||"").split(/\s+/);ye.indexOf(le)<0&&ye.push(le),Ao(j,{"aria-describedby":ye.join(" ").trim(),"data-tooltip-id":le})},Pe=j=>{const le=j.getAttribute("data-tooltip-id"),ye=(j.getAttribute("aria-describedby")||"").split(/\s+/),Te=ye.indexOf(le);Te!==-1&&ye.splice(Te,1),j.removeAttribute("data-tooltip-id");const we=ye.join(" ").trim();we?j.setAttribute("aria-describedby",we):j.removeAttribute("aria-describedby")},Ye=e.useCallback(j=>{j&&(clearTimeout(Z.current.autoClose),ot(j.originalEvent))},[]),He=()=>{if(g)return;const j=()=>{yt()};Z.current.autoClose=setTimeout(j,Ni)},ht=j=>{var Te;let le;if((Te=o.target)!=null&&Te.current?le=o.target.current.contains(j.target)?o.target.current:void 0:le=L?j.target:ce.current,Be(le))return;const ye=j;!w.current||w.current&&le!==oe.current?ye.type==="mousedown"&&ye.button===2||ot(j):g||Ct(h.close,j,le)},ot=j=>{var ye,Te,we,_e;let le;if(L){if(!(L==null?void 0:L(j.target)))return;le=j.target}else(ye=o.target)!=null&&ye.current?le=o.target.current.contains(j.target)?o.target.current:void 0:le=ce.current;if(!(Be(le)||w.current&&le===oe.current&&!m)){if(w.current&&((Te=w.current.element)!=null&&Te.getAttribute("sf-animation-id"))){const je=v+((we=h==null?void 0:h.close)!=null&&we.delay?h.close.delay:0)+((_e=h==null?void 0:h.close)!=null&&_e.duration?h.close.duration:0);setTimeout(()=>{jt(le),Et(le,h.open,j)},je);return}jt(le),Et(le,h.open,j)}},St=j=>{Se.current.event=j},xt=()=>{Se.current.target&&(Se.current.target.removeEventListener("mousemove",St),Se.current.target.removeEventListener("touchstart",St))},Et=(j,le,ye)=>{clearTimeout(Z.current.show),clearTimeout(Z.current.hide),c&&m&&(xt(),Se.current.target=j,Se.current.target.addEventListener("mousemove",St),Se.current.target.addEventListener("touchstart",St)),z.current={...z.current,event:ye,showAnimation:le,showTarget:j},k==null||k(ye),(Be(R)||R)&&Pt(j,ye,le)},Pt=(j,le,ye)=>{var Te,we,_e;if(oe.current=j,M(!1),Be(w.current)){const je=(Te=ce.current)!=null&&Te.getAttribute("id")?Bn((we=ce.current)==null?void 0:we.getAttribute("id")):Bn("tooltip");ue(Ue=>({...Ue,id:je+"_content"}))}else if(j){De(j,n,ie.current.x,ie.current.y),Oe(j,ve==null?void 0:ve.id);const je=e.createRef();je.current=(_e=w.current)==null?void 0:_e.element,Zt.stop(je.current),Ae(j),Dn(j,le,ye)}},Mt=()=>{(T==null?void 0:T.current)instanceof HTMLElement&&(ee.current=!1,te.current=T.current),te.current||(te.current=typeof document<"u"?document.body:null)},er=j=>{var le;if(j){Mt(),Oe(j,ve==null?void 0:ve.id),u&&Ce(n),$(j),De(j,n,ie.current.x,ie.current.y);const ye=e.createRef();ye.current=(le=w.current)==null?void 0:le.element,Zt.stop(ye.current),Ae(j)}},Dn=(j,le,ye)=>{j&&tr(j,ye,le)},tr=(j,le,ye)=>{const Te={name:le.effect==="None"&&qr==="Enable"?"FadeIn":h.open.effect,duration:le.duration,delay:le.delay,timingFunction:"ease-out"};if(c>0){const we=()=>{var _e;m&&(j.addEventListener("mousemove",it),j.addEventListener("touchstart",it),j.addEventListener("mouseenter",it)),(_e=w.current)!=null&&_e.element&&(H(j),pe(je=>({show:Te,hide:je==null?void 0:je.hide})),se(!0),Se.current.event&&m&&it(Se.current.event))};Z.current.show=setTimeout(we,c)}else w.current&&(H(j),pe(we=>({show:Te,hide:we==null?void 0:we.hide})),se(!0));ye&&xn(ye,j)},nn=(j,le)=>{var _e;const ye={left:j,top:le,position:n,horizontal:ie.current.x,vertical:ie.current.y},Te=yn(),we=Oo((_e=w.current)==null?void 0:_e.element,Te?Te.current:null,g&&n.indexOf("Right")>=0?V.current.offsetWidth+j:j,le);return we.length>0&&(ye.horizontal=we.indexOf("left")>=0?"Right":we.indexOf("right")>=0?"Left":ie.current.x,ye.vertical=we.indexOf("top")>=0?"Bottom":we.indexOf("bottom")>=0?"Top":ie.current.y),ye},rn=(j,le)=>[ee.current?j.left+le.left:j.left-te.current.getBoundingClientRect().left+le.left+window.pageXOffset+te.current.scrollLeft,ee.current?j.top+le.top:j.top-te.current.getBoundingClientRect().top+le.top+window.pageYOffset+te.current.scrollTop],vn=(j,le,ye)=>{var Qe,rt,lt,Dt;const Te=nn(le,ye);let we=Te.position;ie.current.y!==Te.vertical&&(we=(n==null?void 0:n.indexOf("Bottom"))===0||(n==null?void 0:n.indexOf("Top"))===0?Te.vertical+ie.current.x:ie.current.x+Te.vertical),ie.current.x!==Te.horizontal&&(we.indexOf("Left")===0&&(Te.vertical=we==="LeftTop"||we==="LeftCenter"?"Top":"Bottom",we=Te.vertical+"Left"),we.indexOf("Right")===0&&(Te.vertical=we==="RightTop"||we==="RightCenter"?"Top":"Bottom",we=Te.vertical+"Right"),Te.horizontal=ie.current.x);const _e=Te.vertical,je=Te.horizontal;if(Te.position!==we){const dt=Gr(j,je.toLowerCase(),_e.toLowerCase(),ee.current||(Qe=te.current)==null?void 0:Qe.getBoundingClientRect());De(j,we,je,_e);const Je=W(j),Rt=Y(we,Je.x,Je.y);ee.current||(Rt.top-=sn("TopBottom",we,l),Rt.left-=sn("RightLeft",we,i)),Te.position=we;const an=rn(dt,Rt);Te.left=an[0],Te.top=an[1]}else De(j,we,je,_e);const Ue={left:Te.left,top:Te.top},Ie=yn(),Ke=ee.current?Lo((rt=w.current)==null?void 0:rt.element,Ie?Ie.current:null,{X:!0,Y:f},Ue):Ue;if(u&&x.current!=null&&(we.indexOf("Bottom")===0||we.indexOf("Top")===0)){let dt=parseInt(x.current.style.left,10)-(Ke.left-Te.left);dt<0?dt=0:dt+x.current.offsetWidth>((lt=w.current)==null?void 0:lt.element).clientWidth&&(dt=((Dt=w.current)==null?void 0:Dt.element).clientWidth-x.current.offsetWidth),x.current.style.left=dt.toString()+"px"}return Ue.left=Ke.left,Ue.top=Ke.top,Ue},sn=(j,le,ye)=>j.indexOf(n.split(/(?=[A-Z])/)[0])!==-1&&j.indexOf(le.split(/(?=[A-Z])/)[0])!==-1?2*ye:0,yn=()=>!f&&(O!=null&&O.current)?ce:null,Ct=(j,le,ye)=>{if(v>0){clearTimeout(Z.current.hide),clearTimeout(Z.current.show);const Te=()=>{v&&w.current&&w.current.element&&y||Rn(j,le,ye)};Z.current.hide=setTimeout(Te,v)}else Rn(j,le,ye)},Rn=(j,le,ye)=>{var we,_e,je;let Te;if(le?Te=(we=o.target)!=null&&we.current||L?ye||le.target:ce.current:Te=oe.current,z.current={...z.current,hideEvent:le,hideAnimation:j,hideTarget:Te},w.current&&((_e=w.current.element)!=null&&_e.getAttribute("sf-animate"))){const Ue=e.createRef();Ue.current=(je=w.current)==null?void 0:je.element,Zt.stop(Ue.current,{end:()=>{Ht(j,Te,le)}})}else Ht(j,Te,le)},Ht=(j,le,ye)=>{B==null||B(ye),Be(R)?(xt(),qt(j,le,ye)):R&&!B?M(!1):R||(xt(),qt(j,le,ye))},qt=(j,le,ye)=>{le&&ye&&jt(le);const Te={name:j.effect==="None"&&qr==="Enable"?"FadeOut":h.close.effect,duration:j.duration,delay:j.delay,timingFunction:"ease-in"};w.current&&(pe(we=>({hide:Te,show:we==null?void 0:we.show})),se(!1))},jt=j=>{nt(j),Be(j.getAttribute("data-content"))||(j.setAttribute("title",j.getAttribute("data-content")),j.removeAttribute("data-content")),Pe(j)},$t=()=>{const j=oe.current;j&&jt(j),G&&(Ne({top:"",left:""}),w.current=null)},on=()=>{w.current&&w.current.element&&S(!0)},bn=j=>{S(!1),Ct(h.close,j,oe.current)},Lt=j=>{const le=j.relatedTarget;if(le){const ye=gt(le,`.${lr}.${ps}.${ms}`);ye?(m&&it(j),ye.addEventListener("mouseleave",wn)):(Ct(h.close,j,oe.current),v===0&&h.close.effect==="None"&&$t())}else Ct(h.close,j,oe.current),$t()},wn=j=>{var le,ye;(ye=(le=w.current)==null?void 0:le.element)==null||ye.removeEventListener("mouseleave",wn),(!j.relatedTarget||gt(j.relatedTarget,".sf-tooltip")!==ce.current)&&(Ct(h.close,j,oe.current),$t())},it=j=>{var Qe;let le=0,ye=0;if(j.type.indexOf("touch")>-1?(j.preventDefault(),le=j.touches[0].pageX,ye=j.touches[0].pageY):(le=j.pageX,ye=j.pageY),Be(w.current))return;w.current&&(w.current.element.style.display="block");const Te=e.createRef();Te.current=(Qe=w.current)==null?void 0:Qe.element,Zt.stop(Te.current),De(j.target,n,ie.current.x,ie.current.y);const we=W(j.target),_e=Y(n,we.x,we.y),je=le+_e.left+i,Ue=ye+_e.top+l,Ie=nn(je,Ue);if(ie.current.x!==Ie.horizontal||ie.current.y!==Ie.vertical){const rt=(n==null?void 0:n.indexOf("Bottom"))===0||(n==null?void 0:n.indexOf("Top"))===0?Ie.vertical+Ie.horizontal:Ie.horizontal+Ie.vertical;Ie.position=rt,De(j.target,Ie.position,Ie.horizontal,Ie.vertical);const lt=Y(Ie.position,we.x,we.y);Ie.left=le+lt.left-i,Ie.top=ye+lt.top-l}const Ke={position:"absolute",left:Ie.left+"px",top:Ie.top+"px",zIndex:1e3,width:On(s),height:On(t),display:"block"};U(Ie),ue(rt=>({...rt,style:{...(rt==null?void 0:rt.style)||{},...Ke}}))},Nn=j=>{w.current&&w.current.element&&j.key==="Escape"&&yt()},Vt=j=>{w.current&&w.current.element&&gt(j.target,".sf-tooltip")===null&&!g&&!E.includes("Focus")&&yt()},Wt=j=>{w.current&&w.current.element&&!g&&!m&&!Ee.current&&(gt(j.target,`.${lr}.${ps}.${ms}`)||(se(le=>(le||M(!0),le)),Ee.current=!0,yt()))},Sn=j=>{var Te,we;const le=ln(j),ye={};for(const _e of le){if(_e==="Custom")return;_e==="Focus"&&(!Be(o.target)&&!Be((Te=o.target)==null?void 0:Te.current)?(we=o.target)==null||we.current.addEventListener("focus",ot):ye.onFocus=ot),_e==="Click"&&(ye.onMouseDown=ht),_e==="Hover"&&(xe.isDevice?(re.current&&(re.current.tapHoldThreshold=Si,re.current.tapHold=Ye),ye.onTouchEnd=He):ye.onMouseOver=ot)}Q(ye)},ln=j=>j?(j==="Auto"&&(j=xe.isDevice?"Hover":"Hover Focus"),j.split(" ")):[],xn=(j,le)=>{var ye;w.current&&w.current.element&&(g||(j.type==="focus"&&(!Be(o.target)&&!Be((ye=o.target)==null?void 0:ye.current)||L?le.addEventListener("blur",Lt):Q(Te=>({...Te,onBlur:Lt}))),j.type==="mouseover"&&le.addEventListener("mouseleave",Lt),v&&(w.current.element.addEventListener("mouseenter",on),w.current.element.addEventListener("mouseleave",bn))),m&&c===0&&(le.addEventListener("mousemove",it),le.addEventListener("mouseenter",it)))},Fe=j=>{var ye,Te;const le=ln(j);for(const we of le){if(we==="Custom")return;we==="Focus"&&!Be(o.target)&&!Be((ye=o.target)==null?void 0:ye.current)&&ce.current&&((Te=o.target)==null||Te.current.removeEventListener("focus",ot)),we==="Hover"&&re.current&&re.current.destroy&&re.current.destroy()}},nt=j=>{if(!g){const le=ln(E);for(const ye of le)ye==="Focus"&&(j.removeEventListener("blur",Lt),Q(Te=>{const we={...Te};return delete we.onBlur,we})),ye==="Hover"&&!xe.isDevice&&j.removeEventListener("mouseleave",Lt);v&&(j.removeEventListener("mouseenter",on),j.removeEventListener("mouseleave",bn))}m&&(j.removeEventListener("mousemove",it),j.removeEventListener("mouseenter",Lt))},yt=()=>{Ct(h.close)},cn=e.useMemo(()=>{switch(I){case cr:return Hi;case Pn:return ji;case ar:return $i;default:return Mi}},[I]),Ft=()=>a.jsxs(At,{ref:w,open:X,role:"tooltip","aria-hidden":!1,animation:fe,relativeElement:K,targetRef:oe,position:{X:_.left,Y:_.top},viewPortElementRef:te.current?te:void 0,width:On(s),height:On(t),onOpen:Re,onClose:Le,className:[lr,A,xe.isDevice?Oi:""].filter(Boolean).join(" "),...ve,...C,children:[a.jsx("div",{className:Ii,children:me()}),u&&a.jsxs("div",{ref:x,className:`${fs} ${fs}-${I} sf-pos-absolute sf-overflow-hidden ${I===ar||I===Pn?"sf-tooltip-arrow-x":"sf-tooltip-arrow-y"}`,children:[a.jsx("div",{className:`${ki}-${I} sf-pos-absolute`}),a.jsx("div",{className:`${_i}-${I} sf-pos-absolute`,style:J,children:a.jsx(Zr,{d:cn})})]}),g&&a.jsx("div",{ref:V,className:`${Li}`,role:"button","aria-label":"Close Tooltip",onClick:()=>{yt()},children:a.jsx(Zr,{d:Pi})})]});return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:ce,className:[Ai,A].filter(Boolean).join(" "),title:b,...ne,children:D}),!G&&te.current&&Yt.createPortal(Ft(),te.current)]})});e.memo($s);const mn=20,Cn=e.forwardRef((o,r)=>{const{open:s,header:t,footer:n,modal:i=!0,onClose:l,onDragStart:u,onDrag:f,onDragStop:d,onResizeStart:E,onResize:m,onResizeStop:g,closeIcon:h=!0,initialFocusRef:c,draggable:v=!1,resizable:D=!1,resizeHandles:O=["SouthEast"],position:P="Center",animation:T={effect:"Fade",duration:400,delay:0},target:A=typeof document<"u"?document.body:void 0,fullScreen:R=!1,className:B="",children:k,style:b,id:N=`dialog_${e.useId()}`,...L}=o,C=e.useRef(null),G=e.useRef(null),M=e.useRef(null),[X,se]=e.useState({internalOpen:s,dynamicMaxHeight:""}),{internalOpen:fe,dynamicMaxHeight:pe}=X,{locale:K}=$e(),H=e.useMemo(()=>({handle:".sf-dlg-header-content",clone:!1,dragArea:A&&A instanceof HTMLElement?A:typeof document<"u"?document.body:void 0,abort:".sf-dlg-closeicon-btn",isDragScroll:!0,dragStart:de=>{if(!v){de.cancel=!0;return}u&&u(de)},drag:de=>{v&&f&&f(de.event)},dragStop:de=>{v&&d&&d(de.event)}}),[v,A,u,f,d]),y=e.useRef(null),S=e.useRef(Jt({current:v?y.current:null},H)),I=e.useMemo(()=>{const de=(W,ae)=>W===void 0?ae:W,Ce=R&&typeof window<"u"?window.innerWidth:typeof window<"u"?window.innerWidth-mn*2:800,$=R&&typeof window<"u"?window.innerHeight:typeof window<"u"?window.innerHeight-mn*2:600;return{minWidth:de(b==null?void 0:b.minWidth,100),minHeight:de(b==null?void 0:b.minHeight,100),maxWidth:de(b==null?void 0:b.maxWidth,Ce),maxHeight:de(b==null?void 0:b.maxHeight,$)}},[b==null?void 0:b.minWidth,b==null?void 0:b.minHeight,b==null?void 0:b.maxWidth,b==null?void 0:b.maxHeight,R]),q=e.useMemo(()=>({enabled:D&&!R,handles:O,boundary:A&&A instanceof HTMLElement?A:void 0,minWidth:I.minWidth,minHeight:I.minHeight,maxWidth:I.maxWidth,maxHeight:I.maxHeight,onResizeStart:E,onResize:m,onResizeStop:g}),[D,O,A,I]),{renderResizeHandles:_}=Io(y,q);e.useEffect(()=>(Ot("dialog"),()=>{var de,Ce,$;S.current&&((de=S.current.element)!=null&&de.current)&&(($=(Ce=S.current).destroy)==null||$.call(Ce)),y.current=null,S.current=null,C.current=null,G.current=null,M.current=null,typeof window<"u"&&window.removeEventListener("resize",Q)}),[]);const U=e.useCallback(()=>{let de=[];if(y.current){const Ce=['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','[contenteditable]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","),$=y.current.querySelectorAll(Ce);de=Array.from($).filter(W=>!W.hasAttribute("disabled"))}return de},[y,k,s]);e.useEffect(()=>{if(s){if(typeof document>"u"||typeof window>"u")return;if(M.current=document.activeElement,i){const de=A&&A instanceof HTMLElement?A:document.body,Ce={overflow:de.style.overflow,paddingRight:de.style.paddingRight},$=window.innerWidth-document.documentElement.clientWidth;return de.style.overflow="hidden",de.style.paddingRight=`${$}px`,()=>{de.style.overflow=Ce.overflow,de.style.paddingRight=Ce.paddingRight,M.current&&s&&M.current.focus()}}}else M.current&&(M.current.focus(),M.current=null);return()=>{M.current&&s&&M.current.focus()}},[fe,i]),e.useEffect(()=>{s&&se(de=>({...de,internalOpen:!0}))},[s]);const ne=e.useCallback(()=>R?"100%":A&&A!==document.body&&typeof window<"u"?A.offsetHeight<window.innerHeight?A.offsetHeight-mn+"px":window.innerHeight-mn+"px":(typeof window<"u"?window.innerHeight-mn:600)+"px",[R,A]);e.useEffect(()=>{s&&se(de=>({...de,dynamicMaxHeight:ne()}))},[s,ne]);const Q=e.useCallback(()=>{se(de=>({...de,dynamicMaxHeight:ne()}))},[ne]);e.useEffect(()=>{if(!(!s||!fe))return C.current&&se(de=>({...de,dynamicMaxHeight:ne()})),typeof window<"u"&&window.addEventListener("resize",Q),()=>{typeof window<"u"&&window.removeEventListener("resize",Q)}},[s,fe,Q,ne]);const J=e.useMemo(()=>({open:s,modal:i,draggable:v,resizable:D,resizeHandles:O,position:P,animation:T,target:A,fullScreen:R,closeIcon:h}),[s,i,v,D,O,P,T,A,R]);e.useImperativeHandle(r,()=>({...J,element:C.current}),[J]);const Ne=e.useCallback(de=>{de.key==="Escape"&&l&&(de.preventDefault(),l(de),typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur())},[l]),ve=e.useCallback(de=>{var $,W,ae,ge;if(!i)return;const Ce=U();if(Ce.length!==0)switch(de.key){case"Tab":{const Ae=typeof document<"u"?document.activeElement:null,Re=Ce.indexOf(Ae);if(Re===-1){de.preventDefault(),(W=($=Ce[Ce.length-1])==null?void 0:$.focus)==null||W.call($);return}de.preventDefault();let Le;de.shiftKey?Le=Re<=0?Ce.length-1:Re-1:Le=Re>=Ce.length-1?0:Re+1,(ge=(ae=Ce[Le])==null?void 0:ae.focus)==null||ge.call(ae);break}}},[i,U]),ue=e.useCallback(()=>{var de;if(C.current&&se(Ce=>({...Ce,dynamicMaxHeight:ne()})),c!=null&&c.current)"element"in c.current&&c.current.element?c.current.element.focus():c.current.focus();else{const $=U().filter(W=>!G.current||G.current&&W!==G.current.element);$.length>0?$[0].focus():(de=G.current)!=null&&de.element&&G.current.element.focus()}},[c,ne,U]),w=e.useCallback(()=>{C.current&&se(de=>({...de,internalOpen:!1}))},[]),Z=e.useCallback(de=>{l==null||l(de)},[l]),ie=e.useCallback(de=>{i&&de.target===de.currentTarget&&(l==null||l(de))},[i,l]),re=e.useMemo(()=>xs("dialog",{close:"Close"},K).getConstant("close"),[K]),Se=e.useCallback(()=>a.jsx(Ze,{ref:G,icon:typeof h=="boolean"?a.jsx(Un,{"aria-label":re}):h,title:re,"aria-label":re,color:Tt.Secondary,onClick:Z,className:"sf-dlg-closeicon-btn",variant:qe.Standard}),[h,Z,i,re]),ee=(de,Ce)=>{const $={Fade:{show:"FadeIn",hide:"FadeOut"},FadeZoom:{show:"FadeZoomIn",hide:"FadeZoomOut"},FlipLeftDown:{show:"FlipLeftDownIn",hide:"FlipLeftDownOut"},FlipLeftUp:{show:"FlipLeftUpIn",hide:"FlipLeftUpOut"},FlipRightDown:{show:"FlipRightDownIn",hide:"FlipRightDownOut"},FlipRightUp:{show:"FlipRightUpIn",hide:"FlipRightUpOut"},FlipXDown:{show:"FlipXDownIn",hide:"FlipXDownOut"},FlipXUp:{show:"FlipXUpIn",hide:"FlipXUpOut"},FlipYLeft:{show:"FlipYLeftIn",hide:"FlipYLeftOut"},FlipYRight:{show:"FlipYRightIn",hide:"FlipYRightOut"},SlideBottom:{show:"SlideBottomIn",hide:"SlideBottomOut"},SlideLeft:{show:"SlideLeftIn",hide:"SlideLeftOut"},SlideRight:{show:"SlideRightIn",hide:"SlideRightOut"},SlideTop:{show:"SlideTopIn",hide:"SlideTopOut"},Zoom:{show:"ZoomIn",hide:"ZoomOut"},None:{show:"FadeIn",hide:"FadeOut"}},W={show:"FadeIn",hide:"FadeOut"},ae=$[de]||W;return Ce?ae.show:ae.hide},oe=e.useMemo(()=>["sf-control","sf-dialog",i?"sf-dlg-modal":"",R?"sf-dlg-fullscreen":"",D&&!R?"sf-dlg-resizable":"",B].filter(Boolean).join(" "),[i,R,B,D]),ce=e.useMemo(()=>{if(b!=null&&b.top&&(b!=null&&b.left)||P===null)return;const[de,Ce]=P==null?void 0:P.split(/(?=[A-Z])/);return de&&Ce?`sf-dlg-${de==null?void 0:de.toLowerCase()}-${Ce==null?void 0:Ce.toLowerCase()}`:"sf-dlg-center"},[P,b]),x=e.useMemo(()=>{const[de,Ce]=P?P==null?void 0:P.split(/(?=[A-Z])/):[];return de&&Ce?{X:de,Y:Ce}:{X:"Center",Y:"Center"}},[P]),V=e.useMemo(()=>["sf-dlg-container",ce].filter(Boolean).join(" "),[ce]),z=e.useMemo(()=>{const de={...b};return delete de.zIndex,{maxHeight:R?"100%":pe,position:de.left&&de.top?"absolute":"relative",...!de.left&&!de.top?{top:"0px",left:"0px"}:{},...R?{width:"100vw",height:"100vh",maxWidth:"100%",maxHeight:"100%"}:{},...!R&&D?{minWidth:I.minWidth,minHeight:I.minHeight,maxWidth:I.maxWidth,maxHeight:I.maxHeight}:{},...de}},[P,R,b,pe,D,I]),{zIndexBase:te,zIndexPopup:he,zIndexOverlay:Ee}=e.useMemo(()=>{let de=typeof(b==null?void 0:b.zIndex)=="number"?b.zIndex:1e3;return de===1e3&&C.current&&(de=As(C.current)),{zIndexBase:Math.max(2,de),zIndexPopup:Math.max(3,de+1),zIndexOverlay:Math.max(1,de-1)}},[b==null?void 0:b.zIndex,s,fe,C.current]);if(!fe)return null;const be=a.jsxs("div",{className:V,ref:C,style:{zIndex:te,position:typeof document<"u"&&A!==document.body?"absolute":"fixed"},onKeyDown:Ne,children:[a.jsxs(At,{ref:de=>{y.current=de==null?void 0:de.element},open:s,position:x,zIndex:he,relateTo:A,onOpen:ue,onClose:w,className:oe,animation:{show:{name:ee(T.effect,!0),duration:T.effect==="None"?0:T.duration,delay:T.delay,timingFunction:"ease-out"},hide:{name:ee(T.effect,!1),duration:T.effect==="None"?0:T.duration,delay:T.delay,timingFunction:"ease-in"}},style:z,role:"dialog",id:N,...k&&{"aria-describedby":`${N}_dialog-content`},...t&&{"aria-labelledby":`${N}_dialog-header`},...!t&&{"aria-label":"Dialog"},"aria-modal":i?"true":"false",tabIndex:-1,onKeyDown:ve,...L,children:[(t||h)&&a.jsxs("div",{className:"sf-dlg-header-content",id:`${N}_dialog-header`,children:[h&&Se(),t&&a.jsx("div",{className:"sf-dlg-header sf-ellipsis",id:`${N}_title`,children:t})]}),a.jsx("div",{className:"sf-dlg-content",id:`${N}_dialog-content`,children:k}),n&&a.jsx("div",{className:"sf-dlg-footer-content sf-content-end",children:n}),D&&!R&&_(a.jsx(ko,{fill:"currentColor"}))]}),i&&a.jsx("div",{className:"sf-dlg-overlay",style:{zIndex:Ee},onClick:ie,role:"presentation"})]}),ke=A&&A instanceof HTMLElement?A:typeof document<"u"?document.body:void 0;return Yt.createPortal(be,ke)});Cn.displayName="Dialog";e.memo(Cn);const en=o=>o?o.getHours()*3600+o.getMinutes()*60+o.getSeconds():-1,Vs=(o,r)=>o.getFullYear()===r.getFullYear()&&o.getMonth()===r.getMonth()&&o.getDate()===r.getDate(),Ws=(o,r,s)=>{if(!r&&!s)return!0;const t=en(o),n=!!r,i=!!s,l=n?en(r):-1,u=i?en(s):-1;return n&&i?Vs(r,s)?l===u?t===l:l>u?!1:t>=l&&t<=u:l===u?t===l:l>u?t>=l||t<=u:t>=l&&t<=u:n?t>=l:i?t<=u:!0},Vi=(o,r,s)=>!r&&!s?o:o.filter(t=>Ws(t,r??null,s??null)),Wi=(o,r,s)=>{const t=!!r,n=!!s;if(!t&&!n)return o;const i=en(o),l=t?en(r):-1,u=n?en(s):Number.MAX_SAFE_INTEGER;if(t&&n&&Vs(r,s)&&l>u)return null;if(t&&i<l){const f=r,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(n&&i>u){const f=s,d=new Date(o);return d.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),d}if(t&&n&&l>u&&i>u&&i<l){const f=l-i,d=i-u,E=f<=d?r:s,m=new Date(o);return m.setHours(E.getHours(),E.getMinutes(),E.getSeconds(),0),m}return o},Fs=e.forwardRef((o,r)=>{const{times:s,selected:t,onSelect:n,formatter:i,itemTemplate:l,idBase:u,listLabel:f="Time options",ariaHidden:d=!1,className:E="sf-timepicker-list",sizeClass:m="",isOpen:g=!1,dir:h="ltr"}=o,c=e.useRef(null),v=e.useRef([]),D=e.useRef(!1),[O,P]=e.useState(null),T=s.length,A=e.useCallback(K=>i?i(K):K.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),[i]),R=e.useCallback(()=>t?s.findIndex(K=>K.getHours()===t.getHours()&&K.getMinutes()===t.getMinutes()):-1,[s,t]),B=e.useCallback(K=>{if(K==null||K<0)return;const H=v.current[K],y=c.current;if(!H||!y)return;const S=H.offsetTop,I=H.offsetHeight||32,q=y.clientHeight||0,_=Math.max(0,S-Math.max(0,(q-I)/2));y.scrollTop=_},[]),k=e.useCallback(()=>{const K=R(),H=K>=0?K:s.length?0:null;if(H==null||H<0)return;const y=v.current[H],S=c.current;if(!y||!S)return;const I=y.offsetTop,q=y.offsetHeight||32,_=Math.max(0,I-Math.max(0,(S.clientHeight-q)/2));S.scrollTop=_,P(H)},[R,s.length]);e.useEffect(()=>{g&&!D.current&&(D.current=!0,k()),g||(D.current=!1,P(null))},[g,k]);const b=e.useCallback(()=>{if(!T)return;const K=O!=null&&O>=0&&O<T?O:R(),H=K<0?0:(K+1)%T;P(H),B(H)},[T,O,R,B]),N=e.useCallback(()=>{if(!T)return;const K=O!=null&&O>=0&&O<T?O:R(),H=K<0?T-1:(K-1+T)%T;P(H),B(H)},[T,O,R,B]),L=e.useCallback(()=>{T&&(P(0),B(0))},[T,B]),C=e.useCallback(()=>{T&&(P(T-1),B(T-1))},[T,B]),G=e.useCallback(()=>{if(!T)return;const K=O!=null&&O>=0&&O<T?O:R();K==null||K<0||n(s[K])},[T,O,R,n,s]),M=e.useCallback(K=>{switch(K.key){case"ArrowDown":K.preventDefault(),b();break;case"ArrowUp":K.preventDefault(),N();break;case"Home":K.preventDefault(),L();break;case"End":K.preventDefault(),C();break;case"Enter":K.preventDefault(),G();break}},[b,N,L,C,G]);e.useImperativeHandle(r,()=>({ensureSelectedVisible:k,selectFocused:G,focusNext:b,focusPrev:N,focusFirst:L,focusLast:C,getFocusedIndex:()=>O,handleKeyDown:K=>M(K)}),[k,G,b,N,L,C,O,M]);const X=`${u}_options`,se=e.useMemo(()=>O!=null&&O>=0&&O<T?`${u}_option_${O}`:void 0,[u,O,T]),fe=[E,m,"sf-ul",h==="rtl"?"sf-rtl":""].filter(Boolean).join(" "),pe=T===0;return a.jsx("ul",{ref:c,className:fe,role:"listbox","aria-label":f,"aria-activedescendant":se,"aria-hidden":d,id:X,tabIndex:0,onMouseDown:K=>K.preventDefault(),onKeyDown:M,children:pe?a.jsx("li",{className:"sf-timepicker-item sf-timepicker-empty",role:"note",tabIndex:-1,children:"No available times"}):s.map((K,H)=>{const y=A(K),S=!!(t&&K.getHours()===t.getHours()&&K.getMinutes()===t.getMinutes()),I=O===H,q=l?l(K,S,I,H):y;return a.jsx("li",{ref:_=>{v.current[H]=_},className:["sf-timepicker-item",S?"sf-active":"",I?"sf-focus":""].filter(Boolean).join(" "),role:"option","data-value":y,id:`${u}_option_${H}`,"aria-selected":S,onClick:_=>n(K,_),onFocus:()=>P(H),onBlur:()=>P(null),tabIndex:0,children:q},H)})})});Fs.displayName="TimeList";function Fi(o){const{step:r,minTime:s,maxTime:t,locale:n,timeFormat:i}=o,[l,u]=e.useState([]),f=e.useRef(null);e.useEffect(()=>{const v=[],D=new Date;D.setHours(0,0,0,0);const O=new Date;O.setHours(23,59,59,999);const P=new Date(D);for(;P<=O;)v.push(new Date(P)),P.setMinutes(P.getMinutes()+r);u(v)},[r]);const d=e.useMemo(()=>Vi(l,s,t),[l,s,t]),E=e.useCallback(v=>!v||isNaN(v.getTime())?"":ut(v,{format:i||"h:mm a",type:"time",locale:n||"en-US"}),[n,i]),m=e.useCallback((v,D=!1)=>{if(!v||!v.trim())return null;const O=v.replace(/(am|pm|Am|aM|pM|Pm)/g,T=>T.toUpperCase()).trim(),P=[i,"h:mm a","h:mm:ss a","HH:mm","HH:mm:ss"].filter(Boolean);for(const T of P){const A=_o(O,{format:T,type:"time",locale:n||"en-US"});if(A&&!isNaN(A.getTime())&&(!D||ut(A,{format:T,type:"time",locale:n||"en-US"}).trim()===O))return A}if(!D){const A=new Date().toLocaleDateString(n||"en-US"),R=new Date(`${A} ${O}`);if(!isNaN(R.getTime()))return R}return null},[n,i]),g=e.useCallback(v=>!v||isNaN(v.getTime())?!1:Ws(v,s||null,t||null),[s,t]),h=e.useCallback(()=>{var v,D;(D=(v=f.current)==null?void 0:v.ensureSelectedVisible)==null||D.call(v)},[]),c=e.useCallback((v,D)=>{D&&f.current&&typeof f.current.handleKeyDown=="function"&&f.current.handleKeyDown(v)},[]);return{displayedTimes:d,formatTime:E,parseTime:m,isValidTime:g,timeListRef:f,ensureSelectedVisible:h,forwardListKeyDown:c}}const gr=e.forwardRef((o,r)=>{const{value:s,id:t=`timepicker_${e.useId()}`,defaultValue:n,format:i="h:mm a",minTime:l,maxTime:u,step:f=30,placeholder:d="Choose a time",variant:E=qe.Standard,size:m=Ut.Medium,readOnly:g=!1,disabled:h=!1,itemTemplate:c,clearButton:v=!0,className:D="",zIndex:O=1e3,strictMode:P=!1,open:T,pickerIcon:A=!0,editable:R=!0,fullScreenMode:B=!1,pickerVariant:k=dn.Auto,openOnFocus:b=!1,required:N=!1,valid:L,validationMessage:C="",validityStyles:G=!0,labelMode:M="Never",onChange:X,onOpen:se,onClose:fe,...pe}=o,[K,H]=e.useState(s??n??null),[y,S]=e.useState(!1),I=e.useRef(null),q=e.useRef(null),_=e.useRef(null),U=e.useRef(null),{dir:ne,locale:Q}=$e(),J=s!==void 0,Ne=J?s||null:K,ve=k===dn.Popup||k===dn.Auto&&xe.isDevice,ue=k===dn.Inline||k===dn.Auto&&!xe.isDevice,{displayedTimes:w,formatTime:Z,parseTime:ie,isValidTime:re,timeListRef:Se,ensureSelectedVisible:ee,forwardListKeyDown:oe}=Fi({step:f,minTime:l,maxTime:u,locale:Q,timeFormat:i}),ce=e.useCallback((me,Oe)=>{J||H(me),X&&X({value:me,event:Oe})},[J,X,N,L]),x=Po({locale:Q,inputRef:q,placeholder:d,placeholderKey:"timepicker",disabled:h,readOnly:g,openOnFocus:b,strictMode:P,required:N,valid:L,validationMessage:C,value:Ne,formatValue:Z,parseInput:me=>ie(me,!1),isValid:me=>re(me),commitValue:ce,onOpen:()=>{z()}}),{isOpen:V,showPopup:z,hidePopup:te,togglePopup:he,zIndexPopup:Ee}=Mo({open:T,defaultOpen:!1,disabled:h,readOnly:g,onOpen:se,onClose:fe,containerRef:I,contentRefs:[_],extraInsideRefs:[U],inputRef:q,baseZIndex:O}),be=e.useCallback((me,Oe)=>{J||x.setInputValue(Z(me)),ce(me,Oe),te()},[Z,ce,te,J,x]),ke=e.useCallback(()=>{Ne?(x.setInputValue(Z(Ne)),x.setIsInputValid(!0)):(x.setInputValue(""),x.setIsInputValid(!N))},[P,Ne,Z,N,ce,x]),de=e.useCallback((me,Oe)=>{const Pe=Wi(me,l??null,u??null);Pe?(x.setInputValue(Z(Pe)),ce(Pe,Oe),x.setIsInputValid(!0)):(x.setInputValue(""),ce(null,Oe),x.setIsInputValid(!N))},[P,l,u,N,Z,ce,x]),Ce=e.useCallback(me=>{const Oe=x.inputValue;if(Oe.trim()===""){x.inputValue!==""&&x.setInputValue(""),P&&N?Ne?(x.setInputValue(Z(Ne)),x.setIsInputValid(!0)):x.setIsInputValid(!N):(ce(null,me),x.setIsInputValid(!N));return}if(P){const Ye=ie(Oe,!1);if(Ye===null){ke();return}if(re(Ye)){const ht=Z(Ye);x.setInputValue(ht),ce(Ye,me),x.setIsInputValid(!0)}else de(Ye,me);return}const Pe=ie(Oe,!0);Pe&&re(Pe)?(ce(Pe,me),x.setIsInputValid(!0)):x.setIsInputValid(!1)},[x,P,N,Ne,ie,re,Z,ce,ke,de]),$=e.useCallback(me=>{switch(me.key){case"ArrowDown":(me.altKey||me.metaKey)&&(me.preventDefault(),z());break;case"ArrowUp":(me.altKey||me.metaKey)&&(me.preventDefault(),te());break;case"Enter":V||(me.preventDefault(),Ce(me));break}oe(me,V)},[V,z,te,Ce,oe]),W=e.useCallback(me=>{if(!me.trim())return!N;if(/^\d{1,2}$/.test(me)){const Pe=parseInt(me,10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:$/.test(me)){const Pe=parseInt(me.split(":")[0],10);return Pe>=0&&Pe<=23}if(/^\d{1,2}:\d{1,2}$/.test(me)){const[Pe,Ye]=me.split(":"),He=parseInt(Pe,10),ht=parseInt(Ye,10);return He>=0&&He<=23&&ht>=0&&ht<=59}const Oe=ie(me);return Oe!==null&&re(Oe)},[ie,re,N]),ae=e.useCallback(me=>{const Oe=me.target.value;x.setInputValue(Oe),L===void 0&&x.setIsInputValid(W(Oe))},[L,W]);e.useEffect(()=>{Ot("timepicker")},[]);const ge={placeholder:d,format:i,labelMode:M,disabled:h,readOnly:g,editable:R,openOnFocus:b,open:T,clearButton:v,zIndex:O,strictMode:P,value:Ne,minTime:l,maxTime:u,step:f,required:N,valid:L,validationMessage:C,validityStyles:G};e.useImperativeHandle(r,()=>({...ge,element:I.current}),[ge]);const Ae=e.useCallback(()=>{var me;he(),S(!0),(me=q.current)==null||me.focus()},[he]),Re=e.useCallback(me=>{me.preventDefault(),x.handleClear(),te()},[x,te]),Le=["sf-input-group sf-control","sf-timepicker",h?"sf-disabled":"",g?"sf-readonly":"",V||x.isFocused?"sf-input-focus":"",M!=="Never"?"sf-float-input":"",ne==="rtl"?"sf-rtl":"",m===Ut.Small?"sf-small":m===Ut.Large?"sf-large":"sf-medium",!x.isInputValid&&G?"sf-error":"",E&&E.toLowerCase()!=="standard"?E.toLowerCase()==="outlined"?"sf-outline":`sf-${E.toLowerCase()}`:"",D].filter(Boolean).join(" "),Y=m.toLowerCase().substring(0,2),De=e.useMemo(()=>a.jsx(Fs,{ref:Se,times:w,selected:Ne,onSelect:(me,Oe)=>{be(me,Oe)},formatter:Z,itemTemplate:c,idBase:`${t}`,className:"sf-timepicker-list",sizeClass:`sf-timepicker-list-${Y}`,isOpen:V,dir:ne}),[w,Ne,Z,c,V,ne,be,Y,t,Se]);return a.jsxs("span",{ref:I,className:Le,...pe,children:[a.jsx(Ns,{ref:q,id:t,className:"sf-timepicker",placeholder:M==="Never"?x.getPlaceholder:"",disabled:h,readOnly:g||!R,onFocus:x.handleInputFocus,onBlur:me=>{x.setIsFocused(!1),Ce(me),te()},value:x.inputValue,onChange:R&&!g&&!h?ae:void 0,role:"combobox","aria-haspopup":"listbox",autoComplete:"off","aria-expanded":V,"aria-disabled":h,"aria-controls":V?`${t}_options`:void 0,"aria-label":x.getPlaceholder||"Time picker input",onKeyDown:$,tabIndex:0,required:N}),M!=="Never"&&Nr(M,!1,x.inputValue,d,t),v&&x.inputValue&&(x.isFocused||V)&&a.jsx("span",{className:"sf-clear-icon sf-input-icon","aria-label":"clear time value",role:"button",onMouseDown:Re,children:a.jsx(Un,{})}),a.jsx("span",{className:`sf-input-icon sf-time-icon sf-icons ${y?"sf-active":""}`,"aria-label":"select time",role:"button",onClick:Ae,onMouseDown:me=>{me.preventDefault()},children:A===!0?a.jsx(ai,{}):A}),V&&Yt.createPortal(B&&xe.isDevice?a.jsxs("div",{ref:U,className:"sf-timepicker-mob sf-control",style:{zIndex:O},role:"dialog","aria-modal":"true","aria-label":"Time selection",children:[a.jsxs("div",{className:"sf-timepicker-header",children:[a.jsx(Ze,{variant:qe.Standard,onClick:te,children:a.jsx(Un,{})}),a.jsx("span",{className:"sf-timepicker-title",children:"Select Time"})]}),De]}):a.jsxs(a.Fragment,{children:[ve&&a.jsxs("div",{className:"sf-timepicker-popup-wrap sf-picker-popup",style:{zIndex:Ee.toString()},children:[a.jsx("div",{className:"sf-overlay"}),a.jsx(At,{ref:_,className:"sf-timepicker sf-popup sf-content-center",open:V,zIndex:Ee,onOpen:()=>{ee()},relateTo:document.body,style:{top:"0px",left:"0px",position:"relative"},position:{X:"center",Y:"center"},collision:{X:st.Fit,Y:st.Fit},"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:De})]}),ue&&a.jsx(At,{ref:_,className:"sf-timepicker sf-popup",open:V,zIndex:Ee,onOpen:()=>{ee()},relateTo:I.current,position:{X:"left",Y:"bottom"},collision:{X:st.Flip,Y:st.Flip},offsetY:4,"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:De})]}),document.body)]})});gr.displayName="TimePicker";const p={ALL_DAY_APPOINTMENT_SECTION:"sf-all-day-appointment-section",ALL_DAY_APPOINTMENT:"sf-all-day-appointment",ALL_DAY_CONTAINER:"sf-all-day-container",ALL_DAY_CELL:"sf-all-day-cell",ALL_DAY_ROW:"sf-all-day-row",ALL_DAY_TIMEZONE_ROW:"sf-all-day-time-zone-row",APPOINTMENT:"sf-appointment",APPOINTMENT_ACTIVE:"sf-appointment-active",APPOINTMENT_COLLAPSE:"sf-appointment-collapse",APPOINTMENT_DETAILS:"sf-appointment-details",APPOINTMENT_EXPAND:"sf-appointment-expand",APPOINTMENT_WRAPPER:"sf-appointment-wrapper",BOTTOM_RESIZE_HANDLER:"sf-bottom-handler",BLOCK_INDICATOR:"sf-block-indicator",BLOCK_APPOINTMENT:"sf-block-appointment",CALENDAR_POPUP_CONTAINER:"sf-calendar-popup-container",CANCEL_EVENT:"sf-cancel-event",CELL_POPUP:"sf-cell-popup",CELL_TIME:"sf-cell-time",CONTENT_RIGHT:"sf-content-end sf-content-right",CONTENT_SECTION:"sf-content-section",CONTENT_TABLE:"sf-content-table",CONTENT_WRAP:"sf-content-wrap",CONTROL:"sf-control",CURRENT_TIME:"sf-current-time",CURRENT_TIMELINE:"sf-current-timeline",DATE_HEADER:"sf-date-header",DATE_HEADER_CONTAINER:"sf-date-header-container",DATEPICKER_BUTTON:"sf-datepicker-button",DAY_CLONE_CONTAINER:"sf-day-clone-container",DAY_VIEW:"sf-day-view",DAY_WRAPPER:"sf-day-wrapper",DIALOG:"sf-scheduler-dialog",DIALOG_CONTENT:"sf-dialog-content",DELETE_EVENT:"sf-delete-event",DESCRIPTION:"sf-description",DESCRIPTION_CONTAINER:"sf-description-container",DESCRIPTION_ROW:"sf-description-row",DISPLAY_FLEX:"sf-display-flex",DOWN_ARROW_ICON:"sf-down-icon",DRAGGING:"sf-dragging",DRAG_CLONE:"sf-drag-clone",SCHEDULER_CURSOR_MOVE:"sf-scheduler-cursor-move",SCHEDULER_CURSOR_NOT_ALLOWED:"sf-cursor-not-allowed",SCHEDULER_CURSOR_DEFAULT:"sf-cursor-default",EXTERNAL_DRAG_CLONE:"sf-external-drag-clone",EVENT_RESIZE_CLASS:"sf-event-resize",EVENT_CLONE:"sf-event-clone",EDIT_EVENT:"sf-edit-event",EDITOR_FIELDS_ROW:"sf-editor-fields-row",EDITOR_FIELD_CONTAINER:"sf-editor-field-container",ELLIPSIS:"sf-ellipsis",END_DATE_CONTAINER:"sf-end-date-container",END_TIME_CONTAINER:"sf-end-time-container",END_ROW:"sf-end-row",EVENT_ALLDAY:"sf-event-all-day",EVENT_CONTAINER:"sf-event-container",EVENT_DESCRIPTION:"sf-event-description",EVENT_END_DATE:"sf-event-end-date",EVENT_END_TIME:"sf-event-end-time",EVENT_LOCATION:"sf-event-location",EVENT_POPUP:"sf-event-popup",EVENT_START_DATE:"sf-event-start-date",EVENT_START_TIME:"sf-event-start-time",EVENT_SUBJECT:"sf-event-subject",EVENT_TIME:"sf-event-time",FORM_CONTAINER:"sf-form-container",HORIZONTAL_RESIZE_INNER:"sf-horizontal-resize",HEADER_CELLS:"sf-header-cells",HEADER_DATE:"sf-header-date",HEADER_DAY:"sf-header-day",HEADER_ROW:"sf-header-row",HEADER_SECTION:"sf-header-section",ICONS:"sf-icons",INDICATOR:"sf-indicator",LEFT_ARROW_ICON:"sf-left-icon",LEFT_INDENT:"sf-left-indent",LINK:"sf-link",LOCATION:"sf-location",LOCATION_CONTAINER:"sf-location-container",LEFT_RESIZE_HANDLER:"sf-left-handler",MAIN_SCROLL_CONTAINER:"sf-main-scroll-container",MONTH_VIEW:"sf-month-view",MONTH_EVENT:"sf-month-event",MORE_EVENT_CONTENT:"sf-more-event-content",MORE_EVENT_DATE_HEADER:"sf-more-event-date-header",MORE_EVENT_HEADER:"sf-more-event-header",MORE_EVENT_POPUP:"sf-more-event-popup",MORE_INDICATOR:"sf-more-indicator",MORE_POPUP_WRAPPER:"sf-more-popup-wrapper",MOB_RESIZE_DOT:"sf-mob-resize-dot",MOBILE_POPUP:"sf-mobile-popup",NEXT_ICON:"sf-next-icon",NO_POINTER:"sf-no-pointer",POPUP:"sf-popup",POPUP_CELL_HEADER:"sf-popup-cell-header",POPUP_CLOSE:"sf-popup-close",POPUP_CONTENT:"sf-quickinfo-popup-content",POPUP_CELL_SUBJECT:"sf-popup-cell-subject",POPUP_DESCRIPTION_TEXT:"sf-popup-description-text",POPUP_EVENT_SUBJECT:"sf-popup-event-subject",POPUP_FOOTER:"sf-quickinfo-popup-footer",POPUP_HEADER:"sf-quickinfo-popup-header",POPUP_HEADER_WRAP:"sf-header-icon-wrapper",POPUP_INPUT_WRAP:"sf-input-wrap",POPUP_LOCATION_TEXT:"sf-popup-location-text",POPUP_MORE_DETAILS:"sf-popup-more-details",POPUP_TIME_TEXT:"sf-popup-time-text",POPUP_WRAPPER:"sf-quickinfo-popup-wrapper",POSITION_ABSOLUTE:"sf-pos-absolute",PREVIOUS_ICON:"sf-previous-icon",PREVIOUS_TIMELINE:"sf-previous-timeline",QUICK_INFO_WRAPPER:"sf-quick-info-wrapper",RIGHT_ARROW_ICON:"sf-right-icon",RIGHT_SECTION:"sf-right-section",EVENT_RECURRENCE_ICON_CLASS:"sf-event-recurrence-icon",EVENT_RECURRENCE_EDIT_ICON_CLASS:"sf-event-recurrence-edit-icon",ROUND:"sf-round",RTL:"sf-rtl",RIGHT_RESIZE_HANDLER:"sf-right-handler",RESIZING:"sf-resizing",RESIZE_CONTAINER:"sf-resize-container",SAVE_EVENT:"sf-save-event",SCHEDULER:"sf-scheduler",SCHEDULER_CALENDAR:"sf-scheduler-calendar",SCHEDULER_TABLE:"sf-scheduler-table",SCHEDULER_TOOLBAR_CONTAINER:"sf-scheduler-toolbar-container",SCHEDULER_TOOLTIP:"sf-scheduler-tooltip",SCHEDULER_TOOLTIP_SUBJECT:"sf-scheduler-tooltip-subject",SCHEDULER_TOOLTIP_TEXT:"sf-scheduler-tooltip-text",SELECTED_CELL:"sf-selected-cell",START_DATE_CONTAINER:"sf-start-date-container",START_TIME_CONTAINER:"sf-start-time-container",START_ROW:"sf-start-row",STICKY_HEADER:"sf-sticky-header",SUBJECT:"sf-subject",SUBJECT_CONTAINER:"sf-subject-container",TABLE_CONTAINER:"sf-table-container",TABLE_WRAP:"sf-table-wrap",TEXT_CENTER:"sf-text-center",TIME:"sf-time",TIME_CELLS_WRAP:"sf-time-cells-wrap",TIME_SLOT_CLONE_CONTAINER:"sf-time-slot-clone-container",TIME_SLOTS:"sf-time-slots",TITLE_LOCATION_ROW:"sf-title-location-row",TODAY:"sf-today",TODAY_BUTTON:"sf-today-button",TOP_RESIZE_HANDLER:"sf-top-handler",UP_ARROW_ICON:"sf-up-icon",VERTICAL_RESIZE_INNER:"sf-vertical-resize",VERTICAL_VIEW:"sf-vertical-view",VIEW_BUTTON:"sf-view-button",WEEK_NUMBER:"sf-week-number",WEEK_NUMBER_WRAPPER:"sf-week-number-wrapper",WEEK_VIEW:"sf-week-view",WORK_CELLS_CONTAINER:"sf-work-cells-container",WORK_CELLS_ROW:"sf-work-cells-row",WORK_WEEK_VIEW:"sf-work-week-view",WORK_CELLS:"sf-work-cells",WORK_DAYS:"sf-work-days"},Bi=o=>{const{className:r,selectedDate:s,view:t,onSelectedDateChange:n,onViewChange:i,viewComponents:l,defaultSelectedDate:u,defaultView:f}=o,d=o.selectedDate!==void 0,E=o.view!==void 0,m=e.useMemo(()=>{const ne=d?s:u,Q=ne?new Date(ne):new Date;return isNaN(Q.getTime())?new Date:Q},[s,u,d]),g=e.useMemo(()=>E?t:f,[E,t,f]),[h,c]=e.useState(m),[v,D]=e.useState(g),O=e.useRef(g),[P,T]=e.useState([]),[A,R]=e.useState(!1),[B,k]=e.useState(Wn.Month);e.useEffect(()=>{d&&c(m)},[m,d]),e.useEffect(()=>{E&&D(g)},[g,E]);const b=e.useCallback(ne=>{E||D(ne),i&&i({value:ne})},[i,E]);e.useEffect(()=>{O.current!==t&&t!==v&&t&&l.some(J=>J.name===t)&&D(t),O.current=t||g},[t,v,l,g]),e.useEffect(()=>{if(v==="Week"&&l.length>0&&!l.some(Q=>Q.viewType==="Week")){b(l[0].name);return}},[v,l,b]),e.useEffect(()=>{const ne=ft.findViewByNameOrType(l,v);if(ne){const Q=ne.viewType==="Month"?Wn.Year:Wn.Month;k(Q)}},[l,v]);const{locale:N,dir:L}=$e(),C=e.useMemo(()=>{if(!P||P.length===0)return"";const ne=ft.findViewByNameOrType(l,v);if(!ne)return"";const Q=ne.component.props;return ne.viewType==="Month"?F.getMonthRangeText(h,ne.interval,Q.displayDate,Q.numberOfWeeks,Q.dateFormat||o.dateFormat,P,N):F.formatDateRange(N,P[0],P[P.length-1])},[P,l,v,h,N,o.dateFormat]),G=ne=>{d||c(ne),n&&n({value:ne})},M=e.useCallback(()=>{const ne=[];return l.forEach(Q=>{ne.push({viewType:Q.viewType,name:Q.name,displayName:Q.displayName,component:Q.component,interval:Q.interval})}),ne},[l]),X=ne=>{b(ne)},se=()=>({height:o.height,width:o.width,selectedDate:h,view:v,eventSettings:o.eventSettings,timeScale:o.timeScale,workHours:o.workHours,startHour:o.startHour,endHour:o.endHour,showWeekend:o.showWeekend,firstDayOfWeek:o.firstDayOfWeek,workDays:o.workDays,showTimeIndicator:o.showTimeIndicator,dateFormat:o.dateFormat,timeFormat:o.timeFormat,showWeekNumber:o.showWeekNumber,eventOverlap:o.eventOverlap,rowAutoHeight:o.rowAutoHeight,readOnly:o.readOnly,cell:o.cell,dateHeader:o.dateHeader,headerIndent:o.headerIndent,quickInfo:o.quickInfo,editor:o.editor,onEditorSubmit:o.onEditorSubmit,showQuickInfoPopup:o.showQuickInfoPopup,header:o.header,keyboardNavigation:o.keyboardNavigation,onDataRequest:o.onDataRequest,onSelectedDateChange:ne=>G(ne.value),onViewChange:ne=>b(ne.value),onCellClick:o.onCellClick,onCellDoubleClick:o.onCellDoubleClick,onEventClick:o.onEventClick,onEventDoubleClick:o.onEventDoubleClick,onDataChangeStart:o.onDataChangeStart,onDataChangeComplete:o.onDataChangeComplete,eventDrag:o.eventDrag,eventResize:o.eventResize,onResizeStart:o.onResizeStart,onResizing:o.onResizing,onResizeStop:o.onResizeStop,onDragStart:o.onDragStart,onDrag:o.onDrag,onDragStop:o.onDragStop,onMoreEventsClick:o.onMoreEventsClick,enableRecurrenceValidation:o.enableRecurrenceValidation,weekRule:o.weekRule}),pe=(()=>{var ve,ue,w,Z;const ne=ft.findViewByNameOrType(l,v);if(!ne)return{};const Q=ne.component.props||{},J=_s(Sr,se());typeof J.eventDrag=="boolean"?J.eventDrag={enable:J.eventDrag,externalDragAndDrop:!1}:J.eventDrag={...J.eventDrag,enable:J.eventDrag.enable,externalDragAndDrop:J.eventDrag.externalDragAndDrop??!1},typeof J.eventResize=="boolean"?J.eventResize={enable:J.eventResize,startResizable:!0,endResizable:!0}:J.eventResize={...J.eventResize,enable:J.eventResize.enable,startResizable:J.eventResize.startResizable??!0,endResizable:J.eventResize.endResizable??!0};const Ne={height:J.height,width:J.width,selectedDate:F.setValidDate(J.selectedDate),view:J.view,eventSettings:J.eventSettings,workHours:J.workHours,showTimeIndicator:J.showTimeIndicator,rowAutoHeight:J.rowAutoHeight,eventTemplate:Q.eventTemplate,readOnly:Q.readOnly??J.readOnly,header:J.header,showQuickInfoPopup:J.showQuickInfoPopup,displayDate:F.setValidDate(Q.displayDate),numberOfWeeks:Q.numberOfWeeks,weekDay:Q.weekDay,showTrailingAndLeadingDates:Q.showTrailingAndLeadingDates,cellHeader:Q.cellHeader,interval:Q.interval??ne.interval,displayName:Q.displayName??ne.displayName,maxEventsPerRow:Q.maxEventsPerRow,dateHeader:Q.dateHeader??J.dateHeader,headerIndent:Q.headerIndent??J.headerIndent,cell:Q.cell??J.cell,timeScale:Q.timeScale??J.timeScale,startHour:Q.startHour??J.startHour,endHour:Q.endHour??J.endHour,showWeekend:Q.showWeekend??J.showWeekend,firstDayOfWeek:F.setValidFirstDayOfWeek(Q.firstDayOfWeek,J.firstDayOfWeek),workDays:Q.workDays??J.workDays,dateFormat:Q.dateFormat??J.dateFormat,timeFormat:Q.timeFormat??J.timeFormat,showWeekNumber:Q.showWeekNumber??J.showWeekNumber,eventOverlap:Q.eventOverlap??J.eventOverlap,quickInfo:Q.quickInfo??J.quickInfo,editor:Q.editor??J.editor,onEditorSubmit:J.onEditorSubmit,onDataRequest:J.onDataRequest,onSelectedDateChange:J.onSelectedDateChange,onViewChange:J.onViewChange,onCellClick:J.onCellClick,onCellDoubleClick:J.onCellDoubleClick,onEventClick:J.onEventClick,onEventDoubleClick:J.onEventDoubleClick,onDataChangeStart:J.onDataChangeStart,onDataChangeComplete:J.onDataChangeComplete,keyboardNavigation:J.keyboardNavigation,eventDrag:J.eventDrag,eventResize:J.eventResize,onResizeStart:J.onResizeStart,onResizing:J.onResizing,onResizeStop:J.onResizeStop,onDragStart:J.onDragStart,onDrag:J.onDrag,onDragStop:J.onDragStop,onMoreEventsClick:J.onMoreEventsClick,enableRecurrenceValidation:J.enableRecurrenceValidation,handleCurrentViewChange:b,getAvailableViews:M,weekRule:J.weekRule};return(Ne.startHour!=="00:00"||Ne.endHour!=="24:00")&&(Ne.startHourTuple=[Number((ve=Ne.startHour)==null?void 0:ve.split(":")[0]),Number((ue=Ne.startHour)==null?void 0:ue.split(":")[1])],Ne.endHourTuple=[Number((w=Ne.endHour)==null?void 0:w.split(":")[0]),Number((Z=Ne.endHour)==null?void 0:Z.split(":")[1])]),Ne})();e.useEffect(()=>{const ne=ft.findViewByNameOrType(l,v);if(ne){const Q=F.getRenderDates(ne.viewType,h,pe);T(Q)}},[h,v,l]),e.useEffect(()=>{if(!ft.findViewByNameOrType(l,v)){const Q=M();if(Q.length>0){const J=Q.find(Ne=>Ne.viewType==="Week")||Q[0];b(J.name)}}},[v,l,b]);const K=()=>{const ne=ft.findViewByNameOrType(l,v);return ne?ne.component:null},H=ne=>{const Q=ft.findViewByNameOrType(l,v);if(!Q)return;const J={currentDate:h,viewType:Q.viewType,interval:Q.interval,showWeekend:pe.showWeekend,workDays:pe.workDays},Ne=ne==="next"?ir.navigateToNext(J):ir.navigateToPrevious(J);G(Ne)},y=()=>{H("next")},S=()=>{H("previous")},I=()=>{const ne=ir.navigateToToday();G(ne)},q=e.useCallback(ne=>{if(ne.value){const Q=Array.isArray(ne.value)?ne.value[0]:ne.value;G&&G(Q),R(!1)}},[G]),_=()=>{R(!A)};return{classNames:e.useMemo(()=>{const ne=[p.CONTROL,p.SCHEDULER];return L==="rtl"&&ne.push(p.RTL),r&&ne.push(r),ne.join(" ")},[L,r]),selectedDate:h,view:v,renderDates:P,activeViewProps:pe,dateRangeText:C,showCalendar:A,calendarView:B,handleSelectedDateChange:G,handleCurrentViewChange:b,getAvailableViews:M,handleViewButtonClick:X,handlePreviousClick:S,handleNextClick:y,handleTodayClick:I,handleDateDropdownClick:_,handleCalendarChange:q,renderCurrentView:K}},kr=(o,r,s)=>{e.useEffect(()=>{const t=n=>{var i;r&&o.current&&!o.current.contains(n.target)&&!((i=n.target)!=null&&i.closest(`.${p.POPUP}`))&&s()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[r,o])},Ui="sf-hscroll",Mn="sf-rtl",Bs="sf-overlay",zi="sf-hscroll-bar",Yi="sf-hscroll-content",Us="sf-hscroll-arrow",zs="sf-nav-right-arrow",Ys="sf-nav-left-arrow",Tr="sf-hscroll-nav",Ki="sf-scroll-right-nav",Xi="sf-scroll-left-nav",qi="sf-scroll-device",Ks=e.memo(e.forwardRef((o,r)=>{const{className:s="",scrollStep:t=void 0,isDisabled:n=!1,children:i,...l}=o,u=e.useRef(t),f=e.useRef(Bn("hscroll")),[d,E]=e.useState(!0),[m,g]=e.useState(!1),{dir:h}=$e(),c=e.useRef(null),v=e.useRef(null),D=e.useRef(null),O=e.useRef(null),P=e.useRef(!1),T=e.useRef(null),A={scrollStep:t,isDisabled:n},R=e.useMemo(()=>({name:xe.info.name,isDevice:xe.isDevice,isMozilla:xe.info.name==="mozilla"}),[]);e.useEffect(()=>{(()=>{var y;typeof t!="number"||t<0?u.current=((y=v.current)==null?void 0:y.offsetWidth)||void 0:u.current=t})()},[t]);const B=e.useCallback((H,y)=>{v.current&&(y==="add"?v.current.scrollLeft+=H:v.current.scrollLeft-=H,h==="rtl"&&v.current.scrollLeft>0&&(v.current.scrollLeft=0))},[h]),k=e.useCallback((H,y,S)=>{if(S){B(H,y);return}const q=()=>{var ne;let _=H,U=10;(ne=c.current)!=null&&ne.classList.contains(Mn)&&R.isMozilla&&(_=-H,U=-10),_<10?cancelAnimationFrame(U):(B(U,y),H-=U,requestAnimationFrame(q))};q()},[R.isMozilla,B]),b=e.useCallback((H,y,S)=>{const I=c.current;let q=y.classList;if(!q.contains(Tr)){const _=y.closest("."+Tr);_&&(y=_)}q=y.querySelector(`.${Us}`).classList,I.classList.contains(Mn)&&R.isMozilla&&(H=-H),!I.classList.contains(Mn)||R.isMozilla?q.contains(zs)?k(H,"add",S):k(H,"",S):q.contains(Ys)?k(H,"add",S):k(H,"",S)},[R.isMozilla,k]),N=e.useCallback(H=>{if(H){const y=H.originalEvent.target,S=10,I=()=>{b(S,y,!0)};O.current=window.setInterval(()=>{I()},50)}},[b]),L=e.useCallback(H=>{if(H.key==="Enter"){const y=()=>{P.current=!0,b(10,H.target,!0)};T.current=window.setTimeout(()=>{y()},100)}},[b]),C=e.useCallback(H=>{H.key==="Enter"&&(P.current?P.current=!1:H.target.click(),clearTimeout(T.current))},[]),G=e.useCallback(()=>{clearInterval(O.current)},[]),M=e.useCallback(H=>{b(u.current,H.target,!1)},[b]),X=e.useCallback(H=>{if(H){const y=v.current;let S;typeof H.velocity=="number"&&typeof H.distanceX=="number"&&(H.velocity<=1?S=H.distanceX/(H.velocity*10):S=H.distanceX/H.velocity);let I=.5;const q=()=>{const _=Math.sin(I);_<=0?cancelAnimationFrame(_):(H.swipeDirection==="Left"?y.scrollLeft+=S*_:H.swipeDirection==="Right"&&(y.scrollLeft-=S*_),I-=.5,requestAnimationFrame(q))};q()}},[]),se=e.useCallback(H=>{if(H){const y=v.current;if(y&&typeof H.distanceX=="number"){const S=H.distanceX;H.scrollDirection==="Left"?y.scrollLeft=y.scrollLeft+S:H.scrollDirection==="Right"&&(y.scrollLeft=y.scrollLeft-S)}}},[]),fe=H=>{const y=H.target,S=y.offsetWidth;let I=y.scrollLeft;I<=0&&(I=-I),I===0?(E(!0),g(!1),G()):Math.ceil(S+I+.1)>=y.scrollWidth?(E(!1),g(!0),G()):(E(!1),g(!1))};e.useImperativeHandle(r,()=>({...A,element:c.current})),e.useEffect(()=>()=>{O.current&&clearInterval(O.current),T.current&&clearTimeout(T.current)},[]);const pe=e.useMemo(()=>({swipe:X,scroll:se}),[X,se]);D.current=Xt(c,pe);const K=e.useMemo(()=>["sf-control","sf-lib",Ui,h==="rtl"&&Mn,R.isDevice&&qi,n&&Bs,s].filter(Boolean).join(" "),[s,h,R.isDevice,n]);return a.jsxs("div",{ref:c,id:f.current,className:K,...l,children:[a.jsx(Cr,{direction:"left",id:f.current,isDisabled:n||d,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:M,onTapHold:N}),a.jsx("div",{ref:v,className:`${zi} sf-display-flex`,style:{overflowX:"hidden"},onScroll:fe,children:a.jsx("div",{className:Yi,children:i})}),a.jsx(Cr,{direction:"right",id:f.current,isDisabled:n||m,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:M,onTapHold:N})]})}));Ks.displayName="HScrollComponent";const Cr=e.memo(({direction:o,id:r,isDisabled:s,onKeyPress:t,onKeyUp:n,onMouseUp:i,onClick:l,onTapHold:u})=>{const f=o==="right",d=`sf-${r}_nav ${Tr} ${f?Ki:Xi}`,E=`${f?zs:Ys} ${Us} sf-icons`,m=e.useRef(null),g=e.useMemo(()=>({tapHold:u,tapHoldThreshold:500}),[u]);return Xt(m,g),a.jsx("div",{ref:m,className:`${d} ${s?Bs:""}`,role:"button",id:`${r}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:n,onMouseUp:i,onTouchEnd:i,onContextMenu:h=>h.preventDefault(),onClick:l,children:a.jsx("div",{className:E,children:f?a.jsx(Os,{}):a.jsx(Ls,{})})})});Cr.displayName="NavIcon";const Gi="sf-vscroll",Zi="sf-rtl",Xs="sf-overlay",Qi="sf-vscroll-bar",Ji="sf-vscroll-content",qs="sf-vscroll-arrow",Gs="sf-nav-up-arrow",Zs="sf-nav-down-arrow",Dr="sf-vscroll-nav",el="sf-scroll-up-nav",tl="sf-scroll-down-nav",nl="sf-scroll-device",Qs=e.memo(e.forwardRef((o,r)=>{const{className:s="",scrollStep:t=void 0,isDisabled:n=!1,children:i,...l}=o,u=e.useRef(t),f=e.useRef(Bn("vscroll")),[d,E]=e.useState(!0),[m,g]=e.useState(!1),{dir:h}=$e(),c=e.useRef(null),v=e.useRef(null),D=e.useRef(null),O=e.useRef(null),P=e.useRef(!1),T=e.useRef(null),A=e.useMemo(()=>({isDevice:xe.isDevice}),[]),R={scrollStep:t,isDisabled:n};e.useEffect(()=>{(()=>{var S;typeof t!="number"||t<0?u.current=((S=v.current)==null?void 0:S.offsetHeight)||void 0:u.current=t})()},[t]);const B=e.useCallback((y,S)=>{v.current&&(S==="add"?v.current.scrollTop+=y:v.current.scrollTop-=y)},[]),k=e.useCallback((y,S,I)=>{if(I){B(y,S);return}const _=()=>{y<10?cancelAnimationFrame(10):(B(10,S),y-=10,requestAnimationFrame(_))};_()},[B]),b=e.useCallback((y,S,I)=>{let q=S.classList;if(!q.contains(Dr)){const U=S.closest("."+Dr);U&&(S=U)}const _=S.querySelector(`.${qs}`);_&&(q=_.classList),q.contains(Zs)?k(y,"add",I):q.contains(Gs)&&k(y,"",I)},[k]),N=e.useCallback(y=>{if(y){const S=y.originalEvent.target,I=10,q=()=>{b(I,S,!0)};O.current=window.setInterval(()=>{q()},50)}},[b]),L=e.useCallback(y=>{if(y.key==="Enter"){const S=()=>{P.current=!0,b(10,y.target,!0)};T.current=window.setTimeout(()=>{S()},100)}},[b]),C=e.useCallback(y=>{y.key==="Enter"&&(P.current?P.current=!1:y.target.click(),T.current&&clearTimeout(T.current))},[]),G=e.useCallback(()=>{clearInterval(O==null?void 0:O.current)},[]),M=e.useCallback(y=>{b(u.current,y.target,!1)},[b,u]),X=e.useCallback(y=>{y.preventDefault(),k(u.current,y.deltaY>0?"add":"",!1)},[k,u]),se=e.useCallback(y=>{if(y&&v.current){const S=v.current;let I=0;typeof y.velocity=="number"&&typeof y.distanceY=="number"&&(y.velocity<=1?I=y.distanceY/(y.velocity*10):I=y.distanceY/y.velocity);let q=.5;const _=()=>{const U=Math.sin(q);U<=0?cancelAnimationFrame(U):(y.swipeDirection==="Up"?S.scrollTop+=I*U:y.swipeDirection==="Down"&&(S.scrollTop-=I*U),q-=.02,requestAnimationFrame(_))};_()}},[]),fe=e.useCallback(y=>{if(y){const S=v.current;if(S&&typeof y.distanceY=="number"){const I=y.distanceY;y.scrollDirection==="Up"?S.scrollTop=S.scrollTop+I:y.scrollDirection==="Down"&&(S.scrollTop=S.scrollTop-I)}}},[]),pe=e.useCallback(y=>{const S=y.target,I=S.offsetHeight;let q=S.scrollTop;q<=0&&(q=-q),q===0?(E(!0),g(!1),G()):Math.ceil(I+q+.1)>=S.scrollHeight?(E(!1),g(!0),G()):(E(!1),g(!1))},[G]);e.useImperativeHandle(r,()=>({...R,element:c.current})),e.useEffect(()=>()=>{O.current&&clearInterval(O.current),T.current&&clearTimeout(T.current)},[]);const K=e.useMemo(()=>({scroll:fe,swipe:se}),[se,fe]);D.current=Xt(c,K);const H=e.useMemo(()=>["sf-control","sf-lib",Gi,h==="rtl"&&Zi,A.isDevice&&nl,n&&Xs,s].filter(Boolean).join(" "),[s,h,A.isDevice,n]);return a.jsxs("div",{ref:c,id:l.id||f.current,className:H,...l,onWheel:X,children:[a.jsx(vr,{direction:"up",id:f.current,isDisabled:n||d,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:M,onTapHold:N}),a.jsx("div",{ref:v,className:Qi,tabIndex:-1,style:{overflow:"hidden"},onScroll:pe,children:a.jsx("div",{className:Ji,children:i})}),a.jsx(vr,{direction:"down",id:f.current,isDisabled:n||m,onKeyPress:L,onKeyUp:C,onMouseUp:G,onClick:M,onTapHold:N})]})}));Qs.displayName="VScrollComponent";const vr=e.memo(({direction:o,id:r,isDisabled:s,onKeyPress:t,onKeyUp:n,onMouseUp:i,onClick:l,onTapHold:u})=>{const f=o==="down",d=`sf-${r}_nav ${Dr} ${f?tl:el}`,E=`${f?Zs:Gs} ${qs} sf-icons`,m=e.useRef(null),g=e.useMemo(()=>({tapHold:u,tapHoldThreshold:500}),[u]);return Xt(m,g),a.jsx("div",{ref:m,className:`${d} ${s?Xs:""}`,role:"button",id:`${r}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:n,onMouseUp:i,onTouchEnd:i,onContextMenu:h=>h.preventDefault(),onClick:l,children:a.jsx("div",{className:E,children:f?a.jsx(Xn,{}):a.jsx(Hs,{})})})});vr.displayName="NavIcon";const rl="sf-toolbar-items",sl="sf-toolbar-multirow-items",Js=e.memo(o=>{const{children:r,onOverflowChange:s}=o,t=e.useRef(null);return e.useEffect(()=>{const n=e.Children.count(r);(Be(t.current)||t.current!==n)&&(t.current=e.Children.count(r),s())},[s,r]),a.jsx("div",{className:`${rl} ${sl}`,children:r})});Js.displayName="ToolbarMultiRow";const hs="sf-toolbar-items",ol="sf-hscroll-bar",il="sf-vscroll-bar",ll="sf-hscroll-content",cl="sf-vscroll-content",eo=e.memo(e.forwardRef((o,r)=>{const{toolbarRef:s,orientation:t,scrollStep:n,children:i,className:l,onOverflowChange:u}=o,f=e.useRef(null),d=e.useRef(null),E=e.useRef(null),[m,g]=e.useState(!1),[h,c]=e.useState(n),v=e.useCallback(R=>R.querySelector("."+(t===et.Vertical?cl:ll)),[t]),D=e.useCallback(()=>{let R=!1;if(s.current&&wr(s.current)){let B=s.current.querySelector(`.${hs}`);B=m?v(B):B;const k=t===et.Vertical,b=k?s.current.offsetHeight:s.current.offsetWidth;(k?B.scrollHeight:B.scrollWidth)>b?R=!0:R=!1}return R},[m,t,v]),O=e.useCallback((R=!0)=>{if(s.current){E.current&&clearTimeout(E.current);const B=D();B!==m&&g(B),B&&R&&(E.current=window.setTimeout(()=>{if(s.current){const k=t===et.Vertical?`.${il}`:`.${ol}`,b=s.current.querySelector(k);b&&c(t===et.Vertical?b.offsetHeight:b.offsetWidth)}},500))}},[D,t,m]),P=e.useRef(O);e.useEffect(()=>{P.current=O},[O]);const T=e.useCallback(()=>{P.current()},[]);e.useEffect(()=>{if(s.current){let R=!0;f.current=new ResizeObserver(()=>{if(R){R=!1;return}P.current()}),f.current.observe(s.current)}return()=>{var R;(R=f.current)==null||R.disconnect(),f.current=null}},[]),e.useEffect(()=>{const R=e.Children.count(i);(Be(d.current)||d.current!==R)&&(d.current=e.Children.count(i),u(),P.current(!1))},[i,u]),e.useEffect(()=>{u()},[m,u]),e.useImperativeHandle(r,()=>({refreshOverflow:T}),[T]);const A=e.useMemo(()=>{const R=[hs];return l&&R.push(l),R.join(" ")},[l]);return m?t===et.Horizontal?a.jsx(Ks,{scrollStep:h,className:A,children:i}):a.jsx(Qs,{scrollStep:h,className:A,children:i}):a.jsx("div",{className:A,children:i})}));eo.displayName="ToolbarScrollable";const al="sf-toolbar-item",Bt=e.memo(e.forwardRef((o,r)=>{const{className:s="",children:t,...n}=o,i=e.useRef(null),l=e.useMemo(()=>{const u=[al];return s&&u.push(s),u.join(" ")},[s]);return e.useImperativeHandle(r,()=>({element:i.current})),a.jsx("div",{ref:i,className:l,...n,children:t})}));Bt.displayName="ToolbarItem";const ul="sf-toolbar-item",dl="sf-toolbar-separator",to=e.memo(e.forwardRef((o,r)=>{const{className:s="",...t}=o,n=e.useRef(null),i=e.useMemo(()=>{const l=[ul,dl];return s&&l.push(s),l.join(" ")},[s]);return e.useImperativeHandle(r,()=>({element:n.current})),a.jsx("div",{ref:n,className:i,...t})}));to.displayName="ToolbarSeparator";const fl="sf-toolbar-item",ml="sf-toolbar-spacer",_r=e.memo(e.forwardRef((o,r)=>{const{className:s="",...t}=o,n=e.useRef(null),i=e.useMemo(()=>{const l=[fl,ml];return s&&l.push(s),l.join(" ")},[s]);return e.useImperativeHandle(r,()=>({element:n.current})),a.jsx("div",{ref:n,className:i,...t})}));_r.displayName="ToolbarSpacer";const Hn="sf-toolbar-items",pl="sf-popup-up-icon",hl="sf-popup-down-icon",El="sf-popup-open",gl="sf-toolbar-hor-nav",Tl="sf-nav-active",Cl="sf-toolbar-popup-items",Dl="sf-hidden-popup",vl="sf-toolbar-extended-items",yl="sf-extended-nav",Rl="sf-toolbar-popup-overflow",jn="sf-toolbar-separator",pn="sf-toolbar-spacer",ur="sf-toolbar-item",bl="sf-toolbar-popup-icon sf-icon",no=e.memo(e.forwardRef((o,r)=>{const{toolbarRef:s,orientation:t,overflowMode:n,isToolbarRefReady:i,children:l,className:u,collision:f,isPopupVisible:d,onPopupOpenChange:E,onOverflowChange:m}=o,g=e.useCallback(ee=>e.Children.toArray(ee).filter(oe=>e.isValidElement(oe)&&(oe.type===Bt||oe.type===to||oe.type===_r)).map((oe,ce)=>e.cloneElement(oe,{key:oe.key||ce})),[]),h=e.useMemo(()=>g(l),[l,g]),c=e.useRef(null),v=e.useRef(e.Children.count(l)),D=e.useRef([...g(l)]),O=e.useRef([]),P=e.useRef(null),T=e.useRef(null),{dir:A}=$e(),[R,B]=e.useState([...D.current]),[k,b]=e.useState([]),[N,L]=e.useState(!1),[C,G]=e.useState(d),[M,X]=e.useState(!1),[se,fe]=e.useState({maxHeight:""}),pe=e.useCallback(ee=>{let oe=0;return ee&&(oe=t===et.Vertical?ee.offsetHeight:ee.offsetWidth),oe},[t]),K=e.useCallback(ee=>{let oe=0;return ee&&(oe=t===et.Vertical?ee.offsetTop:ee.offsetLeft),oe},[t]),H=e.useCallback(()=>P.current?pe(P.current):t===et.Horizontal?40:48,[pe,t]),y=e.useCallback(()=>s.current?s.current.offsetHeight:0,[n]),S=e.useCallback(()=>{let ee=0;if(s.current){const oe=window.getComputedStyle(s.current),ce=parseFloat(oe.width),x=parseFloat(oe.borderRightWidth);ee=ce+x*2}return ee},[]),I=e.useCallback(()=>{var ee;if(s.current&&((ee=T.current)!=null&&ee.element)){const oe=T.current.element,ce=s.current,x=oe.offsetTop+oe.offsetHeight+(ce.getBoundingClientRect().top||0),V=window.scrollY||0;if(t===et.Horizontal&&window.innerHeight+V<x&&ce.offsetTop<oe.offsetHeight&&n===ze.Popup){let z=oe.offsetHeight-(x-window.innerHeight-V+5);for(let te=0;te<oe.childElementCount;te++){const he=oe.children[parseInt(te.toString(),10)];if(he.offsetTop+he.offsetHeight>z){z=he.offsetTop;break}}fe(te=>({...te,maxHeight:`${z}px`}))}else if(t===et.Vertical){const z=ce.getBoundingClientRect();fe(te=>({...te,maxHeight:`${z.top+ce.offsetHeight}px`,bottom:"0"}))}}},[n,t]),q=e.useCallback(()=>{G(!1),fe({maxHeight:""})},[]),_=e.useCallback(ee=>{if(s.current&&ee&&wr(s.current)){const oe=[...R],ce=[...k],x=Array.from(ee.children),V=pe(s.current),z=window.getComputedStyle(ee),te=parseInt(t===et.Vertical?z.paddingTop:z.paddingLeft,10);if(A==="rtl"&&t===et.Horizontal){const he=parseInt(z.gap,10)||0,Ee=x.length;let be=0;x.forEach($=>{be+=pe($)}),be+=te*2+he*(Ee-1);const ke=be>V,de=ce.length>0||ke?H():0,Ce=V-de;if(be>Ce){let $=be;for(let W=Ee-1;W>=0;W--){const ae=x[parseInt(W.toString(),10)];if($>Ce||ae.classList.contains(jn)){const ge=pe(ae);$-=ge+(W===0?0:he),ce.unshift(oe[parseInt(W.toString(),10)]),oe.pop()}else break}}}else{let he=pe(x[x.length-1]),Ee=K(x[x.length-1]);const be=Ee+he+te>V,ke=ce.length>0||be?H():0,de=V-ke;for(let Ce=x.length-1;Ce>=0;Ce--){const $=x[parseInt(Ce.toString(),10)];if(he=pe($),Ee=K($),Ee+he+te>de||$.classList.contains(jn))ce.unshift(oe[parseInt(Ce.toString(),10)]),oe.pop();else break}}D.current=oe,O.current=ce}},[t,pe,K,H,R,k,A]),U=e.useCallback(()=>{R!==D.current&&(B(ee=>ee.length!==D.current.length?[...D.current]:ee),b(ee=>ee.length!==O.current.length?[...O.current]:ee))},[R]),ne=e.useCallback(()=>{if(s.current&&!M){const ee=s.current.querySelector(`.${Hn}`);n===ze.Popup&&G(oe=>oe&&!1),_(ee),U(),X(O.current.length>0)}},[_,M,U,n]),Q=e.useRef(ne);e.useLayoutEffect(()=>{Q.current=ne},[ne]);const J=e.useCallback(ee=>{let oe=0;if(ee){const ce=Array.from(ee.children),x=window.getComputedStyle(ee),V=parseInt(x.gap,10)||0,z=parseInt(t===et.Vertical?x.paddingTop:x.paddingLeft,10);ce.forEach(te=>{oe+=(te.classList.contains(pn)?0:pe(te))+V}),ce.length>0&&(oe-=V),oe+=z*2}return oe},[pe,t]),Ne=e.useCallback((ee,oe)=>{var he;const ce=[].slice.call(oe.querySelectorAll(`.${ur}`)),x=[...R],V=[...k],z=(he=s.current)==null?void 0:he.querySelector(`.${Hn}`),te=parseInt(window.getComputedStyle(z).gap,10)||0;for(let Ee=0;Ee<ce.length;Ee++){const be=ce[parseInt(Ee.toString(),10)],ke=be.classList.contains(pn),de=x.length>0,Ce=(ke?0:pe(be))+(de?te:0);let $=ee>Ce;if(ke||be.classList.contains(jn)){let W=Ce,ae=Ee+1;for(;ae<ce.length;){const ge=ce[parseInt(ae.toString(),10)],Ae=ge.classList.contains(pn);if(W+=(Ae?0:pe(ge))+(de?te:0),!ge.classList.contains(pn)&&!ge.classList.contains(jn))break;ae++}$=ee>W}if($)x.push(V[0]),V.shift(),ee-=Ce;else break}D.current=x,O.current=V},[pe,R,k]),ve=e.useCallback(()=>{var ee;if(s.current&&((ee=T.current)!=null&&ee.element)){const oe=s.current.querySelector(`.${Hn}`),ce=pe(oe),x=J(oe),V=ce-x,z=parseInt(window.getComputedStyle(oe).gap,10)||0,te=pe(T.current.element.querySelector(`.${ur}`))+z,he=V>te,Ee=[].slice.call(T.current.element.querySelectorAll(`.${ur}`));let be=0;Ee.forEach(de=>{be+=de.classList.contains(pn)?0:pe(de)}),be+=Ee.length*z,V+H()>be?(D.current=[...h],O.current=[]):he&&Ne(V,T.current.element)}},[pe,J,Ne]),ue=e.useCallback(()=>{n===ze.Popup&&C&&G(!1)},[n,C]),w=()=>{G(ee=>!ee)},Z=e.useCallback(()=>{ne()},[ne]);e.useEffect(()=>{if(n===ze.Popup||n===ze.Extended){const ee=oe=>{if(n===ze.Popup&&T.current&&T.current.element){const ce=!gt(oe.target,".sf-popup"),x=T.current.element.classList.contains(El);ce&&x&&G(!1)}};return document.addEventListener("click",ee),document.addEventListener("scroll",ee,!0),()=>{document.removeEventListener("click",ee),document.removeEventListener("scroll",ee,!0)}}},[n]),e.useEffect(()=>{E(C)},[C,E]),e.useEffect(()=>{G(ee=>ee!==d?d:ee)},[d]),e.useEffect(()=>{m()},[R,m]),e.useLayoutEffect(()=>{s.current&&i&&!N&&(Q.current(),L(!0))},[i,N]),e.useEffect(()=>{if(s.current){let ee=!0;return c.current||(c.current=new ResizeObserver(()=>{if(ee){ee=!1;return}Q.current()}),c.current.observe(s.current)),()=>{var oe;(oe=c.current)==null||oe.disconnect(),c.current=null}}},[]),e.useLayoutEffect(()=>{M&&(ve(),U(),G(ee=>ee&&O.current.length<=0?!1:ee),X(!1))},[M,ve,U]),e.useLayoutEffect(()=>{if(!N)return;const ee=h.length;if(v.current!==ee){v.current=ee,D.current=[...h],O.current=[],B([...D.current]),b([]),G(!1),L(!1);return}const ce=new Map(h.map(V=>[V.key,V])),x=V=>V.map(z=>ce.get(z.key)||z);B(x),b(x)},[h,N]),e.useImperativeHandle(r,()=>({refreshOverflow:Z}),[Z]);const ie=e.useMemo(()=>{const ee=[Hn];return k.length>0&&ee.push(Rl),ee.join(" ")},[k]),re=e.useMemo(()=>{const ee=[gl];return n===ze.Extended&&ee.push(yl),C&&ee.push(Tl),ee.join(" ")},[n,C]),Se=e.useMemo(()=>{const ee=[Cl];return n===ze.Extended&&ee.push(vl),u&&ee.push(u),M&&ee.push(Dl),ee.join(" ")},[n,u,M]);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ie,children:R}),k.length>0&&a.jsx("div",{ref:P,className:re,tabIndex:0,role:"button","aria-haspopup":"true","aria-label":"overflow","aria-expanded":C?"true":"false",onClick:w,children:a.jsx("div",{className:`${C?pl:hl} ${bl}`,children:C?a.jsx(Hs,{}):a.jsx(Xn,{})})}),k.length>0&&a.jsx(At,{ref:T,className:Se,relateTo:s.current,offsetY:t===et.Vertical?0:y(),open:C,onOpen:I,onClose:q,targetType:"container",collision:{Y:f?st.None:st.None,X:st.None},position:A==="rtl"?{X:"left",Y:"top"}:{X:"right",Y:"top"},width:n===ze.Extended&&t===et.Horizontal?S():void 0,offsetX:n===ze.Extended&&t===et.Horizontal?0:void 0,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},style:se,onClick:ue,children:k})]})}));no.displayName="ToolbarPopup";var ze;(function(o){o.Scrollable="Scrollable",o.Popup="Popup",o.MultiRow="MultiRow",o.Extended="Extended"})(ze||(ze={}));const wl="sf-toolbar",Nl="sf-toolbar-vertical",Sl="sf-toolbar-items",xl="sf-rtl",Es="sf-hscroll-nav",hn="sf-toolbar-hor-nav",dr="sf-toolbar-popup-items",Al="sf-toolbar-extended",Ol="sf-toolbar-multirow",Ll="sf-tbar-extended",Il="sf-toolbar-popup",ro=e.memo(e.forwardRef((o,r)=>{const{keyboardNavigation:s=!0,children:t,className:n="",collision:i=!0,orientation:l=et.Horizontal,overflowMode:u=ze.Scrollable,scrollStep:f=void 0,...d}=o,E=e.useRef(null),m=e.useRef({toolbar:[],popup:[]}),g=e.useRef(null),h=e.useRef(null),c=e.useRef(null),{dir:v}=$e(),[D,O]=e.useState(!1),[P,T]=e.useState(!1),A=e.useCallback(_=>_.hasAttribute("disabled")||_.getAttribute("aria-disabled")==="true"||_.classList.contains("sf-disabled"),[]),R=e.useCallback((_,U,ne)=>{if(!_.length)return-1;const Q=_.length;let J=U,Ne=0;for(;Ne<Q;){if(J=(J+ne+Q)%Q,!A(_[J]))return J;Ne++}return-1},[A]),B=e.useCallback(()=>{if(s&&E.current){const _=Q=>E.current?Array.from(E.current.querySelectorAll(`.${Q} .sf-btn`)):[];m.current.toolbar=_(Sl),(u===ze.Extended||u===ze.Popup)&&(m.current.popup=_(dr));let U=0;g.current&&(U=m.current.toolbar.indexOf(g.current),U=U===-1?0:U);const ne=[...m.current.toolbar,...m.current.popup];U>=0&&U<ne.length&&A(ne[U])&&(U=R(ne,-1,1)),ne.forEach((Q,J)=>{Q.tabIndex=J===U?0:-1,J===U&&(g.current=Q)})}},[s,u,A,R]),k=e.useCallback(_=>{const U=!!gt(_,"."+dr);return{isToolbar:!U,items:U?m.current.popup:m.current.toolbar,currentIndex:U?m.current.popup.indexOf(_):m.current.toolbar.indexOf(_)}},[]),b=e.useCallback(_=>!Be(gt(_,"."+dr)),[]),N=e.useCallback(_=>!Be(gt(_,"."+hn)),[]),L=e.useCallback((_,U)=>{const ne=U?m.current.toolbar:m.current.popup;if(_>-1&&_<ne.length){ne.forEach(J=>{J.tabIndex=-1});const Q=ne[parseInt(_.toString(),10)];Q.tabIndex=0,Q.focus(),U&&(g.current=Q)}},[]),C=e.useCallback((_,U)=>{const{isToolbar:ne,items:Q,currentIndex:J}=k(_);if(!Q.length)return;let Ne;switch(U){case"next":Ne=R(Q,J,1);break;case"previous":Ne=R(Q,J,-1);break;case"first":Ne=R(Q,-1,1);break;case"last":Ne=R(Q,Q.length,-1);break}Ne!==-1&&L(Ne,ne)},[k,L,R]),G=e.useCallback((_,U)=>{if(l===et.Horizontal){const ne=_.classList.contains(hn),Q=_.classList.contains(Es);if(U==="ArrowRight"&&E.current===_){L(0,!0);return}(U==="ArrowRight"||U==="ArrowLeft")&&!ne&&!Q&&C(_,U==="ArrowRight"?"next":"previous")}},[L,C,l]),M=e.useCallback((_,U)=>{const ne=l===et.Vertical,Q=b(_),J=N(_);U==="ArrowUp"&&!J&&(ne||Q)?C(_,"previous"):U==="ArrowDown"&&(J&&P&&m.current.popup.length>0?L(0,!1):(ne||Q)&&C(_,"next"))},[b,N,P,L,C,l]),X=e.useCallback((_,U)=>{C(_,U==="Home"?"first":"last")},[C]),se=e.useCallback(_=>{const U=_.classList.contains(hn),ne=_.classList.contains(Es),Q=E.current;if(!ne&&!U&&Q===_&&m.current.toolbar)if(g.current&&!A(g.current))g.current.focus();else{const J=R(m.current.toolbar,-1,1);J!==-1&&L(J,!0)}},[L,A,R]),fe=e.useCallback(_=>{_.classList.contains(hn)&&T(ne=>!ne)},[]),pe=e.useCallback(()=>{u===ze.Popup&&P&&T(!1)},[P,u]),K=e.useCallback(_=>{if(!E.current||!s||["INPUT","TEXTAREA","SELECT"].includes(_.target.tagName))return;const U=_.target;_.preventDefault();const Q={ArrowRight:()=>G(U,_.key),ArrowLeft:()=>G(U,_.key),ArrowUp:()=>M(U,_.key),ArrowDown:()=>M(U,_.key),Home:()=>X(U,_.key),End:()=>X(U,_.key),Tab:()=>se(U),Enter:()=>fe(U),Escape:()=>pe()}[_.key];Q&&Q()},[s,G,M,X,se,fe,pe]),H=e.useCallback(_=>{if(!s||["INPUT","TEXTAREA","SELECT"].includes(_.target.tagName))return;const U=u===ze.Popup&&P;_.key==="Tab"&&_.target.classList.contains(hn)&&U&&T(!1),(_.key==="ArrowDown"||_.key==="ArrowUp"||_.key==="End"||_.key==="Home")&&_.preventDefault()},[s,u,P]),y=e.useCallback(_=>{T(_)},[]),S=e.useCallback(()=>{u===ze.Scrollable&&h.current?h.current.refreshOverflow():(u===ze.Popup||u===ze.Extended)&&c.current&&c.current.refreshOverflow()},[u]);e.useLayoutEffect(()=>{Ot("toolbar"),O(!0)},[]);const I=e.useMemo(()=>{const _=["sf-control",wl,"sf-lib"];switch(v==="rtl"&&_.push(xl),u){case ze.MultiRow:_.push(Ol);break;case ze.Popup:_.push(Il);break;case ze.Extended:_.push(Al),P&&_.push(Ll);break}return l===et.Vertical&&_.push(Nl),n&&_.push(n),_.join(" ")},[n,v,l,P,u]),q={keyboardNavigation:s,collision:i,orientation:l,overflowMode:u,scrollStep:f};return e.useImperativeHandle(r,()=>({...q,refreshOverflow:S,element:E.current})),a.jsx("div",{ref:E,className:I,role:"toolbar","aria-orientation":l.toLowerCase(),onKeyDown:H,onKeyUp:K,...d,children:(()=>{switch(u){case ze.Scrollable:return a.jsx(eo,{ref:h,toolbarRef:E,orientation:l,scrollStep:f,onOverflowChange:B,className:n,children:t},`scrollable-${l}-toolbar`);case ze.MultiRow:return a.jsx(Js,{onOverflowChange:B,children:t});case ze.Popup:case ze.Extended:return a.jsx(no,{ref:c,toolbarRef:E,isToolbarRefReady:D,orientation:l,overflowMode:u,collision:i,isPopupVisible:P,onPopupOpenChange:y,onOverflowChange:B,className:n,children:t},`${u===ze.Popup?"popup":"extended"}-${l}-toolbar`)}})()})}));ro.displayName="Toolbar";const so=e.forwardRef((o,r)=>{var w,Z,ie;const{children:s,className:t="",icon:n,iconPosition:i=Xe.Left,items:l=[],popupWidth:u="auto",animation:f={show:{name:"SlideDown",duration:100,timingFunction:"ease"},hide:{name:"SlideUp",duration:100,timingFunction:"ease"}},disabled:d=!1,lazyOpen:E=!1,itemTemplate:m,target:g,relateTo:h,color:c,variant:v,size:D=Ut.Medium,onClose:O,onOpen:P,onSelect:T,...A}=o,R=e.useRef(null),B=e.useRef(null),k=e.useRef(null),b=e.useRef([]),[N,L]=e.useState(null),[C,G]=e.useState(!1),[M,X]=e.useState(l),{dir:se}=$e(),[fe,pe]=e.useState(!1);e.useEffect(()=>{pe(!0)},[]);const K=e.useRef(!0),H=e.useCallback((re,Se)=>{re.disabled||(G(!1),T&&T({event:Se,item:re}))},[T]),y=(re,Se)=>{K&&Se(ee=>re.length!==ee.length||re.some((ce,x)=>{const V=ee[x];return ce.id!==(V==null?void 0:V.id)||ce.text!==(V==null?void 0:V.text)||ce.url!==(V==null?void 0:V.url)||ce.disabled!==(V==null?void 0:V.disabled)||typeof ce.icon=="string"?ce.icon!==(V==null?void 0:V.icon):!e.isValidElement(ce.icon)})?re:ee)};e.useEffect(()=>(y(l,X),()=>{K.current=!1}),[l]),e.useEffect(()=>{Ot("dropDownButton")},[]);const S=e.useMemo(()=>M.map((re,Se)=>!re.disabled&&!re.hasSeparator?Se:-1).filter(re=>re>=0),[M]),I=e.useCallback((re,Se)=>{const ee=S.length;if(!ee)return-1;const oe=S.indexOf(re);if(oe<0)return S[Se?0:ee-1];const ce=(oe+(Se?1:-1)+ee)%ee;return S[ce]},[S]),q=e.useCallback(re=>re!=null&&S.includes(re)?re:null,[S]),_=e.useCallback(re=>{var ee;const Se=q(re);L(Se),Se!=null&&((ee=b.current[Se])==null||ee.focus())},[q]);e.useEffect(()=>{L(re=>q(re))},[M,q]),e.useEffect(()=>{const re=ee=>{var V,z;const oe=(V=R.current)==null?void 0:V.element,ce=(z=B.current)==null?void 0:z.element,x=ee.target;oe&&ce&&!oe.contains(x)&&!ce.contains(x)&&(G(!1),O&&C&&O(ee))},Se=ee=>{var oe,ce;((ee.altKey||ee.metaKey)&&ee.key==="ArrowUp"||ee.key==="Escape"||ee.key==="Esc")&&(ee.preventDefault(),ee.stopPropagation(),G(!1),O==null||O(ee),(ce=(oe=R.current)==null?void 0:oe.element)==null||ce.focus())};return C&&(document.addEventListener("mousedown",re),document.addEventListener("keydown",Se)),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("keydown",Se)}},[C,O]);const U={iconPosition:i,icon:n,target:g,popupWidth:u,items:l,lazyOpen:E,relateTo:h,itemTemplate:m,color:c,variant:v,size:D},ne=((w=f.show)==null?void 0:w.name)!==void 0?{name:(Z=f.show)==null?void 0:Z.name,duration:f.show.duration,timingFunction:f.show.timingFunction}:null,Q=re=>{var Se,ee;if(C)G(!1),O&&O(re);else{if(ne){const ce=Zt(ne);if(ce.animate){const x=(ee=(Se=B.current)==null?void 0:Se.element)==null?void 0:ee.children[0];x&&ce.animate(x,{begin:V=>{const z=V==null?void 0:V.element;if(z&&z.parentElement){const te=z.parentElement,he=te.style.display;te.style.display="block",te.style.maxHeight=te.offsetHeight+"px",te.style.display=he}}})}}G(!0),P&&P(re);const oe=q(N);_(oe)}};e.useImperativeHandle(r,()=>{var re;return{...U,toggle:Q,element:(re=R.current)==null?void 0:re.element}},[U]);const J=e.useCallback(re=>{var Se,ee,oe,ce;switch(re.key){case"ArrowDown":{if(re.preventDefault(),re.stopPropagation(),re.altKey||re.metaKey)Q(re);else{const x=I(N??-1,!0);_(x)}break}case"ArrowUp":{if(re.preventDefault(),re.stopPropagation(),re.altKey||re.metaKey)G(!1),O==null||O(re),(ee=(Se=R.current)==null?void 0:Se.element)==null||ee.focus();else{const x=I(N??-1,!1);_(x)}break}case"Home":{C&&(re.preventDefault(),_(S[0]??null));break}case"End":{C&&(re.preventDefault(),_(S[S.length-1]??null));break}case"Enter":case" ":{if(re.preventDefault(),C){const x=q(N);x!=null&&H(M[x],re)}else Q(re);break}case"Escape":case"Esc":{re.preventDefault(),C&&(G(!1),O==null||O(re),(ce=(oe=R.current)==null?void 0:oe.element)==null||ce.focus());break}}},[C,N,S,I,q,Q,G,O,R,_,H,M]),Ne=e.useCallback(re=>{if(m)return m(re);const Se=a.jsxs(a.Fragment,{children:[re.icon&&a.jsx("span",{className:"sf-menu-icon",children:typeof re.icon=="string"?a.jsx("span",{className:re.icon}):re.icon}),a.jsx("span",{children:re.text})]});return re.url?a.jsx("a",{href:re.url,className:"sf-menu-link",children:Se}):Se},[m]),ve=e.useCallback((re,Se)=>{Se.stopPropagation();const ee=Se.currentTarget,oe=b.current.findIndex(ce=>ce===ee);_(oe),H(re,Se)},[H,_]),ue=e.useCallback(()=>a.jsx("ul",{role:"menu",tabIndex:0,"aria-label":"dropdown menu",ref:k,onKeyDown:J,onMouseDown:re=>re.preventDefault(),children:M.map((re,Se)=>{const ee=N===Se,oe=`sf-item sf-ellipsis ${re.hasSeparator?"sf-separator":""} ${re.disabled?"sf-disabled":""} ${ee?"sf-focused":""}`;return a.jsx("li",{ref:ce=>{b.current[Se]=ce},className:oe,role:re.hasSeparator?"separator":"menuitem","aria-label":re.text,"aria-disabled":re.disabled?"true":"false",onClick:re.disabled||re.hasSeparator?void 0:ce=>ve(re,ce),children:!re.hasSeparator&&Ne(re)},re.id||`item-${Se}`)})}),[M,Ne,ve,N,_,J]);return a.jsxs(a.Fragment,{children:[a.jsx(Ze,{ref:R,className:`${t} sf-dropdown-btn sf-drp-btn-${D.toLowerCase().substring(0,2)} ${C?"sf-active":""}`,icon:n,color:c,dropIcon:!0,variant:v,size:D,iconPosition:i,disabled:d,onKeyDown:J,onClick:re=>{re.preventDefault(),Q(re)},"aria-haspopup":"true","aria-expanded":C?"true":"false",...A,children:s}),fe&&(C||!E)&&typeof document<"u"&&Yt.createPortal(a.jsx(At,{open:C,ref:B,targetRef:g||R.current,relateTo:h||((ie=R.current)==null?void 0:ie.element),position:{X:"left",Y:"bottom"},animation:f,collision:se==="rtl"?{X:st.Fit,Y:st.Flip}:{X:st.Flip,Y:st.Flip},width:u,className:`sf-dropdown-popup sf-drp-btn-${D.toLowerCase().substring(0,2)} ${u!=="auto"?"sf-dropdown-popup-width":""}`,onClose:()=>{var re;G(!1),(re=R.current)!=null&&re.element&&R.current.element.focus()},onOpen:()=>{var re;(re=k.current)==null||re.focus()},children:ue()}),document.body)]})});e.memo(so);const oo=o=>{const{onClick:r,ariaLabel:s,title:t,disabled:n=!1,icon:i=a.jsx(jo,{}),text:l,color:u,variant:f,className:d}=o,{locale:E}=$e(),{getString:m}=tt(E||"en-US");return xe.isDevice?a.jsx(Ze,{icon:i,color:u||Tt.Secondary,variant:f||qe.Standard,className:d||p.TODAY_BUTTON,onClick:r,"aria-label":s||m("today"),title:t||m("today"),disabled:n}):a.jsx(Ze,{icon:i,variant:f||qe.Outlined,color:u||Tt.Secondary,className:d||p.TODAY_BUTTON,onClick:r,"aria-label":s||m("today"),title:t,disabled:n,children:l||m("today")})},io=o=>{const{onClick:r,ariaLabel:s,title:t,disabled:n=!1,icon:i=a.jsx(Ls,{}),color:l,variant:u,className:f}=o,{locale:d}=$e(),{getString:E}=tt(d||"en-US");return a.jsx(Ze,{className:f||p.PREVIOUS_ICON,icon:i,color:l||Tt.Secondary,variant:u||qe.Standard,onClick:r,"aria-label":s||E("previous"),title:t,disabled:n})},lo=o=>{const{onClick:r,ariaLabel:s,title:t,disabled:n=!1,icon:i=a.jsx(Os,{}),color:l,variant:u,className:f}=o,{locale:d}=$e(),{getString:E}=tt(d||"en-US");return a.jsx(Ze,{className:f||p.NEXT_ICON,icon:i,color:l||Tt.Secondary,variant:u||qe.Standard,onClick:r,"aria-label":s||E("next"),title:t,disabled:n})},kl=(o,r)=>{const{onClick:s,ariaLabel:t,title:n,disabled:i=!1,dateRangeContent:l,showCalendar:u=!1,ariaExpanded:f,color:d,variant:E,icon:m=a.jsx(Xn,{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true"}),onKeyDown:g,className:h}=o;return a.jsx(Ze,{ref:r,onClick:c=>{c.stopPropagation(),s==null||s(c)},"aria-haspopup":"dialog","aria-label":t,"aria-expanded":f!==void 0?f:u,className:h||p.DATEPICKER_BUTTON,color:d||Tt.Secondary,variant:E||qe.Standard,iconPosition:Xe.Right,title:n,disabled:i,onKeyDown:g,icon:m,children:l})},Pr=e.forwardRef(kl);Pr.displayName="DateRangeButton";const co=o=>{var m;const{items:r,currentView:s,onSelect:t,ariaLabel:n,title:i,disabled:l=!1,className:u,variant:f=qe.Outlined,color:d=Tt.Secondary}=o,E=((m=r.find(g=>g.id===s))==null?void 0:m.text)||s;return a.jsx("div",{onClick:g=>g.stopPropagation(),children:a.jsx(so,{items:r,variant:f,className:u||p.VIEW_BUTTON,color:d,onSelect:t,"aria-label":n,title:i,disabled:l,children:E})})};oo.displayName="TodayButton";io.displayName="PreviousButton";lo.displayName="NextButton";co.displayName="ViewButton";const _l=({view:o,availableViews:r,onViewButtonClick:s,onPreviousClick:t,onNextClick:n,onTodayClick:i,onDateDropdownClick:l,dateRangeText:u,showCalendar:f=!1,selectedDate:d=new Date,firstDayOfWeek:E=0,calendarView:m=Wn.Month,handleCalendarChange:g,renderDates:h,customizeHeader:c})=>{var G,M;const v=e.useRef(null),D=e.useRef(null);kr(D,!!f,()=>{f&&l&&l()});const O=(r||[]).map(X=>({id:X.name,text:X.displayName})),P=e.useCallback(X=>{var fe;const se=(fe=X.item)==null?void 0:fe.id;se&&s(se)},[s]),T=O.map(X=>`${X.id}:${X.text}`).join("|"),R=h&&h.length>=2?`${(G=h[0])==null?void 0:G.toDateString()} - ${(M=h[h.length-1])==null?void 0:M.toDateString()}`:u;let B=u;const k=X=>[X.today,X.previous,X.next,X.dateRange,a.jsx(_r,{},"spacer"),X.viewSwitcher].filter(Boolean),b=X=>{var se;return{today:(X==null?void 0:X.todayProps)!==null&&a.jsx(Bt,{children:a.jsx(oo,{onClick:i,...(X==null?void 0:X.todayProps)||{}})},"today"),previous:(X==null?void 0:X.previousProps)!==null&&a.jsx(Bt,{children:a.jsx(io,{onClick:t,...(X==null?void 0:X.previousProps)||{}})},"previous"),next:(X==null?void 0:X.nextProps)!==null&&a.jsx(Bt,{children:a.jsx(lo,{onClick:n,...(X==null?void 0:X.nextProps)||{}})},"next"),dateRange:(X==null?void 0:X.dateRangeProps)!==null&&a.jsx(Bt,{children:a.jsx(Pr,{ref:v,onClick:l,ariaLabel:R,dateRangeContent:B,showCalendar:f,onKeyDown:fe=>{fe.key==="Escape"&&f&&(l==null||l())},...(X==null?void 0:X.dateRangeProps)||{}})},"dateRange"),viewSwitcher:(X==null?void 0:X.viewSwitcherProps)!==null&&((r==null?void 0:r.length)??0)>1&&a.jsx(Bt,{children:a.jsx(co,{items:O,currentView:o,onSelect:P,ariaLabel:((se=r==null?void 0:r.find(fe=>fe.name===o))==null?void 0:se.displayName)??o,...(X==null?void 0:X.viewSwitcherProps)||{}})},"viewSwitcher")}};let N,L=ze.Popup;const C=b();if(c){const X=c({}),se=e.isValidElement(X)?X.props:{},fe=b(se),pe={overflowMode:(se==null?void 0:se.overflowMode)??ze.Popup,today:fe.today,previous:fe.previous,next:fe.next,dateRange:fe.dateRange,viewSwitcher:fe.viewSwitcher,children:k(fe)},K=c(pe);if(K&&e.isValidElement(K)){const H=K.props;if(L=(H==null?void 0:H.overflowMode)??ze.Popup,H!=null&&H.dateRangeTemplate&&h&&h.length>=2&&(B=H.dateRangeTemplate({startDate:h[0],endDate:h[h.length-1],view:o})),H!=null&&H.children)H.children===pe.children?N=k(b(H)):N=H.children;else{const y=b(H);N=k(y)}}else N=k(C)}else N=k(C);return a.jsxs("div",{ref:D,className:p.SCHEDULER_TOOLBAR_CONTAINER,children:[a.jsx(ro,{overflowMode:L,style:{width:"auto"},children:N},`tb-${T}-${u}`),f&&v.current&&a.jsx(At,{open:!0,relateTo:v.current.element,position:{X:"left",Y:"bottom"},collision:{X:st.Fit,Y:st.None},actionOnScroll:Is.Hide,onClose:l,className:p.CALENDAR_POPUP_CONTAINER,viewPortElementRef:D,onKeyDown:X=>{X.key==="Escape"&&(l==null||l())},children:a.jsx(Ho,{className:p.SCHEDULER_CALENDAR,value:d,onChange:g,showTodayButton:!0,firstDayOfWeek:E,start:m,depth:m})})]})};Pr.__docgenInfo={description:"DateRange button component",methods:[],displayName:"DateRangeButton"};const ao=(o,r,s)=>{const[t,n]=e.useState(!1),[i,l]=e.useState(null),u=Pl(t),f=e.useRef(null),d=e.useRef(null),E=e.useRef(null),m=e.useRef(null),g=e.useCallback(()=>{n(!1)},[s]);uo(g),e.useEffect(()=>{i&&(d.current=i.closest(".sf-scheduler"))},[i]);const h=e.useCallback(A=>{u&&typeof u=="object"&&"current"in u&&(u.current=A),f.current=A},[u]),c=e.useCallback(()=>{var A,R;(A=E.current)==null||A.hide(),(R=m.current)==null||R.hide()},[]),v=e.useCallback((A,R)=>{var B;(B=E.current)==null||B.handleCellClick(A,R)},[]),D=e.useCallback((A,R)=>{var B;(B=E.current)==null||B.handleEventClick(A,R)},[]),O=e.useCallback(()=>{c()},[]),P=e.useCallback(A=>{o&&o(A),!A.cancel&&A&&A.element&&(A.nativeEvent&&A.nativeEvent.stopPropagation(),v(A,A.element))},[o,v]),T=e.useCallback(A=>{r&&r(A),!A.cancel&&A&&A.data&&A.event.currentTarget&&D(A.data,A.event.currentTarget)},[r,D]);return{visible:t,setVisible:n,target:i,setTarget:l,containerRef:u,popupElement:f,schedulerElement:d,handleClose:g,handleRef:h,cellEditRef:E,eventEditRef:m,handleCellClick:v,handleEventClick:D,handleEditEvent:O,closeAllPopups:c,onCellClickHandler:P,onEventClickHandler:T}},uo=o=>{e.useEffect(()=>{const r=s=>{s.key==="Escape"&&o()};return document==null||document.addEventListener("keydown",r),()=>{document==null||document.removeEventListener("keydown",r)}},[o])},Pl=o=>{const r=e.useRef(null),s=e.useRef(null);return e.useEffect(()=>{if(o&&r.current){s.current=document==null?void 0:document.activeElement;const t=r.current.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'),n=t[0],i=t[t.length-1],l=u=>{i&&(document==null?void 0:document.activeElement)===i&&!u.shiftKey&&(u.preventDefault(),n.focus()),n&&(document==null?void 0:document.activeElement)===n&&u.shiftKey&&(u.preventDefault(),i.focus())};return document==null||document.addEventListener("keydown",l),()=>{var u;document==null||document.removeEventListener("keydown",l),(u=s.current)!=null&&u.focus&&s.current.focus()}}return()=>{}},[o]),r};class at{static calculateEventPosition(r,s,t,n){const i=r.event.isAllDay&&r.event.isBlock?"0px":this.calculateTopPosition(r.startDate,s,t),l=this.calculateHeight(r,s,t,n);let u=96,f=r.event.isBlock?"1px":"0%";r.totalOverlapping>1&&(u=(u-r.totalOverlapping)/r.totalOverlapping,f=`${r.positionIndex*u+r.positionIndex}%`);const d=r.event.isBlock?"calc(100% - 2px)":`${u}%`;return{top:i,height:l,width:d,left:f}}static getOverflowDirection(r,s,t,n){var h,c;if(!r.totalSegments&&!t&&!n||!((h=r.event)!=null&&h.startTime)||!((c=r.event)!=null&&c.endTime)||!(s!=null&&s.length))return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:!1,isOverflowBottom:!1};const i=F.normalizeDate(r.event.startTime),l=F.normalizeDate(r.event.endTime),u=F.normalizeDate(s[0]),f=F.normalizeDate(s[s.length-1]);let d=r.isFirstDay===!1,E=r.isLastDay===!1;if(!i||!l||!u||!f)return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:d,isOverflowBottom:E};const m=i.getTime()<u.getTime(),g=l.getTime()>f.getTime();return t&&n&&(i.setHours(t[0],t[1],0,0),l.setHours(n[0],n[1],0,0),!d&&i>r.event.startTime&&(d=!0),!E&&l<r.event.endTime&&(E=!0)),{isOverflowLeft:m,isOverflowRight:g,isOverflowTop:d,isOverflowBottom:E}}static calculatePositionStyles(r,s,t,n,i){return r.totalSegments?{top:`${r.positionIndex*(Yn+gn)}px`,width:this.calculateEventWidth(r,s)}:!r.event.isBlock&&r.positionIndex!==void 0&&(r.event.isAllDay||r.isMonthEvent)?{top:`${r.positionIndex*(Yn+gn)}px`}:t&&n&&i?this.calculateEventPosition(r,t,n,i):{}}static calculateTopPosition(r,s,t){const n=F.getStartEndHours(t),i=n.getHours()*Ge+n.getMinutes(),u=r.getHours()*Ge+r.getMinutes()-i,d=Ts/(s.interval/s.slotCount),E=u*d;return`${Math.max(0,E)}px`}static calculateHeight(r,s,t,n){const i=new Date(r.startDate),l=new Date(r.endDate);r.event.isBlock&&r.event.isAllDay&&(i.setHours(0,0,0,0),l.setDate(l.getDate()+1),l.setHours(0,0,0,0));const u=s.interval/s.slotCount,{schedulerStartMinutes:f,schedulerEndMinutes:d}=F.getSchedulerStartAndEndMinutes(t,n),E=i.getHours()*Ge+i.getMinutes(),m=Math.max(E,f),g=d-m;let h;if(F.isSameDay(i,l)){const v=i.getDate()!==l.getDate()?$o:l.getHours()*Ge+l.getMinutes();h=(Math.min(v,d)-m)/u;const O=Math.ceil(g/u);h=Math.min(h,O)}else h=Math.min(g/u);let c=Math.round(h*Ts-2);return c=c>0?c:1,`${c}px`}static calculateEventWidth(r,s){const t=F.normalizeDate(r.event.startTime),n=F.normalizeDate(r.event.endTime),i=F.normalizeDate(s[0]),l=F.normalizeDate(s[s.length-1]),{isOverflowLeft:u,isOverflowRight:f}=this.getOverflowDirection(r,s);if(s.length<=7){const{visibleDayCount:d,startDayIndex:E}=F.getVisibleAndStartDays(s,t,n,r.event);if(d>0&&E!==-1)return`calc(${d*100}% - 4px)`}if(u&&f)return`${s.length*100}%`;if(u){const d=n.getTime()<=l.getTime()?n:l;return`${(Math.floor((d.getTime()-i.getTime())/pr)+1)*100}%`}else return f?`${(Math.floor((l.getTime()-t.getTime())/pr)+1)*100}%`:`${r.totalSegments?r.totalSegments*100:100}%`}static setIndexPosition(r,s,t){const n=F.generateDateKey(s),i=r.get(n)||[];for(;i.length<=t;)i.push(!1);return i.splice(t,1,!0),r.set(n,i),r}}const zn=o=>{const r=o.closest(".sf-scheduler");if(r){const s=r.querySelector("."+p.SELECTED_CELL);s&&(s.classList.remove(p.SELECTED_CELL),s.removeAttribute("tabindex"))}o.classList.add(p.SELECTED_CELL),o.tabIndex=0,o.focus()},yr=(o,r,s)=>{if(!o||r<0||s<0)return null;const n=o.querySelectorAll(`.${p.WORK_CELLS_ROW}`).item(r);return n?n.querySelectorAll(`.${p.WORK_CELLS}`).item(s)??null:null},qn=o=>{const r=o.closest("."+p.SCHEDULER);r&&(r.querySelectorAll("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE).forEach(t=>{t.classList.remove(p.APPOINTMENT_ACTIVE)}),zn(r)),o.classList.add(p.APPOINTMENT_ACTIVE)},gs=(o,r)=>{const s=r.querySelector("."+p.APPOINTMENT+"."+p.APPOINTMENT_ACTIVE),t=s==null?void 0:s.getAttribute("data-guid");return{data:Me.getEventByGuid(o,t),element:s}},Ml=o=>{var t,n;let r;const s=((t=o==null?void 0:o.getAttribute)==null?void 0:t.call(o,"data-date"))??((n=o.dataset)==null?void 0:n.date)??void 0;if(s){const i=parseInt(s,10);r=new Date(i)}return r},Hl=(o,r)=>{const s=Array.isArray(o)?o==null?void 0:o[0]:o,n=s.classList.contains(p.ALL_DAY_CELL)||s.classList.contains(p.WORK_DAYS)||!((r==null?void 0:r.enable)??!0),i=Ml(s);let l;if(n)i&&(l=F.addDays(i,1));else if(i&&r){const u=r.interval/r.slotCount,f=new Date(i);f.setMinutes(f.getMinutes()+u),l=f}return{startTime:i,endTime:l??i,isAllDay:n,element:s}},Yn=24,gn=4,Ts=40;class Me{static filterEventsByDateRange(r,s){if(!(r!=null&&r.length)||!(s!=null&&s.length))return[];const t=F.normalizeDate(s[0]),n=F.normalizeDate(s[s.length-1]);return r.filter(i=>{if(!i.startTime||!i.endTime)return!1;const l=F.normalizeDate(i.startTime);return!(F.normalizeDate(i.endTime)<t||l>n)})}static findNonConflictingPosition(r,s,t,n,i){let l=0,u=!1;for(;!u;){u=!0;for(const f of r){const d=F.normalizeDate(f);if(d>=s&&(d<t||d.getTime()===t.getTime()&&n)){const m=F.generateDateKey(f);if((i.get(m)||[]).findIndex((c,v)=>v===l&&c)!==-1){u=!1,l++;break}}}}return l}static mapEventData(r,s){if(!r||r.length===0)return[];const t=s||{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock",recurrenceRule:"RecurrenceRule",recurrenceID:"RecurrenceID",recurrenceException:"RecurrenceException"};return r.map(n=>{const i={};if(t.id&&Object.prototype.hasOwnProperty.call(n,t.id)&&(i.id=n[t.id]),t.subject&&Object.prototype.hasOwnProperty.call(n,t.subject)&&(i.subject=n[t.subject]),t.startTime&&Object.prototype.hasOwnProperty.call(n,t.startTime)){const f=n[t.startTime];f instanceof Date?i.startTime=f:(typeof f=="string"||typeof f=="number")&&(i.startTime=new Date(f))}if(t.endTime&&Object.prototype.hasOwnProperty.call(n,t.endTime)){const f=n[t.endTime];f instanceof Date?i.endTime=f:(typeof f=="string"||typeof f=="number")&&(i.endTime=new Date(f))}t.isAllDay&&Object.prototype.hasOwnProperty.call(n,t.isAllDay)&&(i.isAllDay=n[t.isAllDay]),t.location&&Object.prototype.hasOwnProperty.call(n,t.location)&&(i.location=n[t.location]),t.description&&Object.prototype.hasOwnProperty.call(n,t.description)&&(i.description=n[t.description]),t.isReadonly&&Object.prototype.hasOwnProperty.call(n,t.isReadonly)&&(i.isReadonly=n[t.isReadonly]),t.isBlock&&Object.prototype.hasOwnProperty.call(n,t.isBlock)&&(i.isBlock=n[t.isBlock]),t.recurrenceRule&&Object.prototype.hasOwnProperty.call(n,t.recurrenceRule)&&(i.recurrenceRule=n[t.recurrenceRule]),t.recurrenceID&&Object.prototype.hasOwnProperty.call(n,t.recurrenceID)&&(i.recurrenceID=n[t.recurrenceID]),t.recurrenceException&&Object.prototype.hasOwnProperty.call(n,t.recurrenceException)&&(i.recurrenceException=n[t.recurrenceException]);const l=new Set(Object.values(t)),u=Object.fromEntries(Object.entries(n).filter(([f])=>!l.has(f)));return Object.assign(i,u),i.guid=Me.generateEventGuid(),i})}static sortEventsByStartTimeAndDuration(r){return[...r].sort((s,t)=>{if(!s.event.startTime||!t.event.startTime)return 0;const n=s.event.startTime.getTime()-t.event.startTime.getTime();if(n!==0)return n;const i=s.event.endTime?s.event.endTime.getTime()-s.event.startTime.getTime():0;return(t.event.endTime?t.event.endTime.getTime()-t.event.startTime.getTime():0)-i})}static calculateOverlappingEvents(r,s=!0){if(!r||r.length===0)return[];if(!s)return this.resolveOverlappingEvents(r);const t=this.sortEventsByStartTimeAndDuration(r);return this.identifyOverlapGroups(t)}static identifyOverlapGroups(r){const s=[];for(const t of r){let n=!1;for(const i of s)if(i.some(u=>this.eventsOverlap(t,u))){i.push(t),n=!0;break}n||s.push([t])}return this.convertOverlapGroupsToEventGroups(s)}static convertOverlapGroupsToEventGroups(r){return r.filter(t=>t.length>0).map(t=>{if(t.length===1)return[{...t[0],positionIndex:0,totalOverlapping:1}];const n=[...t].sort((u,f)=>!u.event.startTime||!f.event.startTime?0:u.event.startTime.getTime()-f.event.startTime.getTime()),i=[],l=[];return n.forEach(u=>{let f=i.findIndex(d=>d<=u.event.startTime);f===-1?(f=i.length,i.push(u.event.endTime)):i[parseInt(f.toString(),10)]=u.event.endTime,l.push(f)}),n.map((u,f)=>({...u,positionIndex:l[parseInt(f.toString(),10)],totalOverlapping:i.length}))})}static prioritizeEvents(r){return[...r].sort((s,t)=>{if(s.event.isAllDay&&!t.event.isAllDay)return-1;if(!s.event.isAllDay&&t.event.isAllDay)return 1;if(!s.event.startTime||!t.event.startTime||!s.event.endTime||!t.event.endTime)return 0;const n=s.event.endTime.getTime()-s.event.startTime.getTime(),i=t.event.endTime.getTime()-t.event.startTime.getTime();return n!==i?i-n:s.event.startTime.getTime()-t.event.startTime.getTime()})}static resolveOverlappingEvents(r){if(!r||r.length===0)return[];const s=this.prioritizeEvents(r),t=[],n=new Set;return s.forEach(i=>{if(n.has(i))return;const l=s.filter(f=>i!==f&&!n.has(f)&&this.eventsOverlap(i,f)),u=[{...i,positionIndex:0,totalOverlapping:1}];t.push(u),n.add(i),l.forEach(f=>{n.add(f)})}),t}static eventsOverlap(r,s){return!(r!=null&&r.event.startTime)||!(r!=null&&r.event.endTime)||!(s!=null&&s.event.startTime)||!(s!=null&&s.event.endTime)?!1:r.event.startTime<s.event.endTime&&r.event.endTime>s.event.startTime||s.event.startTime<r.event.endTime&&s.event.endTime>r.event.startTime}static checkEventOverlap(r,s,t=!0,n){const i=t?r.startTime:r[n.startTime],l=t?r.endTime:r[n.endTime];if(!i||!l)return!1;const u=F.normalizeDate(i),f=F.normalizeDate(l);return(s||[]).filter(E=>{if(E.isBlock||!E.startTime||!E.endTime)return!1;const m=F.normalizeDate(E.startTime);return!(F.normalizeDate(E.endTime)<u||m>f)}).some(E=>{const m=E.startTime,g=E.endTime,h=E.isAllDay;return E.id===r.id||E.id===r.Id||E.guid===r.guid||!m||!g?!1:h?i<=g&&l>=m:i<g&&l>m})}static isBlockRange(r,s,t=!0,n){const i=Array.isArray(r)?r:[r];if(i&&i.length===0)return!1;const l=(s==null?void 0:s.filter(u=>u.isBlock))||[];if(l&&l.length===0)return!1;for(const u of l){const f=u.startTime,d=u.endTime;if(!f||!d)continue;const E=u.isAllDay||Me.isMultiDayEvent(u);for(const m of i){const g=t?m.startTime:m[n.startTime],h=t?m.endTime:m[n.endTime];if(!g||!h)continue;let c;if(E){const v=F.normalizeDate(g),D=F.normalizeDate(h),O=F.normalizeDate(f),P=F.normalizeDate(d);c=v<=P&&O<=D}else c=g<d&&h>f;if(c)return!0}}return!1}static splitEventByDay(r,s){const t=[],n=F.normalizeDate(r.startTime),i=F.normalizeDate(r.endTime),l=s.filter(f=>{const d=F.normalizeDate(f);return d>=n&&d<=i}).length;let u=0;return s.forEach((f,d)=>{const E=F.normalizeDate(f);if(E>=n&&E<=i){const m=E.getTime()===n.getTime(),g=E.getTime()===i.getTime(),h=m?new Date(r.startTime):new Date(E.getFullYear(),E.getMonth(),E.getDate(),0,0,0),c=g?new Date(r.endTime):new Date(E.getFullYear(),E.getMonth(),E.getDate()+1,0,0,0),v={event:r,startDate:h,endDate:c,isFirstDay:m,isLastDay:g,segmentIndex:u,totalSegments:l,columnIndex:d};t.push(v),u++}}),t}static isAlldayHasMoreEvents(r,s,t=2){let n=!1;return r.forEach(i=>{const l=F.generateDateKey(i);(s.get(l)||[]).length>t&&(n=!0)}),n}static isMultiDayEvent(r){if(!(r!=null&&r.startTime)||!(r!=null&&r.endTime))return!1;const s=new Date(r.startTime),t=new Date(r.endTime);if(F.isSameDay(s,t))return!1;if(r.isAllDay)return!0;const n=F.normalizeDate(s),i=F.normalizeDate(t),l=Math.round((i.getTime()-n.getTime())/pr);return l<=0?!1:l>=2?!0:!F.isMidnight(t)}static getAriaLabel(r){const{subject:s,startTime:t,endTime:n}=r,i=t?t.toString():"",l=n?n.toString():"";return`${s} Begin From ${i} Ends At ${l}`}static generateEventGuid(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}static getEventClassNames(r){const s=[];return r.isBlock?s.push("sf-block-appointment"):(s.push("sf-appointment"),r.isReadonly&&s.push("sf-read-only")),s}static getEventsMap(r,s){const t=new Map;return r.forEach(n=>{const i=F.generateDateKey(n);t.set(i,[])}),s.forEach(n=>{if(!n.startDate)return;const i=F.generateDateKey(n.startDate),l=t.get(i)||[];l&&(l.push(n),t.set(i,l))}),t}static getMaxEventsInCell(r,s){let t=0;return s.forEach(n=>{var u;const i=F.generateDateKey(n),l=(u=r.get(i))==null?void 0:u.filter(f=>!f.event.isBlock);t=Math.max(t,l==null?void 0:l.length)}),t}static processDayEvents(r,s){if(!(r!=null&&r.length)||!(s!=null&&s.length))return[];const t=Me.filterEventsByDateRange(s,r),n=[];let i=new Map;return r.forEach(u=>{const f=F.generateDateKey(u);i.set(f,[])}),F.sortByTimeAndSpan(t).forEach(u=>{if(!u.startTime||!u.endTime)return;const f=Me.getEventClassNames(u),d=F.normalizeDate(u.startTime),E=F.normalizeDate(u.endTime),m=Me.isMultiDayEvent(u),g=m?F.getDaysCount(u.startTime,u.endTime,u.isAllDay):1,h=u.isAllDay?!0:!F.isMidnight(u.endTime),c=u.isBlock?null:Me.findNonConflictingPosition(r,d,E,h,i);if(m)for(const v of r){const D=F.normalizeDate(v);if(!(D>=d&&(D<E||D.getTime()===E.getTime()&&h)))continue;u.isBlock||(i=at.setIndexPosition(i,v,c));const P=D.getTime()===d.getTime(),T=D.getTime()===E.getTime()&&h,A=Math.floor((D.getTime()-d.getTime())/(1e3*60*60*24)),R=r.findIndex(N=>{const L=F.normalizeDate(N);return L>=d&&(L<E||L.getTime()===E.getTime()&&h)})===r.findIndex(N=>F.normalizeDate(N).getTime()===D.getTime()),B=P?new Date(u.startTime.getTime()):new Date(D.getFullYear(),D.getMonth(),D.getDate(),0,0,0),k=T?new Date(u.endTime.getTime()):new Date(D.getFullYear(),D.getMonth(),D.getDate()+1,0,0,0),b=`${v.toISOString()}-${u.id}`;n.push({event:u,startDate:B,endDate:k,isFirstDay:P,isLastDay:T,isFirstSegmentInRenderRange:R,segmentIndex:A,totalSegments:g,positionIndex:c,eventClasses:f,eventKey:b,isMonthEvent:!0})}else{u.isBlock||(i=at.setIndexPosition(i,d,c));const v=`${d.toISOString()}-${u.id}`;n.push({event:u,startDate:u.startTime,endDate:u.endTime,positionIndex:c,eventClasses:f,eventKey:v,isMonthEvent:!0})}}),n.sort((u,f)=>{const d=u.positionIndex??0,E=f.positionIndex??0;return d-E})}static cloneEventPosition(r,s,t,n,i=!1,l,u){const f=F.normalizeDate(s.startDate),d=F.normalizeDate(s.endDate),{visibleDayCount:E}=F.getVisibleAndStartDays(s.week,f,d,s.event),m=Math.max(0,t*E-gn);let g,h,c;if(n){const D=r==null?void 0:r.querySelector(`.${p.ALL_DAY_ROW}`);g=D.querySelectorAll(`.${p.ALL_DAY_CELL}`).item(s.columnIndex),h=D.offsetTop}else g=yr(r,s.rowIndex,s.columnIndex),l?h=g.querySelector(`.${p.APPOINTMENT_WRAPPER}`).offsetTop:(h=g==null?void 0:g.offsetTop,c=Math.max(0,u.offsetHeight));const v={top:`${h}px`,width:`${m}px`,height:`${c}px`};if(i){const D=g.parentElement?Math.max(0,g.parentElement.clientWidth-(g.offsetLeft+g.offsetWidth)):0;v.insetInlineStart=`${D}px`}else v.insetInlineStart=`${g.offsetLeft}px`;return v}static splitEventByWeek(r,s){const t=new Date(s.startTime),n=new Date(s.endTime),i=F.normalizeDate(t),l=F.normalizeDate(n),u=[];return r.forEach((f,d)=>{const E=F.normalizeDate(f[0]),m=F.normalizeDate(f[f.length-1]),g=F.addDays(m,1);if(!(t<=g&&n>=E))return;const c=i>=E&&i<=m,v=l>=E&&l<=m,D=c?t:E,O=v?n:g,P=f.map(b=>F.normalizeDate(b).getTime()),T=F.normalizeDate(D).getTime();let A=P.indexOf(T);A===-1&&(A=0);const R=i.getTime()<E.getTime(),B=l.getTime()>m.getTime(),k={event:s,startDate:D,endDate:O,week:f,rowIndex:d,columnIndex:A,isOverflowLeft:R,isOverflowRight:B};u.push(k)}),u}static processCloneEvent(r,s,t,n,i,l,u,f=!1,d,E){const m=u?[s]:F.getRenderWeeks(s,n,i),g=this.splitEventByWeek(m,t),h=Me.isMultiDayEvent(t);return g.forEach(c=>{var v;c.eventStyle=this.cloneEventPosition(r,c,l,u,f,d,E),c.totalSegments=h?F.getDaysCount(c.startDate,c.endDate,(v=c.event)==null?void 0:v.isAllDay):1}),g}static processTimeSlotCloneEvent(r,s,t,n,i,l,u,f=!1){const d=this.splitEventByDay(t,s);return d.forEach(E=>{const m=at.calculateTopPosition(E.startDate,n,i),g=at.calculateHeight(E,n,i,l),h=yr(r,0,E.columnIndex);if(E.eventStyle={top:m,height:g,width:`${u}px`},f){const c=h.parentElement?Math.max(0,h.parentElement.clientWidth-(h.offsetLeft+h.offsetWidth)):0;E.eventStyle.right=`${c}px`}else E.eventStyle.left=`${h.offsetLeft}px`}),d}static getEventByGuid(r,s){if(!(!(r!=null&&r.length)||!s))return r.find(t=>(t==null?void 0:t.guid)===s)}}var Nt;(function(o){o.Left="left",o.Right="right",o.Up="up",o.Down="down"})(Nt||(Nt={}));var kt;(function(o){o.OccurrenceAlert="occurenceAlert",o.SameDayAlert="sameDayAlert"})(kt||(kt={}));function jl(o,r){if(!o||o.length===0||!r||r.length===0)return o;const s=[];for(const t of o)if(t.recurrenceRule&&!t.recurrenceID){const n=$l(t);s.push(...n)}else s.push(t);return s}function $l(o){const r=Vo(o.startTime,o.recurrenceRule,o.recurrenceException,0),s=o.endTime.getTime()-o.startTime.getTime(),t=[];for(let n=0;n<r.length;n++){const i=r[n],l=vt({},o,null,!0);l.startTime=new Date(i),l.endTime=new Date(new Date(i).getTime()+s),l.recurrenceID=l.id,l.guid=Vl(),delete l.recurrenceException,t.push(l)}return t}function Vl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{const r=Math.random()*16|0;return(o==="x"?r:r&3|8).toString(16)})}function fo(o,r,s,t,n,i){var g,h,c,v,D;if(!o[(i==null?void 0:i.recurrenceID)||"recurrenceID"]||!o[(i==null?void 0:i.recurrenceRule)||"recurrenceRule"])return{isValid:!0,shouldAlert:!1,messageKey:kt.SameDayAlert};const l=t.find(O=>O.id===o[(i==null?void 0:i.recurrenceID)||"recurrenceID"]);let u=n.filter(O=>O.recurrenceID===l.id&&O.recurrenceRule);u=u.sort((O,P)=>O.startTime.getTime()-P.startTime.getTime());const f=u.findIndex(O=>O.guid===o[(i==null?void 0:i.guid)||"guid"]);if(f===-1)return{isValid:!0,shouldAlert:!1};const d=(h=F.normalizeDate((g=u[f-1])==null?void 0:g.startTime))==null?void 0:h.getTime(),E=(v=F.normalizeDate((c=u[f+1])==null?void 0:c.startTime))==null?void 0:v.getTime(),m=F.normalizeDate(r).getTime();return f===0&&m<E?{isValid:!0,shouldAlert:!1}:f===u.length-1&&m>d?{isValid:!0,shouldAlert:!1}:m>d&&m<E?((D=u[f+1])==null?void 0:D.startTime.getTime())<s.getTime()?{isValid:!1,shouldAlert:!0,messageKey:kt.SameDayAlert}:{isValid:!0,shouldAlert:!1}:m<d&&m<E||m>d&&m>E||!d&&m>E||!E&&m<d?{isValid:!1,shouldAlert:!0,messageKey:kt.OccurrenceAlert}:{isValid:!1,shouldAlert:!0,messageKey:kt.SameDayAlert}}function Rr(o,r,s){return r==null?void 0:r.find(t=>t.id===(o.recurrenceID||o[s.recurrenceID]))}function Cs(o,r){return(o==null?void 0:o.reduce((s,t)=>{const n=Number(t[r.id]||t.id);return Math.max(s,n)},0))??0}function mo(o,r,s,t,n,i){var u;const l={};return(Array.isArray(i)||o||n)&&(l[n.id]=o.id,Wl(l,o,r,s,n),(u=t==null?void 0:t.current)!=null&&u.saveEvent&&t.current.saveEvent(l,o.recurrenceID?"EditOccurrence":"Edit")),l}function Ds(o,r,s){const t=Rr(o,s,r),n=t[r.recurrenceException]||t.recurrenceException?String(t[r.recurrenceException]??t.recurrenceException):"",i=n?`${n},${o.recurrenceException||o[r.recurrenceException]}`:o.recurrenceException||o[r.recurrenceException]||n;return{[r.id]:t[r.id]||t.id,[r.recurrenceException]:i}}function Wl(o,r,s,t,n){o[n.subject]=r.subject,o[n.startTime]=s,o[n.endTime]=t,o[n.isAllDay]=r.isAllDay,o[n.recurrenceID]=r.recurrenceID,o[n.recurrenceException]=r.recurrenceException,o[n.recurrenceRule]=r.recurrenceRule}function Fl(o,r,s,t){t==null||t.show({title:o,message:r,confirmText:s,showCancel:!1,onConfirm:()=>t.hide()})}function Fn(o,r,s,t){const i={recurrenceEdit:{title:s("editEvent"),message:s("editEventContent"),showCancel:!1},recurrenceDelete:{title:s("deleteEvent"),message:s("editEventContent"),showCancel:!1},seriesChange:{title:s("alert"),message:s("seriesChangeAlert"),showCancel:!0,confirmText:s("yes")}}[o];r==null||r.show({action:o,title:i.title,message:i.message,confirmText:i.confirmText||s("ok"),showCancel:i.showCancel??!1,onConfirm:l=>{t(l),r.hide()}})}const Bl=o=>{const{activeViewProps:r,renderDates:s,confirmationDialog:t}=o,{eventSettings:n,readOnly:i,onDataChangeStart:l,onDataChangeComplete:u,onError:f,onDataRequest:d,enableRecurrenceValidation:E}=r,[m,g]=e.useState(),[h,c]=e.useState(),{locale:v}=$e(),{getString:D}=tt(v||"en-US"),O=e.useMemo(()=>(n==null?void 0:n.dataSource)instanceof nr?n.dataSource:Array.isArray(n==null?void 0:n.dataSource)?new nr(n.dataSource):new nr([]),[n==null?void 0:n.dataSource]),P=e.useMemo(()=>(n==null?void 0:n.query)instanceof Qr?n==null?void 0:n.query:new Qr,[n==null?void 0:n.query]),T=(y,S)=>{const I=P.clone();return y&&S&&(I.addParams("StartDate",y.toISOString()),I.addParams("EndDate",S.toISOString())),I},A=y=>O.executeQuery(y),R=()=>n.query?n.query.clone().fromTable:null,B=y=>{const S={result:y.result,count:y.count};d&&d(S);const I=S.result,q=Me.mapEventData(I,n.fields),_=jl(q,s);c(q),g(_)},k=y=>{f&&f(y)},b=e.useCallback(()=>{if(!s||s.length===0)return;const y=T(s[0],s[s.length-1]);A(y).then(I=>B(I)).catch(I=>k(I))},[s,A,T]),N=y=>(typeof y[n.fields.startTime]=="string"&&(y[n.fields.startTime]=F.getDateFromString(y[n.fields.startTime])),typeof y[n.fields.endTime]=="string"&&(y[n.fields.endTime]=F.getDateFromString(y[n.fields.endTime])),y),L=e.useCallback(y=>{var I;const S={cancel:!1,addedRecords:y.editParams.addedRecords,changedRecords:y.editParams.changedRecords,deletedRecords:y.editParams.deletedRecords};(I=O.dataSource)!=null&&I.offline?(u&&u(S),b()):y.promise.then(()=>{u&&u(S),b()}).catch(q=>{f&&f(q)})},[u,f,b,O]),C=e.useCallback(y=>{const S={addedRecords:[],changedRecords:[],deletedRecords:[]};let I;if(y.addedRecords instanceof Array){for(let _ of y.addedRecords){_=N(_),_[n.fields.recurrenceRule]&&(_[n.fields.id]=Cs(m,n.fields)+1);const U=vt({},_,null,!0);S.addedRecords.push(U)}I=O.saveChanges(S,n.fields.id,R(),T())}else{const _=y.addedRecords;S.addedRecords.push(_),I=O.insert(_,R(),T())}L({cancel:!1,promise:I,editParams:S})},[O,n,R,T,L,m]),G=e.useCallback((y,S)=>{let I;const q={addedRecords:[],changedRecords:[],deletedRecords:[]};if(S==="DeleteOccurrence"||S==="DeleteSeries")for(let U of y.deletedRecords)if(U.recurrenceID||U[n.fields.recurrenceID]){if(S==="DeleteOccurrence")U.recurrenceID!==U.id||U[n.fields.recurrenceID]!==U[n.fields.id]?q.deletedRecords.push(U):(U.startTime?U.recurrenceException=En(U.startTime):U[n.fields.recurrenceException]=En(U[n.fields.startTime]),U=Ds(U,n.fields,h),q.changedRecords.push(U));else if(S==="DeleteSeries"){const ne=(h||[]).filter(Q=>(Q.recurrenceID||Q.id)===(U.recurrenceID||U[n.fields.recurrenceID]));q.deletedRecords.push(...ne)}}else q.deletedRecords.push(U);else q.deletedRecords=q.deletedRecords.concat(y.deletedRecords);q.deletedRecords.length>1||q.changedRecords.length>0?I=O.saveChanges(q,n.fields.id,R(),T()):q.deletedRecords.length===1?I=O.remove(n.fields.id,q.deletedRecords[0],R(),T()):I=Promise.resolve(),L({cancel:!1,promise:I,editParams:q})},[O,n,R,T,L,h]),M=(y,S)=>{for(let I of y){if(!I[n.fields.recurrenceID])continue;const q=I[n.fields.id]!==I[n.fields.recurrenceID],_=!!I[n.fields.recurrenceRule];if(q&&!_){I=N(I),S.changedRecords.push(vt({},I,null,!0));continue}if(_){const U=I[n.fields.startTime],ne=I[n.fields.endTime],Q=E?fo(I,U,ne,h,m,n.fields):{isValid:!0,messageKey:kt.SameDayAlert};if(!Q.isValid){Fl(D("alert"),D(Q.messageKey),D("ok"),t);return}}if(I=N(I),q)S.changedRecords.push(vt({},I,null,!0));else{const U=Ds(I,n.fields,h);S.changedRecords.push(U),I[n.fields.id]=Cs(m,n.fields)+1,S.addedRecords.push(N(I))}}},X=(y,S,I)=>{var q;for(let _ of y)if(_[n.fields.recurrenceID]){let U={},ne=!1;const Q=(q=h||[])==null?void 0:q.filter(J=>((J.recurrenceID&&J.recurrenceID===_[n.fields.recurrenceID]&&J.id!==_[n.fields.recurrenceID]||!J.recurrenceID&&J.recurrenceRule&&J.id===_[n.fields.recurrenceID]&&J.recurrenceException)&&(ne=!0),J.id===_[n.fields.recurrenceID]&&(U=J),(J.recurrenceID||J.id)===_[n.fields.recurrenceID]));if(_[n.fields.id]=U.id,_[n.fields.recurrenceRule]=U.recurrenceRule,delete _[n.fields.recurrenceID],ne)if(I==="EditEntireSeries"){delete _[n.fields.recurrenceException];const J=Q;S.deletedRecords.push(...J),S.addedRecords.push(N(_))}else I==="EditCurrentSeries"&&S.changedRecords.push(N(_));else _=N(_),S.changedRecords.push(vt({},_,null,!0))}},se=(y,S)=>{if(y instanceof Array)for(let I of y)I=N(I),S.changedRecords.push(vt({},I,null,!0));else{const I=y;S.changedRecords.push(I)}},fe=e.useCallback((y,S)=>{let I;const q={addedRecords:[],changedRecords:[],deletedRecords:[]};switch(S){case"EditOccurrence":y.changedRecords instanceof Array&&y.changedRecords.length>0&&M(y.changedRecords,q);break;case"EditCurrentSeries":case"EditEntireSeries":case"EditSeries":y.changedRecords instanceof Array&&y.changedRecords.length>0&&X(y.changedRecords,q,S);break;default:se(y.changedRecords,q);break}q.changedRecords.length>1||q.addedRecords.length>0||q.deletedRecords.length>0?I=O.saveChanges(q,n.fields.id,R(),T()):q.changedRecords.length===1?I=O.update(n.fields.id,q.changedRecords[0],R(),T()):I=Promise.resolve(),L({cancel:!1,promise:I,editParams:q})},[O,n,R,T,L,N,m,h]),pe=e.useCallback(async y=>{if(n.allowAdding&&!i){const S=y instanceof Array?y:[y];if(S.length===0)return;const I={cancel:!1,addedRecords:S,changedRecords:[],deletedRecords:[]};l&&l(I),I.promise?I.promise.then(q=>{q&&C(I)}).catch(q=>{f&&f(q)}):C(I)}},[n,i,l,f,C]),K=e.useCallback(async(y,S)=>{if(n.allowDeleting&&!i){const I=y instanceof Array?y:[y];if(I.length===0)return;const q={cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:I};l&&l(q),q.promise?q.promise.then(_=>{_&&G(q,S)}).catch(_=>{f&&f(_)}):G(q,S)}},[n,i,l,f,G]),H=e.useCallback(async(y,S)=>{if(n.allowEditing&&!i){const I=y instanceof Array?y:[y];if(I.length===0)return;const q={cancel:!1,addedRecords:[],changedRecords:I,deletedRecords:[]};l&&l(q),q.promise?q.promise.then(_=>{_&&fe(q,S)}).catch(_=>{f&&f(_)}):fe(q,S)}},[n,i,l,f,fe]);return e.useEffect(()=>{b()},[O,P,s]),{eventsData:m,eventsProcessed:h,addEvent:pe,deleteEvent:K,saveEvent:H}},br=(o,r="Close")=>a.jsx(Ze,{className:`${p.POPUP_CLOSE} ${p.ROUND}`,onClick:o,"aria-label":r,icon:a.jsx(Un,{}),color:Tt.Secondary,variant:qe.Standard},"close-btn"),Ul=({visible:o,target:r,schedulerElement:s,popupPosition:t,onClose:n,onOpen:i,children:l,adaptive:u})=>{if(!o||!r)return null;const{dir:f}=$e();return xe.isDevice&&u?Yt.createPortal(a.jsx("div",{className:`${p.CONTROL} ${p.POPUP_WRAPPER} ${p.MOBILE_POPUP}
                ${f==="rtl"?p.RTL:""}`,children:l}),document==null?void 0:document.body):a.jsx(At,{open:o,relateTo:r,position:t,collision:{X:st.Flip,Y:st.Fit},actionOnScroll:Is.None,autoReposition:!0,onOpen:i,onClose:n,className:`${p.POPUP_WRAPPER}`,viewPortElementRef:s,zIndex:1003,children:l})},zl=(o,r)=>({show:()=>o(!0),hide:()=>o(!1),element:r.current}),Mr=e.forwardRef((o,r)=>{var V;const{onClose:s,onEditEvent:t,onMoreDetails:n}=o,{schedulerRef:i,eventSettings:l,showQuickInfoPopup:u,showDeleteAlert:f,showRecurrenceDeleteAlert:d,view:E,readOnly:m,timeFormat:g,quickInfo:h}=We(),[c,v]=e.useState({}),[D,O]=e.useState({}),[P,T]=e.useState({}),[A,R]=e.useState(null),[B,k]=e.useState({X:"right",Y:"top"}),[b,N]=e.useState(!1),L=e.useRef(null),C=e.useRef(null),{visible:G,setVisible:M,target:X,setTarget:se,popupElement:fe,schedulerElement:pe,handleClose:K,closeAllPopups:H,handleRef:y}=ao(s),{locale:S}=$e();kr(fe,G,K);const{getString:I}=tt(S||"en-US");e.useEffect(()=>{b&&(requestAnimationFrame(()=>{U()}),N(!1))},[b]),e.useImperativeHandle(r,()=>({...zl(M,fe),handleCellClick:(z,te)=>{u&&(v(z),se(te),R("cell"),T({[l.fields.startTime]:z.startTime,[l.fields.endTime]:z.isAllDay?F.addDays(z.endTime,-1):z.endTime,[l.fields.isAllDay]:z.isAllDay}),_(),M(!0))},handleEventClick:(z,te)=>{u&&(O(z),se(te),R("event"),_(),M(!0),qn(te))},handleDelete:ve}));const q=()=>{k((E==null?void 0:E.toLowerCase())==="day"?{X:"center",Y:"center"}:{X:"right",Y:"top"}),N(!0)},_=()=>{(L||C)&&K(),requestAnimationFrame(()=>{U()})},U=()=>{A==="cell"?L.current&&L.current.element&&L.current.element.focus():A==="event"&&C.current&&C.current.element&&C.current.element.focus()},ne=e.useCallback(z=>{const te=z.value,he={...P,[l.fields.subject]:te};T(he)},[P]),Q=e.useCallback(()=>{var te,he;const z={...P,[l.fields.id]:Me.generateEventGuid(),[l.fields.subject]:P[l.fields.subject]||I("newEvent")};(he=(te=i==null?void 0:i.current)==null?void 0:te.addEvent)==null||he.call(te,z),K(),H()},[P,K]),J=e.useCallback(()=>{t(D),K()},[D,K,t]),Ne=e.useCallback(()=>{var te;const z={...c,[l.fields.subject]:(te=L==null?void 0:L.current)==null?void 0:te.value};n(z),K()},[c,K,n]),ve=e.useCallback(()=>{const z=he=>{var Ee,be;if(A==="event"&&D){const ke=he==="occurrence"?"DeleteOccurrence":"DeleteSeries";(be=(Ee=i==null?void 0:i.current)==null?void 0:Ee.deleteEvent)==null||be.call(Ee,D,ke)}K(),H()},te=()=>{var he,Ee;A==="event"&&D&&((Ee=(he=i==null?void 0:i.current)==null?void 0:he.deleteEvent)==null||Ee.call(he,D)),K(),H()};A==="event"&&D&&D.recurrenceID?d==null||d(z):f==null||f(te),M(!1)},[A,D,K,H,i,f,d,l]),ue=z=>te=>{(te.key==="Enter"||te.key===" "&&te.target.type==="button")&&(te.preventDefault(),z())},w={startTime:c.startTime,endTime:c.endTime,isAllDay:c.isAllDay,element:c.element},Z=a.jsx(a.Fragment,{children:h!=null&&h.addHeader?h==null?void 0:h.addHeader({cellData:w}):a.jsx("div",{className:p.POPUP_HEADER,children:a.jsx("div",{className:`${p.POPUP_HEADER_WRAP} ${p.CONTENT_RIGHT}`,children:br(K,I("close"))})})}),ie=a.jsx(a.Fragment,{children:h!=null&&h.addContent?h==null?void 0:h.addContent({cellData:w}):a.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[a.jsx("div",{className:p.POPUP_INPUT_WRAP,children:a.jsx(hr,{ref:L,className:p.POPUP_CELL_SUBJECT,placeholder:I("addTitle"),onKeyDown:ue(Q),onChange:ne,value:P[(V=l==null?void 0:l.fields)==null?void 0:V.subject]||"",size:Ut.Large})}),c.startTime&&c.endTime&&a.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[a.jsx(cs,{}),a.jsx("span",{className:p.POPUP_TIME_TEXT,children:F.formatCellDateRange(new Date(c.startTime),new Date(c.endTime),S,g)})]})]})}),re=a.jsx(a.Fragment,{children:h!=null&&h.addFooter?h==null?void 0:h.addFooter({cellData:w}):a.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[a.jsx(Ze,{className:p.POPUP_MORE_DETAILS,onClick:Ne,color:Tt.Primary,variant:qe.Standard,children:I("moreDetails")}),a.jsx(Ze,{className:p.SAVE_EVENT,onClick:Q,onKeyDown:ue(Q),color:Tt.Primary,variant:qe.Standard,children:I("save")})]})}),Se=a.jsx(a.Fragment,{children:h!=null&&h.editHeader?h==null?void 0:h.editHeader({eventData:D}):a.jsxs("div",{className:`${p.POPUP_HEADER} ${p.POPUP_CELL_HEADER} ${p.DISPLAY_FLEX}`,children:[a.jsx("div",{className:p.POPUP_EVENT_SUBJECT,children:D.subject||I("addTitle")}),a.jsx("div",{className:`${p.POPUP_HEADER_WRAP}`,children:br(K,I("close"))})]})}),ee=a.jsx(a.Fragment,{children:h!=null&&h.editContent?h==null?void 0:h.editContent({eventData:D}):a.jsxs("div",{className:`${p.POPUP_CONTENT}`,children:[D.startTime&&D.endTime&&a.jsxs("div",{className:`${p.CELL_TIME} ${p.DISPLAY_FLEX}`,children:[a.jsx(cs,{}),a.jsx("span",{className:p.POPUP_TIME_TEXT,children:F.formatPopupDateRange(D,S,g)})]}),D.location&&a.jsxs("div",{className:`${p.LOCATION} ${p.DISPLAY_FLEX}`,children:[a.jsx(mi,{}),a.jsx("span",{className:p.POPUP_LOCATION_TEXT,children:D.location})]}),D.description&&a.jsxs("div",{className:`${p.DESCRIPTION} ${p.DISPLAY_FLEX}`,children:[a.jsx(hi,{}),a.jsx("span",{className:p.POPUP_DESCRIPTION_TEXT,children:D.description})]})]})}),oe=a.jsx(a.Fragment,{children:h!=null&&h.editFooter?h==null?void 0:h.editFooter({eventData:D}):a.jsxs("div",{className:`${p.POPUP_FOOTER} ${p.DISPLAY_FLEX}`,children:[a.jsx(Ze,{ref:C,className:p.EDIT_EVENT,disabled:!!(D!=null&&D.isReadonly)||m,onClick:J,onKeyDown:ue(J),color:Tt.Primary,variant:qe.Standard,children:I("edit")}),a.jsx(Ze,{className:p.DELETE_EVENT,disabled:!!(D!=null&&D.isReadonly)||m,onClick:ve,onKeyDown:ue(ve),color:Tt.Primary,variant:qe.Standard,children:I("delete")})]})}),ce=()=>a.jsxs("div",{ref:y,className:`${p.QUICK_INFO_WRAPPER} ${p.CELL_POPUP}`,children:[Z,ie,re]}),x=()=>a.jsxs("div",{ref:y,className:`${p.QUICK_INFO_WRAPPER} ${p.EVENT_POPUP}`,children:[Se,ee,oe]});return a.jsx(Ul,{visible:G,target:X,popupPosition:B,schedulerElement:pe,onClose:K,onOpen:q,adaptive:(h==null?void 0:h.adaptive)??!0,children:A==="cell"?ce():x()})});Mr.displayName="QuickInfoPopup";Mr.__docgenInfo={description:"Combined QuickInfoPopup component that handles both cell and event popups",methods:[],displayName:"QuickInfoPopup"};function Yl(){const{renderDates:o}=pt(),{showWeekNumber:r,workDays:s,weekRule:t,firstDayOfWeek:n}=We(),{locale:i}=$e(),[l,u]=e.useState(!0),[f,d]=e.useState(!1),E=o.length>0&&r?F.getWeekNumber(o[0],t,n):null,m=e.useCallback(c=>{d(c)},[]),g=e.useCallback(()=>{u(c=>!c)},[]);return{headerCells:o.map((c,v)=>{const D=F.isSameDay(c,new Date),O=F.isWeekend(c,s),P=ut(c,{type:"date",skeleton:"E",locale:i}),T=ut(c,{type:"date",skeleton:"d",locale:i}),A=["sf-header-cells",D?"sf-current-day":"",O?"sf-weekend":""].filter(Boolean).join(" ");return{date:c,dayName:P,dateNumber:T,isToday:D,isWeekend:O,className:A,key:`sf-header-cells-${v}`}}),isAllDayCollapsed:l,showAllDayToggle:f,weekNumber:E,toggleAllDayCollapse:g,handleMoreEventsChange:m}}function Hr(){const{onViewChange:o,onSelectedDateChange:r,getAvailableViews:s}=We();return{handleDateClick:e.useCallback((n,i)=>{n.preventDefault(),n.stopPropagation(),ft.isDayViewAvailable(s)&&(r({value:i}),o({value:"Day"}))},[r,o])}}const Kl=()=>{const[o,r]=e.useState({date:null,events:[],visible:!1,target:null}),s=e.useRef(null),t=e.useRef(null),{locale:n}=$e(),{handleDateClick:i}=Hr(),{quickPopupRef:l}=We();e.useEffect(()=>{o.target&&(t.current=o.target.closest(".sf-scheduler"))},[o.target]);const u=()=>{r({date:null,events:[],target:null,visible:!1})};uo(u);const f=(m,g)=>{var h;(h=l.current)==null||h.handleEventClick(m,g)},d=(m,g)=>{g&&(i(m,o.date),u())},E=(m,g,h)=>{r({date:m,events:g,target:h,visible:!0})};return{date:o.date,events:o.events,visible:o.visible,target:o.target,popupElement:s,schedulerElement:t,locale:n,handleClose:u,handleEventClick:f,handleNavigation:d,open:E}},jr=e.forwardRef((o,r)=>{const{date:s,events:t,visible:n,target:i,popupElement:l,schedulerElement:u,locale:f,handleClose:d,handleEventClick:E,handleNavigation:m,open:g}=Kl(),{eventTemplate:h,getAvailableViews:c}=We(),v=ft.isDayViewAvailable(c),{getString:D}=tt(f||"en-US");e.useImperativeHandle(r,()=>({element:l.current,open:g})),kr(l,n,d);const O=e.useCallback(T=>h?h(T):a.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:T.subject||D("addTitle")}),[h]),P=()=>a.jsxs("div",{ref:l,className:p.MORE_EVENT_POPUP,children:[a.jsxs("div",{className:p.MORE_EVENT_HEADER,children:[a.jsxs("div",{className:`${p.MORE_EVENT_DATE_HEADER} ${v?p.LINK:""}`,onClick:T=>m(T,v),tabIndex:0,children:[ut(s,{format:"E",calendar:"gregorian",locale:f})," ",ut(s,{format:"d",calendar:"gregorian",locale:f})]}),a.jsx("div",{className:"sf-more-event-close",children:br(d,D("close"))})]}),a.jsx("div",{className:p.MORE_EVENT_CONTENT,children:t.map(T=>a.jsx("div",{className:p.APPOINTMENT,onClick:A=>E(T,A.currentTarget),onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),E(T,A.currentTarget))},"data-id":`Appointment_${T.id}`,"data-guid":T.guid,role:"button",tabIndex:0,children:O(T)},`eventId-${T.id}`))})]});return!n||!i?null:xe.isDevice?Yt.createPortal(a.jsx("div",{className:`${p.CONTROL} ${p.MORE_POPUP_WRAPPER} ${p.MOBILE_POPUP}`,children:P()}),document==null?void 0:document.body):a.jsx(At,{open:n,relateTo:i,position:{X:"right",Y:"top"},collision:{X:st.Flip,Y:st.Flip},autoReposition:!0,onClose:d,className:p.MORE_POPUP_WRAPPER,viewPortElementRef:u||null,zIndex:1e3,children:P()})});jr.displayName="MorePopup";jr.__docgenInfo={description:"MorePopup component for displaying additional events in month view",methods:[],displayName:"MorePopup"};const Xl=(o,r)=>{const{schedulerRef:s,keyboardNavigation:t,handleTodayClick:n,eventSettings:i,readOnly:l,showDeleteAlert:u,showQuickInfoPopup:f,getAvailableViews:d,handleCurrentViewChange:E,handlePreviousClick:m,handleNextClick:g}=o,h=(k,b)=>{k.getAttribute("tabindex")!=="0"&&k.setAttribute("tabindex","0"),k.focus(),b.preventDefault()},c=k=>{var L;const b=(L=s.current)==null?void 0:L.element,N=b==null?void 0:b.querySelector(`.${p.CONTENT_TABLE} .${p.WORK_CELLS}`);N&&(h(N,k),N.classList.add(p.SELECTED_CELL))},v=k=>{n&&(n(),k.preventDefault())},D=k=>{m&&(m(),k.preventDefault(),k.stopPropagation())},O=k=>{g&&(g(),k.preventDefault(),k.stopPropagation())},P=k=>{const b=k.code.replace("Digit",""),N=parseInt(b,10)-1;if(isNaN(N)||N<0)return;const L=d==null?void 0:d();if(!(!L||L.length===0)&&N<L.length){const C=L[parseInt(N.toString(),10)];E&&(E(C.name),k.preventDefault(),k.stopPropagation())}},T=k=>{var L,C,G,M,X,se;let b=document==null?void 0:document.activeElement;const N=(L=s.current)==null?void 0:L.element;if((!b||!((C=b.classList)!=null&&C.contains(p.APPOINTMENT))||gt(b,"."+p.POPUP_WRAPPER))&&(b=gs(r||[],N).element),b&&b.classList.contains(p.APPOINTMENT)){if(qn(b),l||i&&!i.allowDeleting)return;if(f&&((M=(G=o.quickPopupRef)==null?void 0:G.current)!=null&&M.element))(X=o.quickPopupRef)==null||X.current.handleDelete();else if(u){const fe=gs(r||[],N).data,pe=Array.isArray(fe)?fe:[fe],K=pe[0];if(K&&K.recurrenceID&&o.showRecurrenceDeleteAlert){const H=y=>{var S,I;if(K){const q=y==="occurrence"?"DeleteOccurrence":"DeleteSeries";(I=(S=s==null?void 0:s.current)==null?void 0:S.deleteEvent)==null||I.call(S,K,q)}};(se=o.showRecurrenceDeleteAlert)==null||se.call(o,H)}else u(()=>{pe.forEach(y=>{var S,I;(I=(S=s==null?void 0:s.current)==null?void 0:S.deleteEvent)==null||I.call(S,y)})})}k.preventDefault()}},A=(k,b,N,L,C,G)=>{let M=b,X=N;switch(k){case Nt.Left:{if(N>0)X=N-1;else if(b>0){M=b-1;const se=C(M);X=Math.max(0,((se==null?void 0:se.length)??1)-1)}break}case Nt.Right:{N<((G==null?void 0:G.length)??0)-1?X=N+1:b<L.length-1&&(M=b+1,X=0);break}case Nt.Up:{if(b===0)return null;M=b-1;const se=C(M);X=Math.min(N,Math.max(0,((se==null?void 0:se.length)??1)-1));break}case Nt.Down:{if(b>=L.length-1)return null;M=b+1;const se=C(M);X=Math.min(N,Math.max(0,((se==null?void 0:se.length)??1)-1));break}}return{nextRow:M,nextCol:X}},R=(k,b)=>{var y,S,I;const N=(y=s.current)==null?void 0:y.element,L=(I=(S=b.target).closest)==null?void 0:I.call(S,"."+p.WORK_CELLS_ROW),C=N.querySelectorAll(`.${p.WORK_CELLS_ROW}`),G=Array.prototype.indexOf.call(C,L),M=q=>{var _;return(_=C.item(q))==null?void 0:_.querySelectorAll(`.${p.WORK_CELLS}`)},X=M(G),se=Array.prototype.indexOf.call(X,b.target);let fe=G,pe=se;const K=A(k,G,se,C,M,X);if(!K)return;fe=K.nextRow,pe=K.nextCol;const H=yr(N,fe,pe);H&&(zn(H),b.preventDefault(),b.stopPropagation())};return k=>{var N,L,C,G;if(!t)return;const b=k.target;if(!(b&&["INPUT","TEXTAREA","SELECT"].indexOf(b.tagName)>-1&&b.closest(`.${p.POPUP_WRAPPER}`))){if(k.shiftKey&&k.altKey&&k.code==="KeyY"){v(k);return}if(k.altKey&&k.code>="Digit1"&&k.code<="Digit6"){P(k);return}switch(k.key){case"Home":{c(k);break}case"ArrowUp":{!k.ctrlKey&&!k.metaKey&&(N=b==null?void 0:b.closest)!=null&&N.call(b,"."+p.WORK_CELLS)&&R(Nt.Up,k);break}case"ArrowDown":{!k.ctrlKey&&!k.metaKey&&(L=b==null?void 0:b.closest)!=null&&L.call(b,"."+p.WORK_CELLS)&&R(Nt.Down,k);break}case"Delete":{T(k);break}case"ArrowLeft":{k.ctrlKey||k.metaKey?D(k):(C=b==null?void 0:b.closest)!=null&&C.call(b,"."+p.WORK_CELLS)&&R(Nt.Left,k);break}case"ArrowRight":{k.ctrlKey||k.metaKey?O(k):(G=b==null?void 0:b.closest)!=null&&G.call(b,"."+p.WORK_CELLS)&&R(Nt.Right,k);break}}}}},po=e.createContext(void 0),ql=({children:o})=>{const[r,s]=e.useState({visible:!1,guid:null,segments:[],isDayEvent:!1}),t=e.useCallback(l=>{s({visible:!0,guid:l==null?void 0:l.guid,segments:(l==null?void 0:l.segments)??[],isDayEvent:!!(l!=null&&l.isDayEvent)})},[]),n=e.useCallback(()=>{s({visible:!1,guid:null,segments:[],isDayEvent:!1})},[]),i=e.useMemo(()=>({...r,show:t,hide:n}),[r,t,n]);return a.jsx(po.Provider,{value:i,children:o})},$r=()=>{const o=e.useContext(po);if(!o)throw new Error("useCloneEventContext must be used within CloneEventProvider");return o},zt=({event:o})=>{if(!(o.recurrenceRule||o.recurrenceID)||xe.isDevice)return null;const s=o.id!==o.recurrenceID,t=s?gi:Ci,n=s?p.EVENT_RECURRENCE_EDIT_ICON_CLASS:p.EVENT_RECURRENCE_ICON_CLASS;return a.jsx("div",{className:`${p.ICONS} ${n}`,children:a.jsx(t,{})})};zt.displayName="RecurrenceIcon";const Gl=o=>{const{event:r,eventStyle:s,totalSegments:t,isOverflowLeft:n=!1,isOverflowRight:i=!1}=o,{timeFormat:l}=We(),{locale:u}=$e(),f=c=>ut(c??new Date,{type:"time",skeleton:"short",format:l,locale:u}),d=c=>a.jsx("div",{className:`sf-indicator sf-icons sf-${c}-icon`,children:c==="left"?a.jsx(Lr,{}):a.jsx(Ir,{})}),E=c=>a.jsx("div",{className:p.TIME,children:c}),h=t?(()=>{const{subject:c,isAllDay:v,startTime:D,endTime:O}=r,P=n?d("left"):!v&&E(f(D)),T=i?d("right"):!v&&E(f(O));return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[P,a.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:c||"Add title"}),T,a.jsx(zt,{event:r})]})})():(()=>{const{subject:c,startTime:v,isAllDay:D}=r;return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!D&&E(f(v)),a.jsx("div",{className:`${p.SUBJECT}`,children:c||"Add title"}),a.jsx(zt,{event:r})]})})();return a.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:s,children:h})},Zl=o=>{const{timeFormat:r,startHourTuple:s,endHourTuple:t}=We(),{renderDates:n}=pt(),{locale:i}=$e(),l=(E,m)=>{let g=r;g||(g=Wo({type:"time",skeleton:"short",format:r},!1));const h=ut(E,{type:"time",format:g,locale:i}),c=ut(m,{type:"time",format:g,locale:i});return`${h} - ${c}`},u=E=>{const{event:m}=E,g=m.startTime&&m.endTime?l(m.startTime,m.endTime):"";return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[a.jsx("div",{className:`${p.SUBJECT}`,children:m.subject||"Add title"}),m.location&&a.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:m.location}),a.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:g}),a.jsx(zt,{event:m})]})},f=E=>{const{isOverflowTop:m,isOverflowBottom:g}=at.getOverflowDirection(E,n,s,t);return a.jsxs(e.Fragment,{children:[m&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:a.jsx(Ms,{})}),u(E),g&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:a.jsx(Ps,{})})]})},d=o.totalSegments&&o.totalSegments>1||s||t?f(o):u(o);return a.jsx("div",{className:`${p.APPOINTMENT} ${p.EVENT_CLONE}`,style:o.eventStyle,children:d})},Ql=()=>{var n,i,l,u;const o=$r(),{schedulerRef:r}=We();e.useEffect(()=>{const f=E=>{var h,c,v,D;const m=(E==null?void 0:E.detail)||{},g=(h=r.current)==null?void 0:h.element;g&&(m!=null&&m.container)&&(m.container===g||g.contains(m.container))&&o.show({guid:(c=m.payload)==null?void 0:c.guid,segments:(v=m.payload)==null?void 0:v.segments,isDayEvent:(D=m.payload)==null?void 0:D.isDayEvent})},d=E=>{var h;const m=(E==null?void 0:E.detail)||{},g=(h=r.current)==null?void 0:h.element;g&&(m!=null&&m.container)&&(m.container===g||g.contains(m.container))&&o.hide()};return window==null||window.addEventListener("showCloneEvent",f),window==null||window.addEventListener("hideCloneEvent",d),()=>{window==null||window.removeEventListener("showCloneEvent",f),window==null||window.removeEventListener("hideCloneEvent",d)}},[r,o]);const s=o.isDayEvent?(i=(n=r.current)==null?void 0:n.element)==null?void 0:i.querySelector(`.${p.DAY_CLONE_CONTAINER}`):(u=(l=r.current)==null?void 0:l.element)==null?void 0:u.querySelector(`.${p.TIME_SLOT_CLONE_CONTAINER}`),t=a.jsx(a.Fragment,{children:o.visible&&o.segments.map((f,d)=>o.isDayEvent?a.jsx(Gl,{...f},`${f==null?void 0:f.guid}-${d}`):a.jsx(Zl,{...f},`${f==null?void 0:f.guid}-${d}`))});return s?Yt.createPortal(t,s):null},Jl=o=>{const{visible:r,onConfirm:s,onCancel:t,title:n,message:i,confirmText:l,showCancel:u=!0,action:f="delete"}=o,{locale:d}=$e(),{getString:E}=tt(d||"en-US"),m=f==="recurrenceEdit"||f==="recurrenceDelete",g=f==="recurrenceDelete";return a.jsx(Cn,{header:n||E("deleteEvent"),open:r,style:{maxWidth:"400px"},animation:{effect:"Zoom",duration:400,delay:1},footer:a.jsxs(a.Fragment,{children:[m?a.jsxs(a.Fragment,{children:[a.jsx(Ze,{onClick:()=>s("occurrence"),variant:qe.Standard,children:E(g?"deleteEvent":"editThisEvent")}),a.jsx(Ze,{onClick:()=>s("series"),variant:qe.Standard,children:E("editEntireSeries")})]}):f==="seriesChange"?a.jsxs(a.Fragment,{children:[a.jsx(Ze,{onClick:()=>s("yes"),variant:qe.Standard,children:E("yes")}),a.jsx(Ze,{onClick:()=>s("no"),variant:qe.Standard,children:E("no")})]}):a.jsx(Ze,{onClick:()=>s(),variant:qe.Standard,children:l||E("delete")}),u&&a.jsx(Ze,{onClick:t,variant:qe.Standard,children:E("cancel")})]}),onClose:t,children:a.jsx("div",{children:i||E("confirmDeleteMessage")})})},ho=e.createContext(null),Gn=()=>{const o=e.useContext(ho);if(!o)throw new Error("useEditorContext must be used within EditorProvider");return o},ec=({editorState:o,children:r})=>a.jsx(ho.Provider,{value:o,children:r}),tc=o=>{const{locale:r}=$e(),{getString:s}=tt(r||"en-US"),{schedulerRef:t,showDeleteAlert:n,eventSettings:i,eventOverlap:l,confirmationDialog:u,onEditorSubmit:f}=We(),{eventsData:d,eventsProcessed:E}=Kt(),{data:m,action:g,originalData:h,startDateOnly:c,startTimeOnly:v,endDateOnly:D,endTimeOnly:O,slotDuration:P,formRef:T,validateRequiredFields:A}=Gn(),R=e.useCallback(()=>{var M,X,se,fe,pe,K,H;let L,C;if(m!=null&&m.isAllDay){const y=c?F.normalizeDate(c):void 0,S=D?F.normalizeDate(D):y;L=y,C=S}else{const y=(S,I)=>F.combineDateAndTime(S,I);if(L=y(c,v)??(m==null?void 0:m.startTime),C=y(D,O)??(m==null?void 0:m.endTime),L&&C&&C<=L){const S=new Date(L);S.setMinutes(S.getMinutes()+P),C=S}}const G={[((M=i==null?void 0:i.fields)==null?void 0:M.subject)||"subject"]:(m==null?void 0:m.subject)||s("newEvent"),[((X=i==null?void 0:i.fields)==null?void 0:X.startTime)||"startTime"]:L,[((se=i==null?void 0:i.fields)==null?void 0:se.endTime)||"endTime"]:C,[((fe=i==null?void 0:i.fields)==null?void 0:fe.isAllDay)||"isAllDay"]:!!(m!=null&&m.isAllDay),[((pe=i==null?void 0:i.fields)==null?void 0:pe.location)||"location"]:(m==null?void 0:m.location)||"",[((K=i==null?void 0:i.fields)==null?void 0:K.description)||"description"]:(m==null?void 0:m.description)||"",[((H=i==null?void 0:i.fields)==null?void 0:H.recurrenceRule)||"recurrenceRule"]:(m==null?void 0:m.recurrenceRule)||""};if(g==="Edit"&&h){const y=new Set(["id","subject","startTime","endTime","isAllDay","location","description","isReadonly","isBlock"]),S=new Set(Object.values(i==null?void 0:i.fields).filter(q=>{var _;return q!==((_=i==null?void 0:i.fields)==null?void 0:_.id)}));return{...Object.fromEntries(Object.entries(h).filter(([q])=>!y.has(q)&&!S.has(q))),...G,[i.fields.id]:h.id}}else return{...G,[i.fields.id]:Me.generateEventGuid()}},[m==null?void 0:m.isAllDay,c,v,D,O,P,m==null?void 0:m.startTime,m==null?void 0:m.endTime,i,m==null?void 0:m.subject,m==null?void 0:m.location,m==null?void 0:m.description,g,h]),B=e.useCallback(L=>!l&&Me.checkEventOverlap(L,d,!1,i.fields)?(u==null||u.show({title:s("eventOverlap"),message:s("overlapAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>u.hide()}),!1):Me.isBlockRange(L,d,!1,i.fields)?(u==null||u.show({title:s("alert"),message:s("blockAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>u.hide()}),!1):!0,[l,d,i,u]),k=e.useCallback(()=>{var G,M,X,se,fe,pe,K,H,y;const L=A(s);if(L){u==null||u.show({title:s("alert"),message:L,confirmText:s("ok"),showCancel:!1,onConfirm:()=>u.hide()});return}if(T!=null&&T.current&&!((G=T.current)!=null&&G.validate()))return;let C=R();if(f){const S={data:C,cancel:!1,requestType:g,originalData:g==="Add"?void 0:h};if(f(S),S.cancel)return;C=S.data}if(B(C)){if(h&&(C[i.fields.id]=h.id,C[i.fields.recurrenceID]=h.recurrenceID,C[i.fields.guid]=h.guid),g==="Edit"&&h)(X=(M=t==null?void 0:t.current)==null?void 0:M.saveEvent)==null||X.call(M,C);else if(g==="EditOccurrence"&&h)C[i.fields.recurrenceException]=En(h.startTime),(fe=(se=t==null?void 0:t.current)==null?void 0:se.saveEvent)==null||fe.call(se,C,"EditOccurrence");else if(g==="EditSeries"){let S=!1;for(const I of E)if(I.recurrenceID&&I.recurrenceID===h.recurrenceID&&I.id!==h.recurrenceID||!I.recurrenceID&&I.recurrenceRule&&I.id===h.recurrenceID&&I.recurrenceException){S=!0;break}if(S){Fn("seriesChange",u,s,I=>{var q,_,U,ne;I==="yes"?(_=(q=t==null?void 0:t.current)==null?void 0:q.saveEvent)==null||_.call(q,C,"EditEntireSeries"):I==="no"&&((ne=(U=t==null?void 0:t.current)==null?void 0:U.saveEvent)==null||ne.call(U,C,"EditCurrentSeries")),o()});return}else(K=(pe=t==null?void 0:t.current)==null?void 0:pe.saveEvent)==null||K.call(pe,C,"EditSeries")}else(y=(H=t==null?void 0:t.current)==null?void 0:H.addEvent)==null||y.call(H,C);o()}},[A,R,B,g,h,t,o,u]),b=e.useCallback(()=>{if(!h)return;const L=()=>{var G,M;const C=g==="EditSeries"&&h.recurrenceID?"DeleteSeries":"DeleteOccurrence";(M=(G=t==null?void 0:t.current)==null?void 0:G.deleteEvent)==null||M.call(G,h,C)};o(),n==null||n(L)},[h,g,t,o,n]),N=e.useCallback(()=>o(),[o]);return{handleSave:k,handleDelete:b,handleCancel:N,buildEventData:R,validateEventConflicts:B}},vs=[{name:"subject",visible:!0,className:p.SUBJECT_CONTAINER},{name:"location",visible:!0,className:p.LOCATION_CONTAINER},{name:"startDate",visible:!0,className:p.START_DATE_CONTAINER},{name:"startTime",visible:!0,className:p.START_TIME_CONTAINER},{name:"endDate",visible:!0,className:p.END_DATE_CONTAINER},{name:"endTime",visible:!0,className:p.END_TIME_CONTAINER},{name:"isAllDay",visible:!0,className:p.ALL_DAY_CONTAINER},{name:"description",visible:!0,className:p.DESCRIPTION_CONTAINER},{name:"repeatMode",visible:!0,className:p.REPEAT_MODE}],nc=[["subject","location"],["startDate","startTime"],["endDate","endTime"],["isAllDay"],["repeatMode"],["description"]],rc=({fields:o})=>{const{locale:r}=$e(),{getString:s}=tt(r||"en-US"),{dateFormat:t,timeFormat:n,timeScale:i}=We(),{data:l,startDateOnly:u,startTimeOnly:f,endDateOnly:d,endTimeOnly:E,slotDuration:m,repeatData:g,repeatModeValue:h,formState:c,formRef:v,setFormState:D,handleSubjectChange:O,handleLocationChange:P,handleDescriptionChange:T,handleStartDateChange:A,handleStartTimeChange:R,handleEndDateChange:B,handleEndTimeChange:k,handleIsAllDayChange:b,handleRepeatModeChange:N,setSlotDuration:L,action:C}=Gn(),G=e.useMemo(()=>o?o.reduce((ve,ue)=>(ue.validationRule&&(ve[ue.name]=ue.validationRule),ve),{}):{},[o]),M=e.useMemo(()=>{const ve={};return l!=null&&l.subject&&(ve.subject=l.subject),l!=null&&l.location&&(ve.location=l.location),l!=null&&l.description&&(ve.description=l.description),u&&(ve.startDate=u),f&&(ve.startTime=f),d&&(ve.endDate=d),E&&(ve.endTime=E),(l==null?void 0:l.isAllDay)!==void 0&&(ve.isAllDay=l.isAllDay),ve},[l,u,f,d,E]),X=e.useMemo(()=>(i==null?void 0:i.interval)/(i==null?void 0:i.slotCount)||30,[i]);e.useEffect(()=>{L==null||L(X)},[X]);const se=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(wt,{name:"subject",children:[a.jsx(hr,{placeholder:ue.placeholder??s("title"),value:ue.value??((c==null?void 0:c.values.subject)||(l==null?void 0:l.subject)),onChange:Z=>{var ie;c==null||c.onChange("subject",{value:Z.value||""}),(ie=ue.onChange??O)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("subject"),className:`${ue.className??p.EVENT_SUBJECT} ${c!=null&&c.errors.subject?"sf-error":""}`,labelMode:ue.labelMode??"Always",...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.subject)&&a.jsx("div",{className:"sf-form-error",children:c.errors.subject})]})},fe=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(wt,{name:"location",children:[a.jsx(hr,{placeholder:ue.placeholder??s("location"),value:ue.value??((c==null?void 0:c.values.location)||(l==null?void 0:l.location)),onChange:Z=>{var ie;c==null||c.onChange("location",{value:Z.value||""}),(ie=ue.onChange??P)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("location"),className:`${ue.className??p.EVENT_LOCATION} ${c!=null&&c.errors.location?"sf-error":""}`,labelMode:ue.labelMode??"Always",...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.location)&&a.jsx("div",{className:"sf-form-error",children:c.errors.location})]})},pe=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(wt,{name:"startDate",children:[a.jsx(Jr,{placeholder:ue.placeholder??s("startDate"),className:`${ue.className??p.EVENT_START_DATE} ${c!=null&&c.errors.startDate?"sf-error":""}`,labelMode:ue.labelMode??"Always",value:ue.value||(c==null?void 0:c.values.startDate)||u,format:ue.format??t,onChange:Z=>{var ie;c==null||c.onChange("startDate",{value:Z.value}),(ie=ue.onChange??A)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("startDate"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.startDate)&&a.jsx("div",{className:"sf-form-error",children:c.errors.startDate})]})},K=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(wt,{name:"startTime",children:[a.jsx(gr,{placeholder:ue.placeholder??s("startTime"),className:`${ue.className??p.EVENT_START_TIME} ${c!=null&&c.errors.startTime?"sf-error":""}`,labelMode:ue.labelMode??"Always",step:ue.step??m,value:ue.value??((c==null?void 0:c.values.startTime)||f),format:ue.format??n,onChange:Z=>{var ie;c==null||c.onChange("startTime",{value:Z.value}),(ie=ue.onChange??R)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("startTime"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.startTime)&&a.jsx("div",{className:"sf-form-error",children:c.errors.startTime})]})},H=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(wt,{name:"endDate",children:[a.jsx(Jr,{placeholder:ue.placeholder??s("endDate"),className:`${ue.className??p.EVENT_END_DATE} ${c!=null&&c.errors.endDate?"sf-error":""}`,labelMode:ue.labelMode??"Always",value:ue.value??((c==null?void 0:c.values.endDate)||d),format:ue.format??t,onChange:Z=>{var ie;c==null||c.onChange("endDate",{value:Z.value}),(ie=ue.onChange??B)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("endDate"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.endDate)&&a.jsx("div",{className:"sf-form-error",children:c.errors.endDate})]})},y=(ve={})=>{var w;const ue=ve.props??{};return a.jsxs(wt,{name:"endTime",children:[a.jsx(gr,{placeholder:ue.placeholder??s("endTime"),className:`${ue.className??p.EVENT_END_TIME} ${c!=null&&c.errors.endTime?"sf-error":""}`,labelMode:ue.labelMode??"Always",step:ue.step??m,value:ue.value??((c==null?void 0:c.values.endTime)||E),format:ue.format??n,onChange:Z=>{var ie;c==null||c.onChange("endTime",{value:Z.value}),(ie=ue.onChange??k)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("endTime"),strictMode:ue.strictMode??!0,...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.endTime)&&a.jsx("div",{className:"sf-form-error",children:c.errors.endTime})]})},S=(ve={})=>{var w,Z;const ue=ve.props??{};return a.jsxs(wt,{name:"isAllDay",children:[a.jsx(Bo,{label:ue.label??s("allDay"),className:`${ue.className??p.EVENT_ALLDAY} ${c!=null&&c.errors.isAllDay?"sf-error":""}`,checked:ue.checked??(c==null?void 0:c.values.isAllDay)??(l==null?void 0:l.isAllDay),onChange:ie=>{var re;c==null||c.onChange("isAllDay",{value:ie.value}),(re=ue.onChange??b)==null||re(ie)},...ue}),((w=c==null?void 0:c.modified)==null?void 0:w.isAllDay)&&((Z=c==null?void 0:c.errors)==null?void 0:Z.isAllDay)&&a.jsx("div",{className:"sf-form-error",children:c.errors.isAllDay})]})},I=(ve={})=>{const ue=ve.props??{};return a.jsx(wt,{name:"repeatMode",children:a.jsx(Fo,{dataSource:g,fields:{text:"text",value:"value"},value:ue.value??h,placeholder:ue.placeholder??s("repeat"),labelMode:"Always",onChange:ue.onChange??N,...ue})})},q=(ve={})=>{var w;const ue=ve.props??{};return a.jsx("div",{className:p.DESCRIPTION_ROW,children:a.jsxs(wt,{name:"description",children:[a.jsx(bi,{placeholder:ue.placeholder??s("description"),className:`${ue.className??p.EVENT_DESCRIPTION} ${c!=null&&c.errors.description?"sf-error":""}`,labelMode:ue.labelMode??"Always",value:ue.description??((c==null?void 0:c.values.description)||(l==null?void 0:l.description)),width:ue.width??"100%",resizeMode:ue.resizeMode??It.Vertical,onChange:Z=>{var ie;c==null||c.onChange("description",{value:Z.value||""}),(ie=ue.onChange??T)==null||ie(Z)},onBlur:()=>c==null?void 0:c.onBlur("description"),...ue}),((w=c==null?void 0:c.errors)==null?void 0:w.description)&&a.jsx("div",{className:"sf-form-error",children:c.errors.description})]})})},_={subject:se,location:fe,startDate:pe,startTime:K,endDate:H,endTime:y,isAllDay:S,repeatMode:I,description:q},U=e.useMemo(()=>!o||o.length===0?vs:o.filter(ve=>ve.visible!==!1),[o]),ne=e.useMemo(()=>{const ve=[],ue=new Map(U.map(w=>[w.name,w]));return nc.forEach(w=>{const Z=w.map(ie=>ue.get(ie)).filter(ie=>!!ie);Z.length>0&&ve.push(Z)}),ve},[U]),Q=ve=>{var ue;return(ue=vs.find(w=>w.name===ve))==null?void 0:ue.className},J=e.useCallback(ve=>{const ue=[p.EDITOR_FIELD_CONTAINER,Q(ve.name),ve.className].filter(Boolean).join(" ");if(ve.component)return a.jsx("div",{className:ue,children:ve.component},ve.name);const w=_[ve.name];return w?(ve.name==="startTime"||ve.name==="endTime")&&(l!=null&&l.isAllDay)||ve.name==="repeatMode"&&C==="EditOccurrence"?null:a.jsx("div",{className:ue,children:w(ve)},ve.name):null},[l==null?void 0:l.isAllDay,s,_,C]);return!o||o.length===0?a.jsx(Er,{ref:v,rules:G,initialValues:M,onFormStateChange:D,validateOnChange:!0,autoComplete:"off",children:a.jsxs("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:[a.jsxs("div",{className:`${p.TITLE_LOCATION_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[a.jsx("div",{className:`${p.SUBJECT_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:se()}),a.jsx("div",{className:`${p.LOCATION_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:fe()})]}),a.jsxs("div",{className:`${p.START_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[a.jsx("div",{className:`${p.START_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:pe()}),!(l!=null&&l.isAllDay)&&a.jsx("div",{className:`${p.START_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:K()})]}),a.jsxs("div",{className:`${p.END_ROW} ${p.DISPLAY_FLEX} ${p.EDITOR_FIELDS_ROW}`,children:[a.jsx("div",{className:`${p.END_DATE_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:H()}),!(l!=null&&l.isAllDay)&&a.jsx("div",{className:`${p.END_TIME_CONTAINER} ${p.EDITOR_FIELD_CONTAINER}`,children:y()})]}),a.jsx("div",{className:`${p.ALL_DAY_TIMEZONE_ROW} ${p.DISPLAY_FLEX}`,children:a.jsx("div",{className:`${p.ALL_DAY_CONTAINER}`,children:S()})}),C!=="EditOccurrence"&&a.jsx("div",{className:`${p.REPEAT_MODE_ROW} ${p.DISPLAY_FLEX}`,children:a.jsx("div",{className:`${p.REPEAT_MODE}`,children:I()})}),a.jsx("div",{className:p.DESCRIPTION_ROW,children:a.jsx("div",{className:p.DESCRIPTION_CONTAINER,children:q()})})]})}):a.jsx(Er,{ref:v,rules:G,initialValues:M,onFormStateChange:D,validateOnChange:!0,autoComplete:"off",children:a.jsx("div",{className:`${p.DIALOG_CONTENT} ${p.DISPLAY_FLEX}`,children:ne.map((ve,ue)=>{const w=ve.map(J).filter(Boolean);return w.length?a.jsx("div",{className:`${p.EDITOR_FIELDS_ROW} ${p.DISPLAY_FLEX}`,children:w},`row-${ue}`):null})})})},sc=()=>{const{locale:o}=$e(),{getString:r}=tt(o||"en-US"),{recurrenceOpen:s,closeRecurrenceEditor:t,recurrenceStart:n,recurrenceRule:i,handleRecurrenceRuleChange:l}=Gn(),[u,f]=e.useState(i),d=e.useCallback(h=>{f(h.value)},[]),E=e.useCallback(()=>{l(u),t()},[u,t,l]),m=e.useCallback(()=>{t()},[t]),g=e.useMemo(()=>a.jsxs("div",{className:p.DIALOG_FOOTER,children:[a.jsx(Ze,{className:p.SAVE_EVENT,variant:qe.Standard,onClick:E,children:r("save")}),a.jsx(Ze,{className:p.CANCEL_EVENT,variant:qe.Standard,onClick:m,children:r("cancel")})]}),[E,m]);return s?a.jsx(Cn,{header:r("customRecurrence"),footer:g,open:s,onClose:t,modal:!0,style:{width:"500px",minHeight:"388px"},className:`${p.DIALOG}`,children:a.jsx(Uo,{value:u,onChange:d,startDate:n})}):null},oc=({open:o,onClose:r,fields:s,action:t,children:n,dialogProps:i,className:l,style:u})=>{const{locale:f}=$e(),{getString:d}=tt(f||"en-US"),{handleCancel:E,handleDelete:m,handleSave:g}=tc(r),{formState:h}=Gn(),c=e.useMemo(()=>i!=null&&i.header?i.header:d(t==="Add"?"newEvent":"editEvent"),[i==null?void 0:i.header,t,d]),v=e.useMemo(()=>i!=null&&i.footer?i==null?void 0:i.footer:a.jsxs("div",{className:p.DIALOG_FOOTER,children:[t!=="Add"&&a.jsx(Ze,{className:p.DELETE_EVENT,variant:qe.Standard,onClick:m,children:d("delete")}),a.jsx(Ze,{className:p.SAVE_EVENT,variant:qe.Standard,onClick:g,children:d("save")}),a.jsx(Ze,{className:p.CANCEL_EVENT,variant:qe.Standard,onClick:E,children:d("cancel")})]}),[i==null?void 0:i.footer,t,m,g,E,h==null?void 0:h.allowSubmit]);return a.jsxs(a.Fragment,{children:[a.jsx(Cn,{header:c,open:o,onClose:r,modal:(i==null?void 0:i.modal)??!0,style:{width:"500px",minHeight:"300px",...u},className:`${p.DIALOG} ${l||""}`,footer:v,...i,children:a.jsx("div",{className:p.FORM_CONTAINER,children:n||a.jsx(rc,{fields:s})})}),a.jsx(sc,{})]})};function ic(o,r){switch(r.type){case"setField":return{...o,[r.key]:r.value};case"setMany":return{...o,...r.payload};default:return o}}const lc=(o,r,s,t,n)=>{const[i,l]=e.useState(!1),[u,f]=e.useState(),d=e.useRef(null),E=e.useRef(n);e.useEffect(()=>{E.current=n},[n]);const g={subject:"",location:"",description:"",startTime:void 0,endTime:void 0,isAllDay:!1,action:"Add",originalData:void 0,repeatData:[{value:"Never",text:"Never"},{value:"FREQ:DAILY",text:"Daily"},{value:"FREQ:WEEKLY",text:"Weekly"},{value:"FREQ:MONTHLY",text:"Monthly"},{value:"Custom",text:"Custom"}],recurrenceRule:void 0},[h,c]=e.useReducer(ic,g),v=e.useCallback(Y=>c({type:"setField",key:"subject",value:Y}),[c]),D=e.useCallback(Y=>c({type:"setField",key:"location",value:Y}),[c]),O=e.useCallback(Y=>c({type:"setField",key:"description",value:Y}),[c]),P=e.useCallback(Y=>c({type:"setField",key:"startTime",value:Y}),[c]),T=e.useCallback(Y=>c({type:"setField",key:"endTime",value:Y}),[c]),A=e.useCallback(Y=>c({type:"setField",key:"isAllDay",value:Y}),[c]),R=e.useCallback(Y=>c({type:"setField",key:"recurrenceRule",value:Y}),[c]),B=e.useCallback(Y=>c({type:"setField",key:"action",value:Y}),[c]),k=e.useCallback(Y=>c({type:"setField",key:"originalData",value:Y}),[c]),{eventSettings:b}=We(),N=e.useCallback((Y,De)=>{const me=[{value:"Never",text:"Never"},{value:Ln("DAILY",Y),text:"Daily"},{value:Ln("WEEKLY",Y),text:"Weekly"},{value:Ln("MONTHLY",Y),text:"Monthly"},{value:Ln("YEARLY",Y),text:"Yearly"},{value:"Custom",text:"Custom"}];if(De){const Oe=me.find(Pe=>Pe.value===De);if(Oe){c({type:"setField",key:"repeatData",value:me}),R(De),Se(Oe.value);return}if(typeof De=="string"){const Pe={value:De,text:De},Ye=Math.max(0,me.length-1),He=[...me.slice(0,Ye),Pe,...me.slice(Ye)];c({type:"setField",key:"repeatData",value:He}),R(De),Se(De);return}c({type:"setField",key:"repeatData",value:me}),R(""),Se("Never")}else c({type:"setField",key:"repeatData",value:me}),R(""),Se("Never")},[c]),L=e.useCallback(Y=>{if(o==null||o(Y),Y.cancel)return;s==null||s();const De=Y.isAllDay?F.normalizeDate(Y.startTime):Y.startTime,me={startTime:De,endTime:Y.isAllDay?De:Y.endTime};N(De),c({type:"setMany",payload:{subject:"",location:"",description:"",isAllDay:Y.isAllDay,action:"Add",startTime:me.startTime,endTime:me.endTime}}),l(!0)},[o,s]),C=e.useCallback(Y=>{if(r==null||r(Y),Y.cancel)return;s==null||s(),Y!=null&&Y.data||(Y.data={});const De=!!Y.data.isAllDay,me=De?F.normalizeDate(Y.data.startTime):Y.data.startTime,Oe=De?F.normalizeDate(Y.data.endTime):Y.data.endTime;N(me,Y.data.recurrenceRule);const Pe={originalData:Y.data,subject:Y.data.subject??"",location:Y.data.location??"",description:Y.data.description??"",isAllDay:De,startTime:me,endTime:Oe};if(Y.data.recurrenceID||Y.data[b.fields.recurrenceID]){t==null||t(Ye=>{let He={};Ye==="series"&&(He=Rr(Y.data,E.current,b.fields),N(me,Y.data.recurrenceRule??(He==null?void 0:He.recurrenceRule))),c({type:"setMany",payload:{action:Ye==="series"?"EditSeries":"EditOccurrence",...Pe,startTime:Ye==="series"?He.startTime:me,endTime:Ye==="series"?He.endTime:Oe}}),l(!0)});return}c({type:"setMany",payload:{action:"Edit",...Pe}}),l(!0)},[r,s,b,t]),G=e.useCallback(()=>l(!1),[]),{subject:M,location:X,description:se,startTime:fe,endTime:pe,isAllDay:K,action:H,originalData:y,recurrenceRule:S,repeatData:I}=h,[q,_]=e.useState(30),[U,ne]=e.useState(void 0),[Q,J]=e.useState(void 0),[Ne,ve]=e.useState(void 0),[ue,w]=e.useState(void 0),[Z,ie]=e.useState(!1),[re,Se]=e.useState("Never"),[ee,oe]=e.useState(!1);e.useEffect(()=>{if(!i)return;const Y=fe?new Date(fe):void 0,De=pe?new Date(pe):void 0;ne(Y?F.normalizeDate(Y):void 0),ve(De?F.normalizeDate(De):void 0),ie(!1),J(fe?new Date(fe):Q),w(pe?new Date(pe):ue)},[i,fe,pe]);const ce=e.useCallback((Y,De)=>F.combineDateAndTime(Y,De),[]),x=e.useCallback(Y=>{ne(Y==null?void 0:Y.value)},[]),V=e.useCallback(Y=>{const De=Y==null?void 0:Y.value;if(J(De),!De)return;const me=ce(U,De),Oe=ce(Ne??U,ue);if(!Z&&F.isMidnight(ue)){const Pe=new Date(De);Pe.setMinutes(Pe.getMinutes()+q),w(Pe)}else if(me&&Oe&&Oe<=me){const Pe=new Date(De);Pe.setMinutes(Pe.getMinutes()+q),w(Pe)}},[U,Ne,ue,Z,q,ce]),z=e.useCallback(Y=>{ve(Y==null?void 0:Y.value)},[]),te=e.useCallback(Y=>{const De=Y==null?void 0:Y.value;w(De),ie(!!De)},[]),he=e.useCallback(Y=>{if(A(Y==null?void 0:Y.value),H==="Add"&&(Y==null?void 0:Y.value)===!1)if(!Z&&F.isMidnight(ue)){const De=Q?new Date(Q):new Date(0);Q||De.setHours(0,0,0,0),De.setMinutes(De.getMinutes()+q),w(De)}else{const De=ce(U,Q),me=ce(Ne??U,ue);if(De&&me&&me<=De){const Oe=Q?new Date(Q):new Date(me);Oe.setMinutes(Oe.getMinutes()+q),w(Oe)}}},[H,Z,ue,Q,q,ce,U,Ne]),Ee=e.useCallback(Y=>{v(Y.value)},[]),be=e.useCallback(Y=>{D(Y.value)},[]),ke=e.useCallback(()=>{oe(!0)},[]),de=e.useCallback(()=>{oe(!1)},[]),Ce=e.useCallback(Y=>{const De=Y==null?void 0:Y.value;Se(De),De!=="Never"&&De!=="Custom"&&R(De),De==="Never"&&R(""),De==="Custom"&&ke()},[Se,ke]),$=e.useCallback(Y=>{R(Y)},[]),W=e.useCallback(Y=>{O(Y==null?void 0:Y.value)},[]),ae=e.useCallback(Y=>{if(!Y)return;const De=(me,Oe,Pe)=>{v(Y.subject),D(Y.location),O(Y.description),P(Pe==="series"?Oe.startTime:Y.startTime),T(Pe==="series"?Oe.endTime:Y.endTime),A(!!Y.isAllDay),k(Y),N(Y.startTime,Y.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule)),me&&R(me),l(!0)};Y.recurrenceID||Y[b.fields.recurrenceID]?t==null||t(me=>{let Oe={};me==="series"&&(Oe=Rr(Y,E.current,b.fields)),B(me==="series"?"EditSeries":"EditOccurrence");const Pe=me==="series"?Y.recurrenceRule??(Oe==null?void 0:Oe.recurrenceRule):void 0;De(Pe,Oe,me)}):(B("Edit"),De())},[b,b.fields,t]),ge=e.useCallback(Y=>{B("Add");const De={subject:Y[b.fields.subject]??"",location:Y[b.fields.location]??"",description:Y[b.fields.description]??"",startTime:Y[b.fields.startTime]??Y.startTime,endTime:Y[b.fields.endTime]??Y.endTime,isAllDay:Y[b.fields.isAllDay]??(Y==null?void 0:Y.isAllDay)??!1};if(v(De.subject),D(De.location),O(De.description),k(void 0),De.isAllDay){const me=F.normalizeDate(De.startTime);P(me),T(me)}else P(De.startTime),T(De.endTime);A(De.isAllDay),N(De.startTime),l(!0)},[]),Ae=e.useCallback(Y=>{if(!U||!Ne)return Y("invalidDateValue");if(!K&&(!Q||!ue))return Y("invalidTimeValue");let De,me;return K?(De=U?F.normalizeDate(U):void 0,me=Ne?F.normalizeDate(Ne):void 0):(De=F.combineDateAndTime(U,Q),me=F.combineDateAndTime(Ne,ue)),De&&me&&me<De?Y("invalidDateRange"):null},[U,Q,Ne,ue,K]),Re=e.useMemo(()=>K?U?F.normalizeDate(U):fe:F.combineDateAndTime(U,Q)??fe,[K,U,Q,fe]);return{open:i,data:{subject:M,location:X,startTime:fe,endTime:pe,isAllDay:K,description:se,recurrenceRule:S},action:H,originalData:y,setOpen:l,onCellDoubleClickHandler:L,onEventDoubleClickHandler:C,onClose:G,startDateOnly:U,startTimeOnly:Q,endDateOnly:Ne,endTimeOnly:ue,slotDuration:q,recurrenceStart:Re,repeatModeValue:re,repeatData:I,recurrenceOpen:ee,recurrenceRule:S,setRepeatModeValue:Se,setSlotDuration:_,handleSubjectChange:Ee,handleLocationChange:be,handleDescriptionChange:W,handleStartDateChange:x,handleStartTimeChange:V,handleEndDateChange:z,handleEndTimeChange:te,handleIsAllDayChange:he,handleRecurrenceRuleChange:$,handleRepeatModeChange:Ce,closeRecurrenceEditor:de,onEditEvent:ae,onMoreDetails:ge,formState:u,setFormState:f,formRef:d,validateRequiredFields:Ae}},cc=()=>{const o=e.useRef({visible:!1}),r=e.useRef(null),s=e.useCallback(n=>{var i;o.current={...n,visible:!0},(i=r.current)==null||i.call(r,o.current)},[]),t=e.useCallback(()=>{var n;o.current.visible=!1,(n=r.current)==null||n.call(r,{...o.current})},[]);return{show:s,hide:t,setStateUpdater:n=>{r.current=n}}},ac=({children:o,onTooltipOpen:r,content:s,arrow:t,...n})=>{const[i,l]=e.useState(null),{locale:u}=$e(),{getString:f}=tt(u),{timeFormat:d}=We(),{eventsData:E}=Kt(),m=e.useRef(E);e.useEffect(()=>{m.current=E},[E]);const g=c=>{const v=c.closest("."+p.APPOINTMENT);if(!v)return!1;const D=v==null?void 0:v.getAttribute("data-guid"),O=Me.getEventByGuid(m.current,D),P={cancel:!1,data:O};if(r==null||r(P),P.cancel)return!1;if(typeof s=="function"){const T=s({data:O});l(T)}else if(s!=null)l(s);else{const T=h(O);l(T)}return!0},h=e.useCallback(c=>{const v=c.subject??c.description??f("addTitle"),D=F.formatStartAndEndDateRange(c.startTime,c.endTime,u),O=F.formatTimeDisplay(c,u,d);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:p.SCHEDULER_TOOLTIP_SUBJECT,children:v}),a.jsxs("div",{className:p.SCHEDULER_TOOLTIP_TEXT,children:[D?a.jsx("div",{children:D}):null,!c.isAllDay&&O?a.jsx("div",{children:O}):null]})]})},[f,d,u]);return a.jsx($s,{className:p.SCHEDULER_TOOLTIP,onFilterTarget:g,arrow:t??!1,content:a.jsx(a.Fragment,{children:i}),...n,children:o})},Eo=e.forwardRef((o,r)=>{const{height:s,width:t,selectedDate:n,defaultSelectedDate:i,view:l,defaultView:u,eventSettings:f,timeScale:d,workHours:E,startHour:m,endHour:g,showWeekend:h,firstDayOfWeek:c,workDays:v,showTimeIndicator:D,showWeekNumber:O,dateFormat:P,timeFormat:T,dateHeader:A,cell:R,headerIndent:B,eventOverlap:k,rowAutoHeight:b,readOnly:N,showQuickInfoPopup:L,header:C,quickInfo:G,keyboardNavigation:M,onDataRequest:X,onSelectedDateChange:se,onViewChange:fe,onCellClick:pe,onCellDoubleClick:K,onEventClick:H,onEventDoubleClick:y,onDataChangeStart:S,onDataChangeComplete:I,eventDrag:q,eventResize:_,onResizeStart:U,onResizing:ne,onResizeStop:Q,onDragStart:J,onDrag:Ne,onDragStop:ve,onError:ue,onMoreEventsClick:w,eventTooltip:Z,onTooltipOpen:ie,onEditorSubmit:re,editor:Se,children:ee,className:oe,weekRule:ce,enableRecurrenceValidation:x,...V}=_s(Sr,o),z=e.useRef(null),te=e.useRef(null),he=e.useRef(null),Ee=cc(),[be,ke]=e.useState({visible:!1});e.useEffect(()=>{Ee.setStateUpdater(ke)},[]);const{locale:de}=$e(),{getString:Ce}=tt(de||"en-US"),{cellEditRef:$,handleClose:W,onCellClickHandler:ae,onEventClickHandler:ge}=ao(pe,H),Ae=e.useRef(null),Re=lc(K,y,W,Fe=>Fn("recurrenceEdit",Ee,Ce,Fe),Ae.current),{open:Le,data:Y,originalData:De,action:me,onClose:Oe,onCellDoubleClickHandler:Pe,onEventDoubleClickHandler:Ye,onMoreDetails:He,onEditEvent:ht}=Re,ot=e.useMemo(()=>ft.getViewsInfo(ee,Ce),[ee]),{classNames:St,selectedDate:xt,view:Et,renderDates:Pt,activeViewProps:Mt,dateRangeText:er,showCalendar:Dn,calendarView:tr,handleViewButtonClick:nn,handlePreviousClick:rn,handleNextClick:vn,handleTodayClick:sn,handleDateDropdownClick:yn,handleCalendarChange:Ct,renderCurrentView:Rn}=Bi({className:oe,height:s,width:t,selectedDate:n,defaultSelectedDate:i,view:l,defaultView:u,eventSettings:f,timeScale:d,workHours:E,startHour:m,endHour:g,showWeekend:h,firstDayOfWeek:c,workDays:v,showTimeIndicator:D,showWeekNumber:O,dateFormat:P,timeFormat:T,dateHeader:A,cell:R,headerIndent:B,editor:Se,quickInfo:G,eventOverlap:k,showQuickInfoPopup:L,header:C,keyboardNavigation:M,rowAutoHeight:b,readOnly:N,onEditorSubmit:re,onDataRequest:X,onSelectedDateChange:se,onViewChange:fe,onCellClick:ae,onCellDoubleClick:Pe,onEventClick:ge,onEventDoubleClick:Ye,onMoreEventsClick:w,onDataChangeStart:S,onDataChangeComplete:I,eventDrag:q,eventResize:_,onResizeStart:U,onResizing:ne,onResizeStop:Q,onDragStart:J,onDrag:Ne,onDragStop:ve,enableRecurrenceValidation:x,viewComponents:ot,weekRule:ce}),{eventsData:Ht,eventsProcessed:qt,addEvent:jt,deleteEvent:$t,saveEvent:on}=Bl({activeViewProps:Mt,renderDates:Pt,confirmationDialog:Ee});Ae.current=qt;const bn=(Fe,nt)=>{var cn,Ft;if((j=>!!j&&"guid"in j)(Fe)){nt&&((cn=$.current)==null||cn.handleEventClick(Fe,nt));return}Fe&&(Fe!=null&&Fe.element)&&((Ft=$.current)==null||Ft.handleCellClick(Fe,Fe==null?void 0:Fe.element))},Lt=(Fe,nt,yt)=>{Fe==="Add"?He(nt):Fe==="Edit"&&ht(nt)},wn=Fe=>{var Ft;const nt=Fe&&"current"in Fe?Fe==null?void 0:Fe.current:Fe,yt=(Ft=nt==null?void 0:nt.getAttribute)==null?void 0:Ft.call(nt,"data-guid");return Me.getEventByGuid(Ht,yt)??null},it=Fe=>{const nt=Hl(Fe,d);return{startTime:nt.startTime,endTime:nt.endTime,isAllDay:nt.isAllDay,element:nt.element}},Nn=Mt.editor??Se??oc,Vt=e.useMemo(()=>({element:z.current,addEvent:jt,deleteEvent:$t,saveEvent:on,openEditor:Lt,closeEditor:()=>{Oe()},getEventDetails:wn,getCellDetails:it,closeQuickInfoPopup:()=>{var Fe;(Fe=$.current)==null||Fe.hide()},openQuickInfoPopup:bn}),[jt,$t,on,z.current,Ht,Oe]);e.useEffect(()=>{te.current=Vt},[Vt]),e.useEffect(()=>{Ot("scheduler")},[]),e.useImperativeHandle(r,()=>Vt,[Vt]);const Wt={...Mt,handleCalendarChange:Ct,handleViewButtonClick:nn,handlePreviousClick:rn,handleNextClick:vn,handleTodayClick:sn,schedulerRef:te,morePopupRef:he,quickPopupRef:$,keyboardNavigation:M,confirmationDialog:Ee,showDeleteAlert:Fe=>{Ee==null||Ee.show({title:Ce("deleteEvent"),message:Ce("confirmDeleteMessage"),confirmText:Ce("delete"),showCancel:!0,onConfirm:()=>{Fe(),Ee.hide()}})},showRecurrenceEditAlert:Fe=>Fn("recurrenceEdit",Ee,Ce,Fe),showRecurrenceDeleteAlert:Fe=>Fn("recurrenceDelete",Ee,Ce,Fe)},Sn=Z===!0||typeof Z=="object",ln=typeof Z=="object"?Z:void 0,xn=a.jsxs(a.Fragment,{children:[a.jsx("div",{className:p.TABLE_CONTAINER,children:a.jsx("div",{className:p.TABLE_WRAP,children:a.jsxs(ql,{children:[a.jsx(Ql,{}),Rn()]})})}),a.jsx(jr,{ref:he})]});return a.jsx("div",{ref:z,className:St,style:{height:s,width:t},tabIndex:0,role:"application","aria-label":"Scheduler",onKeyDown:Xl(Wt,Ht),...V,children:a.jsx(xr.Provider,{value:Wt,children:a.jsx(Ar.Provider,{value:{renderDates:Pt},children:a.jsxs(Or.Provider,{value:{eventsData:Ht,eventsProcessed:qt},children:[C!==!1&&a.jsx(_l,{view:Et,availableViews:ot,onViewButtonClick:nn,onPreviousClick:rn,onNextClick:vn,onTodayClick:sn,onDateDropdownClick:yn,dateRangeText:er,showCalendar:Dn,calendarView:tr,selectedDate:xt,firstDayOfWeek:Mt.firstDayOfWeek,handleCalendarChange:Ct,renderDates:Pt,customizeHeader:typeof C=="function"?C:void 0}),Sn?a.jsx(ac,{...ln||{},onTooltipOpen:ie,children:xn}):xn,a.jsx(Mr,{ref:$,onClose:W,onEditEvent:ht,onMoreDetails:He}),a.jsx(ec,{editorState:Re,children:a.jsx(Nn,{open:Le,onClose:Oe,data:Y,action:me,originalData:De})}),a.jsx(Jl,{visible:be.visible,title:be.title,message:be.message,confirmText:be.confirmText,showCancel:be.showCancel,action:be.action,onConfirm:be.onConfirm||(()=>Ee.hide()),onCancel:Ee.hide})]})})})})});Eo.displayName="Scheduler";Eo.__docgenInfo={description:`The React Scheduler component that displays a list of events scheduled at specific dates and times, helping users plan and manage their schedule effectively.

\`\`\`typescript
import { Scheduler, DayView, WeekView, WorkWeekView, MonthView } from '@syncfusion/react-scheduler';

<Scheduler>
  <DayView />
  <WeekView />
  <WorkWeekView />
  <MonthView />
</Scheduler>
\`\`\``,methods:[],displayName:"Scheduler"};const uc=o=>a.jsx(a.Fragment,{children:o.children});uc.displayName="SchedulerHeader";const dc=({showTimeIndicator:o,startHour:r,endHour:s,renderDates:t,onPositionUpdate:n})=>{const[i,l]=e.useState(0),[u,f]=e.useState(new Date),[d,E]=e.useState(!1),[m,g]=e.useState(!1),h=e.useRef(null),c=t.length>1,v=!!(t&&t.length>0),D=e.useCallback(()=>{const A=new Date,R=F.getStartEndHours(r),B=F.getStartEndHours(s),k=A.getHours()*Ge+A.getMinutes(),b=R.getHours()*Ge+R.getMinutes(),N=B.getHours()===0&&B.getMinutes()===0?es*Ge:B.getHours()*Ge+B.getMinutes();return k>=b&&k<=N},[r,s]),O=e.useCallback(()=>{const A=new Date,R=F.getStartEndHours(r),B=F.getStartEndHours(s),k=(A.getHours()-R.getHours())*Ge+(A.getMinutes()-R.getMinutes()),b=R.getHours()*Ge+R.getMinutes(),L=(B.getHours()===0&&B.getMinutes()===0?es*Ge:B.getHours()*Ge+B.getMinutes())-b,C=k/L*100;return Math.max(0,Math.min(100,C))},[r,s]),P=e.useCallback(()=>{const A=new Date,R=D();if(Math.abs(A.getTime()-u.getTime())>=tn&&f(A),m!==R&&g(R),d!==(R&&o)&&E(R&&o),!R)return;const B=O();Math.abs(B-i)>.1&&l(B)},[O,u,d,m,i,o,D]);e.useEffect(()=>{if(o)return P(),h.current=setInterval(()=>{P()},tn),()=>{h.current&&(clearInterval(h.current),h.current=null)}},[o,P]);const T=e.useCallback(()=>{const A=new Date,R=(t==null?void 0:t.length)>0&&t.some(k=>F.isSameDay(k,A));if(!v||!R)return{isMultiDayView:c,hasValidRenderDates:v,columns:[],isCurrentDayRendered:!1};if(!c){const k=t.length===1&&F.isSameDay(t[0],A);return{isMultiDayView:c,hasValidRenderDates:v,columns:[],isCurrentDayRendered:k}}const B=t.map((k,b)=>{const N=F.isSameDay(k,A),L=k<A&&!F.isSameDay(k,A);if(k>A&&!F.isSameDay(k,A)||!N&&!L)return null;const G=100/t.length,M=b*G;return{key:k.getTime(),isCurrentDay:N,leftPosition:M,columnWidth:G}}).filter(Boolean);return{isMultiDayView:c,hasValidRenderDates:v,columns:B,isCurrentDayRendered:R}},[c,v,t]);return e.useEffect(()=>{n&&n(i,d&&m&&T().isCurrentDayRendered)},[i,d,m,n,T]),{position:i,currentTime:u,isVisible:d,isWithinBounds:m,multiDayViewInfo:T(),updatePosition:P}},fc=o=>{const{onPositionUpdate:r}=o,{renderDates:s}=pt(),{showTimeIndicator:t,startHour:n,endHour:i}=We(),{position:l,isVisible:u,isWithinBounds:f,multiDayViewInfo:d}=dc({showTimeIndicator:t,startHour:n,endHour:i,renderDates:s,onPositionUpdate:r});return!u||!f||!d.isCurrentDayRendered?null:!d.isMultiDayView||!d.hasValidRenderDates?a.jsx("div",{className:p.CURRENT_TIMELINE,style:{top:`${l}%`}}):a.jsx(a.Fragment,{children:d.columns.map(E=>a.jsx("div",{className:E.isCurrentDay?p.CURRENT_TIMELINE:p.PREVIOUS_TIMELINE,style:{top:`${l}%`,width:`${E.columnWidth}%`,insetInlineStart:`${E.leftPosition}%`}},E.key))})},mc=(o,r,s,t)=>{let n=0,i=!1;for(;!i;){i=!0;for(const l of o){const u=F.normalizeDate(l);if(u>=r&&u<=s){const f=F.generateDateKey(l);if((t.get(f)||[]).findIndex((m,g)=>g===n&&m)!==-1){i=!1,n++;break}}}}return n},pc=(o,r=2)=>{const{eventSettings:s}=We(),{renderDates:t}=pt(),{eventsData:n}=Kt(),i=e.useMemo(()=>{if(!(t!=null&&t.length)||!(n!=null&&n.length))return[];const h=n.filter(T=>!T.startTime||!T.endTime||T.isBlock?!1:T.isAllDay&&!Me.isMultiDayEvent(T)),c=n.filter(T=>!T.startTime||!T.endTime?!1:s.spannedEventPlacement==="AllDayRow"?!T.isAllDay&&F.isLessthan24Hours(T.startTime,T.endTime)?!1:Me.isMultiDayEvent(T):T.isAllDay&&Me.isMultiDayEvent(T));let v=new Map;t.forEach(T=>{const A=F.generateDateKey(T);v.set(A,[])});const D=[],O=[...h,...c];return F.sortByTimeAndSpan(O).forEach(T=>{if(!T.startTime||!T.endTime)return;const A=F.normalizeDate(T.startTime),R=F.normalizeDate(T.endTime),B=Me.isMultiDayEvent(T),k=B?F.getDaysCount(A,R)+1:1,b=mc(t,A,R,v),N=["sf-appointment"];if((T.isAllDay||k>1)&&N.push("sf-all-day-appointment"),T.isReadonly&&N.push("sf-read-only"),B)for(const L of t){const C=F.normalizeDate(L);if(C>=A&&C<=R){v=at.setIndexPosition(v,L,b);const G=C.getTime()===A.getTime(),M=C.getTime()===R.getTime(),X=Math.floor((C.getTime()-A.getTime())/(1e3*60*60*24)),se=t.findIndex(H=>{const y=F.normalizeDate(H);return y>=A&&y<=R})===t.findIndex(H=>F.normalizeDate(H).getTime()===C.getTime()),fe=G?new Date(T.startTime.getTime()):new Date(C.getFullYear(),C.getMonth(),C.getDate(),0,0,0),pe=M?new Date(T.endTime.getTime()):new Date(C.getFullYear(),C.getMonth(),C.getDate(),0,0,0),K=`${L.toISOString()}-${T.id}`;D.push({event:T,startDate:fe,endDate:pe,isFirstDay:G,isLastDay:M,isFirstSegmentInRenderRange:se,segmentIndex:X,totalSegments:k,positionIndex:b,eventClasses:N,eventKey:K})}}else{v=at.setIndexPosition(v,A,b);const L=`${A.toISOString()}-${T.id}`;D.push({event:T,startDate:T.startTime,endDate:T.endTime,positionIndex:b,eventClasses:N,eventKey:L})}}),D.sort((T,A)=>{const R=T.positionIndex??0,B=A.positionIndex??0;return R-B})},[n,t,s.spannedEventPlacement,s.fields]),l=e.useMemo(()=>Me.getEventsMap(t,i),[t,i]),u=e.useMemo(()=>Me.isAlldayHasMoreEvents(t,l,r),[l,r,t]),f=e.useMemo(()=>Me.getMaxEventsInCell(l,t),[l,t]),d=e.useMemo(()=>o?f>r?r-1:r:1/0,[o,f,r]),E=e.useCallback(()=>{const h=Me.getMaxEventsInCell(l,t);return h>3&&!o?h*(Yn+gn):Math.min(3,h)*(Yn+gn)},[o,l,t]),m=e.useCallback(h=>[...l.get(h)||[]].sort((D,O)=>(D.positionIndex??0)-(O.positionIndex??0)).slice(0,d),[l,d]),g=e.useCallback(h=>{const c=l.get(h)||[];return Math.max(0,c.length-d)},[l,d]);return{allDayRowEvents:i,eventsByDate:l,hasEventsExceedingMaxCount:u,maxEventsInAnyColumn:f,visibleEventLimit:d,calculateHeight:E,getVisibleEvents:m,getHiddenEventCount:g}},hc=o=>{const{eventInfo:r,renderDates:s}=o,t=e.useMemo(()=>({...r.event}),[r]),n=e.useMemo(()=>at.getOverflowDirection(r,s),[r.event.startTime,r.event.endTime,s,r]),i=e.useMemo(()=>at.calculatePositionStyles(r,s),[r,s]);return{processedEvent:t,overflowDirection:n,positionStyle:i}};class _t{constructor(){Object.defineProperty(this,"isActionPerformed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"removeDocListenersRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cellWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scrollInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slotInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isMonthView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isAllDaySource",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"cloneRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"minScrollSpeed",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"minScrollThreshold",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"enableScroll",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"currentCell",{enumerable:!0,configurable:!0,writable:!0,value:null})}performAutoScrolling(r,s){var A,R;const{clientX:t,clientY:n}=this.getPointerCoordinates(r);if(t==null||n==null)return;const i=s==null?void 0:s.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}`),l=(A=s==null?void 0:s.closest(`.${p.SCHEDULER}`))==null?void 0:A.querySelector(`.${p.MAIN_SCROLL_CONTAINER}`),u=[i,l].filter(Boolean);if(u.length===0)return;const f=u.find(B=>B.scrollHeight>B.clientHeight)||null,d=u.find(B=>B.scrollWidth>B.clientWidth)||null;if(!f&&!d)return;const E=((R=f||d)==null?void 0:R.closest(`.${p.SCHEDULER}`))||(s==null?void 0:s.closest(`.${p.SCHEDULER}`)),m=E==null?void 0:E.querySelector(`.${p.STICKY_HEADER}, .${p.HEADER_SECTION}, .${p.HEADER_ROW}`),g=f?f.getBoundingClientRect():null,h=d?d.getBoundingClientRect():null,c=(m==null?void 0:m.getBoundingClientRect().bottom)??(g?g.top:h?h.top:0);this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);const v=(B,k=this.minScrollThreshold)=>{if(B>k||B<0)return 0;const b=Math.floor((1-B/k)*this.minScrollSpeed);return isFinite(b)?b:0},D=()=>{let B=0;if(f&&g){const k=Math.max(0,f.scrollHeight-f.clientHeight),b=Math.max(0,n-c),N=Math.max(0,d?d.offsetHeight-d.clientHeight:0,f?f.offsetHeight-f.clientHeight:0),L=g.bottom-N,C=Math.max(0,L-n),G=this.minScrollThreshold+N,M=f.scrollTop<=0,X=Math.ceil(f.scrollTop)>=k;b<this.minScrollThreshold&&!M?B=-v(b):C<G&&!X&&(B=v(C,G))}return B},O=()=>{let B=0;if(d&&h){const k=Math.max(0,d.scrollWidth-d.clientWidth),b=Math.max(0,t-h.left),N=Math.max(0,h.right-t),L=d.scrollLeft<=0,C=d.scrollLeft>=k;b<this.minScrollThreshold&&!L?B=-v(b):N<this.minScrollThreshold&&!C&&(B=v(N))}return B},P=D(),T=O();if(P!==0||T!==0){const B=()=>{let k=!1;if(!(!this.currentCell&&_t.currentActionName!=="resize")&&!this.isAllDaySource){if(f&&P!==0){const b=Math.max(0,f.scrollHeight-f.clientHeight),N=Math.max(0,Math.min(b,f.scrollTop+P));N!==f.scrollTop&&(f.scrollTop=N,k=!0)}if(d&&T!==0){const b=Math.max(0,d.scrollWidth-d.clientWidth),N=Math.max(0,Math.min(b,d.scrollLeft+T));N!==d.scrollLeft&&(d.scrollLeft=N,k=!0)}if(!k){this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);return}this.scrollInterval=requestAnimationFrame(B)}};this.scrollInterval=requestAnimationFrame(B)}}getPointerCoordinates(r){if(!r)return{clientX:null,clientY:null};let s=null,t=null;return r.touches&&r.touches.length>0?(s=r.touches[0].clientX,t=r.touches[0].clientY):r.changedTouches&&r.changedTouches.length>0?(s=r.changedTouches[0].clientX,t=r.changedTouches[0].clientY):r.clientX!=null&&r.clientY!=null&&(s=r.clientX,t=r.clientY),{clientX:s,clientY:t}}getContentWrap(r){return r?r.closest(`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}, .${p.WORK_CELLS_CONTAINER}, .${p.DATE_HEADER_CONTAINER}`):null}getCurrentTargetDate(r,s){var l,u;if(!r&&!s)return null;let t=null;const n=(l=r||s)==null?void 0:l.closest(`.${p.SCHEDULER}`),i=s==null?void 0:s.closest(`.${p.ALL_DAY_ROW}`);if(n&&i&&s){const d=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`)).indexOf(s),E=n.querySelector(`.${p.CONTENT_TABLE}, .${p.WORK_CELLS_ROW}`),g=(u=(E?Array.from(E.querySelectorAll(`.${p.WORK_CELLS}`)):[])[d])==null?void 0:u.getAttribute("data-date");g&&(t=Number(g))}return t}getCell(r,s,t){const n=document==null?void 0:document.elementsFromPoint(r,s);for(const i of n){const l=i.classList.contains(`${p.WORK_CELLS}`)||i.classList.contains(`${p.ALL_DAY_CELL}`)?i:null;if(l&&(t||!(this!=null&&this.isAllDaySource)||i.classList.contains(p.ALL_DAY_CELL)))return l}return null}getCellUnderPointer(r){const{clientX:s,clientY:t}=this.getPointerCoordinates(r);return s==null||t==null?null:this.getCell(s,t,!0)}getCellUnderClone(r){if(!this.cloneRef||!r)return null;const s=this.getContentWrap(r),t=s==null?void 0:s.getBoundingClientRect();if(!s||!t)return null;const n=(v,D=0)=>isFinite(v)?v:D,i=s.scrollLeft||0;let l=0,u=0;const f=s.querySelector(`.${p.ALL_DAY_ROW}`);if(!f)return null;const d=Array.from(f.querySelectorAll(`.${p.ALL_DAY_CELL}`));if(d.length===0)return null;const E=d[0],m=Math.max(1,E.offsetWidth||this.cellWidth||1),g=n(parseFloat(this.direction==="rtl"?this.cloneRef.style.right:this.cloneRef.style.left||"0"),0),h=Math.max(1,Math.ceil(this.cloneRef.offsetWidth/m));l=this.direction==="rtl"?t.right-g-this.cloneRef.offsetWidth/h+i:t.left+g+this.cloneRef.offsetWidth/h-i;const c=Math.max(0,E.offsetHeight);return u=t.top+f.offsetTop+c/2,this.getCell(l,u,!1)}cloneFromSource(r,s){const t=r.cloneNode(!0);return t.classList.add(p.DRAG_CLONE,p.NO_POINTER,p.POSITION_ABSOLUTE),s!=null&&s.externalDragAndDrop&&(t.classList.add(p.EXTERNAL_DRAG_CLONE,p.CONTROL),t.style.zIndex=As(t).toString()),t}suppressEvent(r){var s,t;(this.isActionPerformed||_t.currentActionName==="resize")&&(_t.currentActionName="",(s=r==null?void 0:r.preventDefault)==null||s.call(r),(t=r==null?void 0:r.stopPropagation)==null||t.call(r))}addDocSuppressors(){const r=["click"],s=t=>this.suppressEvent(t);r.forEach(t=>document==null?void 0:document.addEventListener(t,s,!0)),this.removeDocListenersRef=()=>{this.removeDocListenersRef&&(r.forEach(t=>document==null?void 0:document.removeEventListener(t,s,!0)),this.removeDocListenersRef=void 0)}}setCursorClass(r){document!=null&&document.body&&(document.body.classList.remove(p.SCHEDULER_CURSOR_MOVE,p.SCHEDULER_CURSOR_NOT_ALLOWED,p.SCHEDULER_CURSOR_DEFAULT),r==="move"?document.body.classList.add(p.SCHEDULER_CURSOR_MOVE):r==="notAllowed"?document.body.classList.add(p.SCHEDULER_CURSOR_NOT_ALLOWED):document.body.classList.add(p.SCHEDULER_CURSOR_DEFAULT))}getCurrentTargetCell(r){if(!r)return null;const s=r.closest(`.${p.DATE_HEADER_CONTAINER}`);if(s){const t=r.closest(`.${p.HEADER_CELLS}`),n=s.querySelector(`.${p.HEADER_ROW}`),i=s.querySelector(`.${p.ALL_DAY_ROW}`);if(n&&i){const l=Array.from(n.querySelectorAll(`.${p.HEADER_CELLS}`)),u=Array.from(i.querySelectorAll(`.${p.ALL_DAY_CELL}`));let f=-1;if(t)f=l.indexOf(t);else for(let d=0;d<l.length;d++)if(l[d].contains(r)){f=d;break}if(f>=0&&u[f])return u[f];if(u.length)return u[0]}}return r.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}getSteppedCellDate(r,s,t,n,i,l){const u=s,f=u?this.getPointerCoordinates(u):{clientY:null},d=l==null?void 0:l.getBoundingClientRect();let E=i;if(d&&f.clientY!=null&&n>0){let m=Math.max(0,Math.round((f.clientY-d.top+l.scrollTop)*n));const g=Math.max(0,this.slotInterval||0);g>0&&(m=Math.floor(m/g)*g);const h=new Date(i);h.setHours(0,0,0,0),E=h.getTime()+(r+m)*tn,E=E-t}else E=i-t;return new Date(E)}}Object.defineProperty(_t,"currentActionName",{enumerable:!0,configurable:!0,writable:!0,value:""});function Ec({ref:o,data:r,containerProps:s}){const t=We(),{timeScale:n,startHour:i,endHour:l,schedulerRef:u,eventSettings:f,showWeekend:d,workDays:E,onDragStart:m,onDrag:g,onDragStop:h,eventOverlap:c,confirmationDialog:v,eventDrag:D,enableRecurrenceValidation:O}=t,P=e.useMemo(()=>({...r,startTime:new Date(r==null?void 0:r.startTime),endTime:new Date(r==null?void 0:r.endTime)}),[r]),{getString:T}=tt(),{dir:A}=$e(),{eventsData:R,eventsProcessed:B}=Kt(),{renderDates:k}=pt(),b=$r(),N=e.useRef(null),L=N,C=e.useRef(null),G=e.useRef({}),M=e.useRef({minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}),X=e.useRef(null),se=e.useRef(0),fe=e.useRef(0),pe=e.useRef(!0),K=e.useRef(null),H=e.useRef(!1),y=e.useRef(null),S=e.useRef(null),I=e.useRef(!1);Xt(N,{tapHold:()=>{pe.current=!1}}),e.useEffect(()=>{n&&C.current&&(C.current.slotInterval=n.interval/n.slotCount)},[n]);const q=e.useCallback($=>{N.current=$,typeof o=="function"?o($):o&&(o.current=$)},[o,b]),_=e.useCallback($=>{if(!$||!C.current)return{};const W=C.current.getContentWrap($),ae=W?W.getBoundingClientRect():null,ge=$.getBoundingClientRect(),Ae=ae?Math.round(ge.left-ae.left+((W==null?void 0:W.scrollLeft)||0)):$.offsetLeft,Re=ae?Math.round(ge.top-ae.top+((W==null?void 0:W.scrollTop)||0)):$.offsetTop;return{left:Ae,top:Re}},[b]),U=e.useCallback(()=>{var $,W;se.current=0,fe.current=0,G.current={},K.current=null,H.current=!1,C.current&&(C.current.setCursorClass("default"),C.current.isActionPerformed=!1,C.current.enableScroll=!0,C.current.scrollInterval!=null&&(cancelAnimationFrame(C.current.scrollInterval),C.current.scrollInterval=null),(W=($=C.current)==null?void 0:$.removeDocListenersRef)==null||W.call($)),X.current!=null&&(cancelAnimationFrame(X.current),X.current=null),M.current={minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}},[]);e.useEffect(()=>()=>{U()},[U]);const ne=()=>{if(X.current=null,!C.current||C.current.scrollInterval==null)return;const $=G.current.lastDragEvent;if($){let W=C.current.getCellUnderPointer($);if(!W){const ae=$.target||null;W=C.current.getCurrentTargetCell(ae)}if(W&&C.current.currentCell){let ae=new Date(Number(W.getAttribute("data-date")));C.current.isAllDaySource&&(ae=F.normalizeDate(ae)),!C.current.isMonthView&&!C.current.isAllDaySource&&(ce(W),M.current.finalDragStartTime&&(ae=M.current.finalDragStartTime)),ie(ae)}}C.current&&C.current.scrollInterval!=null&&(X.current=requestAnimationFrame(ne))},Q=e.useCallback($=>{if(!C.current)return;const W=D.externalDragAndDrop&&C.current.getCellUnderPointer($)||N.current;C.current.performAutoScrolling($,W),C.current.scrollInterval!==null&&X.current===null&&!C.current.isMonthView&&(X.current=requestAnimationFrame(ne))},[_]),J=$=>{const W=C.current.getContentWrap($);if(C.current.isAllDaySource=I.current=$.classList.contains(`${p.ALL_DAY_APPOINTMENT}`),C.current.isAllDaySource){const ae=Me.getEventByGuid(R,r.guid);ae.endTime=new Date(F.normalizeDate(ae.endTime).getTime()+C.current.slotInterval*tn)}if(W){const ae=W.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`);ae&&(se.current=ae.offsetHeight??0,C.current.cellWidth=ae.offsetWidth??0)}return M.current.minutesPerPixel=se.current>0?C.current.slotInterval/se.current:0,C.current.isMonthView=!!($!=null&&$.closest(`.${p.MONTH_VIEW}`)),$.draggable=!1,W},Ne=($,W)=>{var ae;if(C.current.cloneRef=$,D!=null&&D.externalDragAndDrop){C.current.isMonthView&&$.classList.add(`${p.MONTH_EVENT}`);const ge=C.current.isMonthView||C.current.isAllDaySource;ge||($.style.height=N.current.style.height),$.style.width=`${ge?N.current.clientWidth:C.current.cellWidth}px`}else $.style.width="1px",$.style.height="1px";(ae=D.externalDragAndDrop&&(document==null?void 0:document.querySelector(D.eventDragArea))||W||(document==null?void 0:document.body))==null||ae.appendChild($)},ve=()=>{var ae,ge,Ae,Re;const $=(ge=C.current)==null?void 0:ge.getContentWrap((ae=C.current)==null?void 0:ae.currentCell);return((Ae=$==null?void 0:$.closest)==null?void 0:Ae.call($,`.${p.TABLE_WRAP}`))||y.current||((Re=u.current)==null?void 0:Re.element)||null},ue=($,W)=>{const ae=ve();if(!ae)return;const ge={container:ae,payload:{guid:r.guid,segments:$,isDayEvent:W}};window==null||window.dispatchEvent(new CustomEvent("showCloneEvent",{detail:ge}))},w=()=>{C.current.currentCell=y.current=null;const $=document==null?void 0:document.querySelectorAll(`.${p.SCHEDULER}`);$.length&&$.forEach(W=>window==null?void 0:window.dispatchEvent(new CustomEvent("hideCloneEvent",{detail:{container:W}})))},Z=$=>{if(!$)return 0;let W=Math.max(0,$.endTime.getTime()-$.startTime.getTime());return W===0&&$.startTime.getTime()===$.endTime.getTime()&&(W=C.current.slotInterval*tn),W},ie=($,W,ae)=>{var De,me;const ge=D.externalDragAndDrop,Ae=Me.getEventByGuid(R,r.guid);if(!Ae||!C.current)return;let Re=k;if($){const Oe=Z(Ae);Ae.startTime=new Date($),Ae.endTime=new Date(Ae.startTime.getTime()+Oe)}if(ge&&$){const Oe=F.normalizeDate(W??$).getTime();(!Re.some(Ye=>F.normalizeDate(Ye).getTime()===Oe)||t.view!==S.current)&&(t.selectedDate=W??$,Re=F.getRenderDates(S.current,t.selectedDate,t,W,ae))}const Le=C.current.isMonthView||C.current.isAllDaySource;if(Le||!n.enable){const Oe=Me.processCloneEvent(ge?y.current:(De=u.current)==null?void 0:De.element,Re,Ae,d,E,C.current.cellWidth,C.current.isAllDaySource,A==="rtl",C.current.isMonthView,N.current);ge?ue(Oe,Le):b==null||b.show({guid:r.guid,segments:Oe,isDayEvent:Le});return}const Y=Me.processTimeSlotCloneEvent(ge?y.current:(me=u.current)==null?void 0:me.element,Re,Ae,n,i,l,C.current.cellWidth,A==="rtl");ge?ue(Y,!1):b==null||b.show({guid:r.guid,segments:Y,isDayEvent:!1})},re=$=>{var Ae,Re,Le;if(!N.current||((Ae=$.sender)==null?void 0:Ae.type)==="touchmove"&&pe.current)return null;(Le=(Re=C.current)==null?void 0:Re.cloneRef)!=null&&Le.parentElement&&C.current.cloneRef.parentElement.removeChild(C.current.cloneRef),C.current=new _t,C.current.direction=A,C.current.slotInterval=(n==null?void 0:n.interval)/(n==null?void 0:n.slotCount),S.current=t.view;const W=N.current,ae=J(W),ge=C.current.cloneFromSource(W,D);return Ne(ge,ae),ge},Se=$=>{var ge,Ae,Re,Le;if(!C.current)return;G.current={};const W=C.current;W.isActionPerformed=!0,x($),W.addDocSuppressors(),(ge=N.current)==null||ge.classList.add(p.DRAGGING),C.current.setCursorClass("move"),G.current.lastDragEvent=$.event,ee($);const ae={...$,data:r};if(m==null||m(ae),ae.cancel){$.cancel=!0,z(),U(),C.current=null;return}D&&(D.interval&&(H.current=W.slotInterval!==D.interval,W.slotInterval=D.interval),W.enableScroll=((Ae=D.scroll)==null?void 0:Ae.enable)??!0,W.minScrollSpeed=((Re=D.scroll)==null?void 0:Re.scrollBy)??W.minScrollSpeed,W.minScrollThreshold=((Le=D.scroll)==null?void 0:Le.timeDelay)??W.minScrollThreshold,K.current=D.excludeSelectors??null)},ee=$=>{try{const W=N.current;if(!W)return;const ae=C.current.getContentWrap(W),ge=ae==null?void 0:ae.getBoundingClientRect(),{clientY:Ae,clientX:Re}=C.current.getPointerCoordinates($.event);if(!ae||!ge||Ae==null&&Re==null)return;const Le=W.getBoundingClientRect(),Y={top:ae.scrollTop||0,left:ae.scrollLeft||0};M.current.dragAnchorOffsetPx=Ae!=null?Ae-ge.top+Y.top-(Le.top-ge.top+Y.top):null,M.current.dragAnchorOffsetX=Re!=null?Re-ge.left+Y.left-(Le.left-ge.left+Y.left):null}catch{M.current.dragAnchorOffsetPx=M.current.dragAnchorOffsetX=null}},oe=$=>{var W;!((W=C.current)!=null&&W.isAllDaySource)&&C.current.enableScroll&&Q($.event)},ce=$=>{var Ae;if(!((Ae=C.current)!=null&&Ae.cloneRef&&$&&C.current))return;const W=C.current,ae=W.getContentWrap($);if((ae==null?void 0:ae.getBoundingClientRect())&&r){let Re=Number($.getAttribute("data-date"));if(!Re||isNaN(Re))return;W.isAllDaySource&&(Re=Number(F.normalizeDate(new Date(Re))));let Le=new Date;if(t.view===S.current)if(I.current&&!W.isAllDaySource)Le=new Date(Re);else if(H.current&&!W.isAllDaySource&&!W.isMonthView){const{schedulerStartMinutes:me}=F.getSchedulerStartAndEndMinutes(i,l);Le=C.current.getSteppedCellDate(me,G.current.lastDragEvent,fe.current,M.current.minutesPerPixel,Re,ae)}else W.isAllDaySource===I.current&&(Re=Re-fe.current),Le=new Date(Re);else Le=new Date(Re),D.externalDragAndDrop&&S.current==="Month"&&F.setHours(Le,P.startTime);if(isNaN(Le.getTime()))return;M.current.finalDragStartTime=new Date(Le);const Y=Me.getEventByGuid(R,r.guid),De=Z(Y);M.current.finalDragEndTime=new Date(M.current.finalDragStartTime.getTime()+De)}},x=$=>{const W=C.current.getCellUnderPointer($.event);if(W&&C.current&&W&&r){const ae=W.getAttribute("data-date");if(!ae||isNaN(Number(ae)))return;const ge=Me.getEventByGuid(R,r.guid);if(!ge)return;const Ae=new Date(ge.startTime).getTime();fe.current=Number(ae)-Ae}},V=$=>{var ae,ge,Ae,Re,Le,Y,De,me,Oe,Pe,Ye,He,ht;if(!C.current)return;let W=C.current.getCellUnderPointer($.event);if(W||(W=C.current.getCurrentTargetCell($.target)),D.externalDragAndDrop&&(w(),t.view!==S.current&&(C.current.cellWidth=((ge=(ae=$.target.closest(`.${p.SCHEDULER}`))==null?void 0:ae.querySelector(`.${p.WORK_CELLS}[data-date], .${p.ALL_DAY_CELL}`))==null?void 0:ge.clientWidth)??N.current.clientWidth),C.current.isMonthView=!!((Ae=W||$.target)!=null&&Ae.closest(`.${p.MONTH_VIEW}`)),(Re=W||$.target)!=null&&Re.closest(`.${p.DAY_VIEW}`)?S.current="Day":(Le=W||$.target)!=null&&Le.closest(`.${p.WEEK_VIEW}`)?S.current="Week":(Y=W||$.target)!=null&&Y.closest(`.${p.WORK_WEEK_VIEW}`)?S.current="WorkWeek":C.current.isMonthView&&(S.current="Month")),C.current.currentCell=W,C.current.isMonthView||(C.current.isAllDaySource=r.isAllDay=((De=W||$.target)==null?void 0:De.classList.contains(p.ALL_DAY_CELL))||!!((me=$.target)!=null&&me.closest(`.${p.DATE_HEADER_CONTAINER}`))),W){C.current.setCursorClass("move"),oe($),D.externalDragAndDrop&&(y.current=W.closest(`.${p.SCHEDULER}`),C.current.cloneRef.classList.add(p.DRAG_CLONE));let ot=new Date(Number(W.getAttribute("data-date"))),St=ot,xt=ot;if(C.current.isMonthView){const Et=(Oe=W.closest(`.${p.CONTENT_TABLE}`))==null?void 0:Oe.querySelectorAll(`.${p.WORK_CELLS}`);ot=new Date(Number((Pe=Et[0])==null?void 0:Pe.getAttribute("data-date"))),xt=new Date(Number((Ye=Et[(Et==null?void 0:Et.length)-1])==null?void 0:Ye.getAttribute("data-date")))}G.current.lastDragEvent=$.event,ce(W),M.current.finalDragStartTime&&(St=M.current.finalDragStartTime),ie(St,ot,xt)}else D.externalDragAndDrop&&((ht=(He=$.target)==null?void 0:He.closest)!=null&&ht.call(He,`.${p.SCHEDULER_TOOLBAR_CONTAINER}, .${p.STICKY_HEADER}, .${p.HEADER_SECTION},
                .${p.HEADER_ROW}, .${p.LEFT_INDENT}`)&&(document!=null&&document.body)?C.current.setCursorClass("notAllowed"):document!=null&&document.body&&C.current.setCursorClass("default"),C.current.cloneRef.classList.remove(p.DRAG_CLONE));g==null||g({...$,data:r})},z=()=>{var $,W,ae,ge;($=N.current)==null||$.removeAttribute("aria-grabbed"),(W=N.current)==null||W.classList.remove(p.DRAGGING),C.current.setCursorClass("default"),(ge=(ae=C.current)==null?void 0:ae.cloneRef)!=null&&ge.parentElement&&C.current.cloneRef.parentElement.removeChild(C.current.cloneRef)},te=()=>{C.current&&(C.current.cloneRef=null)},he=$=>{var ge,Ae,Re,Le,Y,De,me;let W=null,ae=null;if((ge=C.current)!=null&&ge.isAllDaySource?W=((Re=C.current)==null?void 0:Re.getCellUnderClone((Ae=C.current)==null?void 0:Ae.cloneRef))||((Le=C.current)==null?void 0:Le.getCellUnderPointer($.event)):W=(Y=C.current)==null?void 0:Y.getCellUnderPointer($.event),W||(W=(De=C.current)==null?void 0:De.getCurrentTargetCell($.target)),W){const Oe=W.getAttribute("data-date");ae=Oe?Number(Oe):(me=C.current)==null?void 0:me.getCurrentTargetDate($.target,W)}return{cell:W,finalDropTimestamp:ae}},Ee=($,W)=>{var Y,De,me;const ae=new Date($.startTime),ge=new Date($.endTime),Ae=Math.max(0,ge.getTime()-ae.getTime());let Re=new Date(W);(Y=C.current)!=null&&Y.isAllDaySource?F.setHours(Re,ae):(De=C.current)!=null&&De.isMonthView?(Re=F.normalizeDate(Re),F.setHours(Re,ae)):(W=W-fe.current,Re=new Date(W));const Le=new Date(Re.getTime()+Ae);return(me=C.current)!=null&&me.isAllDaySource&&F.setHours(Le,ge),{originalStart:ae,originalEnd:ge,durationMs:Ae,newStartTime:Re,newEndTime:Le}},be=($,W,ae,ge)=>{if(!C.current)return;const Ae=mo($,W,ae,u,f.fields,R);U(),ge.cancel=!0,h==null||h({...ge,data:Ae})},ke=e.useCallback($=>{if(!K.current)return!0;const W=K.current.split(",");for(const ae of W)if($!=null&&$.classList.contains(ae.trim()))return!1;return!0},[]),de=$=>{if(!C.current)return;if(z(),$.element){const Re=$.element.closest(`.${p.TABLE_WRAP}`);Re&&(C.current.cloneRef=Re.querySelector(`.${p.APPOINTMENT}.${p.EVENT_CLONE}`))}const{cell:W,finalDropTimestamp:ae}=he($);te(),D.externalDragAndDrop?w():b==null||b.hide();const ge=Array.isArray(r)?r[0]:r,Ae=(Re,Le)=>{const Y=Me.getEventByGuid(R,r.guid);Y&&(Y.startTime=P.startTime,Y.endTime=P.endTime,Y.isAllDay=P.isAllDay),U(),$.cancel=!0,Re!==null&&Le!==null&&(v==null||v.show({title:T(Re),message:T(Le),confirmText:T("ok"),showCancel:!1,onConfirm:()=>v.hide()})),h==null||h({...$,data:ge}),C.current=null};if(!W){Ae(null,null);return}if(ke(W)){let Re,Le;if(M.current.finalDragStartTime&&M.current.finalDragEndTime)Re=M.current.finalDragStartTime,Le=M.current.finalDragEndTime;else if(W&&ae){const{newStartTime:Y,newEndTime:De}=Ee(ge,ae);Re=Y,Le=De}if(Re&&Le){const Y={...ge,startTime:Re,endTime:Le};if(!c&&Me.checkEventOverlap(Y,R,!0)){Ae("eventOverlap","overlapAlert");return}if(Me.isBlockRange(Y,R,!0)){Ae("alert","blockAlert");return}if(I.current&&C.current.isMonthView&&(r.isAllDay=!0),ge.recurrenceID&&ge.recurrenceRule){ge.startTime=P.startTime,ge.endTime=P.endTime;const De=O?fo(ge,Re,Le,B,R):{isValid:!0};if(De.isValid)ge.recurrenceException=ge.recurrenceException??En(P.startTime);else{const me=De.messageKey||kt.SameDayAlert;Ae("alert",me);return}}be(ge,Re,Le,$);return}}else{const Re=Me.getEventByGuid(R,r.guid);Re.startTime=ge.startTime,Re.endTime=ge.endTime}U(),h==null||h({...$,data:r}),C.current=null};Jt(L,{clone:!0,cursorAt:D!=null&&D.externalDragAndDrop?{left:-20,top:-20}:{left:-5,top:-5},dragArea:(D==null?void 0:D.eventDragArea)??`.${p.CONTENT_WRAP}, .${p.CONTENT_TABLE}`,abort:`.${p.EVENT_RESIZE_CLASS}, .${p.LEFT_RESIZE_HANDLER}, .${p.RIGHT_RESIZE_HANDLER}, .${p.TOP_RESIZE_HANDLER}, .${p.BOTTOM_RESIZE_HANDLER}, .${p.BLOCK_APPOINTMENT}`,distance:5,helper:$=>re($),onDragStart:$=>Se($),onDrag:$=>V($),onDragStop:$=>de($),enableTailMode:D==null?void 0:D.externalDragAndDrop});const Ce={...s||{},onClick:$=>{var W,ae,ge;(W=C.current)==null||W.suppressEvent($),!((ae=C.current)!=null&&ae.isActionPerformed)&&((ge=s==null?void 0:s.onClick)==null||ge.call(s,$))}};return{mergedRef:q,composedProps:Ce}}const Zn=e.memo(e.forwardRef((o,r)=>{const{children:s,data:t,className:n,containerProps:i}=o,{mergedRef:l,composedProps:u}=Ec({ref:r,data:t,containerProps:i});return a.jsx("div",{ref:l,className:n,...u,children:s})}));Zn.displayName="DraggableEvent";Zn.__docgenInfo={description:"",methods:[],displayName:"DraggableEvent"};function gc(o){var ee,oe,ce,x;const{onResizeStart:r,onResizing:s,onResizeStop:t,timeScale:n,startHour:i,endHour:l,schedulerRef:u,showWeekend:f,workDays:d,eventOverlap:E,confirmationDialog:m,eventResize:g,eventSettings:h}=We(),{eventsData:c}=Kt(),{renderDates:v}=pt(),D=$r(),{dir:O}=$e(),P=e.useRef(null),T=e.useRef(null),A=10,R=e.useRef(new Date),B=e.useRef(0),k=e.useRef(0),b=e.useRef(0),N=e.useRef(0),L=e.useRef(Xe.Right),C=e.useRef(void 0),G=e.useRef(void 0),M=e.useRef(null),X=e.useRef(void 0),se=e.useRef(!1),fe=e.useRef(0),pe=e.useRef(0),{getString:K}=tt(),H=e.useRef(null);e.useEffect(()=>()=>{I(),T.current=null,P.current=null},[]);const y=()=>{Ve.add(document,"mousemove",w,!0),Ve.add(document,"touchmove",w,{capture:!0,passive:!1}),Ve.add(document,"mouseup",Z,!0),Ve.add(document,"touchend",Z,{capture:!0})},S=()=>{Ve.remove(document,"mousemove",w),Ve.remove(document,"touchmove",w),Ve.remove(document,"mouseup",Z),Ve.remove(document,"touchend",Z)},I=()=>{ue(),S(),se.current=!1,fe.current=0,pe.current=0},q=()=>{document.body.style.userSelect="none",document.body.style.cursor=L.current===Xe.Left||L.current===Xe.Right?"ew-resize":"ns-resize"},_=()=>{document.body.style.userSelect="",document.body.style.cursor=""},U=(V,z)=>{const te=(z==null?void 0:z.offsetWidth)||0,he=V.classList.contains(p.ALL_DAY_APPOINTMENT),Ee=!!V.closest(`.${p.MONTH_VIEW}`),be=T.current.slotInterval;fe.current=(z==null?void 0:z.offsetHeight)||0,pe.current=fe.current>0?be/fe.current:0,C.current=o!=null&&o.startTime?new Date(o.startTime):void 0,G.current=o!=null&&o.endTime?new Date(o.endTime):void 0,vt(T.current,{cellWidth:te,isAllDaySource:he,isMonthView:Ee,slotInterval:be,interval:be},null,!0)},ne=()=>{if(!P.current||!(P.current.offsetParent||P.current.parentElement))return;const z=T.current.cloneFromSource(P.current);T.current.cloneRef=z},Q=e.useCallback((V,z)=>{var de,Ce,$,W;const te=z.nativeEvent,he=(de=z.target)==null?void 0:de.closest(`.${p.APPOINTMENT}`);if(!he)return;T.current=new _t,T.current.slotInterval=n!=null&&n.interval&&(n!=null&&n.slotCount)?n.interval/n.slotCount:30,T.current.isActionPerformed=!1,L.current=V,T.current.direction=O,P.current=he,b.current=he.offsetTop,N.current=he.offsetHeight;const Ee=T.current.getCellUnderPointer(z.nativeEvent);U(he,Ee),L.current===Xe.Top?R.current=C.current:L.current===Xe.Bottom&&(R.current=G.current);const be=J(te),ke=T.current.getPointerCoordinates(te);ke.clientX!=null&&(B.current=ke.clientX),ke.clientY!=null&&(k.current=ke.clientY),X.current=te,r==null||r(be),!be.cancel&&(H.current={startTime:new Date(o.startTime),endTime:new Date(o.endTime)},g&&(g.interval>0&&!T.current.isAllDaySource&&!T.current.isMonthView&&(se.current=T.current.slotInterval!==g.interval,se.current&&(T.current.slotInterval=g.interval)),T.current.enableScroll=((Ce=g.scroll)==null?void 0:Ce.enable)??!0,T.current.minScrollSpeed=(($=g.scroll)==null?void 0:$.scrollBy)??T.current.minScrollSpeed,T.current.minScrollThreshold=((W=g.scroll)==null?void 0:W.timeDelay)??T.current.minScrollThreshold),y())},[r,v,o]),J=V=>({event:V,cancel:!1,startTime:C.current,endTime:G.current,data:P.current?o:void 0}),Ne=V=>(T.current.performAutoScrolling(V,P.current),T.current.scrollInterval!==null&&M.current===null&&(M.current=requestAnimationFrame(Se)),!1),ve=(V,z)=>{if(!T.current.isActionPerformed){if(Math.hypot(V,z)<A)return;const he=P.current;if(!he)return;T.current.isActionPerformed=!0,T.current.addDocSuppressors(),he.classList.add(p.RESIZING),ne(),document!=null&&document.body&&q()}},ue=()=>{M.current!=null&&(cancelAnimationFrame(M.current),M.current=null)},w=e.useCallback(V=>{var de,Ce;if(!T.current)return;const z=T.current.getPointerCoordinates(V),te=z.clientX-B.current,he=z.clientY-k.current;if(ve(te,he),!T.current.isActionPerformed)return;X.current=V;const Ee=J(V);if(s==null||s(Ee),Ee.cancel)return;_t.currentActionName="resize",Ee.startTime&&(C.current=Ee.startTime),Ee.endTime&&(G.current=Ee.endTime);const be=P.current;!T.current.isAllDaySource&&T.current.enableScroll&&Ne(V);const ke=T.current.getCellUnderPointer(V);T.current.cloneRef&&be&&n.enable&&!(T.current.isAllDaySource||T.current.isMonthView)&&ie(ke),re(ke),(de=V.preventDefault)==null||de.call(V),(Ce=V==null?void 0:V.stopPropagation)==null||Ce.call(V)},[(ee=T.current)==null?void 0:ee.isActionPerformed,P.current,v,o,B.current,k.current,L.current,(oe=T.current)==null?void 0:oe.cloneRef,s]),Z=e.useCallback(V=>{var ke,de;if((ke=P.current)==null||ke.classList.remove(p.RESIZING),T.current.scrollInterval&&cancelAnimationFrame(T.current.scrollInterval),T.current.scrollInterval=null,I(),document!=null&&document.body&&_(),T.current.cloneRef=null,(de=D==null?void 0:D.hide)==null||de.call(D),!T.current.isActionPerformed){T.current.isActionPerformed=!1;return}T.current.isActionPerformed=!1;const z=J(V);if(t==null||t(z),z.cancel){const Ce=z.data;Ce&&(C.current=Ce.startTime,G.current=Ce.endTime);return}const te=Array.isArray(o)?o[0]:o,he={...te,startTime:new Date(te.startTime),endTime:new Date(te.endTime)};if(L.current===Xe.Top)F.setHours(he.startTime,R.current);else if(L.current===Xe.Bottom){const Ce=F.isMidnight(he.endTime),$=F.isMidnight(R.current);F.setHours(he.endTime,R.current);const W=Ce&&!$?-1:!Ce&&$?1:0;he.endTime=F.addDays(he.endTime,W)}if(T.current.isAllDaySource||T.current.isMonthView||!n.enable){const Ce=T.current.getCellUnderPointer(V),$=(Ce==null?void 0:Ce.getAttribute("data-date"))??T.current.getCurrentTargetDate(V.target,Ce);if(!$)return;let ae=new Date(Number($));if(L.current===Xe.Right){const ge=F.normalizeDate(he.startTime);ae.getTime()<ge.getTime()&&(ae=ge),F.setYear(he.endTime,ae)}else if(L.current===Xe.Left){const ge=F.normalizeDate(he.endTime);ae.getTime()>ge.getTime()&&(ae=ge),F.setYear(he.startTime,ae)}}const Ee={...he,startTime:he.startTime,endTime:he.endTime},be=(Ce,$)=>{const W=Me.getEventByGuid(c,o.guid);W&&H.current&&(W.startTime=new Date(H.current.startTime),W.endTime=new Date(H.current.endTime)),m==null||m.show({title:K(Ce),message:K($),confirmText:K("ok"),showCancel:!1,onConfirm:()=>m.hide()})};if(!E&&Me.checkEventOverlap(Ee,c,!0)){be("eventOverlap","overlapAlert");return}if(Me.isBlockRange(Ee,c,!0)){be("alert","blockAlert");return}he.recurrenceRule&&he.recurrenceID&&(he.recurrenceException=he.recurrenceException??En(H.current.startTime)),mo(he,he.startTime,he.endTime,u,h.fields,c),T.current=null},[(ce=T.current)==null?void 0:ce.isActionPerformed,P.current,T,(x=T.current)==null?void 0:x.cloneRef,w,t]),ie=V=>{var $;const z=V==null?void 0:V.getAttribute("data-date");if(!z)return;const te=new Date(Number(z));let he=te.getHours()*Ge+te.getMinutes();const Ee=C.current?new Date(C.current):void 0,be=G.current?new Date(G.current):void 0;let ke=!1,de=!1,Ce=te;if(P.current.querySelector(`.${p.INDICATOR}`)&&(ke=P.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.UP_ARROW_ICON}`),de=P.current.querySelector(`.${p.INDICATOR}`).classList.contains(`${p.DOWN_ARROW_ICON}`)),se.current){const W=X.current,ae=($=T.current)==null?void 0:$.getContentWrap(V);if(ae&&W){const{schedulerStartMinutes:ge}=F.getSchedulerStartAndEndMinutes(i,l);Ce=T.current.getSteppedCellDate(ge,W,0,pe.current,Number(z),ae)}}if(L.current===Xe.Top){const W=be.getHours()*Ge+be.getMinutes();de||W>he||W===0?(Ee.setTime(Ce.getTime()),R.current=Ee):g.resizeToZero&&(R.current=be)}else if(L.current===Xe.Bottom){he=he+T.current.slotInterval;const W=Ee.getHours()*Ge+Ee.getMinutes();if(se.current){const ae=Ce.getHours()*Ge+Ce.getMinutes();ke||W<ae?(be.setTime(Ce.getTime()),R.current=be):g.resizeToZero&&(R.current=Ee)}else ke||W<he?(be.setHours(te.getHours(),te.getMinutes()+T.current.slotInterval),R.current=be):g.resizeToZero&&(R.current=Ee)}},re=V=>{var ke,de,Ce,$;if(!o.guid)return;const z=Me.getEventByGuid(c,o.guid);if(!z)return;const te={...z,startTime:new Date(z.startTime),endTime:new Date(z.endTime)},he=((ke=T.current)==null?void 0:ke.isMonthView)||((de=T.current)==null?void 0:de.isAllDaySource);if(!he&&n.enable){const W={...te};if(L.current===Xe.Top)F.setHours(W.startTime,R.current);else if(L.current===Xe.Bottom){const ge=F.isMidnight(W.endTime),Ae=F.isMidnight(R.current);F.setHours(W.endTime,R.current);const Re=ge&&!Ae?-1:!ge&&Ae?1:0;W.endTime=F.addDays(W.endTime,Re)}const ae=Me.processTimeSlotCloneEvent((Ce=u.current)==null?void 0:Ce.element,v,W,n,i,l,T.current.cellWidth,O==="rtl");D==null||D.show({guid:o.guid,segments:ae,isDayEvent:!1});return}let Ee=null;if(V){const W=V.getAttribute("data-date");Ee=W?new Date(Number(W)):null}if(!Ee&&V){const W=T.current.getCurrentTargetDate(V,V);Ee=W!=null?new Date(W):null}if(Ee){const W=F.normalizeDate(te.startTime),ae=F.normalizeDate(te.endTime);L.current===Xe.Right?(Ee.getTime()<W.getTime()&&(Ee=W),F.setYear(te.endTime,Ee)):L.current===Xe.Left&&(Ee.getTime()>ae.getTime()&&(Ee=new Date(ae)),F.setYear(te.startTime,Ee))}const be=Me.processCloneEvent(($=u.current)==null?void 0:$.element,v,te,f,d,T.current.cellWidth,T.current.isAllDaySource,O==="rtl",T.current.isMonthView,P.current);D==null||D.show({guid:o.guid,segments:be,isDayEvent:he})},Se=()=>{if(M.current=null,!T.current||T.current.scrollInterval==null)return;const V=X.current;if(V){let z=T.current.getCellUnderPointer(V);if(!z){const te=V.target||null;z=te==null?void 0:te.closest(`.${p.WORK_CELLS}, .${p.DAY_WRAPPER}, .${p.ALL_DAY_CELL}`)}z&&(T.current.cloneRef&&!(T.current.isAllDaySource||T.current.isMonthView)&&ie(z),re(z))}T.current&&T.current.scrollInterval!=null&&(M.current=requestAnimationFrame(Se))};return{resizeStart:Q,onClick:V=>{var z;(z=T.current)!=null&&z.suppressEvent&&T.current.suppressEvent(V)}}}const $n=typeof document<"u"&&typeof window<"u",Vn=o=>{var r,s;o==null||o.stopPropagation(),o!=null&&o.nativeEvent&&((s=(r=o.nativeEvent).stopImmediatePropagation)==null||s.call(r))},Tc=o=>{switch(o){case Xe.Top:return p.TOP_RESIZE_HANDLER;case Xe.Bottom:return p.BOTTOM_RESIZE_HANDLER;case Xe.Left:return p.LEFT_RESIZE_HANDLER;default:return p.RIGHT_RESIZE_HANDLER}},ys=({dir:o,resizeStart:r,showResizeHandle:s})=>xe.isDevice&&!s?null:a.jsxs("div",{className:`${p.EVENT_RESIZE_CLASS} ${Tc(o)}`,onMouseDown:t=>{Vn(t),r==null||r(o,t)},onTouchStart:t=>{Vn(t),r==null||r(o,t)},children:[o===Xe.Top||o===Xe.Bottom?a.jsx("div",{className:p.VERTICAL_RESIZE_INNER}):a.jsx("div",{className:p.HORIZONTAL_RESIZE_INNER}),xe.isDevice&&s&&a.jsx("div",{className:p.MOB_RESIZE_DOT,onMouseDown:t=>{Vn(t),r==null||r(o,t)},onTouchStart:t=>{Vn(t),r==null||r(o,t)}})]}),Tn=e.memo(({isVertical:o=!1,data:r,children:s,hasPrevious:t,hasNext:n})=>{const{eventResize:i}=We();if(!i)return a.jsx(a.Fragment,{children:s});const{resizeStart:l}=gc(r),u=e.useRef(null),f=e.useRef(null),[d,E]=e.useState(!1);Xt(f,{tapHold:()=>{xe.isDevice&&E(!0)}}),e.useEffect(()=>{const c=f.current;if(!c)return;const v=D=>{D.preventDefault()};return c.addEventListener("contextmenu",v,!0),()=>{c.removeEventListener("contextmenu",v,!0)}},[]);const m=e.useCallback((c,v)=>{if(l(c,v),!xe.isDevice)return;const D=()=>{E(!1),$n&&(document.removeEventListener("mouseup",D,!0),document.removeEventListener("touchend",D,!0))};$n&&(document.addEventListener("mouseup",D,{capture:!0,once:!0}),document.addEventListener("touchend",D,{capture:!0,once:!0}))},[l]);e.useEffect(()=>{if(!xe.isDevice||!d)return;const c=v=>{const D=v.target;u.current&&D&&!u.current.contains(D)&&E(!1)};return $n&&(document.addEventListener("mousedown",c,!0),document.addEventListener("touchstart",c,!0)),()=>{$n&&(document.removeEventListener("mousedown",c,!0),document.removeEventListener("touchstart",c,!0))}},[d]);const g=o?Xe.Top:Xe.Left,h=o?Xe.Bottom:Xe.Right;return a.jsxs("div",{className:`${p.RESIZE_CONTAINER}`,ref:c=>{u.current=c,f.current=c?c.closest(`.${p.APPOINTMENT}`):null},children:[!t&&i.startResizable&&a.jsx(ys,{dir:g,resizeStart:m,showResizeHandle:d}),s,!n&&i.endResizable&&a.jsx(ys,{dir:h,resizeStart:m,showResizeHandle:d})]})});Tn.displayName="ResizeHandlers";const Kn=o=>{const{weekRenderDates:r,isBlockedEvent:s,...t}=o,{renderDates:n}=pt(),{timeFormat:i,eventTemplate:l,onEventClick:u,onEventDoubleClick:f,eventDrag:d,eventResize:E,quickPopupRef:m,readOnly:g}=We(),{locale:h}=$e(),{getString:c}=tt(h||"en-US"),v=e.useRef(null),{processedEvent:D,overflowDirection:O,positionStyle:P}=hc({eventInfo:t,renderDates:r||n}),{isOverflowLeft:T,isOverflowRight:A}=O,R=e.useCallback(H=>{if(s){H==null||H.preventDefault(),H==null||H.stopPropagation();return}if(qn(H.currentTarget),H.stopPropagation(),u){const y={event:H,data:t.event,element:H.currentTarget};u(y)}},[u,D]),B=e.useCallback(H=>{var y;if(t.event.isReadonly||g||s){H==null||H.preventDefault(),H==null||H.stopPropagation();return}if(H.stopPropagation(),f){(y=m==null?void 0:m.current)==null||y.hide();const S={event:H,data:t.event,element:H.currentTarget};f(S)}},[f,D]),k=H=>ut(H??new Date,{type:"time",skeleton:"short",format:i,locale:h}),b=H=>a.jsx("div",{className:`sf-indicator sf-icons sf-${H}-icon`,children:H==="left"?a.jsx(Lr,{}):a.jsx(Ir,{})}),N=H=>a.jsx("div",{className:p.TIME,children:H}),L=e.useCallback(()=>{const{subject:H,isAllDay:y,startTime:S,endTime:I}=D;if(!t.totalSegments)return null;const q=()=>T?b("left"):!y&&N(k(S)),_=()=>A?b("right"):!y&&N(k(I));return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[q(),a.jsx("div",{className:`${p.SUBJECT} ${p.TEXT_CENTER} ${p.ELLIPSIS}`,children:H||c("addTitle")}),_(),a.jsx(zt,{event:t.event})]})},[D,t,h,i,T,A]),C=e.useCallback(()=>{const{subject:H,startTime:y,isAllDay:S}=D;return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[!S&&N(k(y)),a.jsx("div",{className:`${p.SUBJECT} ${p.ELLIPSIS}`,children:H||c("addTitle")}),a.jsx(zt,{event:t.event})]})},[D,t]),G=e.useCallback(()=>{const{subject:H}=D;return a.jsx("div",{className:p.APPOINTMENT_DETAILS,children:a.jsx("div",{className:`${p.SUBJECT}`,children:H||c("addTitle")})})},[D,t]),M=e.useCallback(()=>l?l(D):s?G():t.totalSegments?L():C(),[l,D,L,C,G,t,T,A]),X={...t.eventStyle||{},...P},se=t.eventClasses.join(" "),fe={"data-id":D.id,"aria-label":Me.getAriaLabel(D),"data-guid":t.event.guid,role:"button",tabIndex:0,onClick:R,onDoubleClick:B,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.stopPropagation(),R(H))},style:X},pe=M(),K=!s&&!t.event.isReadonly&&!g;return d!=null&&d.enable&&K?a.jsx(Zn,{data:D,className:se,containerProps:fe,ref:v,children:E!=null&&E.enable&&K?a.jsx(Tn,{data:D,hasPrevious:T,hasNext:A,children:pe}):a.jsx(a.Fragment,{children:pe})}):a.jsx("div",{ref:v,className:se,...fe,children:E!=null&&E.enable&&K?a.jsx(Tn,{data:D,hasPrevious:T,hasNext:A,children:pe}):a.jsx(a.Fragment,{children:pe})})};Kn.displayName="DayEvent";const Qn=()=>{const{timeScale:o,onCellClick:r,onCellDoubleClick:s,readOnly:t,quickPopupRef:n}=We(),i=e.useCallback((d,E,m)=>{const g=new Date(E);return!o.enable||m?(E.setHours(0,0,0,0),g.setDate(g.getDate()+1),g.setHours(0,0,0,0),m=!0):g.setTime(E.getTime()+o.interval/o.slotCount*tn),{cancel:!1,nativeEvent:d.nativeEvent,startTime:E,endTime:g,isAllDay:!!m,element:d.currentTarget}},[o]),l=e.useCallback((d,E,m)=>{var g,h;if(!((g=d.target)!=null&&g.classList.contains(p.DATE_HEADER)||(h=d.target)!=null&&h.classList.contains(p.HEADER_DATE)||t)&&(zn(d.currentTarget),r)){const c=i(d,E,m);if(r(c),c.cancel)return}},[r,i]),u=e.useCallback((d,E,m)=>{var g;if(!t&&(zn(d.currentTarget),s)){(g=n==null?void 0:n.current)==null||g.hide();const h=i(d,E,m);if(s(h),h.cancel)return}},[s,i]);return{handleCellClick:l,handleCellDoubleClick:u,handleKeyDown:(d,E)=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),l(d,E))}}},go=o=>{const{date:r,visibleEvents:s,hiddenEventCount:t,onMoreIndicatorClick:n}=o,{timeScale:i}=We(),{locale:l}=$e(),{getString:u}=tt(l||"en-US"),{handleCellClick:f,handleCellDoubleClick:d}=Qn(),E=()=>t<=0?null:a.jsx("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,onClick:g=>{g==null||g.stopPropagation(),g==null||g.preventDefault(),n()},role:"button",tabIndex:0,"aria-label":`${t} more events`,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g==null||g.stopPropagation(),g==null||g.preventDefault(),n())},children:xe.isDevice?`+${t}`:`+${t} ${u("more")}`}),m=()=>s.map(g=>{const{totalSegments:h,isFirstSegmentInRenderRange:c,event:v,eventKey:D}=g;return h&&h>1&&c||(!h||h<=1)&&v.isAllDay&&!v.isBlock?a.jsx(Kn,{...g},D):null});return a.jsx("div",{className:p.ALL_DAY_CELL,"data-date":r.getTime(),onClick:g=>f(g,r,!0),onDoubleClick:g=>d(g,r,!0),onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),f(g,r,!0))},children:i.enable&&a.jsxs(a.Fragment,{children:[m(),E()]})},F.generateDateKey(r))};go.displayName="AllDayRowCell";const Vr=e.forwardRef((o,r)=>{const{isCollapsed:s,onCollapseChange:t,onMoreEventsChange:n}=o,{renderDates:i}=pt(),{timeScale:l}=We(),u=e.useRef(null),f=3,[d,E]=e.useState("auto"),{eventsByDate:m,hasEventsExceedingMaxCount:g,calculateHeight:h,getVisibleEvents:c,getHiddenEventCount:v}=pc(s,f),D=e.useCallback(()=>{t&&t()},[t]);e.useImperativeHandle(r,()=>({hasMoreEvents:g})),e.useEffect(()=>{n&&n(g)},[g,n]),e.useEffect(()=>{if(u.current)if(!l.enable)E("auto");else{const T=h();E(`${T}px`)}},[s,m,h]);const O=["sf-all-day-row",s?"sf-all-day-collapsed":"",g?"sf-has-more-events":""].filter(Boolean).join(" "),P=T=>{const A=F.generateDateKey(T),R=c(A),B=v(A);return a.jsx(go,{date:T,visibleEvents:R,hiddenEventCount:B,onMoreIndicatorClick:D},A)};return a.jsx("div",{ref:u,className:O,style:{height:d},children:i.map(P)})});Vr.displayName="AllDayRow";Vr.__docgenInfo={description:"",methods:[],displayName:"AllDayRow"};const To=()=>{const{timeScale:o,dateHeader:r,headerIndent:s}=We(),{handleDateClick:t}=Hr(),{locale:n}=$e(),{getString:i}=tt(n||"en-US"),{headerCells:l,isAllDayCollapsed:u,showAllDayToggle:f,weekNumber:d,toggleAllDayCollapse:E,handleMoreEventsChange:m}=Yl(),{handleCellClick:g,handleCellDoubleClick:h}=Qn(),c=D=>a.jsx("div",{className:D.className,onClick:O=>g(O,D.date,!0),onDoubleClick:O=>h(O,D.date,!0),children:r?r({date:D.date}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:p.HEADER_DAY,children:D.dayName}),a.jsx("div",{className:`${p.HEADER_DATE} ${D.isToday?p.TODAY:""}`,onClick:O=>t(O,D.date),children:D.dateNumber})]})},D.key),v=()=>a.jsx("div",{className:p.ALL_DAY_APPOINTMENT_SECTION,onClick:E,role:"button",tabIndex:0,"aria-label":i(u?"expandAllDaySection":"collapseAllDaySection"),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&E()},children:a.jsx(Xn,{className:u?p.APPOINTMENT_EXPAND:p.APPOINTMENT_COLLAPSE})});return a.jsxs("div",{className:p.HEADER_SECTION,children:[o.enable&&a.jsxs("div",{className:p.LEFT_INDENT,children:[s?s({weekNumber:d}):a.jsx(a.Fragment,{children:d&&a.jsx("div",{className:p.WEEK_NUMBER,children:a.jsx("div",{title:`Week ${d}`,children:d})})}),f&&v()]}),a.jsx("div",{className:p.RIGHT_SECTION,children:a.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:a.jsxs("div",{className:p.DATE_HEADER,children:[a.jsx("div",{className:p.HEADER_ROW,children:l.map(D=>c(D))}),a.jsx("div",{className:p.DAY_CLONE_CONTAINER}),a.jsx(Vr,{isCollapsed:u,onCollapseChange:E,onMoreEventsChange:m})]})})})]})};To.displayName="DateHeader";const Cc=o=>{const{currentTime:r=new Date,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{startHour:n,endHour:i,timeFormat:l,timeScale:u}=We(),{locale:f}=$e(),{hours:d,minutes:E}=F.parseTimeString(n),{hours:m,minutes:g}=F.parseTimeString(i),[h,c]=e.useState(null),[v,D]=e.useState(0),O=e.useMemo(()=>{const T=[],A=d*Ge+E,R=m*Ge+g;let B=A;for(;B<R;){for(let k=0;k<u.slotCount;k++){const b=B+k*(u.interval/u.slotCount);if(b>=R)break;const N=Math.floor(b/Ge),L=Math.floor(b%Ge),C=new Date;C.setHours(N,L,0,0);const G=k===0,M=k===u.slotCount-1,se=b+u.interval/u.slotCount>=R,fe={date:C,type:G?"majorSlot":"minorSlot"};T.push({key:`${N}-${L}`,date:C,isMajorSlot:G,isLastSlotOfInterval:M,isLastSlotBeforeEnd:se,label:ut(C,{type:"time",skeleton:"h",format:l,locale:f}),templateProps:fe,index:T.length})}B+=u.interval}return D(T.length),T},[d,E,m,g,l,u,f]);e.useEffect(()=>{if(!t){h!==null&&c(null);return}const T=100/v,A=Math.floor(s/T);A!==h&&c(A)},[s,h,v,t]);const P=ut(r,{type:"time",skeleton:"short",format:l,locale:f});return{timeSlots:O,totalSlots:v,hiddenSlotIndex:h,currentTimeString:P}},Co=o=>{const{currentTime:r,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{showTimeIndicator:n,timeScale:i}=We(),{timeSlots:l,hiddenSlotIndex:u,currentTimeString:f}=Cc({currentTime:r,currentTimePosition:s,isTimeWithinBounds:t}),d=()=>l.map(E=>a.jsx("div",{className:`${p.TIME_SLOTS} ${E.isLastSlotOfInterval||E.isLastSlotBeforeEnd?"sf-time-cells":""} ${u===E.index?"sf-hide-children":""}`,children:E.isMajorSlot?i.majorSlot?i.majorSlot(E.templateProps):a.jsx("span",{children:E.label}):i.minorSlot?i.minorSlot(E.templateProps):null},E.key));return a.jsx("div",{className:p.LEFT_INDENT,children:a.jsxs("div",{className:p.TIME_CELLS_WRAP,children:[a.jsx("div",{className:p.SCHEDULER_TABLE,children:d()}),n&&t&&a.jsx("div",{className:p.CURRENT_TIME,style:{top:`${s}%`},children:f})]})})};Co.displayName="TimeCells";const Dc=o=>{const{renderDates:r,workDays:s,workHours:t,cell:n,timeScale:i,startHour:l,endHour:u}=o,{hours:f,minutes:d}=F.parseTimeString(l||"00:00"),{hours:E,minutes:m}=u==="24:00"?{hours:24,minutes:0}:F.parseTimeString(u||"24:00"),g=c=>n?n({date:c,type:"workCell"}):null;return{workCellRows:e.useMemo(()=>{const c=[];if(i.enable){const v=f*Ge+d,D=E*Ge+m;let O=v;for(;O<D;){for(let P=0;P<i.slotCount;P++){const T=O+P*(i.interval/i.slotCount);if(T>=D)break;const A=Math.floor(T/Ge),R=Math.floor(T%Ge),k=!(P===i.slotCount-1),b=`${A}-${R}`,N=`${A}:${R.toString().padStart(2,"0")}`,L=r.map(C=>{const G=new Date(C);G.setHours(A,R,0,0);const M=F.isWorkHour(G,t,s),X=F.isSameDay(C,new Date),se=F.isWeekend(C,s),fe=["sf-work-cells",k?"sf-alternate-cells":"",X?"sf-today":"",se?"sf-weekend":"",M?"sf-work-hours":""].filter(Boolean).join(" ");return{date:G,className:fe,key:`${C.getTime()}-${A}-${R}`,dataAttributes:{date:G.getTime()},isWorkHour:M,isToday:X,isWeekend:se,isAlternate:k}});c.push({key:b,dataAttribute:N,cells:L})}O+=i.interval}}else{const v=r.map(D=>{const O=new Date(D);O.setHours(0,0,0,0);const P=F.isSameDay(D,new Date),T=F.isWeekend(D,s),A=["sf-work-cells","sf-timescale-disabled-cell",P?"sf-today":"",T?"sf-weekend":""].filter(Boolean).join(" ");return{date:O,className:A,key:`${D.getTime()}-timescale-disabled`,dataAttributes:{date:O.getTime(),dateKey:F.generateDateKey(D)},isToday:P,isWeekend:T}});c.push({key:"disabled-timescale-row",cells:v})}return c},[r,i,f,d,E,m,s,t]),renderCellTemplate:g}},Do=()=>{const{renderDates:o}=pt(),{workDays:r,workHours:s,cell:t,timeScale:n,startHour:i,endHour:l}=We(),{workCellRows:u,renderCellTemplate:f}=Dc({renderDates:o,workDays:r,workHours:s,cell:t,timeScale:n,startHour:i,endHour:l}),{handleCellClick:d,handleCellDoubleClick:E,handleKeyDown:m}=Qn();return a.jsx("div",{className:p.CONTENT_TABLE,children:u.map(g=>a.jsx("div",{className:p.WORK_CELLS_ROW,"data-date":g.dataAttribute,children:g.cells.map(h=>a.jsx("div",{className:h.className,"data-date":h.dataAttributes.date,"data-date-key":h.dataAttributes.dateKey,onClick:c=>d(c,h.date),onDoubleClick:c=>E(c,h.date),onKeyDown:c=>{m(c,h.date)},children:f(h.date)},h.key))},g.key))})};Do.displayName="WorkCells";const fr=118,Rs=2,vc=()=>{const{eventSettings:o,eventOverlap:r,timeFormat:s,timeScale:t,startHour:n,endHour:i,maxEventsPerRow:l=3,startHourTuple:u,endHourTuple:f}=We(),{renderDates:d}=pt(),{eventsData:E}=Kt(),{locale:m,dir:g}=$e(),h=e.useCallback((v,D)=>{const O=(A,R)=>{if(u&&f){const B=F.normalizeDate(A),k=F.normalizeDate(F.isMidnight(R)?F.addDays(R,-1):R);return B==null||B.setHours(u[0],u[1],0,0),k==null||k.setHours(f[0],f[1],0,0),R>B&&A<k}else return!0};if(t!=null&&t.enable){const A=o.spannedEventPlacement||"AllDayRow",R=[];let B=D.filter(M=>!M.isAllDay&&!M.isBlock&&Me.isMultiDayEvent(M));A==="AllDayRow"&&(B=B.filter(M=>F.isLessthan24Hours(M.startTime,M.endTime))),B.forEach(M=>{const X=Me.splitEventByDay(M,[v]);R.push(...X.filter(se=>O(se.startDate,se.endDate)))});const b=D.filter(M=>!M.isAllDay&&!M.isBlock&&!Me.isMultiDayEvent(M)&&F.isSameDay(new Date(M.startTime),v)&&O(M.startTime,M.endTime)).map(M=>({event:M,startDate:M.startTime,endDate:M.endTime}));R.push(...b);const N=Me.calculateOverlappingEvents(R,r),L=D.filter(M=>M.isBlock&&F.isSameDay(new Date(M.startTime),v)),C=[],G=(M,X={})=>{const{event:se}=M;if(!se.startTime||!se.endTime)return;const fe=at.calculateEventPosition(M,t,n,i),pe=`${v.toISOString()}-${se.id}`,K=F.formatTimeDisplay(se,m,s),H=Me.getEventClassNames(se),y={width:fe.width||"96%",height:`${fe.height}`,top:fe.top||"0px"};g==="rtl"?y.right=fe.left||"0%":y.left=fe.left||"0%",C.push({event:se,timeDisplay:K,eventKey:pe,eventClasses:H,eventStyle:y,...X})};return N.forEach(M=>{M.forEach(X=>{G(X,{totalOverlapping:X.totalOverlapping,totalSegments:X.totalSegments,isFirstDay:X.isFirstDay,isLastDay:X.isLastDay,positionIndex:X.positionIndex,segmentIndex:X.segmentIndex})})}),L.forEach(M=>{const X={event:M,startDate:M.startTime,endDate:M.endTime};G(X)}),C}const P=Me.processDayEvents(d,D),T=[];return P.forEach(A=>{if(!F.isSameDay(A.startDate,v)||!O(A.startDate,A.endDate))return;const R=`${A.startDate.toISOString()}-${A.event.id}`,B=F.formatTimeDisplay(A.event,m,s),k=at.calculatePositionStyles(A,d).width,b=A.positionIndex??0,N={height:`${fr}px`,top:`${b*(fr+Rs)}px`,width:k||"96%"};g==="rtl"?N.right="0%":N.left="0%",T.push({...A,timeDisplay:B,eventKey:R,eventStyle:N})}),T},[o,r,t,n,i,d,g,m,s]);return{dayWrappers:e.useMemo(()=>!d||d.length===0||!E||E.length===0?null:d.map(v=>{const D=F.generateDateKey(v),O=h(v,E);let P;return t.enable||(P=l*(fr+Rs)),{key:D,dateTimestamp:v.getTime(),events:O,moreIndicatorTopPx:P}}),[d,o,r,t,s,n,i,m,E])}},bs=24,yc=124,mr=4,Wr=(o,r)=>{const{height:s,rowAutoHeight:t,numberOfWeeks:n,eventSettings:i,schedulerRef:l}=We(),{eventsData:u}=Kt(),f=e.useMemo(()=>Me.processDayEvents(o,u),[u,o]),d=e.useMemo(()=>Me.getEventsMap(o,f),[o,f]),E=e.useMemo(()=>{var N,L,C,G,M,X,se,fe,pe;const T=Me.getMaxEventsInCell(d,o),A=((C=(L=(N=l==null?void 0:l.current)==null?void 0:N.element)==null?void 0:L.querySelector("."+p.MONTH_VIEW+" ."+p.APPOINTMENT))==null?void 0:C.offsetHeight)??bs,R=((X=(M=(G=l==null?void 0:l.current)==null?void 0:G.element)==null?void 0:M.querySelector("."+p.MONTH_VIEW+" ."+p.DATE_HEADER))==null?void 0:X.offsetHeight)??0;let B=((pe=(fe=(se=l==null?void 0:l.current)==null?void 0:se.element)==null?void 0:fe.querySelector("."+p.MONTH_VIEW+" ."+p.WORK_CELLS_ROW))==null?void 0:pe.offsetHeight)??yc;const k=K=>K*A+(K>0?K-1:0)*mr,b=()=>{var I,q,_,U,ne,Q,J,Ne;const K=((_=(q=(I=l==null?void 0:l.current)==null?void 0:I.element)==null?void 0:q.querySelector("."+p.SCHEDULER_TOOLBAR_CONTAINER))==null?void 0:_.offsetHeight)??0,H=((Q=(ne=(U=l==null?void 0:l.current)==null?void 0:U.element)==null?void 0:ne.querySelector("."+p.MONTH_VIEW+" ."+p.HEADER_ROW))==null?void 0:Q.offsetHeight)??0,S=(((Ne=(J=l==null?void 0:l.current)==null?void 0:J.element)==null?void 0:Ne.offsetHeight)??parseInt(s,10))-K-H;return parseInt(Math.abs(S/n).toFixed(2),10)};if(t){const K=k(T)+R+(t&&(i!=null&&i.ignoreWhitespace)?0:bs);return s!=="auto"&&n&&(B=b()),`${Math.max(K,B)}px`}if(n&&s!=="auto"&&r>=3){const K=b(),H=k(r)+R+A+mr;return`${Math.max(H,K)}px`}if(T>=3){const K=Math.min(T,r),H=k(K)+R+(T>r?A:0)+mr;return`${Math.max(H,B)}px`}return`${B}px`},[o,d,t,n,s,i==null?void 0:i.ignoreWhitespace,r,l]),m=e.useCallback(T=>{const A=h(T);return t?A:A.slice(0,r)},[d,r,t]),g=e.useCallback(T=>d.get(T).find(B=>B.event.isBlock&&(B.event.isAllDay||F.isFullDayEvent(B.startDate,B.endDate))),[d,r]),h=e.useCallback(T=>{var B;return[...(B=d.get(T))==null?void 0:B.filter(k=>!k.event.isBlock)].sort((k,b)=>(k.positionIndex||0)-(b.positionIndex||0))},[d]),c=e.useCallback(T=>{var R;if(g(T))return 0;const A=(R=d.get(T))==null?void 0:R.filter(B=>!B.event.isBlock);return Math.max(0,A.length-r)},[d,r]),v=e.useCallback(T=>c(T)>0,[c]),D=e.useCallback(T=>d.get(T).some(R=>R.event.isBlock&&!R.event.isAllDay&&!F.isFullDayEvent(R.startDate,R.endDate)),[d]),O=e.useCallback(T=>d.get(T).some(R=>R.event.isBlock&&(R.event.isAllDay||F.isFullDayEvent(R.startDate,R.endDate))),[d]);return{getVisibleEvents:m,getAlldayBlockEvent:g,getHiddenEventCount:c,getAllEventsForDate:h,hasMoreIndicator:v,hasBlockIndicator:D,hasAllDayBlock:O,calculatedRowHeight:E,sortEventsByTime:T=>T.sort((A,R)=>new Date(A.startTime).getTime()-new Date(R.startTime).getTime())}};function vo(o){const{onMoreEventsClick:r,morePopupRef:s}=We();return{handleMoreClick:e.useCallback((n,i)=>{var l;if(n&&typeof n.stopPropagation=="function"&&n.stopPropagation(),i&&n.target){const u=F.generateDateKey(i),d=o(u).map(m=>m.event),E={cancel:!1,data:d};if(r&&r(E),E.cancel)return;(l=s==null?void 0:s.current)==null||l.open(i,d,n.target)}},[o,r,s])}}const yo=o=>{const{date:r,count:s,onMoreClick:t,topPx:n}=o,{locale:i}=$e(),{getString:l}=tt(i||"en-US"),u=n!==void 0?{top:`${n}px`}:void 0,f=d=>{if(d.key==="Enter"||d.key===" "){const E={...d,currentTarget:d.currentTarget,type:"click"};t(E,r)}};return a.jsxs("div",{className:`${p.MORE_INDICATOR} ${p.LINK}`,style:u,onClick:d=>t(d,r),onKeyDown:f,tabIndex:0,role:"button",children:["+",s," ",!xe.isDevice&&`${l("more")}`]})},Ro=e.memo(()=>{const{eventTemplate:o,onEventClick:r,onEventDoubleClick:s,eventDrag:t,eventResize:n,maxEventsPerRow:i=3,timeScale:l,readOnly:u,quickPopupRef:f,startHourTuple:d,endHourTuple:E}=We(),{dayWrappers:m}=vc(),{locale:g}=$e(),{getString:h}=tt(g||"en-US"),{renderDates:c}=pt(),{getAllEventsForDate:v,getHiddenEventCount:D}=Wr(c,i),{handleMoreClick:O}=vo(v),P=N=>{if(l.enable){const{isOverflowTop:L,isOverflowBottom:C}=at.getOverflowDirection(N,c,d,E);return a.jsxs(e.Fragment,{children:[L&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.UP_ARROW_ICON}`,children:a.jsx(Ms,{})}),T(N),C&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.DOWN_ARROW_ICON}`,children:a.jsx(Ps,{})})]})}else{const{isOverflowLeft:L,isOverflowRight:C}=at.getOverflowDirection(N,c);return a.jsxs(e.Fragment,{children:[L&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.LEFT_ARROW_ICON}`,children:a.jsx(Lr,{})}),T(N),C&&a.jsx("div",{className:`${p.INDICATOR} ${p.ICONS} ${p.RIGHT_ARROW_ICON}`,children:a.jsx(Ir,{})})]})}},T=N=>{const{event:L,timeDisplay:C}=N;return a.jsxs("div",{className:p.APPOINTMENT_DETAILS,children:[a.jsx("div",{className:`${p.SUBJECT}`,children:L.subject||h("addTitle")}),!L.isBlock&&L.location&&a.jsx("div",{className:`${p.EVENT_LOCATION} ${p.ELLIPSIS}`,children:L.location}),!L.isBlock&&a.jsx("div",{className:`${p.EVENT_TIME} ${p.ELLIPSIS}`,children:C}),a.jsx(zt,{event:L})]})},A=N=>o?o(N.event):N.totalSegments||d||E?P(N):T(N),R=(N,L)=>{if(L.event.isBlock){N==null||N.preventDefault(),N==null||N.stopPropagation();return}if(qn(N.currentTarget),r){const C={event:N,data:L.event,element:N.currentTarget};r(C)}},B=(N,L)=>{var C;if(L.event.isReadonly||u||L.event.isBlock){N==null||N.preventDefault(),N==null||N.stopPropagation();return}if(s){(C=f==null?void 0:f.current)==null||C.hide();const G={event:N,data:L.event,element:N.currentTarget};s(G)}},k=(N,L)=>{(N.key==="Enter"||N.key===" ")&&R(N,L)};if(!m)return a.jsx("div",{className:p.EVENT_CONTAINER});const b=!(l&&l.enable);return a.jsx("div",{className:p.EVENT_CONTAINER,children:m.map(N=>{const L=N.events.filter(K=>!K.event.isBlock),C=N.events.filter(K=>K.event.isBlock),G=b?L.slice(0,i):L,M=new Date(N.dateTimestamp),X=F.generateDateKey(M),se=b?D(X):0,fe=G.filter(K=>K.totalSegments&&K.totalSegments>1&&K.isFirstSegmentInRenderRange||!K.totalSegments||K.totalSegments<=1),pe=b?fe:[...C,...fe];return a.jsxs("div",{className:p.DAY_WRAPPER,"data-date":N.dateTimestamp,children:[pe.map(K=>{const{isOverflowTop:H,isOverflowBottom:y}=at.getOverflowDirection(K,c,d,E),S=K.eventClasses.join(" "),I={style:K.eventStyle,"data-id":String(K.event.id),"data-guid":K.event.guid,"aria-label":Me.getAriaLabel(K.event),tabIndex:0,onClick:U=>R(U,K),onDoubleClick:U=>B(U,K),onKeyDown:U=>k(U,K)},q=A(K),_=!K.event.isBlock&&!K.event.isReadonly&&!u;return t.enable&&_?a.jsx(Zn,{data:K.event,className:S,containerProps:I,children:n.enable&&_?a.jsx(Tn,{isVertical:l.enable,data:K.event,hasPrevious:H,hasNext:y,children:q}):a.jsx(a.Fragment,{children:q})},K.eventKey):a.jsx("div",{className:S,...I,children:n.enable&&_?a.jsx(Tn,{isVertical:l.enable,data:K.event,hasPrevious:H,hasNext:y,children:q}):a.jsx(a.Fragment,{children:q})},K.eventKey)}),b&&se>0&&a.jsx(yo,{date:new Date(N.dateTimestamp),count:se,onMoreClick:O,topPx:N.moreIndicatorTopPx})]},N.key)})})});Ro.displayName="TimeSlotEvent";const Rc=o=>{const{timeScale:r}=We(),[s,t]=e.useState(0),[n,i]=e.useState(new Date),[l,u]=e.useState(!1),f=e.useCallback((m,g)=>{t(m),i(new Date),u(g)},[]),d=e.useMemo(()=>{let m="";switch(o){case"Day":m=p.DAY_VIEW;break;case"Week":m=p.WEEK_VIEW;break;case"WorkWeek":m=p.WORK_WEEK_VIEW;break}return m},[o]),E=e.useMemo(()=>`${r.enable?"":"sf-timescale-disabled"}`,[r.enable]);return{currentTime:n,currentTimePosition:s,isTimeWithinBounds:l,viewClassName:d,contentSectionClassName:E,handleTimePositionUpdate:f}},Jn=o=>{const{viewType:r}=o,{timeScale:s,showTimeIndicator:t}=We(),{currentTime:n,currentTimePosition:i,isTimeWithinBounds:l,viewClassName:u,contentSectionClassName:f,handleTimePositionUpdate:d}=Rc(r);return a.jsx("div",{className:`${p.VERTICAL_VIEW} ${u}`,children:a.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[a.jsx("div",{className:p.STICKY_HEADER,children:a.jsx(To,{})}),a.jsxs("div",{className:`${p.CONTENT_SECTION} ${f}`,children:[s.enable&&a.jsx(Co,{currentTime:n,currentTimePosition:i,isTimeWithinBounds:l}),a.jsxs("div",{className:p.WORK_CELLS_CONTAINER,children:[a.jsx("div",{className:p.TIME_SLOT_CLONE_CONTAINER}),a.jsxs("div",{className:p.CONTENT_WRAP,children:[a.jsx(Ro,{}),a.jsx(Do,{})]}),t&&s.enable&&a.jsx(fc,{onPositionUpdate:d})]})]})]})})};Jn.displayName="VerticalView";const bc=()=>a.jsx(Jn,{viewType:"Day"});bc.displayName="DayView";const wc=()=>a.jsx(Jn,{viewType:"Week"});wc.displayName="WeekView";const Nc=()=>a.jsx(Jn,{viewType:"WorkWeek"});Nc.displayName="WorkWeekView";function Sc(){const{locale:o}=$e(),{firstDayOfWeek:r,showWeekend:s,workDays:t}=We(),n=e.useCallback(()=>{const l=[],u="gregorian",f=xe.isDevice?"abbreviated":"wide",d=`days.stand-alone.${f}`;let E;if(!o||o==="en"||o==="en-US")E=Qt(d,zo(u));else{const m=`main.${o}.dates.calendars.${u}.days.format.${f}`;E=Qt(m,Yo)}for(const m of Object.keys(E))l.push(Qt(m,E));return Array.from({length:7},(m,g)=>{const h=(g+r)%7;return l[h>=0&&h<l.length?h:0]})},[r,o]);return{weekdayHeaderCells:e.useCallback(()=>{const l=n(),u=new Date().getDay();if(s)return l.map((f,d)=>{const m=(d+r)%7===u;return{day:f,isCurrentDay:m,className:`sf-header-cells ${m?"sf-current-day":""}`,key:`header-${d}`}});{const f=[];for(let d=0;d<7;d++){const E=(d+r)%7;if(t.includes(E)){const m=E===u;f.push({day:l[d>=0&&d<l.length?d:0],isCurrentDay:m,className:`sf-header-cells ${m?"sf-current-day":""}`,key:`header-${d}`})}}return f}},[r,s,t,n])()}}const bo=()=>{const{showWeekNumber:o,weekDay:r}=We(),{weekdayHeaderCells:s}=Sc(),t=n=>a.jsx("div",{className:n.className,children:r?r({day:n.day}):a.jsx("div",{className:p.HEADER_DAY,children:n.day})},n.key);return a.jsxs("div",{className:p.HEADER_SECTION,children:[o&&a.jsx("div",{className:p.LEFT_INDENT}),a.jsx("div",{className:p.RIGHT_SECTION,children:a.jsx("div",{className:p.DATE_HEADER_CONTAINER,children:a.jsx("div",{className:p.DATE_HEADER,children:a.jsx("div",{className:p.HEADER_ROW,children:s.map(n=>t(n))})})})})]})};bo.displayName="WeekDayHeader";function xc(){const{numberOfWeeks:o,interval:r,showTrailingAndLeadingDates:s=!0,showWeekend:t,workDays:n,weekRule:i,firstDayOfWeek:l}=We(),{renderDates:u}=pt(),{weeksToRender:f,weekNumbers:d}=e.useMemo(()=>{if(!u||u.length===0)return{weeksToRender:[],weekNumbers:[]};const h=[],c=[],v=t?Ko:n==null?void 0:n.length;for(let D=0;D<u.length;D+=v){const O=u.slice(D,D+v);if(O.length>0){h.push(O);const P=F.getWeekNumber(O[0],i,l);c.push(P)}}return{weeksToRender:h,weekNumbers:c}},[u,t,n,i,l]),E=e.useMemo(()=>!s&&!(o||r>1),[s,o,r]),m=e.useMemo(()=>o?{"--week-count":o}:void 0,[o]),g=e.useMemo(()=>[o&&"sf-custom-weeks",E&&"sf-hide-dates"].filter(Boolean).join(" "),[o,E]);return{weekNumbers:d,weeksToRender:f,contentTableStyle:m,additionalClass:g,hideOtherMonths:E}}function Ac(o){const{weekRenderDates:r,rowIndex:s}=o,{selectedDate:t,workDays:n,showWeekend:i,maxEventsPerRow:l=3}=We(),{locale:u}=$e(),{renderDates:f}=pt(),{getAllEventsForDate:d}=Wr(f,l),{handleMoreClick:E}=vo(d),m=e.useCallback(c=>{let v="sf-work-cells";return F.isWorkDay(c,n)&&(v+=" sf-work-days"),F.isToday(c)&&(v+=" sf-current-date"),F.isSameMonth(c,t)||(v+=" sf-other-month"),v},[n,t]),g=e.useCallback(c=>c.getDate()===1&&!xe.isDevice?ut(c,{type:"dateTime",format:"MMM d",locale:u}):ut(c,{type:"dateTime",format:"d",locale:u}),[u]);return{workCells:e.useCallback(()=>(i?r:r.filter(v=>F.isWorkDay(v,n))).map((v,D)=>({date:v,className:m(v),dateTimestamp:v.getTime(),displayText:g(v),key:`date-${s}-${D}`})),[r,m,g,i,n,s])(),handleMoreClick:E}}const Oc=o=>{const{weekRenderDates:r,hideOtherMonths:s,rowIndex:t,onHeightCalculated:n}=o,{maxEventsPerRow:i=2,cellHeader:l,cell:u,rowAutoHeight:f,getAvailableViews:d}=We(),{workCells:E,handleMoreClick:m}=Ac(o),{handleCellClick:g,handleCellDoubleClick:h,handleKeyDown:c}=Qn(),{handleDateClick:v}=Hr(),{getVisibleEvents:D,getAlldayBlockEvent:O,getHiddenEventCount:P,hasMoreIndicator:T,hasBlockIndicator:A,hasAllDayBlock:R,calculatedRowHeight:B}=Wr(r,i),k=L=>a.jsx(yo,{date:L,count:P(F.generateDateKey(L)),onMoreClick:m}),b=L=>{const C=F.generateDateKey(L),G=D(C);if(R(C)){const M=O(C);if(M&&(M.totalSegments&&M.totalSegments>1&&M.isFirstSegmentInRenderRange||!M.totalSegments||M.totalSegments<=1))return a.jsx(Kn,{...M,weekRenderDates:r,isBlockedEvent:!0},M.eventKey||M.event.guid)}return G.map(M=>{const{totalSegments:X,isFirstSegmentInRenderRange:se,event:fe,eventKey:pe}=M;return!fe.isBlock&&(X&&X>1&&se||!X||X<=1)?a.jsx(Kn,{...M,weekRenderDates:r},pe||M.event.guid):null})},N=()=>a.jsx("div",{className:`${p.ICONS} ${p.BLOCK_INDICATOR}`,children:a.jsx(di,{})});return e.useLayoutEffect(()=>{n(t,B)},[B]),a.jsx("div",{className:p.WORK_CELLS_ROW,style:{height:f||i>=3?B:""},children:E.map(L=>{if(s&&L.className.includes("sf-other-month"))return a.jsx("div",{className:L.className},L.key);const C=F.generateDateKey(L.date),G=ft.isDayViewAvailable(d);return a.jsxs("div",{className:L.className,"data-date":L.dateTimestamp,onClick:M=>g(M,L.date,!0),onDoubleClick:M=>h(M,L.date,!0),onKeyDown:M=>{c(M,L.date)},children:[a.jsxs("div",{className:p.DATE_HEADER_CONTAINER,children:[a.jsx("div",{className:p.DATE_HEADER,children:l?l({date:L.date}):a.jsx("span",{className:G?p.LINK:"",onClick:M=>v(M,L.date),children:L.displayText})}),A(C)&&N()]}),a.jsxs("div",{className:p.APPOINTMENT_WRAPPER,children:[b(L.date),!f&&T(C)&&k(L.date)]}),u&&u({date:L.date,type:"monthCell"})]},L.key)})})},Lc=()=>{const{showWeekNumber:o,numberOfWeeks:r,rowAutoHeight:s}=We(),{weekNumbers:t,weeksToRender:n,contentTableStyle:i,additionalClass:l,hideOtherMonths:u}=xc(),f=e.useRef([]),[d,E]=e.useState([]),m=e.useCallback((h,c)=>{f.current[Number(h)]!==c&&(f.current[Number(h)]=c,E([...f.current]))},[]);e.useEffect(()=>{const h=n.length,c=f.current.length;if(h!==c){const v=f.current[0],D=new Array(h).fill(v).map((O,P)=>f.current[parseInt(P.toString(),10)]||O);f.current=D,E([...D])}},[n.length]);const g=e.useCallback(()=>t==null?void 0:t.map((h,c)=>a.jsx("div",{className:p.WEEK_NUMBER,title:`Week ${h}`,style:{height:s?d[Number(c)]:""},children:h},`week-${c}`)),[d,t]);return a.jsxs(a.Fragment,{children:[o&&a.jsx("div",{className:`sf-left-indent ${r?"sf-custom-weeks":""}`,style:r?{"--week-count":r}:void 0,children:a.jsx("div",{className:p.WEEK_NUMBER_WRAPPER,children:g()})}),a.jsxs("div",{className:`sf-content-table ${l}`,style:i,children:[a.jsx("div",{className:p.DAY_CLONE_CONTAINER}),n.map((h,c)=>a.jsx(Oc,{weekRenderDates:h,hideOtherMonths:u,rowIndex:c,onHeightCalculated:m},`week-${c}`))]})]})},Ic=()=>a.jsx("div",{className:`${p.VERTICAL_VIEW} ${p.MONTH_VIEW}`,children:a.jsxs("div",{className:p.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[a.jsx("div",{className:p.STICKY_HEADER,children:a.jsx(bo,{})}),a.jsx("div",{className:p.CONTENT_SECTION,children:a.jsx("div",{className:p.WORK_CELLS_CONTAINER,children:a.jsx(Lc,{})})})]})});Ic.displayName="MonthView";export{bc as D,Er as F,mi as L,Ic as M,ze as O,Eo as S,gr as T,wc as W,Nc as a,uc as b,Bt as c,hr as d,_r as e,Xt as f,oc as g,wt as h,bi as i};
